<!DOCTYPE html>
<html lang="zh-CN">
    <head prefix="og: https://ogp.me/ns#">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="color-scheme" content="light dark">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css">


  
  <title>ä¸€äº›ç®—æ³•ç¬”è®° - Moyuin&#39;s Note</title>
  
    <link rel="shortcut icon" href="https://avatars.githubusercontent.com/u/174886737?v=4">
  
  
    <link rel='manifest' href='/manifest.json'>
  

  
  
  
  <meta property="og:title" content="ä¸€äº›ç®—æ³•ç¬”è®° - Moyuin&#39;s Note" />
  
  <meta property="og:type" content="article" />
  
  <meta property="og:url" content="https://notes.moyuin.top/2025/07/01/xue-xi/suan-fa/yi-xie-suan-fa-bi-ji/index.html" />
  
  <meta property="og:image" content="/favicon.png" />
  
  <meta property="og:article:published_time" content="2025-07-01T01:57:52.000Z" />
  
  <meta property="og:article:author" content="Moyuin" />
  
  

  
<link rel="stylesheet" href="/css/var.css">

  
<link rel="stylesheet" href="/css/main.css">

  
<link rel="stylesheet" href="/css/typography.css">

  
<link rel="stylesheet" href="/css/code-highlighting.css">

  
<link rel="stylesheet" href="/css/components.css">

  
<link rel="stylesheet" href="/css/nav.css">

  
<link rel="stylesheet" href="/css/paginator.css">

  
<link rel="stylesheet" href="/css/footer.css">

  
<link rel="stylesheet" href="/css/post-list.css">

  
  
<link rel="stylesheet" href="/css/rainbow-banner.css">

  
  
  
<link rel="stylesheet" href="/css/toc.css">

  
  
  
  
  
<link rel="stylesheet" href="/css/post.css">

  
  
  
  
  

  
<meta name="generator" content="Hexo 7.3.0"></head>
    <body
        data-color-scheme="auto"
        data-uppercase-categories="true"
        
        data-rainbow-banner="true"
        data-rainbow-banner-shown="auto"
        data-rainbow-banner-month="6"
        data-rainbow-banner-colors="#e50000,#ff8d00,#ffee00,#008121,#004cff,#760188"
        
        data-config-root="/"
        
        data-toc="true"
        data-toc-max-depth="4"
        
        
    >
        <nav id="theme-nav">
    <div class="inner">
        <a class="title" href="/">Moyuin&#39;s Notebook</a>
        <div class="nav-arrow"></div>
        <div class="nav-items">
            <a class="nav-item nav-item-home" href="/">Home</a>
            
            
            <a class="nav-item" href="/archives">å½’æ¡£</a>
            
            
            
            <a class="nav-item" href="/tags">æ ‡ç­¾</a>
            
            
            
            <a class="nav-item" href="/categories">åˆ†ç±»</a>
            
            
            
            <a class="nav-item nav-item-github nav-item-icon" href="https://github.com/moyuin-aka" target="_blank" aria-label="GitHub">&nbsp;</a>
            
            
            
            <a class="nav-item nav-item-search nav-item-icon" href="/search" target="_blank" aria-label="Search">&nbsp;</a>
            
            
        </div>
    </div>
</nav>
        
<article class="post">
    <div class="meta">
        
        <div class="categories text-uppercase">
        
            <a href="/categories/æ—¥å¸¸å­¦ä¹ /">æ—¥å¸¸å­¦ä¹ </a>
        
            <a href="/categories/æ—¥å¸¸å­¦ä¹ /ç®—æ³•ç§¯ç´¯/">ç®—æ³•ç§¯ç´¯</a>
        
        </div>
        

        
        <div class="date" id="date">
            <span>July</span>
            <span>1,</span>
            <span>2025</span>
        </div>
        

        <h1 class="title">ä¸€äº›ç®—æ³•ç¬”è®°</h1>
    </div>

    <div class="divider"></div>

    <!-- âœ… æ’å…¥ TOC ç›®å½•æ¸²æŸ“ -->
    
    <div class="toc-container">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">ä¸€äº›ç®—æ³•ç¬”è®°</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Enum-class"><span class="toc-number">1.1.</span> <span class="toc-text">Enum class</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Map-low-bound"><span class="toc-number">1.2.</span> <span class="toc-text">Map - low_bound</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Set"><span class="toc-number">1.3.</span> <span class="toc-text">Set</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B9%B6%E8%A1%8C"><span class="toc-number">1.4.</span> <span class="toc-text">å¹¶è¡Œ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Kahn-%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F"><span class="toc-number">1.5.</span> <span class="toc-text">Kahn æ‹“æ‰‘æ’åº</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%9F%A2-%E6%A8%A1%E6%9D%BF-1%EF%BC%9A%E5%9B%BA%E5%AE%9A%E6%BA%90%E7%82%B9-%E5%B7%B2%E7%9F%A5-u-v"><span class="toc-number">1.5.1.</span> <span class="toc-text">ğŸŸ¢ æ¨¡æ¿ 1ï¼šå›ºå®šæºç‚¹ + å·²çŸ¥Â u &lt; v</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%9F%A1-%E6%A8%A1%E6%9D%BF-2%EF%BC%9A%E5%9B%BA%E5%AE%9A%E6%BA%90%E7%82%B9-%E4%B8%8D%E4%BF%9D%E8%AF%81-u-v"><span class="toc-number">1.5.2.</span> <span class="toc-text">ğŸŸ¡ æ¨¡æ¿ 2ï¼šå›ºå®šæºç‚¹ + ä¸ä¿è¯Â u &lt; v</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%94%B4-%E6%A8%A1%E6%9D%BF-3%EF%BC%9A%E5%85%A8%E5%9B%BE%E6%9C%80%E9%95%BF%E8%B7%AF%E5%BE%84%EF%BC%88%E4%BB%BB%E6%84%8F%E6%BA%90-%E2%86%92-%E4%BB%BB%E6%84%8F%E7%82%B9%EF%BC%89"><span class="toc-number">1.5.3.</span> <span class="toc-text">ğŸ”´ æ¨¡æ¿ 3ï¼šå…¨å›¾æœ€é•¿è·¯å¾„ï¼ˆä»»æ„æº â†’ ä»»æ„ç‚¹ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%93%8C-%E5%B0%8F%E6%8F%90%E7%A4%BA"><span class="toc-number">1.5.4.</span> <span class="toc-text">ğŸ“Œ å°æç¤º</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AC%A7%E6%8B%89%E8%B7%AF%E5%BE%84"><span class="toc-number">1.6.</span> <span class="toc-text">æ¬§æ‹‰è·¯å¾„</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BB%BA%E6%A8%A1%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="toc-number">1.6.1.</span> <span class="toc-text">å»ºæ¨¡è§¦å‘å™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%88%E9%AA%8C%E5%88%A4%E5%AE%9A%EF%BC%88%E8%83%BD%E4%B8%8D%E8%83%BD%E5%AD%98%E5%9C%A8%EF%BC%89"><span class="toc-number">1.6.2.</span> <span class="toc-text">å…ˆéªŒåˆ¤å®šï¼ˆèƒ½ä¸èƒ½å­˜åœ¨ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B5%B7%E7%82%B9%E6%80%8E%E4%B9%88%E2%80%9C%E8%87%AA%E5%B7%B1%E9%80%89%E2%80%9D"><span class="toc-number">1.6.3.</span> <span class="toc-text">èµ·ç‚¹æ€ä¹ˆâ€œè‡ªå·±é€‰â€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E5%95%A5%E2%80%9C%E5%AF%B9%E8%B5%B7%E7%82%B9%E5%81%9A-DFS-%E5%B0%B1%E5%AF%B9%E4%BA%86%E2%80%9D"><span class="toc-number">1.6.4.</span> <span class="toc-text">ä¸ºå•¥â€œå¯¹èµ·ç‚¹åš DFS å°±å¯¹äº†â€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E2%80%9Cdp-%E6%9C%80%E7%9F%AD%E8%B7%AF-%E6%8B%93%E6%89%91%E2%80%9D%E9%83%BD%E4%B8%8D%E5%90%88%E9%80%82"><span class="toc-number">1.6.5.</span> <span class="toc-text">ä¸ºä»€ä¹ˆâ€œdp&#x2F;æœ€çŸ­è·¯&#x2F;æ‹“æ‰‘â€éƒ½ä¸åˆé€‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E5%A4%8D%E7%94%A8%E2%80%9C%E6%8E%A8%E5%AF%BC%E6%B8%85%E5%8D%95%E2%80%9D"><span class="toc-number">1.6.6.</span> <span class="toc-text">å¯å¤ç”¨â€œæ¨å¯¼æ¸…å•â€</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DP"><span class="toc-number">1.7.</span> <span class="toc-text">DP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8C%B1-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E7%9A%84%E2%80%9C%E6%A0%B8%E5%BF%83%E4%B8%89%E9%97%AE%E2%80%9D"><span class="toc-number">1.7.1.</span> <span class="toc-text">ğŸŒ± åŠ¨æ€è§„åˆ’çš„â€œæ ¸å¿ƒä¸‰é—®â€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8C%B0-%E4%B8%BE%E4%B8%AA%E5%B0%8F%E4%BE%8B%E5%AD%90"><span class="toc-number">1.7.2.</span> <span class="toc-text">ğŸŒ° ä¸¾ä¸ªå°ä¾‹å­</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%94%91-%E5%B0%8F%E6%8A%80%E5%B7%A7"><span class="toc-number">1.7.3.</span> <span class="toc-text">ğŸ”‘ å°æŠ€å·§</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%A1%E7%89%B9%E5%85%B0%E6%95%B0"><span class="toc-number">1.7.4.</span> <span class="toc-text">å¡ç‰¹å…°æ•°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E7%BB%B4%E7%9F%A9%E9%98%B5"><span class="toc-number">1.8.</span> <span class="toc-text">äºŒç»´çŸ©é˜µ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%80%E5%B7%A7"><span class="toc-number">1.8.1.</span> <span class="toc-text">æŠ€å·§</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BF%83%E6%80%81"><span class="toc-number">1.8.2.</span> <span class="toc-text">å¿ƒæ€</span></a></li></ol></li></ol></li></ol>
    </div>
    

    <div class="content">
        <h1>ä¸€äº›ç®—æ³•ç¬”è®°</h1>
<p>è®°å½•ä¸€äº›åšé¢˜ä¸­ä¸å¤ªçŸ¥é“çš„ï¼Œå…å¾—ä¸¢æ‰å°è±¡ã€‚</p>
<h2 id="Enum-class">Enum class</h2>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">enum</span> <span class="token keyword">class</span> <span class="token class-name">Gesture</span>
<span class="token punctuation">&#123;</span>
    C<span class="token punctuation">,</span> <span class="token comment">// çŸ³å¤´</span>
    J<span class="token punctuation">,</span> <span class="token comment">// å‰ªåˆ€</span>
    B  <span class="token comment">// å¸ƒ</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>å¯¹äº <code>enum class</code> ç»“æ„ï¼Œè°ƒç”¨çš„æ—¶å€™å¾—ç”¨ <code>Gesture::C</code> è¿™ç§æ ¼å¼ã€‚</p>
<h2 id="Map-low-bound">Map - low_bound</h2>
<p>åœ¨ <code>map</code> é‡Œé¢æœ‰ä¸€ä¸ªå¾ˆå¥½ç”¨çš„ <code>low_bound</code> å‡½æ•°ï¼Œåœ¨mapä¸­æŸ¥æ‰¾ç¬¬ä¸€ä¸ª<strong>ä¸å°äº</strong>ï¼ˆä¹Ÿå°±æ˜¯å¤§äºæˆ–ç­‰äºï¼‰ç»™å®šçš„ <code>key</code> çš„å…ƒç´ ã€‚<br>
æ ¹æ®è¿™ä¸ªå‡½æ•°ï¼Œå¯ä»¥å®ç°ä¸€ä¸ªåŒºé—´çš„æ˜ å°„å»ºç«‹</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">std<span class="token double-colon punctuation">::</span>map<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">></span> gradeMap <span class="token operator">=</span> <span class="token punctuation">&#123;</span> 
 <span class="token punctuation">&#123;</span><span class="token number">59</span><span class="token punctuation">,</span> <span class="token char">'F'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token comment">// 0-59åˆ† -> F</span>
 <span class="token punctuation">&#123;</span><span class="token number">69</span><span class="token punctuation">,</span> <span class="token char">'D'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token comment">// 60-69åˆ† -> D </span>
 <span class="token punctuation">&#123;</span><span class="token number">79</span><span class="token punctuation">,</span> <span class="token char">'C'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token comment">// 70-79åˆ† -> C </span>
 <span class="token punctuation">&#123;</span><span class="token number">89</span><span class="token punctuation">,</span> <span class="token char">'B'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token comment">// 80-89åˆ† -> B </span>
 <span class="token punctuation">&#123;</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token char">'A'</span><span class="token punctuation">&#125;</span> <span class="token comment">// 90-100åˆ† -> A</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
  
  <span class="token keyword">char</span> <span class="token function">getGradeFromMap</span><span class="token punctuation">(</span><span class="token keyword">int</span> score<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// å¦‚æœåˆ†æ•°å°äº0æˆ–è€…å¤§äº100ï¼Œç›´æ¥è¿”å›æ— æ•ˆ</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>score <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> score <span class="token operator">></span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token char">'?'</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token comment">// æŸ¥æ‰¾ç¬¬ä¸€ä¸ªä¸å°äºscoreçš„é”®å€¼å¯¹</span>
    <span class="token keyword">auto</span> it <span class="token operator">=</span> gradeMap<span class="token punctuation">.</span><span class="token function">lower_bound</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// lower_bound æ‰¾åˆ°äº†ä¸€ä¸ªåˆæ³•çš„åŒºé—´ä¸Šé™</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>it <span class="token operator">!=</span> gradeMap<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// it->first æ˜¯ä¸Šé™åˆ†æ•°ï¼Œit->second æ˜¯å¯¹åº”çš„ç­‰çº§</span>
        <span class="token keyword">return</span> it<span class="token operator">-></span>second<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token comment">// å¦‚æœæ²¡æ‰¾åˆ°ï¼ˆæ¯”å¦‚åˆ†æ•°å¤§äº100ï¼Œè™½ç„¶æˆ‘ä»¬å·²ç»å¤„ç†äº†ï¼‰ï¼Œåˆ™ä¸ºæ— æ•ˆ</span>
    <span class="token keyword">return</span> <span class="token char">'?'</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="Set">Set</h2>
<p><code>set</code> è°ƒç”¨çš„æ—¶å€™å¾—ç”¨ <code>auto</code>ï¼Œè¿­ä»£å™¨ã€‚<br>
ç”¨ <code>insert</code> æ’å…¥å€¼ï¼Œè¿­ä»£å™¨è¾“å‡ºå€¼ï¼Œè¿­ä»£å™¨æ˜¯æŒ‡é’ˆï¼Œæ‰€ä»¥å¾— <code>*it</code> ç”¨æ¥è§£åº”ç”¨ã€‚<br>
è§ <a target="_blank" rel="noopener" href="https://cg.hnu.edu.cn/assignment/programList.jsp?proNum=12&amp;courseID=99&amp;assignID=1362&amp;libCenter=false">week 2 12æ‹¼å†™æ£€æŸ¥</a>ã€‚</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">set<span class="token operator">&lt;</span>ll<span class="token operator">></span>s<span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>ll i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        ll x<span class="token punctuation">;</span>
        cin<span class="token operator">>></span>x<span class="token punctuation">;</span>
        s<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    ll count<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> it<span class="token operator">=</span>s<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>it<span class="token operator">!=</span>s<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>count<span class="token operator">&lt;</span>k<span class="token punctuation">;</span>it<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        count<span class="token operator">++</span><span class="token punctuation">;</span>
        cout<span class="token operator">&lt;&lt;</span><span class="token operator">*</span>it<span class="token operator">&lt;&lt;</span><span class="token string">" "</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="å¹¶è¡Œ">å¹¶è¡Œ</h2>
<p>å…ˆæŠŠâ€œå¹¶è¡Œâ€çš„æœ¬è´¨æƒ³æ¸…æ¥šï¼š<strong>ä¸€ä¸ªä»»åŠ¡æœ€æ—©èƒ½å¼€å·¥çš„æ—¶é—´ = å®ƒæ‰€æœ‰å‰ç½®ä»»åŠ¡çš„â€œå®Œæˆæ—¶é—´â€çš„æœ€å¤§å€¼</strong>ã€‚</p>
<p>æ‰€ä»¥ä½ ä¸éœ€è¦æ˜¾å¼â€œåˆå¹¶æ—¶é—´â€ï¼Œåªè¦ç»´æŠ¤â€œæœ€æ—©å¼€å§‹/å®Œæˆæ—¶é—´â€ï¼Œå¹¶åœ¨æ‹“æ‰‘åºé‡Œç”¨ max æ¨è¿›ï¼Œ<strong>å¹¶è¡Œçš„æ•ˆæœè‡ªç„¶å‡ºç°</strong>ã€‚<br>
è§ <a target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/P1113">luogu P1113</a></p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;vector></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;algorithm></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;string></span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token comment">//ä¾æ¬¡è¯»å…¥æ¯ä¸ªæ‚åŠ¡çš„å·¥ä½œè¯´æ˜ã€‚è®¡ç®—å‡ºæ‰€æœ‰æ‚åŠ¡éƒ½è¢«å®Œæˆçš„æœ€çŸ­æ—¶é—´ã€‚</span>
<span class="token comment">// äº’ç›¸æ²¡æœ‰å…³ç³»çš„æ‚åŠ¡å¯ä»¥åŒæ—¶å·¥ä½œ</span>
<span class="token comment">// æœ‰äº›æ‚åŠ¡å¿…é¡»åœ¨å¦ä¸€äº›æ‚åŠ¡å®Œæˆçš„æƒ…å†µä¸‹æ‰èƒ½è¿›è¡Œã€‚</span>
<span class="token comment">// æœ‰éœ€è¦å®Œæˆçš„ n ä¸ªæ‚åŠ¡çš„æ¸…å•ï¼Œå¹¶ä¸”è¿™ä»½æ¸…å•æ˜¯æœ‰ä¸€å®šé¡ºåºçš„ï¼Œæ‚åŠ¡ k (k>1) çš„å‡†å¤‡å·¥ä½œåªå¯èƒ½åœ¨æ‚åŠ¡ 1 è‡³ kâˆ’1 ä¸­ã€‚</span>
<span class="token comment">// ä¸€é“æ‹“æ‰‘æ’åºé¢˜ï¼Œæ‰¾åˆ°æ‰€æœ‰å…¥åº¦ä¸º0çš„ç‚¹ï¼Œæ›´æ–°å…¶é‚»æ¥ç‚¹çš„å…¥åº¦ï¼Œç›´åˆ°æ‰€æœ‰ç‚¹éƒ½è¢«æ›´æ–°å®Œï¼Œä½†æ˜¯å¹¶è¡Œè®¡ç®—æ—¶é—´æ˜¯ä¸€ä¸ªéš¾ç‚¹â€¦â€¦</span>
<span class="token comment">// æœ‰äº›ä»»åŠ¡ä¸éœ€è¦ç¬¬äºŒä¸ªä»»åŠ¡å®Œæˆï¼Œä½†æ˜¯ä¸‹ä¸€ä¸ªä»»åŠ¡éœ€è¦ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå…±åŒå®Œæˆï¼Œä¸”ç¬¬äºŒä¸ªä»»åŠ¡å®Œæˆæ—¶é—´æ¯”ç¬¬ä¸‰ä¸ªçŸ­çš„è¯ï¼Œç‰¹æ®Šä»»åŠ¡ä¸èƒ½è®¡å…¥è®¡ç®—â€¦â€¦</span>
<span class="token comment">// éš¾ç‚¹æ˜¯æ‰¾åˆ°å¹¶è¡Œæ—¶é—´æœ€å¤§å€¼ã€‚</span>

  

<span class="token keyword">struct</span> <span class="token class-name">task</span>
<span class="token punctuation">&#123;</span>
	<span class="token keyword">int</span> id<span class="token punctuation">;</span>
	<span class="token keyword">int</span> time<span class="token punctuation">;</span>
	vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span>next<span class="token punctuation">;</span>
	<span class="token keyword">int</span> inDegree<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
	<span class="token keyword">int</span> n<span class="token punctuation">;</span>
	cin<span class="token operator">>></span>n<span class="token punctuation">;</span>
	vector<span class="token operator">&lt;</span>task<span class="token operator">></span><span class="token function">tasks</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
		<span class="token keyword">int</span> id<span class="token punctuation">,</span>t<span class="token punctuation">;</span>	
		cin<span class="token operator">>></span>id<span class="token operator">>></span>t<span class="token punctuation">;</span>	
		tasks<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">.</span>id<span class="token operator">=</span>id<span class="token punctuation">;</span>
		tasks<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">.</span>time<span class="token operator">=</span>t<span class="token punctuation">;</span>
		<span class="token keyword">int</span> k<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span><span class="token punctuation">(</span>cin<span class="token operator">>></span>k<span class="token punctuation">,</span>k<span class="token operator">!=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
			tasks<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
			tasks<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">.</span>inDegree<span class="token operator">++</span><span class="token punctuation">;</span>	
		<span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span>

vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token function">start</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ¯ä¸ªä»»åŠ¡çš„æœ€æ—©å¼€å·¥æ—¶é—´ï¼Œæˆ‘è¯¥åšçº¿æ€§ç»Ÿè®¡è€Œéå½’å¹¶è®¡ç®—â€¦â€¦</span>
vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token function">end</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å®Œæˆæ¯ä¸ªä»»åŠ¡çš„æœ€æ—©æ—¶é—´</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>tasks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>inDegree<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
		end<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>start<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span>tasks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>time<span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> v<span class="token operator">:</span>tasks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
		start<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">max</span><span class="token punctuation">(</span>start<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">,</span>end<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		tasks<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">.</span>inDegree<span class="token operator">--</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token comment">//å½“å…¥åº¦ä¸º0ï¼Œå¯ä»¥å’Œç°æœ‰çº¿æ€§æ—¶é—´çš„æ ‡è®°ç»ˆæ­¢æ—¶é—´åšæ¯”è¾ƒäº†â€¦â€¦</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">//æœ€åç»ˆæ­¢çš„æ—¶é—´å°±æ˜¯æœ€çŸ­æ—¶é—´ã€‚æŠŠæ—¶é—´å½“ä½œçº¿æ€§çœ‹å¾…æ˜¯å…³é”®ã€‚</span>
cout<span class="token operator">&lt;&lt;</span><span class="token operator">*</span><span class="token function">max_element</span><span class="token punctuation">(</span>end<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>end<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="Kahn-æ‹“æ‰‘æ’åº">Kahn æ‹“æ‰‘æ’åº</h2>
<h3 id="ğŸŸ¢-æ¨¡æ¿-1ï¼šå›ºå®šæºç‚¹-å·²çŸ¥-u-v"><strong>ğŸŸ¢ æ¨¡æ¿ 1ï¼šå›ºå®šæºç‚¹ + å·²çŸ¥</strong>Â <strong>u &lt; v</strong></h3>
<blockquote>
<p>ï¼ˆæ¯”å¦‚æ´›è°· <a target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/P1807"> P1807</a>ï¼Œä¿è¯è¾“å…¥è¾¹æ»¡è¶³ u &lt; vï¼‰</p>
</blockquote>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">const</span> <span class="token keyword">long</span> <span class="token keyword">long</span> NEG <span class="token operator">=</span> <span class="token operator">-</span><span class="token punctuation">(</span><span class="token number">1LL</span> <span class="token operator">&lt;&lt;</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
vector<span class="token operator">&lt;</span><span class="token keyword">long</span> <span class="token keyword">long</span><span class="token operator">></span> <span class="token function">dist</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> NEG<span class="token punctuation">)</span><span class="token punctuation">;</span>
dist<span class="token punctuation">[</span>src<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> u <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> u <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>u<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>dist<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">==</span> NEG<span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span> <span class="token comment">// ä¸å¯è¾¾è·³è¿‡</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token punctuation">[</span>v<span class="token punctuation">,</span> w<span class="token punctuation">]</span> <span class="token operator">:</span> adj<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        dist<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dist<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">,</span> dist<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> w<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li><strong>é€‚ç”¨</strong>ï¼šé¢˜é¢ä¿è¯ u &lt; vï¼Œç¼–å·å°±æ˜¯æ‹“æ‰‘åºã€‚</li>
<li><strong>ç»“æœ</strong>ï¼š<code>dist[v]</code> æ˜¯ä»æºç‚¹å‡ºå‘åˆ° v çš„æœ€é•¿è·¯ã€‚</li>
</ul>
<hr>
<h3 id="ğŸŸ¡-æ¨¡æ¿-2ï¼šå›ºå®šæºç‚¹-ä¸ä¿è¯-u-v"><strong>ğŸŸ¡ æ¨¡æ¿ 2ï¼šå›ºå®šæºç‚¹ + ä¸ä¿è¯</strong>Â <strong>u &lt; v</strong></h3>
<blockquote>
<p>éœ€è¦è‡ªå·±è·‘ Kahn æ‹“æ‰‘</p>
</blockquote>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">const</span> <span class="token keyword">long</span> <span class="token keyword">long</span> NEG <span class="token operator">=</span> <span class="token operator">-</span><span class="token punctuation">(</span><span class="token number">1LL</span> <span class="token operator">&lt;&lt;</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
vector<span class="token operator">&lt;</span><span class="token keyword">long</span> <span class="token keyword">long</span><span class="token operator">></span> <span class="token function">dist</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> NEG<span class="token punctuation">)</span><span class="token punctuation">;</span>
dist<span class="token punctuation">[</span>src<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

queue<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> q<span class="token punctuation">;</span>
vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">indeg</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// è¯»è¾¹æ—¶ç»Ÿè®¡ indeg[v]++</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> 
    <span class="token keyword">if</span> <span class="token punctuation">(</span>indeg<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">int</span> u <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>dist<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">!=</span> NEG<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// æºç‚¹å¯è¾¾æ‰è½¬ç§»</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token punctuation">[</span>v<span class="token punctuation">,</span> w<span class="token punctuation">]</span> <span class="token operator">:</span> adj<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            dist<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dist<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">,</span> dist<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> w<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">--</span>indeg<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token punctuation">[</span>v<span class="token punctuation">,</span> w<span class="token punctuation">]</span> <span class="token operator">:</span> adj<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span> 
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">--</span>indeg<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li><strong>é€‚ç”¨</strong>ï¼šæ—  u &lt; v ä¿è¯ï¼Œä½†é¢˜ç›®ç»™çš„æ˜¯ DAGã€‚</li>
<li><strong>ç»“æœ</strong>ï¼š<code>dist[v]</code> æ˜¯ä»æŒ‡å®šæºç‚¹åˆ° v çš„æœ€é•¿è·¯ã€‚</li>
</ul>
<hr>
<h3 id="ğŸ”´-æ¨¡æ¿-3ï¼šå…¨å›¾æœ€é•¿è·¯å¾„ï¼ˆä»»æ„æº-â†’-ä»»æ„ç‚¹ï¼‰"><strong>ğŸ”´ æ¨¡æ¿ 3ï¼šå…¨å›¾æœ€é•¿è·¯å¾„ï¼ˆä»»æ„æº â†’ ä»»æ„ç‚¹ï¼‰</strong></h3>
<blockquote>
<p>å…ˆæ‰¾æ‰€æœ‰å…¥åº¦ 0 çš„ç‚¹ä½œä¸ºæº</p>
</blockquote>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">const</span> <span class="token keyword">long</span> <span class="token keyword">long</span> NEG <span class="token operator">=</span> <span class="token operator">-</span><span class="token punctuation">(</span><span class="token number">1LL</span> <span class="token operator">&lt;&lt;</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
vector<span class="token operator">&lt;</span><span class="token keyword">long</span> <span class="token keyword">long</span><span class="token operator">></span> <span class="token function">dist</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> NEG<span class="token punctuation">)</span><span class="token punctuation">;</span>

queue<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> q<span class="token punctuation">;</span>
vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">indeg</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// è¯»è¾¹æ—¶ç»Ÿè®¡ indeg[v]++</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>indeg<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        dist<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// å¤šæºèµ·ç‚¹</span>
        q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">int</span> u <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>dist<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">!=</span> NEG<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token punctuation">[</span>v<span class="token punctuation">,</span> w<span class="token punctuation">]</span> <span class="token operator">:</span> adj<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            dist<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dist<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">,</span> dist<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> w<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">--</span>indeg<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token punctuation">[</span>v<span class="token punctuation">,</span> w<span class="token punctuation">]</span> <span class="token operator">:</span> adj<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span> 
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">--</span>indeg<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">long</span> <span class="token keyword">long</span> ans <span class="token operator">=</span> <span class="token operator">*</span><span class="token function">max_element</span><span class="token punctuation">(</span>dist<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dist<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li><strong>é€‚ç”¨</strong>ï¼šè¦æ±‚æ•´ä¸ª DAG ä¸Šçš„æœ€é•¿è·¯ã€‚</li>
<li><strong>ç»“æœ</strong>ï¼šans å°±æ˜¯æœ€é•¿è·¯å¾„çš„é•¿åº¦ã€‚</li>
</ul>
<hr>
<h3 id="ğŸ“Œ-å°æç¤º"><strong>ğŸ“Œ å°æç¤º</strong></h3>
<ul>
<li>è®°å¾—ç”¨ long longï¼Œé¿å…è·¯å¾„å’Œçˆ† intã€‚</li>
<li>NEG è¦è¶³å¤Ÿå°ï¼Œä¸ç„¶ä¼šè¢« +w è¯¯æ›´æ–°ã€‚</li>
<li>å¦‚æœè¦è¾“å‡ºå…·ä½“è·¯å¾„ï¼Œå¯ä»¥é¢å¤–è®°å½• <code>pre[v]</code> æ¥å›æº¯ã€‚</li>
</ul>
<hr>
<h2 id="æ¬§æ‹‰è·¯å¾„">æ¬§æ‹‰è·¯å¾„</h2>
<h3 id="å»ºæ¨¡è§¦å‘å™¨">å»ºæ¨¡è§¦å‘å™¨</h3>
<p>é¢˜é¢ä¸€æ—¦å‡ºç°ï¼š<strong>â€œæŠŠæ¯ä¸ªå•è¯éƒ½ç”¨ä¸€æ¬¡ã€èƒ½è¿å°±è¿ã€è¾“å‡ºæ•´æ¡é“¾â€</strong><br>
â†’ ä¸‹æ„è¯†è”æƒ³åˆ°ï¼š<strong>æ¬§æ‹‰è·¯å¾„ï¼ˆè¾¹å…¨ç”¨ä¸€æ¬¡ï¼‰</strong></p>
<ul>
<li>ç‚¹ = å­—æ¯ï¼ˆaâ€¦zï¼‰</li>
<li>è¾¹ = å•è¯ï¼ˆs[0] â†’ s.back()ï¼Œè¾¹ä¸Šå¸¦ç€å•è¯ï¼‰</li>
</ul>
<h3 id="å…ˆéªŒåˆ¤å®šï¼ˆèƒ½ä¸èƒ½å­˜åœ¨ï¼‰">å…ˆéªŒåˆ¤å®šï¼ˆèƒ½ä¸èƒ½å­˜åœ¨ï¼‰</h3>
<p>æœ‰å‘å›¾æ¬§æ‹‰è·¯å¾„å……è¦æ¡ä»¶ï¼ˆå¿½ç•¥æ–¹å‘è¿é€š + å…¥å‡ºåº¦æ¡ä»¶ï¼‰ï¼š</p>
<ul>
<li>å¿½ç•¥æ–¹å‘åï¼Œæ‰€æœ‰<strong>å‡ºç°è¿‡çš„ç‚¹</strong>åœ¨åŒä¸€è¿é€šåˆ†é‡ï¼ˆå¦åˆ™å¿…ç„¶â€œæ–­é“¾â€ï¼‰ã€‚</li>
<li>å…¥/å‡ºåº¦ï¼š
<ul>
<li>æ¬§æ‹‰å›è·¯ï¼šæ‰€æœ‰ç‚¹ in = out</li>
<li>æ¬§æ‹‰è·¯å¾„ï¼šæ°æœ‰ä¸€ä¸ªç‚¹ out = in + 1ï¼ˆèµ·ç‚¹ï¼‰ï¼Œä¸€ä¸ªç‚¹ in = out + 1ï¼ˆç»ˆç‚¹ï¼‰ï¼Œå…¶ä½™ in = out</li>
<li>å…¶ä»–æƒ…å†µ â†’ ä¸å­˜åœ¨</li>
</ul>
</li>
</ul>
<h3 id="èµ·ç‚¹æ€ä¹ˆâ€œè‡ªå·±é€‰â€"><strong>èµ·ç‚¹æ€ä¹ˆâ€œè‡ªå·±é€‰â€</strong></h3>
<ul>
<li>è‹¥å­˜åœ¨è·¯å¾„ï¼ˆéå›è·¯ï¼‰ï¼š<strong>èµ·ç‚¹ = out = in + 1 çš„ç‚¹</strong>ï¼ˆå”¯ä¸€ï¼‰ã€‚</li>
<li>è‹¥æ˜¯å›è·¯ï¼šç†è®ºä¸Šä»»æ„æœ‰è¾¹çš„ç‚¹éƒ½å¯åšèµ·ç‚¹ã€‚<br>
ä¸ºäº†<strong>å­—å…¸åºæœ€å°</strong>çš„æˆé“¾ï¼Œä½ çš„åšæ³•ï¼ˆæ¯ä¸ªç‚¹çš„å‡ºè¾¹æŒ‰å­—å…¸åºå–æœ€å°ï¼‰å·²ä¿è¯æ•´ä½“æœ€å°ï¼›èµ·ç‚¹é€šå¸¸é€‰<strong>æœ€å°å­—æ¯ä¸”å‡ºåº¦&gt;0</strong>å°±è¡Œã€‚</li>
</ul>
<h3 id="ä¸ºå•¥â€œå¯¹èµ·ç‚¹åš-DFS-å°±å¯¹äº†â€">ä¸ºå•¥â€œå¯¹èµ·ç‚¹åš DFS å°±å¯¹äº†â€</h3>
<p>æ ¸å¿ƒæ˜¯ <strong>Hierholzer ç®—æ³•</strong>ï¼ˆæ¬§æ‹‰è·¯/å›è·¯çš„æ ‡å‡†æ„é€ ï¼‰ï¼š</p>
<ul>
<li>åœ¨å½“å‰ç‚¹åå¤â€œå–ä¸€æ¡å°šæœªç”¨è¿‡çš„å‡ºè¾¹â€èµ°ä¸‹å»ï¼ˆä½ æŒ‰å­—å…¸åºå–æœ€å°ï¼‰ï¼›</li>
<li>æ²¡è·¯å¯èµ°å°±<strong>å›æº¯</strong>ï¼ŒæŠŠåˆšèµ°å®Œçš„è¾¹å¯¹åº”çš„å•è¯<strong>å‹å…¥ç­”æ¡ˆ</strong>ï¼›</li>
<li>å› ä¸ºè¾¹æ˜¯â€œèµ°å®Œæ‰æ”¶å½•â€ï¼Œæœ€åå¾—åˆ°çš„æ˜¯<strong>é€†åº</strong>ï¼Œæ‰€ä»¥è¦ reverseã€‚</li>
</ul>
<blockquote>
<p>æ­£ç¡®æ€§çš„ç›´è§‰ï¼šåƒåœ¨ä¸€ä¸ªåŒºåŸŸé‡Œâ€œæŠ½çº¿â€ï¼ŒæŠ½åˆ°æŠ½ä¸åŠ¨äº†å°±å°å£è®°å½•ï¼Œæœ€ç»ˆæŠŠæ‰€æœ‰è¾¹éƒ½æŠ½èµ°ä¸€æ¬¡ï¼Œæ‹¼èµ·æ¥å°±æ˜¯æ¬§æ‹‰è·¯ï¼›ä½ æŒ‰æœ€å°è¾¹ä¼˜å…ˆèµ°ï¼Œå¾—åˆ°çš„å°±æ˜¯å­—å…¸åºæœ€å°ã€‚</p>
</blockquote>
<h3 id="ä¸ºä»€ä¹ˆâ€œdp-æœ€çŸ­è·¯-æ‹“æ‰‘â€éƒ½ä¸åˆé€‚">ä¸ºä»€ä¹ˆâ€œdp/æœ€çŸ­è·¯/æ‹“æ‰‘â€éƒ½ä¸åˆé€‚</h3>
<ul>
<li>è¦æ±‚â€œ<strong>æ¯æ¡è¾¹æ°å¥½ä¸€æ¬¡</strong>â€æ˜¯æ¬§æ‹‰é—®é¢˜çš„ä¸“å±ä¿¡å·ï¼›</li>
<li>æ‹“æ‰‘/æœ€çŸ­è·¯/DPå…³å¿ƒçš„æ˜¯â€œç‚¹/è·¯å¾„æƒå€¼/æ¬¡æ•°â€ï¼Œä¸æ˜¯â€œè¾¹ä½¿ç”¨ä¸€æ¬¡ä¸”å…¨è¦†ç›–â€ã€‚</li>
<li>æ‰€ä»¥è¿™é¢˜ä¸æ˜¯â€œæ‰¾æœ€ä¼˜â€ï¼Œè€Œæ˜¯â€œæ‰¾ä¸€æ¡æ°å¥½è¦†ç›–å…¨éƒ¨è¾¹çš„é“â€ï¼Œè‡ªç„¶è½åœ¨ Hierholzerã€‚</li>
</ul>
<h3 id="å¯å¤ç”¨â€œæ¨å¯¼æ¸…å•â€"><strong>å¯å¤ç”¨â€œæ¨å¯¼æ¸…å•â€</strong></h3>
<ol>
<li>ç‚¹=å­—æ¯ï¼Œè¾¹=å•è¯ï¼ˆé¦–â†’å°¾ï¼‰ï¼Œè¾¹ä¸Šå­˜å­—ç¬¦ä¸²</li>
<li>ç»Ÿè®¡ in/outï¼Œå¹¶è®°å½•å‡ºç°è¿‡çš„ç‚¹</li>
<li>å¿½ç•¥æ–¹å‘åšè¿é€šæ€§æ£€æŸ¥</li>
<li>åˆ¤åº¦æ•°ï¼šè·¯å¾„æ€/å›è·¯æ€ï¼›</li>
<li>èµ·ç‚¹ï¼šout=in+1 çš„ç‚¹ï¼›è‹¥å›è·¯é€‰æœ€å°å‡ºåº¦&gt;0 çš„ç‚¹</li>
<li>å„ <code>adj[u]</code> å‡åºï¼Œéå†æ—¶ç”¨ back()+pop_back()</li>
<li>è·‘ Hierholzerï¼ˆé€’å½’/æ ˆï¼‰ï¼Œæ”¶é›†è¾¹ï¼Œé€†åºè¾“å‡ºç”¨ . ç›¸è¿</li>
<li>éªŒè¯è¾¹æ•°æ˜¯å¦éƒ½ç”¨åˆ°ï¼ˆ<code>res.size()==n</code>ï¼‰<br>
è§ luogu <a target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/P1127">P1127</a></li>
</ol>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;vector></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;algorithm></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;string></span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span>vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span>string<span class="token operator">>></span><span class="token operator">&amp;</span>adj<span class="token punctuation">,</span>vector<span class="token operator">&lt;</span>string<span class="token operator">></span><span class="token operator">&amp;</span>res<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>adj<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        string s<span class="token operator">=</span>adj<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        adj<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span>adj<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">dfs</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token char">'a'</span><span class="token punctuation">,</span>adj<span class="token punctuation">,</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        res<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token comment">// ä¸€ä¸ªæ¬§æ‹‰è·¯å¾„éå†çš„å›¾ï¼Ÿ</span>
    <span class="token keyword">int</span> n<span class="token punctuation">;</span>
    cin<span class="token operator">>></span>n<span class="token punctuation">;</span>
    vector<span class="token operator">&lt;</span>string<span class="token operator">></span><span class="token function">str</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> cin<span class="token operator">>></span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span>string<span class="token operator">>></span><span class="token function">adj</span><span class="token punctuation">(</span><span class="token number">26</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>string <span class="token operator">&amp;</span>s<span class="token operator">:</span>str<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        adj<span class="token punctuation">[</span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token char">'a'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//å­˜å•è¯å»å»ºç«‹æ˜ å°„å…³ç³»</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token operator">&amp;</span>v<span class="token operator">:</span>adj<span class="token punctuation">)</span> <span class="token function">sort</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>v<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//ä¿è¯å­—æ¯åº</span>
    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token function">indegree</span><span class="token punctuation">(</span><span class="token number">26</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">outdegree</span><span class="token punctuation">(</span><span class="token number">26</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">26</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span>string <span class="token operator">&amp;</span>s<span class="token operator">:</span>adj<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            outdegree<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>
            indegree<span class="token punctuation">[</span>s<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token char">'a'</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token comment">// æ¬§æ‹‰è·¯å¾„å¿…è¦æ¡ä»¶ï¼šæœ‰ä¸€ä¸ªèµ·ç‚¹æ»¡è¶³ outdegree-indegree=1ï¼Œæœ‰ä¸€ä¸ªç»ˆç‚¹æ»¡è¶³ indegree-outdegree=1ï¼Œå…¶ä½™ç‚¹indegree=outdegree</span>
    <span class="token keyword">int</span> start<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>end<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">26</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>outdegree<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-</span>indegree<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>start<span class="token operator">==</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> start<span class="token operator">=</span>i<span class="token punctuation">;</span>
            <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> <span class="token comment">//å¤šäºä¸€ä¸ªèµ·ç‚¹</span>
                cout<span class="token operator">&lt;&lt;</span><span class="token string">"***"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>indegree<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-</span>outdegree<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>end<span class="token operator">==</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> end<span class="token operator">=</span>i<span class="token punctuation">;</span>
            <span class="token keyword">else</span> <span class="token punctuation">&#123;</span> <span class="token comment">//å¤šäºä¸€ä¸ªç»ˆç‚¹</span>
                cout<span class="token operator">&lt;&lt;</span><span class="token string">"***"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>indegree<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">!=</span>outdegree<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            cout<span class="token operator">&lt;&lt;</span><span class="token string">"***"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
        vector<span class="token operator">&lt;</span>string<span class="token operator">></span>res<span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>start<span class="token operator">==</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token comment">//æ²¡æœ‰èµ·ç‚¹ï¼Œè¯´æ˜æ˜¯å›è·¯ï¼Œä»ä»»æ„ç‚¹å¼€å§‹</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">26</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>outdegree<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
                    start<span class="token operator">=</span>i<span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>   
        <span class="token punctuation">&#125;</span>
        <span class="token function">dfs</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span>adj<span class="token punctuation">,</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">!=</span>n<span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token comment">//æ²¡æœ‰éå†å®Œæ‰€æœ‰è¾¹</span>
            cout<span class="token operator">&lt;&lt;</span><span class="token string">"***"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token function">reverse</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>res<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            cout<span class="token operator">&lt;&lt;</span>res<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>i<span class="token operator">==</span>res<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">?</span><span class="token string">""</span><span class="token operator">:</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="DP">DP</h2>
<blockquote>
<p>â€œæˆ‘è®¾äº†ä¸ª <code>dp[..]</code>ï¼Œä½†æ˜¯å®ƒåˆ°åº•åœ¨å¸®æˆ‘ç®—ä»€ä¹ˆï¼Ÿç›®æ ‡åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè½¬ç§»æ–¹ç¨‹å°±æ˜¯è¿™ä¹ˆå†™ï¼Ÿâ€</p>
</blockquote>
<hr>
<h3 id="ğŸŒ±-åŠ¨æ€è§„åˆ’çš„â€œæ ¸å¿ƒä¸‰é—®â€"><strong>ğŸŒ± åŠ¨æ€è§„åˆ’çš„â€œæ ¸å¿ƒä¸‰é—®â€</strong></h3>
<p>æ¯æ¬¡é‡åˆ°é¢˜ç›®æ—¶ï¼Œå¯ä»¥å¼ºè¿«è‡ªå·±å›ç­”è¿™ä¸‰ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li>
<p><strong>çŠ¶æ€æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li>dp[i] / dp[i][j] ä»£è¡¨ä»€ä¹ˆé‡ï¼Ÿ</li>
<li>ä¸€å¥è¯æ¸…æ™°æè¿°ï¼šå®ƒæ˜¯â€œå‰ i ä¸ªç‰©å“çš„æœ€ä¼˜è§£â€è¿˜æ˜¯â€œèµ°åˆ° (i,j) çš„æœ€çŸ­è·¯å¾„â€ï¼Ÿ</li>
</ul>
</li>
<li>
<p><strong>ç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li>æˆ‘è¦çš„æœ€ç»ˆç­”æ¡ˆæ˜¯ dp[n]ã€è¿˜æ˜¯ max(dp[â€¦])ã€è¿˜æ˜¯ dp[n][m]ï¼Ÿ</li>
<li>æŠŠâ€œè¾“å‡ºéœ€è¦ä»€ä¹ˆâ€å…ˆå¯¹é½ï¼Œé¿å…â€œæˆ‘è®¾çš„çŠ¶æ€è·Ÿç›®æ ‡æ— å…³â€ã€‚</li>
</ul>
</li>
<li>
<p><strong>è½¬ç§»æ€ä¹ˆæ¥ï¼Ÿ</strong></p>
<ul>
<li>å½“å‰çŠ¶æ€èƒ½ä»ä»€ä¹ˆå­é—®é¢˜è½¬ç§»è€Œæ¥ï¼Ÿ</li>
<li>æ¯æ¬¡å†™è½¬ç§»çš„æ—¶å€™ï¼Œå¿ƒé‡Œè¦å¯¹åº”ä¸€ä¸ªâ€œå°æ•…äº‹â€ï¼šæ¯”å¦‚â€œç¬¬ i ä»¶ç‰©å“é€‰/ä¸é€‰â€ï¼Œâ€œä»å·¦è¾¹æˆ–ä¸Šè¾¹èµ°è¿‡æ¥â€ã€‚</li>
</ul>
</li>
</ol>
<hr>
<h3 id="ğŸŒ°-ä¸¾ä¸ªå°ä¾‹å­"><strong>ğŸŒ° ä¸¾ä¸ªå°ä¾‹å­</strong></h3>
<blockquote>
<p>æœ€ç»å…¸ï¼šçˆ¬æ¥¼æ¢¯é—®é¢˜ã€‚æ¯æ¬¡å¯ä»¥èµ° 1 æ­¥æˆ– 2 æ­¥ï¼Œé—®èµ°åˆ°ç¬¬ n å±‚çš„æ–¹æ¡ˆæ•°ã€‚</p>
</blockquote>
<ol>
<li>
<p>çŠ¶æ€ï¼š</p>
<ul>
<li>dp[i] = åˆ°è¾¾ç¬¬ i å±‚çš„æ–¹æ¡ˆæ•°ã€‚</li>
</ul>
</li>
<li>
<p>ç›®æ ‡ï¼š</p>
<ul>
<li>æˆ‘è¦æ±‚çš„æ˜¯ dp[n]ã€‚</li>
</ul>
</li>
<li>
<p>è½¬ç§»ï¼š</p>
<ul>
<li>èµ°åˆ°ç¬¬ i å±‚ï¼Œè¦ä¹ˆä» i-1 èµ°ä¸€æ­¥ä¸Šæ¥ï¼Œè¦ä¹ˆä» i-2 è·¨ä¸¤æ­¥ä¸Šæ¥ã€‚</li>
<li>æ‰€ä»¥ï¼šdp[i] = dp[i-1] + dp[i-2]ã€‚</li>
</ul>
</li>
</ol>
<p>è¿™ä¸ªæ•…äº‹å°±éå¸¸æ¸…æ™°ï¼š<strong>æ¯ä¸ªçŠ¶æ€å¯¹åº”ä¸€ä¸ªé—®é¢˜ï¼Œæ¯ä¸ªè½¬ç§»å¯¹åº”ä¸€ä¸ªé€‰æ‹©ã€‚</strong></p>
<hr>
<h3 id="ğŸ”‘-å°æŠ€å·§"><strong>ğŸ”‘ å°æŠ€å·§</strong></h3>
<ul>
<li>
<p>ä¸€å®šè¦â€œå†™æ–‡å­—å®šä¹‰â€ï¼šæ¯”å¦‚åœ¨è‰ç¨¿çº¸/æ³¨é‡Šé‡Œå†™æ¸…æ¥š<br>
dp[i][j] = ç”¨å‰ i ä»¶ç‰©å“ã€æ”¾å…¥å®¹é‡ä¸º j çš„èƒŒåŒ…æ—¶èƒ½å¾—åˆ°çš„æœ€å¤§ä»·å€¼ã€‚<br>
â€”â€”è¿™æ ·ä½ æ¯æ¬¡å†™è½¬ç§»çš„æ—¶å€™ï¼Œå°±èƒ½æ£€æŸ¥ï¼šæˆ‘å†™çš„æ¨å¯¼æ˜¯ä¸æ˜¯è·Ÿå®šä¹‰ä¸€è‡´ã€‚</p>
</li>
<li>
<p>ç›®æ ‡ä¸æ¸…æ™°æ—¶ï¼Œå›åˆ°é¢˜ç›®æœ€åä¸€å¥ï¼šâ€œè¦æ±‚çš„æ˜¯â€¦â€¦â€ã€‚<br>
æŠŠå®ƒç¿»è¯‘æˆå¯¹åº”çš„ dp çŠ¶æ€ã€‚</p>
</li>
</ul>
<hr>
<p>æ‰€ä»¥â€œæ¯æ¬¡è®¾å®š dp ç›®æ ‡ä¸æ¸…æ™°â€ï¼Œå…¶å®å°±æ˜¯<strong>ç¬¬ 2 æ­¥æ²¡å¯¹é½</strong>ã€‚<br>
è§£å†³æ–¹æ³•å°±æ˜¯ï¼š</p>
<ol>
<li>æ˜ç¡®çŠ¶æ€å®šä¹‰ï¼›</li>
<li>æ˜ç¡®æˆ‘è¦çš„ç­”æ¡ˆåœ¨å“ªä¸ªçŠ¶æ€é‡Œï¼›</li>
<li>å†æ¥å†™è½¬ç§»ã€‚</li>
</ol>
<hr>
<h3 id="å¡ç‰¹å…°æ•°">å¡ç‰¹å…°æ•°</h3>
<p>ç»å…¸æ ˆåºåˆ—ã€‚</p>
<ul>
<li>n ä¸ªå…ƒç´ å…¥æ ˆå‡ºæ ˆï¼Œæ¯ä¸€æ­¥åªèƒ½â€œå…¥â€æˆ–â€œå‡ºâ€ï¼Œä¸”å‡ºæ ˆæ•°ä»ä¸è¶…è¿‡å…¥æ ˆæ•°ï¼ˆå¦åˆ™æ ˆç©ºï¼‰ã€‚</li>
<li>è¿™ç­‰ä»·äºæ‹¬å·åºåˆ—æˆ– Dyck è·¯å¾„è®¡æ•°ï¼šåˆæ³•åºåˆ—æ•°é‡ = Câ‚™ã€‚</li>
</ul>
<p>ä¸‰ç§å¸¸ç”¨å…¬å¼</p>
<ol>
<li>
<p>é€’æ¨ï¼ˆDPï¼Œæœ€å¸¸è§ï¼Œä¹Ÿå°±æ˜¯ä½ ä»£ç é‡Œçš„å¼å­ï¼‰<br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mn>0</mn></msub><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mspace width="1em"/><msub><mi>C</mi><mi>n</mi></msub><mo>=</mo><msubsup><mo>âˆ‘</mo><mrow><mi>k</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow></msubsup><msub><mi>C</mi><mi>k</mi></msub><mtext>â€‰</mtext><msub><mi>C</mi><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn><mo>âˆ’</mo><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">C_0=1,\quad C_n=\sum_{k=0}^{n-1} C_k\,C_{n-1-k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:1em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.2537em;vertical-align:-0.2997em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.954em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span><span class="mbin mtight">âˆ’</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span></span></span></span><br>
æ—¶é—´ O(n^2)ã€‚</p>
</li>
<li>
<p>é—­å¼ï¼ˆç»„åˆæ•°ï¼‰<br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mi>n</mi></msub><mo>=</mo><mfrac><mn>1</mn><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></mfrac><mrow><mo fence="true">(</mo><mfrac linethickness="0px"><mrow><mn>2</mn><mi>n</mi></mrow><mi>n</mi></mfrac><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">C_n=\frac{1}{n+1}\binom{2n}{n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.2984em;vertical-align:-0.4033em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size1">(</span></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8951em;"><span style="top:-2.355em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.144em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size1">)</span></span></span></span></span></span><br>
é€‚åˆç”¨å¤§æ•´æ•°æˆ–é«˜ç²¾åº¦åº“ã€‚</p>
</li>
<li>
<p>çº¿æ€§é€’æ¨ï¼ˆä»å‰ä¸€é¡¹æ»šåŠ¨æ¨åä¸€é¡¹ï¼‰<br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>C</mi><mi>n</mi></msub><mo>â‹…</mo><mfrac><mrow><mn>4</mn><mi>n</mi><mo>+</mo><mn>2</mn></mrow><mrow><mi>n</mi><mo>+</mo><mn>2</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">C_{n+1}=C_n\cdot \frac{4n+2}{n+2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8917em;vertical-align:-0.2083em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.2484em;vertical-align:-0.4033em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><br>
æ¯æ­¥ä¸€æ¬¡ä¹˜é™¤ï¼Œæ³¨æ„æ•´é™¤æ— è¯¯å·®ï¼›å®ç°æ—¶æœ€å¥½ç”¨å¤§æ•´æ•°æˆ–å…ˆçº¦åˆ†ã€‚</p>
</li>
</ol>
<p>å°è¡¨ï¼ˆå‰å‡ é¡¹ï¼‰<br>
n: 1,2,3,4,5,6,7,8,9,10<br>
Câ‚™: 1,2,5,14,42,132,429,1430,4862,16796</p>
<p>æ•´å‹èŒƒå›´æç¤º<br>
â€¢	int æœ€å¤šåˆ° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2.1</mn><mo>Ã—</mo><msup><mn>10</mn><mn>9</mn></msup></mrow><annotation encoding="application/x-tex">2.1\times10^9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">2.1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">9</span></span></span></span></span></span></span></span></span></span></span>ï¼›Câ‚â‚‰=1,767,263,190 è¿˜å‹‰å¼ºèƒ½æ”¾ï¼ŒCâ‚‚â‚€=6,564,120,420 å°±æº¢å‡ºäº†ã€‚<br>
â€¢	long long å¯å®‰å…¨åˆ° n=35ï¼ˆCâ‚ƒâ‚…â‰ˆ3.116Ã—10Â¹â¸ &lt; 2â¶Â³âˆ’1ï¼‰ã€‚æ›´å¤§å°±è¦é«˜ç²¾åº¦ã€‚</p>
<hr>
<h2 id="äºŒç»´çŸ©é˜µ">äºŒç»´çŸ©é˜µ</h2>
<p>äºŒç»´çŸ©é˜µé¢˜ç»™äººçš„å‹è¿«æ„Ÿï¼Œå¾€å¾€ä¸åœ¨ä»£ç é‡ï¼Œè€Œåœ¨äºï¼š<br>
â€¢	åæ ‡ç³»çš„æ··ä¹±ï¼šåˆ°åº•æ˜¯ <code>a[x][y]</code> è¿˜æ˜¯<code> a[y][x]</code>ï¼Ÿä» 1 å¼€å§‹è¿˜æ˜¯ä» 0 å¼€å§‹ï¼Ÿ<br>
â€¢	éå†æ–¹å‘çš„å¤šæ ·ï¼šä¸Šä¸‹å·¦å³ã€æ–œå¯¹è§’ã€è·³é©¬æ­¥ï¼Œå®¹æ˜“æ¼æ‰æˆ–å†™é”™ã€‚<br>
â€¢	è¾¹ç•Œæ¡ä»¶çš„éº»çƒ¦ï¼šæ˜¯ä¸æ˜¯è¶Šç•Œï¼Ÿæ˜¯ä¸æ˜¯è®¿é—®è¿‡ï¼Ÿæ˜¯ä¸æ˜¯è¦å›æº¯ï¼Ÿ<br>
â€¢	å¯è§†åŒ–å›°éš¾ï¼šåœ¨è„‘å­é‡Œæƒ³â€œç‚¹å’Œç‚¹çš„å…³ç³»â€æ¯”ä¸€ç»´å¤æ‚å¾ˆå¤šã€‚</p>
<p>çœ‹åˆ°çŸ©é˜µé¢˜ä¼šå®³æ€•ï¼Œå…¶å®æ˜¯å¤§è„‘åœ¨æé†’ä½ â€œè¿™ç±»é¢˜ç»†èŠ‚å¤šã€å®¹æ˜“æ‰å‘â€ã€‚</p>
<hr>
<p>æ€ä¹ˆåŒ–è§£è¿™ç§â€œäºŒç»´ææƒ§ç—‡â€ï¼Ÿ</p>
<h3 id="æŠ€å·§">æŠ€å·§</h3>
<p>ä¸€äº›å¾ˆå®ç”¨çš„å°æŠ€å·§ï¼š</p>
<ol>
<li>å›ºå®šæ¨¡æ¿<br>
å…ˆå†™å¥½ä¸€ä¸ªæ–¹å‘æ•°ç»„ï¼Œæ¯”å¦‚èµ° 8 ä¸ªæ–¹å‘ï¼š</li>
</ol>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> dx<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> dy<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>æˆ–è€…åƒé©¬è·³çš„ 8 ä¸ªæ–¹å‘ï¼š</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> dx<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> dy<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>ä»¥ååªè¦ <code>for(int d=0;d&lt;8;d++)&#123; nx=x+dx[d]; ny=y+dy[d]; &#125;</code>ï¼Œå†åŠ è¾¹ç•Œåˆ¤æ–­ã€‚è¿™æ ·å°±ä¸ä¼šä¸€è¾¹æƒ³é¢˜ä¸€è¾¹è¿˜è¦å†™ä¹±ä¸ƒå…«ç³Ÿçš„ if/elseã€‚</p>
<ol start="2">
<li>è¾¹ç•Œåˆ¤æ–­å†™æˆå‡½æ•°</li>
</ol>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">bool</span> <span class="token function">inside</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span><span class="token keyword">int</span> y<span class="token punctuation">,</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> x<span class="token operator">>=</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> x<span class="token operator">&lt;=</span>n <span class="token operator">&amp;&amp;</span> y<span class="token operator">>=</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> y<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>è¿™æ ·æ¯”ç›´æ¥å†™æ¡ä»¶åˆ¤æ–­è¦æ¸…æ™°ã€å°‘ bugã€‚</p>
<ol start="3">
<li>
<p>å…ˆæ‰‹åŠ¨ç”»ä¸€å¼ å°å›¾<br>
æ¯”å¦‚ 3Ã—3ã€4Ã—4ï¼Œç”¨ç¬”ç”»å‡ºæ¥ï¼Œæ ‡è®° BFS çš„æ‰©å±•é¡ºåºï¼Œä½ ä¼šå‘ç°å¾ˆå¤šè§„å¾‹æ›´ç›´è§‚ã€‚</p>
</li>
<li>
<p>å°æ•°æ®å…ˆè·‘æš´åŠ›<br>
å…ˆå†™ BFS/DFS ç‰ˆæœ¬ï¼Œåœ¨ n=5,k=2 è¿™ç§å°èŒƒå›´è·‘å‡ºæ¥ï¼Œæ‰“å°è¿‡ç¨‹ï¼Œå¿ƒé‡Œå°±è¸å®å¤šäº†ã€‚</p>
</li>
</ol>
<hr>
<h3 id="å¿ƒæ€">å¿ƒæ€</h3>
<p>äºŒç»´çŸ©é˜µé¢˜ ä¸æ˜¯ DP çš„ä¸“åˆ©ï¼Œå®ƒå¯ä»¥æ˜¯ BFSï¼ˆå¯è¾¾æ€§ï¼‰ã€DFSï¼ˆè¿é€šå—ï¼‰ã€æ¨¡æ‹Ÿï¼ˆç¿»æ ¼å­ï¼‰ã€æ•°å­¦ï¼ˆå¯¹ç§°æ€§ï¼‰ã€‚ä½ å®³æ€•å…¶å®æ˜¯å› ä¸ºæ²¡æŠŠâ€œçŸ©é˜µâ€å½“ä½œæ™®é€šçš„å›¾ã€‚æŠŠçŸ©é˜µæƒ³æˆä¸€ä¸ªå›¾ï¼Œæ ¼å­æ˜¯èŠ‚ç‚¹ï¼Œå››å‘¨/å…«å‘¨/é©¬æ­¥æ˜¯è¾¹ï¼Œå…¶å®é—®é¢˜å°±æ¸…çˆ½äº†ã€‚</p>
<hr>

    </div>

    
    <div class="about">
        <h1>About this Post</h1>
        <div class="details">
            <p>This post is written by Moyuin, licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc/4.0">CC BY-NC 4.0</a>.</p>
        </div>
        
        <p class="tags text-capitalize">
            
            <i class="icon"></i>
            <a href="/tags/å­¦ä¹ /" class="tag">#å­¦ä¹ </a><a href="/tags/ç¼–ç¨‹/" class="tag">#ç¼–ç¨‹</a>
        </p>
        
    </div>
    

    <div class="container post-prev-next">
        
        <a href="/2025/08/25/xue-xi/ctf/hello-ctf-cong-0-kai-shi-de-php-fan-xu-lie-hua-ru-men-ba-chang-writeup/" class="next">
            <div>
                <div class="text">
                    <p class="label">Next</p>
                    <h3 class="title">Hello CTF ä» 0 å¼€å§‹çš„PHPååºåˆ—åŒ–å…¥é—¨é¶åœº</h3>
                </div>
            </div>
        </a>
        
        
        <a href="/2025/06/05/xue-xi/shu-xue/chi-san-shu-xue-zu-he-shu-xue/" class="prev">
            <div>
                <div class="text">
                    <p class="label">Previous</p>
                    <h3 class="title">ç¦»æ•£æ•°å­¦ - ç»„åˆæ•°å­¦</h3>
                </div>
            </div>
        </a>
        
    </div>

    <!-- âœ… æ›¿æ¢æˆ Twikoo è¯„è®º -->
    
    
    
</article>


        <footer>
    <div class="inner">
        <div class="links">
            
            <div class="group">
                <h2 class="title">Blog</h2>
                
                <a target="_blank" rel="noopener" href="https://blog.moyuin.top" class="item">Blog</a>
                
                <a href="/atom.xml" class="item">RSS</a>
                
            </div>
            
            <div class="group">
                <h2 class="title">Me</h2>
                
                <a target="_blank" rel="noopener" href="https://github.com/moyuin-aka" class="item">GitHub</a>
                
                <a target="_blank" rel="noopener" href="https://x.com/Moyuin1" class="item">Twitter</a>
                
                <a href="mailto:me@moyuin.top" class="item">Email</a>
                
            </div>
            
        </div>
        <span>&copy; 2025 Moyuin<br>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> </span>
        
        
            <br>
            <div class="color-scheme-toggle" role="radiogroup" id="theme-color-scheme-toggle">
                <label>
                    <input type="radio" value="light">
                    <span>Light</span>
                </label>
                <label>
                    <input type="radio" value="dark">
                    <span>Dark</span>
                </label>
                <label>
                    <input type="radio" value="auto">
                    <span>Auto</span>
                </label>
            </div>
        
    </div>
</footer>


        
<script src="/js/main.js"></script>

        
        
        

        
        <script src="https://unpkg.com/scrollreveal"></script>
        <script>
            window.addEventListener('load', () => {
                ScrollReveal({ delay: 250, reset: true, easing: 'cubic-bezier(0, 0, 0, 1)' })
                ScrollReveal().reveal('.post-list-item .cover-img img')
                ScrollReveal().reveal('.post-list-item, .card, .content p img, .content .block-large img', { distance: '60px', origin: 'bottom', duration: 800 })
            })
        </script>
        
    </body>
</html>